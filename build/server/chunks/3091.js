exports.id=3091,exports.ids=[3091],exports.modules={38362:(e,t,a)=>{let s={"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getSession),"576365f197acb2f10e29644ba43ca25aec52e8b7":()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getAuthenticatedUser),"055174a9ccd19bad29237b1c3a8c05cd527be07b":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.getSys),"088c57d60b5ed83f7dd0192c87404045099f271b":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.$$ACTION_0),"099e6b671d625a88f30c9806fa7bdac48e2a3710":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.$$ACTION_1),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.updateSys),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.$$ACTION_0),"580940ab09cedb0e060484c8b6a6463e9a81461a":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSitesWithoutConfidentialData),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSites),"783eb2f9264b34f18cf3044d2185e64f2f39333e":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSite),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.saveSites),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":()=>Promise.resolve().then(a.bind(a,66267)).then(e=>e.canAccessPage),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":()=>Promise.resolve().then(a.bind(a,66267)).then(e=>e.isAllowed),"112a744ae93bf04aba1a4250d687a325a73a55c1":()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.publishData),"294bf0d6332f28a618099d7c02669de60070f8a2":()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.$$ACTION_1),"2995d4697010486034183adc4a3028bfd106123b":()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.discardDrafts),"354f249d3682e1a7ac814300889c8b929172be69":()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.getEditorDetails),"3af78304ef3b80b391189cdb5be758ed14bb9be7":()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.countAllDrafts),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.$$ACTION_0),afc9c4d3ed7201152607116aa5f72d4579144ffc:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.revalidatePath)};async function d(e,...t){return(await s[e]()).apply(null,t)}e.exports={"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":d.bind(null,"103d82a5a607c9f7f049ac9bfe2bb62dc7128462"),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":d.bind(null,"3054c9aa3ede38673855ee3dff9f25ad492b7d73"),"576365f197acb2f10e29644ba43ca25aec52e8b7":d.bind(null,"576365f197acb2f10e29644ba43ca25aec52e8b7"),"055174a9ccd19bad29237b1c3a8c05cd527be07b":d.bind(null,"055174a9ccd19bad29237b1c3a8c05cd527be07b"),"088c57d60b5ed83f7dd0192c87404045099f271b":d.bind(null,"088c57d60b5ed83f7dd0192c87404045099f271b"),"099e6b671d625a88f30c9806fa7bdac48e2a3710":d.bind(null,"099e6b671d625a88f30c9806fa7bdac48e2a3710"),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":d.bind(null,"0c0d564b6e8549cd52e9489443ca8f11eb739d52"),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":d.bind(null,"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6"),"580940ab09cedb0e060484c8b6a6463e9a81461a":d.bind(null,"580940ab09cedb0e060484c8b6a6463e9a81461a"),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":d.bind(null,"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435"),"783eb2f9264b34f18cf3044d2185e64f2f39333e":d.bind(null,"783eb2f9264b34f18cf3044d2185e64f2f39333e"),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":d.bind(null,"8e6d2d1bfc206d2044ed01620bfa151c6fd87125"),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":d.bind(null,"8d3a0534ac3ddb0c44a91b766b2183165c62dbed"),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":d.bind(null,"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c"),"112a744ae93bf04aba1a4250d687a325a73a55c1":d.bind(null,"112a744ae93bf04aba1a4250d687a325a73a55c1"),"294bf0d6332f28a618099d7c02669de60070f8a2":d.bind(null,"294bf0d6332f28a618099d7c02669de60070f8a2"),"2995d4697010486034183adc4a3028bfd106123b":d.bind(null,"2995d4697010486034183adc4a3028bfd106123b"),"354f249d3682e1a7ac814300889c8b929172be69":d.bind(null,"354f249d3682e1a7ac814300889c8b929172be69"),"3af78304ef3b80b391189cdb5be758ed14bb9be7":d.bind(null,"3af78304ef3b80b391189cdb5be758ed14bb9be7"),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:d.bind(null,"ac5d4de4d5312ee7fa1967d05ccea3edfbd18033"),afc9c4d3ed7201152607116aa5f72d4579144ffc:d.bind(null,"afc9c4d3ed7201152607116aa5f72d4579144ffc")}},28967:(e,t,a)=>{Promise.resolve().then(a.bind(a,48070))},35303:()=>{},48070:(e,t,a)=>{"use strict";a.d(t,{Content:()=>eg});var s=a(10326),d=a(33071),l=a(11870),i=a(90772),n=a(17577),r=a(44099),o=a(941),c=a(2165),f=a(25479),u=a(1095),p=a(85121),m=a(81193),h=a(93931),g=a(11426),_=a(23051),y=a(41872),N=a(36304),b=a(29606),x=a(6263),I=a(47463),j=a(68452),v=a(43360);let w=(0,j.Tr)({dataType:()=>"bytea"}),L=(0,v.ys)("mailer_service",["gmail","smtp"]),D=(0,v.ys)("role_name",["user","admin","super_user"]),A=(0,v.ys)("site_type",["nodeapi","webeditor"]),k=(0,v.ys)("site_env",["production","stage","development","demo"]),B=(0,v.ys)("script_type",["admission","discharge","neolab"]),K=(0,v.ys)("screen_type",["diagnosis","checklist","form","management","multi_select","single_select","progress","timer","yesno","zw_edliz_summary_table","mwi_edliz_summary_table","edliz_summary_table"]);var V=a(58464);(0,p.af)("nt_mailer_settings",{id:(0,m.eP)("id").primaryKey(),settingId:(0,h.Vj)("setting_id").notNull().unique().defaultRandom(),name:(0,g.fL)("name").notNull().unique(),service:L("service").notNull(),authUsername:(0,g.fL)("auth_username").notNull(),authPassword:(0,g.fL)("auth_password").notNull(),authType:(0,g.fL)("auth_type"),authMethod:(0,g.fL)("auth_method"),host:(0,g.fL)("host").notNull().default(""),port:(0,_._L)("port"),encryption:(0,g.fL)("encryption").notNull().default(""),fromAddress:(0,g.fL)("from_address").notNull().default(""),fromName:(0,g.fL)("from_name").notNull().default(""),isActive:(0,y.O7)("is_active").default(!1).notNull(),secure:(0,y.O7)("secure").default(!1).notNull()}),(0,p.af)("nt_email_templates",{id:(0,m.eP)("id").primaryKey(),templateId:(0,h.Vj)("template_id").notNull().unique().defaultRandom(),name:(0,g.fL)("name").notNull().unique(),data:(0,N.JB)("data").notNull()}),(0,p.af)("nt_sys",{_id:(0,m.eP)("_id").primaryKey(),id:(0,h.Vj)("id").notNull().unique().defaultRandom(),key:(0,g.fL)("key").notNull().unique(),value:(0,g.fL)("value").notNull()});let $=(0,p.af)("nt_tokens",{id:(0,m.eP)("id").primaryKey(),token:(0,_._L)("token").notNull().unique(),userId:(0,h.Vj)("user_id").references(()=>P.userId,{onDelete:"cascade"}),validUntil:(0,b.AB)("valid_until").notNull()});(0,f.lE)($,({one:e})=>({user:e(P,{fields:[$.userId],references:[P.userId]})}));let S=(0,p.af)("nt_user_roles",{id:(0,m.eP)("id").primaryKey(),name:D("name").notNull().unique(),description:(0,g.fL)("description")});(0,f.lE)(S,({many:e})=>({users:e(P)})),(0,p.af)("nt_languages",{id:(0,m.eP)("id").primaryKey(),name:(0,g.fL)("name").notNull().unique(),iso:(0,g.fL)("iso").notNull().unique(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")});let P=(0,p.af)("nt_users",{id:(0,m.eP)("id").primaryKey(),userId:(0,h.Vj)("user_id").notNull().unique().defaultRandom(),role:D("role").references(()=>S.name,{onDelete:"cascade"}).default("user").notNull(),email:(0,g.fL)("email").notNull().unique(),password:(0,g.fL)("password").notNull(),displayName:(0,g.fL)("display_name").notNull(),firstName:(0,g.fL)("first_name"),lastName:(0,g.fL)("last_name"),avatar:(0,g.fL)("avatar"),avatar_sm:(0,g.fL)("avatar_sm"),avatar_md:(0,g.fL)("avatar_md"),activationDate:(0,b.AB)("activation_date"),lastLoginDate:(0,b.AB)("last_login_date"),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("users_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.email}) ||
                    to_tsvector('english', ${e.displayName}) ||
                    to_tsvector('english', ${e.firstName}) ||
                    to_tsvector('english', ${e.lastName})
                )`)}));(0,f.lE)(P,({many:e,one:t})=>({authTokens:e(T),tokens:e($),files:e(C),role:t(S,{fields:[P.role],references:[S.name]})}));let T=(0,p.af)("nt_auth_clients",{id:(0,m.eP)("id").primaryKey(),clientId:(0,h.Vj)("client_id").notNull().unique().defaultRandom(),clientToken:(0,g.fL)("client_token").notNull().unique(),userId:(0,h.Vj)("user_id").references(()=>P.userId,{onDelete:"cascade"}),validUntil:(0,b.AB)("valid_until"),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(T,({one:e})=>({user:e(P,{fields:[T.userId],references:[P.userId]})})),(0,p.af)("nt_api_keys",{id:(0,m.eP)("id").primaryKey(),apiKeyId:(0,h.Vj)("api_key_id").notNull().unique().defaultRandom(),apiKey:(0,g.fL)("api_key").notNull().unique().$defaultFn(()=>(0,I.Z)()),validUntil:(0,b.AB)("valid_until"),createdAt:(0,b.AB)("created_at").defaultNow().notNull()}),(0,p.af)("nt_sites",{id:(0,m.eP)("id").primaryKey(),siteId:(0,h.Vj)("site_id").notNull().unique().defaultRandom(),name:(0,g.fL)("name").notNull().unique(),link:(0,g.fL)("link").notNull().unique(),apiKey:(0,g.fL)("api_key").notNull(),type:A("type").notNull(),env:k("env").notNull().default("production"),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")});let R=(0,p.af)("nt_hospitals",{id:(0,m.eP)("id").primaryKey(),hospitalId:(0,h.Vj)("hospital_id").notNull().unique().defaultRandom(),oldHospitalId:(0,g.fL)("old_hospital_id").unique(),name:(0,g.fL)("name").notNull().unique(),country:(0,g.fL)("country").default(""),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("hospitals_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.name})
                )`)}));(0,p.af)("nt_editor_info",{id:(0,m.eP)("id").primaryKey(),dataVersion:(0,_._L)("data_version").notNull().default(1),lastPublishDate:(0,b.AB)("last_publish_date")}),(0,p.af)("nt_devices",{id:(0,m.eP)("id").primaryKey(),deviceId:(0,g.fL)("device_id").notNull().unique(),deviceHash:(0,g.fL)("device_hash").notNull().unique(),details:(0,N.JB)("details").default({}),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")});let C=(0,p.af)("nt_files",{id:(0,m.eP)("id").primaryKey(),fileId:(0,h.Vj)("file_id").notNull().unique().defaultRandom(),ownerId:(0,h.Vj)("owner_id").references(()=>P.userId,{onDelete:"cascade"}),filename:(0,g.fL)("filename").notNull(),contentType:(0,g.fL)("content_type").notNull(),size:(0,_._L)("size").notNull(),metadata:(0,N.JB)("metadata").default("{}").notNull(),data:w("data").notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")});(0,f.lE)(C,({many:e,one:t})=>({owner:t(P,{fields:[C.ownerId],references:[P.userId]})})),(0,p.af)("nt_files_chunks",{id:(0,m.eP)("id").primaryKey(),chunkId:(0,h.Vj)("chunk_id").notNull().unique().defaultRandom(),fileId:(0,h.Vj)("file_id").references(()=>C.fileId,{onDelete:"cascade"}).notNull(),data:w("data").notNull()});let O=(0,p.af)("nt_config_keys",{id:(0,m.eP)("id").primaryKey(),configKeyId:(0,h.Vj)("config_key_id").notNull().unique().defaultRandom(),oldConfigKeyId:(0,g.fL)("old_config_key_id").unique(),position:(0,_._L)("position").notNull(),version:(0,_._L)("version").notNull(),key:(0,g.fL)("key").notNull().unique(),label:(0,g.fL)("label").notNull().unique(),summary:(0,g.fL)("summary").notNull(),source:(0,g.fL)("source").default("editor"),preferences:(0,N.JB)("preferences").default(JSON.stringify(V.$7)).notNull(),publishDate:(0,b.AB)("publish_date").defaultNow().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("config_keys_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.key}) ||
                    to_tsvector('english', ${e.label}) ||
                    to_tsvector('english', ${e.summary})
                )`)}));(0,f.lE)(O,({many:e,one:t})=>({history:e(E),draft:t(q,{fields:[O.configKeyId],references:[q.configKeyId]})}));let q=(0,p.af)("nt_config_keys_drafts",{id:(0,m.eP)("id").primaryKey(),configKeyDraftId:(0,h.Vj)("config_key_draft_id").notNull().unique().defaultRandom(),configKeyId:(0,h.Vj)("config_key_id").references(()=>O.configKeyId,{onDelete:"cascade"}),position:(0,_._L)("position").notNull(),data:(0,N.JB)("data").$type().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,f.lE)(q,({one:e})=>({configKey:e(O,{fields:[q.configKeyId],references:[O.configKeyId]})}));let E=(0,p.af)("nt_config_keys_history",{id:(0,m.eP)("id").primaryKey(),version:(0,_._L)("version").notNull(),configKeyId:(0,h.Vj)("config_key_id").references(()=>O.configKeyId,{onDelete:"cascade"}).notNull(),restoreKey:(0,h.Vj)("restore_key"),changes:(0,N.JB)("data").default([]),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(E,({one:e})=>({configKey:e(O,{fields:[E.configKeyId],references:[O.configKeyId]})}));let J=(0,p.af)("nt_scripts",{id:(0,m.eP)("id").primaryKey(),scriptId:(0,h.Vj)("script_id").notNull().unique().defaultRandom(),oldScriptId:(0,g.fL)("old_script_id").unique(),version:(0,_._L)("version").notNull(),type:B("type").notNull().default("admission"),position:(0,_._L)("position").notNull(),source:(0,g.fL)("source").default("editor"),title:(0,g.fL)("title").notNull(),printTitle:(0,g.fL)("print_title").notNull(),description:(0,g.fL)("description").notNull().default(""),hospitalId:(0,h.Vj)("hospital_id").references(()=>R.hospitalId,{onDelete:"cascade"}),exportable:(0,y.O7)("exportable").notNull().default(!0),nuidSearchEnabled:(0,y.O7)("nuid_search_enabled").notNull().default(!1),nuidSearchFields:(0,N.JB)("nuid_search_fields").default("[]").notNull(),preferences:(0,N.JB)("preferences").default(JSON.stringify(V.$7)).notNull(),printSections:(0,N.JB)("print_sections").default("[]").notNull(),publishDate:(0,b.AB)("publish_date").defaultNow().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("scripts_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.title}) ||
                    to_tsvector('english', ${e.description})
                )`)}));(0,f.lE)(J,({many:e,one:t})=>({screens:e(F),screensDrafts:e(U),screensHistory:e(W),diagnoses:e(M),diagnosesDrafts:e(H),diagnosesHistory:e(Y),history:e(z),drugsLibrary:e(X),draft:t(Z,{fields:[J.scriptId],references:[Z.scriptId]})}));let Z=(0,p.af)("nt_scripts_drafts",{id:(0,m.eP)("id").primaryKey(),scriptDraftId:(0,h.Vj)("script_draft_id").notNull().unique().defaultRandom(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}),position:(0,_._L)("position").notNull(),hospitalId:(0,h.Vj)("hospital_id").references(()=>R.hospitalId,{onDelete:"cascade"}),data:(0,N.JB)("data").$type().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,f.lE)(Z,({one:e,many:t})=>({screensDrafts:t(U),diagnosesDrafts:t(H),script:e(J,{fields:[Z.scriptId],references:[J.scriptId]})}));let z=(0,p.af)("nt_scripts_history",{id:(0,m.eP)("id").primaryKey(),version:(0,_._L)("version").notNull(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,h.Vj)("restore_key"),changes:(0,N.JB)("data").default([]),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(z,({one:e})=>({script:e(J,{fields:[z.scriptId],references:[J.scriptId]})}));let F=(0,p.af)("nt_screens",{id:(0,m.eP)("id").primaryKey(),screenId:(0,h.Vj)("screen_id").notNull().unique().defaultRandom(),oldScreenId:(0,g.fL)("old_screen_id").unique(),oldScriptId:(0,g.fL)("old_script_id"),version:(0,_._L)("version").notNull(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}).notNull(),type:K("type").notNull(),position:(0,_._L)("position").notNull(),source:(0,g.fL)("source").default("editor"),sectionTitle:(0,g.fL)("section_title").notNull(),previewTitle:(0,g.fL)("preview_title").notNull().default(""),previewPrintTitle:(0,g.fL)("preview_print_title").notNull().default(""),condition:(0,g.fL)("condition").notNull().default(""),skipToCondition:(0,g.fL)("skip_to_condition").notNull().default(""),skipToScreenId:(0,g.fL)("skip_to_screen_id"),epicId:(0,g.fL)("epic_id").notNull().default(""),storyId:(0,g.fL)("story_id").notNull().default(""),refId:(0,g.fL)("ref_id").notNull().default(""),refKey:(0,g.fL)("ref_key").notNull().default(""),step:(0,g.fL)("step").notNull().default(""),actionText:(0,g.fL)("action_text").notNull().default(""),contentText:(0,g.fL)("content_text").notNull().default(""),infoText:(0,g.fL)("info_text").notNull().default(""),title:(0,g.fL)("title").notNull(),title1:(0,g.fL)("title1").notNull().default(""),title2:(0,g.fL)("title2").notNull().default(""),title3:(0,g.fL)("title3").notNull().default(""),title4:(0,g.fL)("title4").notNull().default(""),text1:(0,g.fL)("text1").notNull().default(""),text2:(0,g.fL)("text2").notNull().default(""),text3:(0,g.fL)("text3").notNull().default(""),image1:(0,N.JB)("image1"),image2:(0,N.JB)("image2"),image3:(0,N.JB)("image3"),instructions:(0,g.fL)("instructions").notNull().default(""),instructions2:(0,g.fL)("instructions2").notNull().default(""),instructions3:(0,g.fL)("instructions3").notNull().default(""),instructions4:(0,g.fL)("instructions4").notNull().default(""),hcwDiagnosesInstructions:(0,g.fL)("hcw_diagnoses_instructions").notNull().default(""),suggestedDiagnosesInstructions:(0,g.fL)("suggested_diagnoses_instructions").notNull().default(""),notes:(0,g.fL)("notes").notNull().default(""),dataType:(0,g.fL)("data_type").notNull().default(""),key:(0,g.fL)("key").notNull().default(""),label:(0,g.fL)("label").notNull().default(""),negativeLabel:(0,g.fL)("negative_label").notNull().default(""),positiveLabel:(0,g.fL)("positive_label").notNull().default(""),timerValue:(0,_._L)("timer_value"),multiplier:(0,_._L)("multiplier"),minValue:(0,_._L)("min_value"),maxValue:(0,_._L)("max_value"),exportable:(0,y.O7)("exportable").notNull().default(!0),printable:(0,y.O7)("printable"),skippable:(0,y.O7)("skippable").notNull().default(!1),confidential:(0,y.O7)("confidential").notNull().default(!1),prePopulate:(0,N.JB)("pre_populate").default("[]").notNull(),fields:(0,N.JB)("fields").default("[]").notNull(),items:(0,N.JB)("items").default("[]").notNull(),preferences:(0,N.JB)("preferences").default(JSON.stringify(V.$7)).notNull(),publishDate:(0,b.AB)("publish_date").defaultNow().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("screens_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.title})
                )`)}));(0,f.lE)(F,({many:e,one:t})=>({history:e(W),script:t(J,{fields:[F.scriptId],references:[J.scriptId]}),draft:t(U,{fields:[F.screenId],references:[U.screenId]})}));let U=(0,p.af)("nt_screens_drafts",{id:(0,m.eP)("id").primaryKey(),screenDraftId:(0,h.Vj)("screen_draft_id").notNull().unique().defaultRandom(),screenId:(0,h.Vj)("screen_id").references(()=>F.screenId,{onDelete:"cascade"}),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,h.Vj)("script_draft_id").references(()=>Z.scriptDraftId,{onDelete:"cascade"}),type:K("type").notNull(),position:(0,_._L)("position").notNull(),data:(0,N.JB)("data").$type().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,f.lE)(U,({one:e})=>({screen:e(F,{fields:[U.screenId],references:[F.screenId]}),scriptDraft:e(Z,{fields:[U.scriptDraftId],references:[Z.scriptDraftId]}),script:e(J,{fields:[U.scriptId],references:[J.scriptId]})}));let W=(0,p.af)("nt_screens_history",{id:(0,m.eP)("id").primaryKey(),version:(0,_._L)("version").notNull(),screenId:(0,h.Vj)("screen_id").references(()=>F.screenId,{onDelete:"cascade"}).notNull(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,g.fL)("restore_key"),changes:(0,N.JB)("data").default([]),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(W,({one:e})=>({screen:e(F,{fields:[W.screenId],references:[F.screenId]}),script:e(J,{fields:[W.scriptId],references:[J.scriptId]})}));let M=(0,p.af)("nt_diagnoses",{id:(0,m.eP)("id").primaryKey(),diagnosisId:(0,h.Vj)("diagnosis_id").notNull().unique().defaultRandom(),oldDiagnosisId:(0,g.fL)("old_diagnosis_id").unique(),oldScriptId:(0,g.fL)("old_script_id"),version:(0,_._L)("version").notNull(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}).notNull(),position:(0,_._L)("position").notNull(),source:(0,g.fL)("source").default("editor"),expression:(0,g.fL)("expression").notNull(),name:(0,g.fL)("name").notNull().default(""),description:(0,g.fL)("description").notNull().default(""),key:(0,g.fL)("key").default(""),severityOrder:(0,_._L)("severity_order"),expressionMeaning:(0,g.fL)("expression_meaning").notNull().default(""),symptoms:(0,N.JB)("symptoms").default("[]").notNull(),text1:(0,g.fL)("text1").notNull().default(""),text2:(0,g.fL)("text2").notNull().default(""),text3:(0,g.fL)("text3").notNull().default(""),image1:(0,N.JB)("image1"),image2:(0,N.JB)("image2"),image3:(0,N.JB)("image3"),preferences:(0,N.JB)("preferences").default(JSON.stringify(V.$7)).notNull(),publishDate:(0,b.AB)("publish_date").defaultNow().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,b.AB)("deleted_at")},e=>({searchIndex:(0,x.Kz)("diagnoses_search_index").using("gin",(0,u.i6)`(
                    to_tsvector('english', ${e.name})
                )`)}));(0,f.lE)(M,({many:e,one:t})=>({history:e(Y),script:t(J,{fields:[M.scriptId],references:[J.scriptId]}),draft:t(H,{fields:[M.diagnosisId],references:[H.diagnosisId]})}));let H=(0,p.af)("nt_diagnoses_drafts",{id:(0,m.eP)("id").primaryKey(),diagnosisDraftId:(0,h.Vj)("diagnosis_draft_id").notNull().unique().defaultRandom(),diagnosisId:(0,h.Vj)("diagnosis_id").references(()=>M.diagnosisId,{onDelete:"cascade"}),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,h.Vj)("script_draft_id").references(()=>Z.scriptDraftId,{onDelete:"cascade"}),position:(0,_._L)("position").notNull(),data:(0,N.JB)("data").$type().notNull(),createdAt:(0,b.AB)("created_at").defaultNow().notNull(),updatedAt:(0,b.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,f.lE)(H,({one:e})=>({diagnosis:e(M,{fields:[H.diagnosisId],references:[M.diagnosisId]}),scriptDraft:e(Z,{fields:[H.scriptDraftId],references:[Z.scriptDraftId]}),script:e(J,{fields:[H.scriptId],references:[J.scriptId]})}));let Y=(0,p.af)("nt_diagnoses_history",{id:(0,m.eP)("id").primaryKey(),version:(0,_._L)("version").notNull(),diagnosisId:(0,h.Vj)("diagnosis_id").references(()=>M.diagnosisId,{onDelete:"cascade"}).notNull(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,g.fL)("restore_key"),changes:(0,N.JB)("data").default([]),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(Y,({one:e})=>({diagnosis:e(M,{fields:[Y.diagnosisId],references:[M.diagnosisId]}),script:e(J,{fields:[Y.scriptId],references:[J.scriptId]})}));let G=(0,p.af)("nt_pending_deletion",{id:(0,m.eP)("id").primaryKey(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}),screenId:(0,h.Vj)("screen_id").references(()=>F.screenId,{onDelete:"cascade"}),screenScriptId:(0,h.Vj)("screen_script_id").references(()=>J.scriptId,{onDelete:"cascade"}),diagnosisId:(0,h.Vj)("diagnosis_id").references(()=>M.diagnosisId,{onDelete:"cascade"}),diagnosisScriptId:(0,h.Vj)("diagnosis_script_id").references(()=>J.scriptId,{onDelete:"cascade"}),configKeyId:(0,h.Vj)("config_key_id").references(()=>O.configKeyId,{onDelete:"cascade"}),scriptDraftId:(0,h.Vj)("script_draft_id").references(()=>Z.scriptDraftId,{onDelete:"cascade"}),screenDraftId:(0,h.Vj)("screen_draft_id").references(()=>U.screenDraftId,{onDelete:"cascade"}),diagnosisDraftId:(0,h.Vj)("diagnosis_draft_id").references(()=>H.diagnosisDraftId,{onDelete:"cascade"}),configKeyDraftId:(0,h.Vj)("config_key_draft_id").references(()=>q.configKeyDraftId,{onDelete:"cascade"}),createdAt:(0,b.AB)("created_at").defaultNow().notNull()});(0,f.lE)(G,({one:e})=>({script:e(J,{fields:[G.scriptId],references:[J.scriptId]}),screen:e(F,{fields:[G.screenId],references:[F.screenId]}),screenScript:e(J,{fields:[G.screenScriptId],references:[J.scriptId]}),diagnosis:e(M,{fields:[G.diagnosisId],references:[M.diagnosisId]}),diagnosisScript:e(J,{fields:[G.diagnosisScriptId],references:[J.scriptId]}),configKey:e(O,{fields:[G.configKeyId],references:[O.configKeyId]}),scriptDraft:e(Z,{fields:[G.scriptId],references:[Z.scriptDraftId]}),screenDraft:e(U,{fields:[G.screenId],references:[U.screenDraftId]}),diagnosisDraft:e(H,{fields:[G.diagnosisId],references:[H.diagnosisDraftId]}),configKeyDraft:e(q,{fields:[G.configKeyId],references:[q.configKeyDraftId]})}));let X=(0,p.af)("nt_drugs_library",{id:(0,m.eP)("id").primaryKey(),itemId:(0,h.Vj)("item_id").notNull().unique().defaultRandom(),scriptId:(0,h.Vj)("script_id").references(()=>J.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,h.Vj)("script_draft_id").references(()=>Z.scriptDraftId,{onDelete:"cascade"}),drug:(0,g.fL)("drug").notNull().default(""),minGestation:(0,_._L)("min_gestation"),maxGestation:(0,_._L)("max_gestation"),minWeight:(0,_._L)("min_weight"),maxWeight:(0,_._L)("max_weight"),dayOfLife:(0,g.fL)("day_of_life").notNull().default(""),dosageText:(0,g.fL)("dosage_text").notNull().default(""),managementText:(0,g.fL)("management_text").notNull().default(""),gestationKey:(0,g.fL)("gestation_key").notNull().default(""),weightKey:(0,g.fL)("weight_key").notNull().default("")});(0,f.lE)(X,({one:e})=>({script:e(J,{fields:[X.scriptId],references:[J.scriptId]})})),D.enumValues;let Q=B.enumValues,ee=K.enumValues;var et=a(60097),ea=a(31048),es=a(53313);function ed({filters:e,setFilters:t}){let[a,d]=(0,c.Z)();return s.jsx("div",{ref:a,children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[s.jsx("div",{children:(0,s.jsxs)(et.h_,{children:[s.jsx(et.$F,{asChild:!0,children:(0,s.jsxs)(i.z,{disabled:!0,variant:"outline",className:"w-full",children:[e.scriptsTypes.length?e.scriptsTypes.length>1?`${e.scriptsTypes.length} script types`:e.scriptsTypes[0]:"Select script types",s.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,s.jsxs)(et.AW,{className:"max-h-[400px] overflow-y-auto",style:{width:d.width},children:[s.jsx(et.Ju,{children:"Script types"}),s.jsx(et.VD,{}),s.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:Q.map(a=>{let d=e.scriptsTypes.includes(a);return s.jsx(et.bO,{checked:d,onCheckedChange:()=>{t(e=>({scriptsTypes:d?e.scriptsTypes.filter(e=>e!==a):[...e.scriptsTypes,a]}))},children:s.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},a)})})]})]})}),s.jsx("div",{children:(0,s.jsxs)(et.h_,{children:[s.jsx(et.$F,{asChild:!0,children:(0,s.jsxs)(i.z,{disabled:!0,variant:"outline",className:"w-full",children:[e.screensTypes.length?e.screensTypes.length>1?`${e.screensTypes.length} screen types`:e.screensTypes[0]:"Select screen types",s.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,s.jsxs)(et.AW,{className:"max-h-[400px] overflow-y-auto",style:{width:d.width},children:[s.jsx(et.Ju,{children:"Screen types"}),s.jsx(et.VD,{}),s.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:ee.map(a=>{let d=e.screensTypes.includes(a);return s.jsx(et.bO,{checked:d,onCheckedChange:()=>{t(e=>({screensTypes:d?e.screensTypes.filter(e=>e!==a):[...e.screensTypes,a]}))},children:s.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},a)})})]})]})}),s.jsx("div",{children:(0,s.jsxs)(ea._,{htmlFor:"withImagesOnly",className:"flex items-center",children:[s.jsx(es.X,{id:"withImagesOnly",checked:e.withImagesOnly,onCheckedChange:()=>t({withImagesOnly:!e.withImagesOnly})}),"\xa0 With images only"]})})]})})}var el=a(7027),ei=a(90434),en=a(9162),er=a(77863),eo=a(71708),ec=a(41137),ef=a(7890);let eu=e=>`${e||""}`.charAt(0).toUpperCase()+`${e||""}`.slice(1);function ep({children:e,...t}){let{dataType:a,loadData:d}=t;return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"h-[60px]"}),(0,s.jsxs)("div",{className:" h-[60px] border-b fixed top-0 left-0 w-full px-4 flex items-center bg-white z-10 gap-x-4 ",children:[s.jsx("div",{className:"text-xl",children:eu(a)}),s.jsx("div",{className:"ml-auto"}),e,(0,s.jsxs)(ef.yo,{children:[s.jsx(ef.aM,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",children:[s.jsx(ec.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})}),(0,s.jsxs)(ef.ue,{className:"p-0 flex flex-col",children:[(0,s.jsxs)(ef.Tu,{className:"p-4",children:[(0,s.jsxs)(ef.bC,{children:["Filter ",a]}),s.jsx(ef.Ei,{children:""})]}),s.jsx("div",{className:"flex-1 px-4 overflow-y-auto",children:s.jsx(ed,{...t})}),s.jsx(ef.FF,{className:"p-4 border-t",children:s.jsx(ef.sw,{asChild:!0,children:(0,s.jsxs)(i.z,{className:"w-full mt-6",onClick:()=>d(),children:["Load ",t.dataType]})})})]})]})]})]})}function em(e){let{screens:t,screensColumns:a,setScreensColumns:d}=e,l=(0,n.useMemo)(()=>Object.keys({...t.data[0]}).map(e=>e),[t.data[0]]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(ep,{...e,children:(0,s.jsxs)(et.h_,{children:[s.jsx(et.$F,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",children:["Columns",s.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,s.jsxs)(et.AW,{className:"max-h-[400px]",children:[s.jsx(et.Ju,{children:"Screens"}),s.jsx(et.VD,{}),s.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:l.map(e=>{let t=a.includes(e);return s.jsx(et.bO,{checked:t,onCheckedChange:()=>{d(a=>t?a.filter(t=>t!==e):[...a,e])},children:e},e)})})]})]})}),s.jsx(en.DataTable,{columns:[{name:"Screen",cellClassName:"w-10",cellRenderer:({value:e})=>s.jsx(ei.default,{target:"_blank",href:`${e}`,children:s.jsx(el.Z,{className:"text-primary w-4 h-4"})})},...l.map(e=>({name:e,cellClassName:(0,er.cn)("truncate max-w-[200px]",!a.includes(e)&&"hidden"),cellRenderer({value:a,rowIndex:d}){let l=t.data[d],i=null;return("image1"===e&&(i=l.image1),"image2"===e&&(i=l.image2),"image3"===e&&(i=l.image3),i)?s.jsx("div",{className:"w-10 h-10",children:s.jsx(eo.E,{alt:l.screenId,src:i.data})}):"scriptTitle"===e?(0,s.jsxs)(ei.default,{target:"_blank",href:`/script/${l.scriptId}`,className:"flex items-center text-primary",children:[s.jsx(el.Z,{className:"text-gray-400 w-4 h-4"}),"\xa0",a]}):a}}))],data:t.data.map(e=>[`/script/${e.scriptId}/screen/${e.screenId}`,...l.map(t=>{let a=e[t];return null!==a&&"object"==typeof a?typeof a:`${a}`})])})]})}function eh(e){let{diagnoses:t,diagnosesColumns:a,setDiagnosesColumns:d}=e,l=(0,n.useMemo)(()=>Object.keys({...t.data[0]}).map(e=>e),[t.data[0]]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(ep,{...e,children:(0,s.jsxs)(et.h_,{children:[s.jsx(et.$F,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",children:["Columns",s.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,s.jsxs)(et.AW,{className:"max-h-[400px]",children:[s.jsx(et.Ju,{children:"Diagnoses"}),s.jsx(et.VD,{}),s.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:l.map(e=>{let t=a.includes(e);return s.jsx(et.bO,{checked:t,onCheckedChange:()=>{d(a=>t?a.filter(t=>t!==e):[...a,e])},children:e},e)})})]})]})}),s.jsx(en.DataTable,{columns:[{name:"Screen",cellClassName:"w-10",cellRenderer:({value:e})=>s.jsx(ei.default,{target:"_blank",href:`${e}`,children:s.jsx(el.Z,{className:"text-primary w-4 h-4"})})},...l.map(e=>({name:e,cellClassName:(0,er.cn)("truncate max-w-[200px]",!a.includes(e)&&"hidden"),cellRenderer({value:a,rowIndex:d}){let l=t.data[d],i=null;return("image1"===e&&(i=l.image1),"image2"===e&&(i=l.image2),"image3"===e&&(i=l.image3),"scriptTitle"===e)?(0,s.jsxs)(ei.default,{target:"_blank",href:`/script/${l.scriptId}`,className:"flex items-center text-primary",children:[s.jsx(el.Z,{className:"text-gray-400 w-4 h-4"}),"\xa0",a]}):i?s.jsx("div",{className:"w-10 h-10",children:s.jsx(eo.E,{alt:l.diagnosisId,src:i.data})}):a}}))],data:t.data.map(e=>[`/script/${e.scriptId}/diagnosis/${e.diagnosisId}`,...l.map(t=>{let a=e[t];return null!==a&&"object"==typeof a?typeof a:`${a}`})])})]})}function eg(e){let t=function(e){let[t,a]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1),[l,i]=(0,n.useState)({data:[]}),[o,c]=(0,n.useState)(["title"]),[f,u]=(0,n.useState)({data:[]}),[p,m]=(0,n.useState)(["title","image1","image2","image3","scriptTitle","hospitalName"]),[h,g]=(0,n.useState)({data:[]}),[_,y]=(0,n.useState)(["name","image1","image2","image3","scriptTitle","hospitalName"]),[N,b]=(0,n.useState)({screensIds:[],diagnosesIds:[],hospitalsIds:[],scriptsIds:[],screensTypes:[],scriptsTypes:[],withImagesOnly:!0,draftsOnly:!1}),[x,I]=(0,n.useState)(N),j=(0,n.useCallback)(e=>b(t=>({...t,..."function"==typeof e?e(t):e})),[]),v=(0,n.useMemo)(()=>!t||JSON.stringify(N)!==JSON.stringify(x),[N,x,t]),w=(0,n.useCallback)(async()=>{try{d(!0);let e={hospitalIds:N.hospitalsIds,returnDraftsIfExist:!0,scriptsIds:N.scriptsIds,withDeleted:!1},{errors:t,data:s}=(await r.Z.get(`/api/scripts?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));i({data:s}),I(N),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[N]),L=(0,n.useCallback)(async()=>{try{d(!0);let e={scriptsIds:N.scriptsIds,screensIds:N.screensIds,returnDraftsIfExist:!0,withDeleted:!1,withImagesOnly:N.withImagesOnly},{errors:t,data:s}=(await r.Z.get(`/api/screens?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));u({data:s}),I(N),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[N]),D=(0,n.useCallback)(async()=>{try{d(!0);let e={scriptsIds:N.scriptsIds,diagnosesIds:N.diagnosesIds,returnDraftsIfExist:!0,withDeleted:!1,withImagesOnly:N.withImagesOnly},{errors:t,data:s}=(await r.Z.get(`/api/diagnoses?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));g({data:s}),I(N),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[N]),A=(0,n.useCallback)(()=>{"diagnoses"===e.dataType?D():"screens"===e.dataType?L():w()},[e.dataType,D,L,w]);return{...e,loading:s,scripts:l,screens:f,diagnoses:h,filters:N,canLoadData:v,dataInitialised:t,scriptsColumns:o,screensColumns:p,diagnosesColumns:_,setScriptsColumns:c,setScreensColumns:m,setDiagnosesColumns:y,loadData:A,setLoading:d,setScripts:i,setScreens:u,setDiagnoses:g,_setFilters:b,setFilters:j,loadScripts:w,loadScreens:L,loadDiagnoses:D}}(e),{loading:a,dataInitialised:o,canLoadData:c,loadData:f}=t;return(0,s.jsxs)(s.Fragment,{children:[a&&s.jsx(l.a,{overlay:!0}),o?(0,s.jsxs)(s.Fragment,{children:["screens"===e.dataType&&s.jsx(em,{...t}),"diagnoses"===e.dataType&&s.jsx(eh,{...t})]}):s.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex flex-col p-5 overflow-y-auto",children:s.jsx("div",{className:"m-auto w-full max-w-lg",children:s.jsx(d.Zb,{children:(0,s.jsxs)(d.aY,{children:[(0,s.jsxs)(d.Ol,{children:[s.jsx(d.ll,{children:"Filters"}),(0,s.jsxs)(d.SZ,{children:["Filter ",e.dataType]})]}),s.jsx(ed,{...e,...t}),(0,s.jsxs)(i.z,{className:"w-full mt-6",disabled:!c,onClick:()=>f(),children:["Load ",e.dataType]})]})})})})]})}},60097:(e,t,a)=>{"use strict";a.d(t,{$F:()=>f,AW:()=>u,Ju:()=>h,VD:()=>g,Xi:()=>p,bO:()=>m,h_:()=>c});var s=a(10326),d=a(17577),l=a(79313),i=a(39183),n=a(32933),r=a(53982),o=a(77863);let c=l.fC,f=l.xz;l.ZA,l.Uv,l.Tr,l.Ee,d.forwardRef(({className:e,inset:t,children:a,...d},n)=>(0,s.jsxs)(l.fF,{ref:n,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...d,children:[a,s.jsx(i.Z,{className:"ml-auto h-4 w-4"})]})).displayName=l.fF.displayName,d.forwardRef(({className:e,...t},a)=>s.jsx(l.tu,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=l.tu.displayName;let u=d.forwardRef(({className:e,sideOffset:t=4,...a},d)=>s.jsx(l.Uv,{children:s.jsx(l.VY,{ref:d,sideOffset:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));u.displayName=l.VY.displayName;let p=d.forwardRef(({className:e,inset:t,...a},d)=>s.jsx(l.ck,{ref:d,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));p.displayName=l.ck.displayName;let m=d.forwardRef(({className:e,children:t,checked:a,...d},i)=>(0,s.jsxs)(l.oC,{ref:i,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...d,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(n.Z,{className:"h-4 w-4"})})}),t]}));m.displayName=l.oC.displayName,d.forwardRef(({className:e,children:t,...a},d)=>(0,s.jsxs)(l.Rk,{ref:d,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(r.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=l.Rk.displayName;let h=d.forwardRef(({className:e,inset:t,...a},d)=>s.jsx(l.__,{ref:d,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));h.displayName=l.__.displayName;let g=d.forwardRef(({className:e,...t},a)=>s.jsx(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));g.displayName=l.Z0.displayName},31048:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var s=a(10326),d=a(17577),l=a(34478),i=a(28671),n=a(77863);let r=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=d.forwardRef(({className:e,secondary:t,error:a,...d},i)=>s.jsx(l.f,{ref:i,className:(0,n.cn)(r(),t&&"text-xs",a?"text-danger":"",e),...d}));o.displayName=l.f.displayName},7890:(e,t,a)=>{"use strict";a.d(t,{Ei:()=>N,FF:()=>_,Tu:()=>g,aM:()=>c,bC:()=>y,sw:()=>f,ue:()=>h,yo:()=>o});var s=a(10326),d=a(17577),l=a(98958),i=a(28671),n=a(94019),r=a(77863);let o=l.fC,c=l.xz,f=l.x8,u=l.h_,p=d.forwardRef(({className:e,...t},a)=>s.jsx(l.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));p.displayName=l.aV.displayName;let m=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=d.forwardRef(({side:e="right",className:t,children:a,hideCloseButton:d,...i},o)=>(0,s.jsxs)(u,{children:[s.jsx(p,{}),(0,s.jsxs)(l.VY,{ref:o,className:(0,r.cn)(m({side:e}),t),...i,children:[a,!0!==d&&(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(n.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=l.VY.displayName;let g=({className:e,...t})=>s.jsx("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});g.displayName="SheetHeader";let _=({className:e,...t})=>s.jsx("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});_.displayName="SheetFooter";let y=d.forwardRef(({className:e,...t},a)=>s.jsx(l.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold text-foreground",e),...t}));y.displayName=l.Dx.displayName;let N=d.forwardRef(({className:e,...t},a)=>s.jsx(l.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));N.displayName=l.dk.displayName},58464:(e,t,a)=>{"use strict";a.d(t,{$7:()=>s,Tf:()=>i,m1:()=>l,ph:()=>n,uh:()=>d});let s={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},d=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"},{value:"drugs-library",label:"Drugs library"}],l=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"}],i=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],n=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}]},68584:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var s=a(68570);let d=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(ops)/components/content.tsx`),{__esModule:l,$$typeof:i}=d;d.default;let n=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(ops)/components/content.tsx#Content`)},91732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(19510),d=a(58585),l=a(40801);async function i({children:e}){let[t]=await Promise.all([(0,l.getAuthenticatedUser)()]);return["admin","super_user"].includes(t?.role)||(0,d.redirect)("/"),s.jsx(s.Fragment,{children:e})}},20123:(e,t,a)=>{"use strict";a.d(t,{Ng:()=>c,_U:()=>m,QF:()=>o,YF:()=>p});var s=a(57745),d=a(81445),l=a(30900),i=a(10413),n=a(43509),r=a(57435);async function o(e){try{let{sitesIds:t,types:a=[],envs:r=[],links:o=[]}={...e},c=t||[],f=c?.length?(0,s.d3)(n.sites.siteId,c.filter(e=>l.Z(e))):void 0;o.length&&[...o].forEach(e=>{o.push(e.replace("http:","https:")),o.push(e.replace("https","http"))});let u=[(0,s.Ft)(n.sites.deletedAt),f,a.length?(0,s.d3)(n.sites.type,a):void 0,r.length?(0,s.d3)(n.sites.env,r):void 0,o.length?(0,s.d3)(n.sites.link,o):void 0];return{data:(await i.Z.select({site:n.sites}).from(n.sites).where(u.length?(0,s.xD)(...u):void 0).orderBy((0,d.d)(n.sites.id))).map(e=>e.site)}}catch(e){return r.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function c(e){let{siteId:t}={...e};try{if(!t)throw Error("Missing siteId");let e=l.Z(t)?(0,s.eq)(n.sites.siteId,t):void 0;return{data:await i.Z.query.sites.findFirst({where:(0,s.xD)((0,s.Ft)(n.sites.deletedAt),e)})}}catch(e){return r.Z.error("_getSite ERROR",e.message),{errors:[e.message]}}}var f=a(8328);let u=()=>{let e=(0,f.w)();return{webeditor:{name:"Local editor",siteId:"fb76af5a-bf86-4050-821e-44f1bf316bf4",link:e.origin,type:"webeditor",apiKey:"localhost"},nodeapi:{name:"Local editor",siteId:"5cb4aa54-2cfe-49e2-9cdd-392a9b8c124e",link:e.origin,type:"webeditor",apiKey:"localhost"}}};async function p(e){try{let{types:t=[]}={...e},a=[...t.length?[(0,s.d3)(n.sites.type,t)]:[]],d=await i.Z.query.sites.findMany({where:a.length?(0,s.xD)(...a):void 0,columns:{siteId:!0,type:!0,name:!0,link:!0}});return u(),{data:[...d]}}catch(e){return r.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function m(e){try{let t=await i.Z.query.sites.findFirst({where:(0,s.eq)(n.sites.siteId,e),columns:{apiKey:!0,link:!0}}),a=t||null;if(!t){let t=u();Object.values(t).forEach(t=>{t.siteId===e&&(a={link:t.link,apiKey:t.apiKey})})}return{data:a}}catch(e){return r.Z.error("_getSiteApiKey ERROR",e.message),{data:null,errors:[e.message]}}}},8328:(e,t,a)=>{"use strict";a.d(t,{w:()=>d});var s=a(71615);function d(){let e=(0,s.headers)(),t=e.get("x-api-key"),a=e.get("x-bearer-token"),d=e.get("x-url"),l=e.get("x-next-url-host"),i=e.get("x-next-url-href"),n=e.get("x-next-url-port"),r=e.get("x-next-url-hostname"),o=e.get("x-next-url-pathname"),c=e.get("x-next-url-search"),f=e.get("x-next-url-protocol"),u=e.get("x-next-url-username"),p=e.get("x-next-url-locale"),m=e.get("x-next-url-origin"),h=e.get("x-geo-city"),g=e.get("x-geo-country");return{apiKey:t,bearerToken:a,url:d||"",host:l||"",href:i||"",port:n||"",hostname:r||"",pathname:o||"",search:c||"",protocol:f||"",username:u||"",locale:p||"",origin:m||"",city:h||"",country:g||"",region:e.get("x-geo-region")||"",latitude:e.get("x-geo-latitude")||"",longitude:e.get("x-geo-longitude")||""}}}};