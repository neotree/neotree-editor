"use strict";exports.id=7241,exports.ids=[7241],exports.modules={42954:(e,l,a)=>{a.d(l,{M:()=>z});var t=a(10326),i=a(17577),s=a(83855),r=a(47035),n=a(2165),c=a(15491),d=a(90772),o=a(46670),f=a(47463),u=a(63685),m=a(39572),h=a(2025),g=a(77863),p=a(11870),x=a(96221);async function b(e){return new Promise((l,a)=>{let t=new Image;t.onload=function(){l({width:t.width,height:t.height})},t.onerror=function(e,l,t,i,s){a(s||Error("Failed to load image"))},t.src=e})}var v=a(46226);function y({width:e=0,height:l=0,containerWidth:a,...i}){let s=i.sizes||"100vw",r={width:"100%",height:"auto"};if(l&&e&&a){s=void 0;let t=function({imageWidth:e,imageHeight:l,containerWidth:a}){return e>a&&(l=a/e*l,e=a),{imageWidth:e,imageHeight:l}}({imageWidth:e,imageHeight:l,containerWidth:a});r.width=t.imageWidth,r.height=t.imageHeight}return t.jsx(v.default,{...i,width:e,height:l,sizes:s,style:{...r,...i.style}})}function j({type:e,children:l,inputProps:a,fileDetails:s,onUpload:r,...c}){let[o,{width:v}]=(0,n.Z)(),[j,w]=(0,i.useState)(!1),[N,z]=(0,i.useState)([]),[k,Z]=(0,i.useState)(!1),{alert:C}=(0,x.s)(),S=(0,i.useCallback)(async()=>{let e=a?.multiple?N:[N[0]];try{for(let{file:l,metadata:a,fileId:t}of(Z(!0),e)){let e=new FormData;e.append("file",l),e.append("fileId",t||(0,f.Z)()),e.append("filename",l.name),e.append("contentType",l.type),e.append("size",`${l.size}`),e.append("metadata",JSON.stringify({...a})),s&&Object.keys(s).forEach(l=>{let a=s[l];e.append(l,JSON.stringify(a))}),await r(e)}w(!1),z([]),C({title:"Success",message:`File${e.length>1?"s":""} uploaded successfully!`,variant:"success"})}catch(l){C({title:"Error",message:`Failed to upload file${e.length>1?"s":""}: ${l.message}`,variant:"error"})}finally{Z(!1)}},[r,C,N,a?.multiple,s]),R=(0,i.useCallback)(async e=>{try{let l=[];if(e.target.files?.length)for(let a=0;a<e.target.files.length;a++)l.push(e.target.files[a]);let a=[];for(let e of l){let l,t;let i=URL.createObjectURL(e),s={};if(`${e.type}`.includes("image"))try{let e=await b(i);s={...s,...e},l=i}catch(e){}a.push({fileId:(0,f.Z)(),file:e,url:i,imageURL:l,videoURL:t,metadata:s})}z(a)}catch(e){C({title:"Error",message:e.message})}},[C]);return(0,t.jsxs)(t.Fragment,{children:[k&&t.jsx(p.a,{overlay:!0}),t.jsx(h.u,{open:j,onOpenChange:e=>{w(e),z([])},title:"Upload file",trigger:l,...c,actions:(0,t.jsxs)(t.Fragment,{children:[!N.length&&t.jsx("div",{className:"flex-1"}),t.jsx(d.z,{variant:"ghost",onClick:()=>w(!1),children:"Cancel"}),!!N.length&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"flex-1"}),t.jsx(d.z,{variant:"destructive",onClick:()=>z([]),children:"Clear"}),(0,t.jsxs)(d.z,{disabled:!N.length,onClick:()=>S(),className:(0,g.cn)(!N.length&&"hidden"),children:[t.jsx(u.Z,{className:"h-4 w-4 mr-2"}),t.jsx("span",{children:"Upload"})]})]})]}),children:(0,t.jsxs)("div",{ref:o,children:[1===N.length&&N.map(e=>{let l=t.jsx(m.Z,{className:"w-20 h-20 text-muted-foreground"});return e.imageURL&&(l=t.jsx(y,{alt:"",width:e.metadata.width||0,height:e.metadata.height||0,containerWidth:v,src:e.imageURL||"/images/placeholder.png"})),(0,t.jsxs)("div",{className:(0,g.cn)(`
                                        flex
                                        flex-col
                                        gap-y-2
                                        w-full
                                        items-center
                                        justify-center
                                        text-xs
                                    `,!(e.imageURL||e.videoURL)&&""),children:[l,t.jsx("span",{children:e.file.name})]},e.fileId)}),!N.length&&(0,t.jsxs)("div",{className:(0,g.cn)(`
                                    relative
                                    w-full
                                    h-36
                                    bg-primary/20
                                    flex
                                    flex-col
                                    items-center
                                    justify-center
                                    text-primary
                                    uppercase
                                    font-bold
                                    rounded-md
                                    transition-colors
                                    hover:bg-primary/30
                                `,!!N.length&&"hidden"),children:[t.jsx("div",{children:a?.placeholder||"Choose file"}),t.jsx("input",{...a,type:"file",accept:e,value:"",className:(0,g.cn)(`
                                        absolute
                                        left-0
                                        top-0
                                        w-full
                                        h-full
                                        opacity-0
                                    `),onChange:R})]})]})})]})}var w=a(62288),N=a(82617);function z({image:e,disabled:l,onChange:a}){let[f,{width:u}]=(0,n.Z)(),{confirm:m}=(0,o.t)(),{uploadFile:h}=(0,N.h)(),g=(0,i.useCallback)(async e=>{let{file:l,errors:t}=await h(e);if(t?.length)throw Error(t.join(", "));if(l){let e=c.Z.stringify({...l.metadata});e=e?`?${e}`:"",a({data:`https://webeditor-dev.neotree.org/files/${l.fileId}${e}`,fileId:l.fileId,filename:l.filename,size:l.size,contentType:l.contentType})}},[h,a]),p=`${e?.data||""}`.split("?").filter((e,l)=>l).join(""),{width:x,height:b}=c.Z.parse(p);return t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{ref:f,className:"flex flex-col gap-y-2 min-w-60 max-w-60",children:[t.jsx("div",{className:"w-full flex flex-col items-center justify-center min-h-28",children:t.jsx(y,{alt:"",width:Number(x||"0"),height:Number(b||"0"),containerWidth:u,src:e?.data||"/images/placeholder.png"})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-x-4",children:[t.jsx(j,{type:"image/*",onUpload:g,children:t.jsx(w.hg,{asChild:!0,children:t.jsx(d.z,{size:"icon",className:"w-8 h-8 rounded-full",disabled:l,children:t.jsx(s.Z,{className:"h-4 w-4"})})})}),!!e&&t.jsx(d.z,{variant:"destructive",size:"icon",className:"w-8 h-8 rounded-full",disabled:l,onClick:()=>m(()=>a(null),{title:"Delete image",message:"Are you sure you want to delete this image?",danger:!0}),children:t.jsx(r.Z,{className:"h-4 w-4"})})]})]})})}},69486:(e,l,a)=>{a.d(l,{D:()=>s});var t=a(10326),i=a(77863);function s({children:e,className:l}){return t.jsx("div",{className:(0,i.cn)("pb-1 border-b border-b-primary",l),children:t.jsx("span",{className:"uppercase text-primary text-sm",children:e})})}},96948:(e,l,a)=>{a.d(l,{Alert:()=>s});var t=a(96221),i=a(35047);function s(e){(0,i.useRouter)();let{alert:l}=(0,t.s)();return null}a(17577)},88846:(e,l,a)=>{a.d(l,{E:()=>c,m:()=>d});var t=a(10326),i=a(17577),s=a(18623),r=a(53982),n=a(77863);let c=i.forwardRef(({className:e,...l},a)=>t.jsx(s.fC,{className:(0,n.cn)("grid gap-2",e),...l,ref:a}));c.displayName=s.fC.displayName;let d=i.forwardRef(({className:e,...l},a)=>t.jsx(s.ck,{ref:a,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...l,children:t.jsx(s.z$,{className:"flex items-center justify-center",children:t.jsx(r.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d.displayName=s.ck.displayName},8281:(e,l,a)=>{a.d(l,{Z:()=>n});var t=a(10326),i=a(17577),s=a(90220),r=a(77863);let n=i.forwardRef(({className:e,orientation:l="horizontal",decorative:a=!0,...i},n)=>t.jsx(s.f,{ref:n,decorative:a,orientation:l,className:(0,r.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",e),...i}));n.displayName=s.f.displayName},87673:(e,l,a)=>{a.d(l,{g:()=>r});var t=a(10326),i=a(17577),s=a(77863);let r=i.forwardRef(({className:e,noRing:l,...a},i)=>t.jsx("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",e),ref:i,...a}));r.displayName="Textarea"},58464:(e,l,a)=>{a.d(l,{Tf:()=>i,m1:()=>t,ph:()=>s});let t=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"}],i=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],s=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}]},61892:(e,l,a)=>{a.d(l,{x:()=>t});function t(e){return null==e||""===e}},41236:(e,l,a)=>{a.d(l,{_:()=>c});var t=a(19510),i=a(57371),s=a(39755),r=a(24569),n=a(46697);function c({title:e,backLink:l,children:a}){return t.jsx("div",{className:"pb-20",children:t.jsx(r.V,{className:"flex flex-col gap-y-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-0",children:[!!e&&(0,t.jsxs)("div",{className:"text-xl flex items-center gap-x-4 mb-4 p-4",children:[!!l&&t.jsx(i.default,{href:l,children:t.jsx(s.Z,{className:"h-5 w-5"})}),t.jsx("span",{children:e})]}),a]})})})})}},49246:(e,l,a)=>{a.r(l),a.d(l,{default:()=>s});var t=a(19510),i=a(62553);function s(){return t.jsx(i.a,{overlay:!0})}},57890:(e,l,a)=>{a.r(l),a.d(l,{default:()=>s});var t=a(19510),i=a(62553);function s(){return t.jsx(i.a,{overlay:!0})}},86098:(e,l,a)=>{a.d(l,{b:()=>n});var t=a(68570);let i=(0,t.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/alert.tsx`),{__esModule:s,$$typeof:r}=i;i.default;let n=(0,t.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/alert.tsx#Alert`)}};