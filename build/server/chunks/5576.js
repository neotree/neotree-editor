"use strict";exports.id=5576,exports.ids=[5576],exports.modules={85576:(e,a,t)=>{t.r(a),t.d(a,{$$ACTION_0:()=>T,$$ACTION_1:()=>k,$$ACTION_10:()=>Q,$$ACTION_11:()=>V,$$ACTION_12:()=>ea,$$ACTION_13:()=>er,$$ACTION_14:()=>ei,$$ACTION_15:()=>ec,$$ACTION_2:()=>D,$$ACTION_3:()=>L,$$ACTION_4:()=>U,$$ACTION_5:()=>P,$$ACTION_6:()=>M,$$ACTION_7:()=>B,$$ACTION_8:()=>G,$$ACTION_9:()=>J,copyDiagnoses:()=>ey,copyScreens:()=>em,copyScripts:()=>ep,countDiagnoses:()=>W,countScreens:()=>Z,countScripts:()=>z,deleteDiagnoses:()=>Y,deleteScreens:()=>C,deleteScripts:()=>es,deleteScriptsItems:()=>eu,getDiagnoses:()=>X,getDiagnosis:()=>F,getScreen:()=>q,getScreens:()=>_,getScript:()=>et,getScripts:()=>ee,getScriptsMetadata:()=>$,getScriptsWithItems:()=>ed,listScreens:()=>N,saveDiagnoses:()=>H,saveScreens:()=>x,saveScriptDiagnoses:()=>el,saveScriptScreens:()=>eo,saveScripts:()=>en,saveScriptsWithItems:()=>eg});var r=t(24330);t(60166);var s=t(9576),i=t(49530),n=t(45241),c=t(21162),d=t(22418),o=t(88778),l=t(57435),u=t(88317),f=t(5286),g=t(66267),p=t(44380),m=t(24263),y=t(59271),b=t(20123);let h=async(e,a)=>{let t=m.Z.create({baseURL:process.env.NEXT_PUBLIC_APP_URL});if(a){let{data:e,errors:r}=await (0,b.QF)({links:[a]});if(r?.length)throw Error(r.join(", "));if(!e[0])throw Error(`Failed to download images. Site (${a}) not found.`);t=await (0,y.U)({baseURL:a,apiKey:e[0].apiKey})}a=process.env.NEXT_PUBLIC_APP_URL;let r=e.data.split("/").filter((e,a)=>a<3).join("/"),s=[],i=!1;if(r!==a&&(0,p.jv)(r)&&e.fileId){let{errors:a,data:n}=(await t.post("/api/files/upload/from-site",{siteURL:r,fileId:e.fileId})).data;a?.length&&(s=a),n&&(e.data=n.fileURL,i=!0)}return{image:e,updated:i,errors:s}};var w=t(16916);function I(e){return!!(e.label&&e.name&&e.dataType)}function R(e,a){let t=a?.lowerCase!==!1,r=JSON.stringify([e].map(e=>({name:(e.name||"").trim(),label:(e.label||"").trim(),dataType:(e.dataType||"").trim()}))[0]);return t&&(r=r.toLowerCase()),r}function S(e){return e.filter((a,t)=>e.map(e=>R(e)).indexOf(R(a))===t)}function E(e,a){return e.find(e=>R(e)===R(a))}async function j({screens:e=[],diagnoses:a=[],dataKeys:t,linkScrappedToDataKeys:r=!0}){let s=S(function(...e){let a=e.reduce((e,a)=>[...e,...a],[]),t=[...a.reduce((e,a)=>[...e,a.key],[]).filter(e=>I(e)),...a.reduce((e,a)=>[...e,...a.key.children],[]).filter(e=>I(e)),...a.reduce((e,a)=>[...e,...a.key.children.reduce((e,a)=>[...e,...a.children||[]],[])],[]).filter(e=>I(e))];return t.map(e=>({...e,options:S(t.filter(a=>R(a)===R(e)).reduce((e,a)=>[...e,...a.children||[]],[]))}))}(a.map(e=>{let a=e.key||e.name;return{id:e.diagnosisId,type:"diagnosis",key:{label:e.name,name:a,dataType:"diagnosis",children:(e.symptoms||[]).map(e=>{let a=e.key||e.name;return{label:e.name,name:a,dataType:`diagnosis_symptom_${e.type}`,children:[]}})}}}),e.map(e=>{let a=e.type;return{id:e.screenId,type:"screen",key:{name:e.key,label:e.label,dataType:a,children:[...(e.fields||[]).map(e=>{let a=e.key,t=e.type;return{label:e.label,name:a,dataType:t,children:(e.items||[]).map(e=>{let a=e.value;return{label:e.label,name:a,dataType:"option"}})}}),...(e.items||[]).map(a=>{let t=a.key||a.id,r="option";return"diagnosis"===e.type&&(r="diagnosis"),{label:a.label,name:t,dataType:r,children:[]}})]}}}))).filter(e=>e.name),{data:i}=t?{data:t}:r?await (0,w.aW)({keys:s.map(({options:e,...a})=>a)}):{data:[]};return(await v({scrappedKeys:s,dataKeys:i})).map(e=>({...e,options:e.options.filter((a,t)=>e.options.indexOf(a)===t)}))}async function v({scrappedKeys:e,importedDataKeys:a=[],dataKeys:t}){return(e=e.map(e=>{let{uniqueKey:a,uuid:r}={...E(t,e)};return{...e,uniqueKey:a,uuid:r||(0,s.Z)()}})).map(t=>{let r=E(a,t);r&&console.log(r.name);let s=r?.options||t.options.map(a=>{let{uniqueKey:t,uuid:r}={...e.find(e=>R(e)===R(a))};return t||r}).filter(e=>e);return{...t,options:s}})}async function O({localDataKeys:e=[],importedScrappedKeys:a=[],importedDataKeys:t=[],importedScreens:r=[],importedDiagnoses:i=[],importedDrugsLibraryItems:n=[]}){let c={},d={};t.forEach(a=>{let t=e.find(e=>e.uniqueKey===a.uniqueKey);c[a.uniqueKey]=a,d[a.uniqueKey]={id:t?.id,uniqueKey:t?.uniqueKey||a.uniqueKey||(0,s.Z)(),uuid:t?.uuid||(0,s.Z)()}}),e=e.map(e=>({...e,options:e.options.filter(e=>c[e])}));let o=t.map(a=>{let t=d[a.uniqueKey],r=e.find(e=>e.uniqueKey===a.uniqueKey);return{...a,id:t.id,uniqueKey:t.uniqueKey,uuid:t.uuid,isDifferentFromLocal:!1,canSave:!1,isNew:!r,options:a.options.filter(e=>c[e]).map(e=>d[c[e].uniqueKey].uniqueKey)}});return{dataKeys:o=(o=o.map(t=>{let r=e.find(e=>e.uniqueKey===t.uniqueKey),s=!r||r&&(R(r)!==R(t)||r.options.length!==t.options.length||!!r.options.find((e,a)=>t.options.indexOf(e)!==a)),i=!!a.find(e=>R(e)===R(t));return{...t,isDifferentFromLocal:s,canSave:i&&s}})).map(e=>{let a=e.canSave;return e.isDifferentFromLocal&&o.forEach(t=>{t.canSave&&(a=a||t.options.includes(e.uniqueKey))}),{...e,canSave:a}}),drugsLibrary:n,diagnoses:i.map(e=>{let a=e.key||e.name,t={label:e.name,name:a,dataType:"diagnosis"},r=E(o,t)?.uniqueKey;return{...e,keyId:r,symptoms:(e.symptoms||[]).map(e=>{let a=e.key||e.name,t={label:e.name,name:a,dataType:`diagnosis_symptom_${e.type}`},r=E(o,t)?.uniqueKey;return{...e,keyId:r}})}}),screens:r.map(e=>{let a={label:e.label,name:e.key,dataType:e.type},t=E(o,a)?.uniqueKey||"";return{...e,keyId:t,fields:(e.fields||[]).map(e=>{let a=e.type,t={label:e.label,name:e.key,dataType:a},r=E(o,t)?.uniqueKey;return{...e,keyId:r,items:(e.items||[]).map(e=>{let a={label:e.label,name:e.value,dataType:"option"},t=E(o,a)?.uniqueKey;return{...e,keyId:t}})}}),items:(e.items||[]).map(a=>{let t=a.key||a.id,r="option";"diagnosis"===e.type&&(r="diagnosis");let s={label:a.label,name:t,dataType:r},i=E(o,s)?.uniqueKey;return{...a,keyId:i}})}})}}var A=t(88781),K=t(40618);let $=c.Sc,Z=(0,r.j)("328664c139eba96f09b0bd61a3f9a24b0e0d0202",T);async function T(...e){try{return await (0,g.isAllowed)(),await c.co(...e)}catch(e){return l.Z.error("countScreens ERROR",e.message),{errors:[e.message],data:c.W0}}}let _=(0,r.j)("636677c81c875bd79e74d6bd42f3c381418c2a54",k);async function k(...e){try{return await (0,g.isAllowed)(),await c.uK(...e)}catch(e){return l.Z.error("getScreens ERROR",e.message),{errors:[e.message],data:[]}}}let N=(0,r.j)("9561dacd3778c87809fa9f6c56fac0c0e65783d2",D);async function D(...e){try{return await (0,g.isAllowed)(),await c.f(...e)}catch(e){return l.Z.error("listScreens ERROR",e.message),{errors:[e.message],data:[]}}}let q=(0,r.j)("bf5b0029d8fcb3d2284e50cfc0d42e640efb06b4",L);async function L(...e){return await (0,g.isAllowed)(),await c.NB(...e)}let C=(0,r.j)("335b8db853fc1affb06f2555ad528d8a96eeb18c",U);async function U(e){try{let a=await (0,g.isAllowed)();return await n.GH({...e,userId:a.user?.userId})}catch(e){return l.Z.error("deleteScreens ERROR",e.message),{errors:[e.message],success:!1}}}let x=(0,r.j)("3a86a2c75a8ab95fa5f9098f1e752ee555df6660",P);async function P(e){try{let a=await (0,g.isAllowed)();return await n.uD({...e,userId:a.user?.userId})}catch(e){return l.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}let W=(0,r.j)("a79b8039004e19b4739f16aa192d26d09adf3cab",M);async function M(...e){try{return await (0,g.isAllowed)(),await c.tW(...e)}catch(e){return l.Z.error("countDiagnoses ERROR",e.message),{errors:[e.message],data:c.GM}}}let X=(0,r.j)("2505d436074ee4652085d1c10cb7249985a8b480",B);async function B(...e){try{return await (0,g.isAllowed)(),await c.XA(...e)}catch(e){return l.Z.error("getDiagnoses ERROR",e.message),{errors:[e.message],data:[]}}}let F=(0,r.j)("2568946b417186fccca9f03e3ae3bd4c69ab15bc",G);async function G(...e){return await (0,g.isAllowed)(),await c.Ew(...e)}let Y=(0,r.j)("96069e8826fb5b814afcf469cdf6e10ef46966ea",J);async function J(e){try{let a=await (0,g.isAllowed)();return await n.Bx({...e,userId:a.user?.userId})}catch(e){return l.Z.error("deleteDiagnoses ERROR",e.message),{errors:[e.message],success:!1}}}let H=(0,r.j)("d5f565a64b93442840b93242e5abca8d047a8d48",Q);async function Q(e){try{let a=await (0,g.isAllowed)();return await n.Pk({...e,userId:a.user?.userId})}catch(e){return l.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}let z=(0,r.j)("2c6049bddc14a3c36c75d61a218c530ac372e213",V);async function V(...e){try{return await (0,g.isAllowed)(),await c.ix(...e)}catch(e){return l.Z.error("countScripts ERROR",e.message),{errors:[e.message],data:c.Zu}}}let ee=(0,r.j)("6a6a565b02b3dd502674fa248db86c729751be4c",ea);async function ea(...e){try{return await (0,g.isAllowed)(),await c.Tw(...e)}catch(e){return l.Z.error("getScripts ERROR",e.message),{errors:[e.message],data:[]}}}let et=(0,r.j)("c4194abe09f9b0e2339c2f0bb6edde729c120836",er);async function er(...e){return await (0,g.isAllowed)(),await c.bK(...e)}let es=(0,r.j)("1f4357298e15280ecabcbf50580054ff772a5475",ei);async function ei(e){try{let a=await (0,g.isAllowed)();return await n.Es({...e,userId:a.user?.userId})}catch(e){return l.Z.error("deleteScripts ERROR",e.message),{errors:[e.message],success:!1}}}let en=(0,r.j)("64e41ab1100f4fd17895406fd950bc1194a9da21",ec);async function ec(e){try{let a=await (0,g.isAllowed)();return await n.Or({...e,userId:a.user?.userId})}catch(e){return l.Z.error("saveScripts ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}async function ed(e){let a=[],t=[];try{let r=e?.returnDraftsIfExist!==!1,s=await c.Tw({...e,returnDraftsIfExist:r}),{data:i}=await (0,w.aW)();for(let e of(s.errors?.forEach(e=>t.push(e)),s.data)){let s=await c.uK({scriptsIds:[e.scriptId],returnDraftsIfExist:r}),n=await c.XA({scriptsIds:[e.scriptId],returnDraftsIfExist:r}),d=await c.pd({scriptsIds:[e.scriptId],returnDraftsIfExist:r});s.errors?.forEach(e=>t.push(e)),n.errors?.forEach(e=>t.push(e));let o=d.data.filter(e=>{let a=s.data.filter(e=>["drugs","fluids","feeds"].includes(e.type));return!!a.find(a=>(a.drugs||[]).map(e=>e.key).includes(e.key))||!!a.find(a=>(a.fluids||[]).map(e=>e.key).includes(e.key))||!!a.find(a=>(a.feeds||[]).map(e=>e.key).includes(e.key))}),l=await j({dataKeys:i,screens:s.data,diagnoses:n.data,drugsLibrary:o});a.push({...e,screens:s.data,diagnoses:n.data,dataKeys:l,drugsLibrary:o})}if(t.length)return{errors:t,data:[]};return{data:a}}catch(e){return l.Z.error("getScriptsWithItems ERROR",e.message),{data:[],errors:[e.message]}}}async function eo({screens:e,scriptId:a,preserveScreensIds:t}){try{let r=0,i=[],n=await c.bK({scriptId:a,returnDraftIfExists:!0});if(n.errors?.length)throw Error(n.errors.join(", "));if(!n.data)throw Error("Script not found");for(let c of e){let{id:e,publishDate:d,createdAt:o,updatedAt:u,isDraft:f,deletedAt:g,version:p,oldScriptId:m,oldScreenId:y,screenId:b,scriptId:w,position:I,...R}=c,S=(0,s.Z)();t&&b&&(S=b);try{if(R.image1){let e=await h(R.image1);R.image1=e.image}if(R.image2){let e=await h(R.image2);R.image2=e.image}if(R.image3){let e=await h(R.image3);R.image3=e.image}}catch(e){l.Z.error("process image",e.message)}let E=await x({data:[{...R,scriptId:a,oldScriptId:n.data.oldScriptId,screenId:S,version:1}]});E.errors?.forEach(e=>i.push(`(screenId=${b}) ${e||""}`)),!E.errors?.length&&r++}if(i.length)return{errors:i,saved:r,success:!1};return{saved:r,success:!0}}catch(e){return l.Z.error("saveScriptScreens ERROR",e.message),{saved:0,success:!1,errors:[e.message]}}}async function el({diagnoses:e,scriptId:a,preserveDiagnosesIds:t}){try{let r=0,i=[],n=await c.bK({scriptId:a,returnDraftIfExists:!0});if(n.errors?.length)throw Error(n.errors.join(", "));if(!n.data)throw Error("Script not found");for(let c of e){let{id:e,publishDate:d,createdAt:o,updatedAt:u,isDraft:f,deletedAt:g,version:p,oldDiagnosisId:m,diagnosisId:y,scriptId:b,position:w,...I}=c,R=(0,s.Z)();t&&y&&(R=y);try{if(I.image1){let e=await h(I.image1);I.image1=e.image}if(I.image2){let e=await h(I.image2);I.image2=e.image}if(I.image3){let e=await h(I.image3);I.image3=e.image}}catch(e){l.Z.error("process image",e.message)}let S=await H({data:[{...I,scriptId:a,oldScriptId:n.data.oldScriptId,diagnosisId:R,version:1}]});S.errors?.forEach(e=>i.push(`(diagnosisId=${y}) ${e||""}`)),!S.errors?.length&&r++}if(i.length)return{errors:i,saved:r,success:!1};return{saved:r,success:!0}}catch(e){return l.Z.error("saveScriptDiagnoses ERROR",e.message),{saved:0,success:!1,errors:[e.message]}}}async function eu({scriptsIds:e}){try{let a=[],t=await C({scriptsIds:e});t.errors?.forEach(e=>a.push(e));let r=await Y({scriptsIds:e});if(r.errors?.forEach(e=>a.push(e)),a.length)return{errors:a,success:!1};return{success:!0}}catch(e){return l.Z.error("deleteScriptsItems ERROR",e.message),{success:!1,errors:[e.message]}}}let ef={scripts:0,screens:0,diagnoses:0,dffItems:0,dataKeys:0};async function eg({data:e}){let a={...ef};try{let t=[];for(let{overWriteScriptWithId:r,...i}of e){let e=r?await et({scriptId:r,returnDraftIfExists:!0}):{data:null};if(e.errors?.forEach(e=>t.push(e)),t.length)continue;if(r&&!e?.data){t.push("Overwrite script was not found");continue}if(e?.data){let a=await eu({scriptsIds:[e.data.scriptId]});if(a.errors?.forEach(e=>t.push(e)),t.length)continue}let{id:n,screens:c=[],diagnoses:d=[],drugsLibrary:o=[],dataKeys:l=[],publishDate:u,createdAt:f,updatedAt:g,isDraft:p,deletedAt:m,version:y,oldScriptId:b,scriptId:h,position:w,printSections:I=[],reviewConfigurations:R=[],...S}=i,E={},j={},v=c.map(e=>{let a=(0,s.Z)();return E[e.screenId]=a,e.oldScreenId&&(E[e.oldScreenId]=a),{...e,screenId:a}});v=v.map(e=>({...e,skipToScreenId:(e.skipToScreenId?E[e.skipToScreenId]:null)||null}));let O=d.map(e=>{let a=(0,s.Z)();return j[e.diagnosisId]=a,e.oldDiagnosisId&&(j[e.oldDiagnosisId]=a),{...e,diagnosisId:a}}),A=e?.data?.scriptId||(0,s.Z)(),K=await en({data:[{...S,scriptId:A,version:1,printSections:I.map(e=>({...e,screensIds:e.screensIds.map(e=>E[e]).filter(e=>e)})),reviewConfigurations:R.map(e=>({...e,screen:E[e.screen]})).filter(e=>e.screen)}]});if(K.errors?.forEach(e=>t.push(e)),t.length)continue;a.scripts++;let $=await eo({preserveScreensIds:!0,scriptId:A,screens:v});a.screens+=$.saved;let Z=await el({preserveDiagnosesIds:!0,scriptId:A,diagnoses:O});a.diagnoses+=Z.saved}if(t.length)return{success:!1,errors:t,info:a};return{success:!0,info:a}}catch(e){return l.Z.error("saveScriptsWithItems ERROR",e.message),{success:!1,errors:[e.message],info:a}}}async function ep(e){let{data:a}=await (0,w.aW)(),t={...ef},{scriptsIds:r=[],confirmCopyAll:s,toRemoteSiteId:n,fromRemoteSiteId:c,broadcastAction:m,overWriteScriptWithId:y,overwriteDataKeys:b,overwriteDrugsLibraryItems:h}={...e};try{let e=await (0,g.isAllowed)(),l=[],w=[];if(!r.length&&!s)throw Error("You&apos;re about copy all the scripts, please confirm this action!");let I=c?{data:[]}:await ed({scriptsIds:r}),R=[],S=[];if(I.errors)return{success:!1,errors:I.errors,info:t};if(c){let e=await (0,f.U)(c),{data:s}=await e.get("/api/data-keys");l=s.data;let n=await e.get("/api/scripts/with-items?"+i.Z.stringify({scriptsIds:JSON.stringify(r)})),d=n.data;if(d.errors)return{success:!1,errors:d.errors,info:t};(I=d).data.forEach(({screens:e,diagnoses:a,dataKeys:t,drugsLibrary:r},s)=>{let i=e=>{let a=n.config.baseURL||"";return"/"===a.substring(a.length-1,a.length)&&(a=a.substring(0,a.length-1)),"/"===e[0]&&(e=e.substring(1,e.length)),[a,e].filter(e=>e).join("/")};w=[...w,...t],S=[...S,...r],e.forEach((e,a)=>{e.image1?.data&&e.image1?.fileId&&!(0,p.jv)(e.image1.data)&&(I.data[s].screens[a].image1.data=i(e.image1.data)),e.image2?.data&&e.image2?.fileId&&!(0,p.jv)(e.image2.data)&&(I.data[s].screens[a].image2.data=i(e.image2.data)),e.image3?.data&&e.image3?.fileId&&!(0,p.jv)(e.image3.data)&&(I.data[s].screens[a].image3.data=i(e.image3.data))}),a.forEach((e,a)=>{e.image1?.data&&e.image1?.fileId&&!(0,p.jv)(e.image1.data)&&(I.data[s].diagnoses[a].image1.data=i(e.image1.data)),e.image2?.data&&e.image2?.fileId&&!(0,p.jv)(e.image2.data)&&(I.data[s].diagnoses[a].image2.data=i(e.image2.data)),e.image3?.data&&e.image3?.fileId&&!(0,p.jv)(e.image3.data)&&(I.data[s].diagnoses[a].image3.data=i(e.image3.data))})});let o=-1;for(let e of I.data){o++;let{dataKeys:t,screens:r,diagnoses:s,drugsLibrary:i}=await O({localDataKeys:a,importedDataKeys:l,importedScrappedKeys:w,importedScreens:e.screens,importedDiagnoses:e.diagnoses,importedDrugsLibraryItems:e.drugsLibrary});I.data[o].screens=r,I.data[o].diagnoses=s,I.data[o].drugsLibrary=i,t.filter(e=>e.canSave).forEach(e=>R.push(e)),R=R.filter(e=>b||e.isNew)}}let E={success:!0,info:t};if(I.data.length){if(n){let e=await (0,f.U)(n);E=(await e.post("/api/scripts/with-items?",{data:I.data.map(e=>({...e,hospitalId:void 0,hospitalName:void 0}))})).data}else E=await eg({data:I.data.map(e=>({...e,overWriteScriptWithId:y,hospitalId:void 0,hospitalName:void 0}))})}if(S.length){let{data:a}=await (0,A.fP)();(h?await (0,d.Lr)({data:S,userId:e.user?.userId}):await (0,d.cj)({data:S,userId:e.user?.userId})).success&&(E.info.dffItems=S.length)}return R.length&&(await (0,o.MM)({data:R,userId:e.user?.userId})).success&&(E.info.dataKeys=R.length),m&&!E?.errors?.length&&u.Z.emit("data_changed","copy_scripts"),E}catch(e){return l.Z.error("copyScripts ERROR",e.response?.data?.errors?.join(", ")||e.message),{errors:e.response?.data?.errors||[e.message],success:!1,info:t}}}async function em(e){let a=0,{screensIds:t=[],fromScriptsIds:r=[],toScriptsIds:s=[],confirmCopyAll:i,broadcastAction:n}={...e};try{let e=[];if(!r.length&&!t.length&&!i)throw Error("You&apos;re about to copy all the screens, please confirm this action!");let d=await c.uK({scriptsIds:r,screensIds:t,returnDraftsIfExist:!0});if(d.errors?.length)throw Error(d.errors.join(", "));if(s.length)for(let t of s){let r=await eo({scriptId:t,screens:d.data});r.errors?.forEach(a=>e.push(a)),!e.length&&a++}else{let t=d.data.reduce((e,a)=>({...e,[a.scriptId]:[...e[a.scriptId]||[],a]}),{});for(let r of Object.keys(t)){let s=await eo({scriptId:r,screens:t[r]});s.errors?.forEach(a=>e.push(a)),e.length||(a+=s.saved)}}return n&&!e.length&&u.Z.emit("data_changed","copy_scripts"),{copied:a,success:!e.length,errors:e.length?e:void 0}}catch(e){return l.Z.error("copyScreens ERROR",e.message),{errors:[e.message],success:!1,copied:a}}}async function ey(e){let a=0,{diagnosesIds:t=[],fromScriptsIds:r=[],toScriptsIds:s=[],confirmCopyAll:i,broadcastAction:n}={...e};try{let e=[];if(!r.length&&!t.length&&!i)throw Error("You&apos;re about to copy all the diagnoses, please confirm this action!");let d=await c.XA({scriptsIds:r,diagnosesIds:t,returnDraftsIfExist:!0});if(d.errors?.length)throw Error(d.errors.join(", "));if(s.length)for(let t of s){let r=await el({scriptId:t,diagnoses:d.data});r.errors?.forEach(a=>e.push(a)),!e.length&&a++}else{let t=d.data.reduce((e,a)=>({...e,[a.scriptId]:[...e[a.scriptId]||[],a]}),{});for(let r of Object.keys(t)){let s=await el({scriptId:r,diagnoses:t[r]});s.errors?.forEach(a=>e.push(a)),e.length||(a+=s.saved)}}return n&&!e.length&&u.Z.emit("data_changed","copy_scripts"),{copied:a,success:!e.length,errors:e.length?e:void 0}}catch(e){return l.Z.error("copyDiagnoses ERROR",e.message),{errors:[e.message],success:!1,copied:a}}}(0,K.h)([$,Z,_,N,q,C,x,W,X,F,Y,H,z,ee,et,es,en,ed,eo,el,eu,eg,ep,em,ey]),(0,r.j)("b0e2bf2554e54768fc6f24635fe4bc07e77d9f58",$),(0,r.j)("c2b48608ec23aebd27f2da7897d06e65264000bb",Z),(0,r.j)("e7f61782276694299806a7a5bab49181b93d5430",_),(0,r.j)("b8cfef6bc380c58cd1013bbe45ea227f67b7016e",N),(0,r.j)("fcebab7489fd62a2ca3357fd3e0b02e669c47e50",q),(0,r.j)("02744e6953a4041d59ac09f5b59784e6ee0cd5e7",C),(0,r.j)("95d9f5454bc60e4e15bae23246f9d5fb5c967d72",x),(0,r.j)("49041aeb749c5252590bb5bddc315863ff210886",W),(0,r.j)("f672a0e3bdc49e0f820f8ff2c14858f120a6c462",X),(0,r.j)("52d050911e508f61004c7e35c75243ae466e3bae",F),(0,r.j)("1217b3e46b65c529de7ea5eb83efb75515abdf98",Y),(0,r.j)("436b5e294e22c32b06c85cf0959bff5c8a84ed50",H),(0,r.j)("62d4af3740d2241294a4c89403a3b03a799d3690",z),(0,r.j)("22e0b54ba70667093990e72bc73af45ac5bf78f7",ee),(0,r.j)("f52f8af6a9a9258cd32c2305e9ef78ad4f134547",et),(0,r.j)("3d6112203302948b6016e5757ed1b3adf94b1e4d",es),(0,r.j)("ef08c238c7b5013b4e4531edbc890b5c468581ba",en),(0,r.j)("1db7dbb0154628c1042c4a352bffd0b09bd00a61",ed),(0,r.j)("b4c8ee61c14c214a3d17fbcda5965833b004ebad",eo),(0,r.j)("a1d4f41d0dd8db4d752e224814a53f96540a9978",el),(0,r.j)("d14d5303e48ac4bc8b7f03fd4d24c96e5fd532ed",eu),(0,r.j)("d9ccf67b67fa133a4197ca7c24f9e6f998293ae6",eg),(0,r.j)("745afadac7701fade1cd0954e061875c47501460",ep),(0,r.j)("cad028c15ef4b3301bb969b1538a7119da8a0d49",em),(0,r.j)("6e98f8f67b1e2dff4cd884860c611688bff8b990",ey)},59271:(e,a,t)=>{t.d(a,{U:()=>s});var r=t(24263);async function s(e){let a=e.baseURL,t=e.apiKey;if(!a)throw Error("MISSING: link");if(!t)throw Error("MISSING: apiKey");let s=r.Z.create({baseURL:a});return s.interceptors.request.use(async e=>(e.headers&&(e.headers["x-api-key"]=t),e)),s.interceptors.response.use(e=>e,e=>new Promise((a,t)=>t(e))),s}},44380:(e,a,t)=>{function r(e=""){let a=process.env.NEXT_PUBLIC_APP_URL||"";return"/"===a.substring(a.length-1,a.length)&&(a=a.substring(0,a.length-1)),"/"===e[0]&&(e=e.substring(1,e.length)),[a,e].filter(e=>e).join("/")}function s(e=""){try{return new URL(e),!0}catch(e){return!1}}t.d(a,{TI:()=>r,jv:()=>s})}};