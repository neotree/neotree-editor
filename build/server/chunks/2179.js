"use strict";exports.id=2179,exports.ids=[2179],exports.modules={82179:(e,s,i)=>{i.d(s,{A:()=>C});var a=i(10326),t=i(17577),r=i(35047),n=i(15491),l=i(47463),o=i(2165),d=i(7890),u=i(34474),g=i(81646),m=i(53313),c=i(90772),h=i(54432),y=i(87673),x=i(31048),f=i(11870),v=i(75172),b=i(58464),p=i(46670),j=i(79131),N=i(51605);let F=[{value:"drug",label:"Drug"},{value:"fluid",label:"Fluid"}],k=(e,s="drug")=>({itemId:`${e?.itemId||(0,l.Z)()}`,type:`${e?.type||s}`,key:`${e?.key||""}`,keyId:`${e?.keyId||""}`,drug:`${e?.drug||""}`,minGestation:`${e?.minGestation===null?"":e?.minGestation}`,maxGestation:`${e?.maxGestation===null?"":e?.maxGestation}`,minWeight:`${e?.minWeight===null?"":e?.minWeight}`,maxWeight:`${e?.maxWeight===null?"":e?.maxWeight}`,minAge:`${e?.minAge===null?"":e?.minAge}`,maxAge:`${e?.maxAge===null?"":e?.maxAge}`,dosage:`${e?.dosage===null?"":e?.dosage}`,dosageMultiplier:`${e?.dosageMultiplier===null?"":e?.dosageMultiplier}`,hourlyFeed:`${e?.hourlyFeed===null?"":e?.hourlyFeed}`,hourlyFeedDivider:`${e?.hourlyFeedDivider===null?"":e?.hourlyFeedDivider}`,dayOfLife:`${e?.dayOfLife||""}`,dosageText:`${e?.dosageText||""}`,managementText:`${e?.managementText||""}`,gestationKey:`${e?.gestationKey||""}`,weightKey:`${e?.weightKey||""}`,diagnosisKey:`${e?.diagnosisKey||""}`,gestationKeyId:`${e?.gestationKeyId||""}`,weightKeyId:`${e?.weightKeyId||""}`,diagnosisKeyId:`${e?.diagnosisKeyId||""}`,condition:`${e?.condition||""}`,administrationFrequency:`${e?.administrationFrequency||""}`,drugUnit:`${e?.drugUnit||""}`,routeOfAdministration:`${e?.routeOfAdministration||""}`,ageKey:`${e?.ageKey||""}`,ageKeyId:`${e?.ageKeyId||""}`,validationType:`${e?.validationType||"default"}`});function C({disabled:e,item:s,floating:i,onChange:l}){let C=(0,N.v)({isDraft:!!s?.isDraft,userId:s?.draftCreatedByUserId});e=e||C;let w=(0,r.useRouter)(),A=(0,r.useSearchParams)(),I=(0,t.useMemo)(()=>n.Z.parse(A.toString()),[A]),{itemId:K,addItem:$}=I,[D,G]=(0,o.Z)(),[W,T]=(0,o.Z)(),[S,_]=(0,t.useState)(!1),[M,L]=(0,t.useState)(k(s,$)),{keys:q,loading:Z}=(0,v.a)(),{confirm:E}=(0,p.t)(),O=(0,t.useCallback)(()=>{let e=()=>{l({...M,minWeight:M.minWeight?Number(M.minWeight):null,maxWeight:M.maxWeight?Number(M.maxWeight):null,minGestation:M.minGestation?Number(M.minGestation):null,maxGestation:M.maxGestation?Number(M.maxGestation):null,hourlyFeed:M.hourlyFeed?Number(M.hourlyFeed):null,hourlyFeedDivider:M.hourlyFeedDivider?Number(M.hourlyFeedDivider):null,minAge:M.minAge?Number(M.minAge):null,maxAge:M.maxAge?Number(M.maxAge):null,dosage:M.dosage?Number(M.dosage):null,dosageMultiplier:M.dosageMultiplier?Number(M.dosageMultiplier):null,type:M.type}),_(!1)};s&&M.key!==s?.key?E(e,{danger:!0,title:"Confirm key change",message:`
                    <p class="text-xl">Are you sure you want to change key?</p>
                    <p>All references to the old key (${s.key}) will also be updated to: ${M.key}</p>
                `,positiveLabel:"Yes, keep changes",negativeLabel:"No, do not save"}):e()},[M,s,l]),U=(0,t.useCallback)(()=>{_(!1),L(k(void 0,$)),w.push(`?${n.Z.stringify({...I,itemId:void 0,addItem:void 0})}`);let e=G?.top||0;setTimeout(()=>window.scrollTo({top:e}),500)},[I,G,w.push]),{isFormComplete:R,isDrug:B,isFluid:P,validateWithCondition:Q}=(0,t.useMemo)(()=>{let e="drug"===M.type,s="fluid"===M.type,i="condition"===M.validationType,a=!!(M.type&&M.key&&M.drug&&M.managementText&&M.dosageText&&M.administrationFrequency&&M.drugUnit&&M.routeOfAdministration&&M.dosage&&i?M.condition:M.weightKey&&M.minWeight&&M.maxWeight&&M.gestationKey&&M.minGestation&&M.maxGestation&&M.ageKey&&M.minAge&&M.maxAge&&Number(M.minGestation||"0")<=Number(M.maxGestation||"0")&&Number(M.minWeight||"0")<=Number(M.maxWeight||"0")&&Number(M.minAge||"0")<=Number(M.maxAge||"0")&&(!e||M.diagnosisKey)&&(!s||M.condition&&M.hourlyFeed&&M.hourlyFeedDivider&&Number(M.hourlyFeed||"0")<=Number(M.hourlyFeed||"0")&&Number(M.hourlyFeedDivider||"0")<=Number(M.hourlyFeedDivider||"0")));return{isDrug:e,isFluid:s,isFormComplete:a,validateWithCondition:i}},[M,$]),z=(0,t.useCallback)(()=>!R||Z||e,[R,Z,e]),H=(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"type",children:"Type *"}),(0,a.jsxs)(u.Ph,{value:M.type,required:!0,name:"type",disabled:e,onValueChange:e=>{let i=k(s?.type===e?s:void 0,$);E(()=>L(s=>({...s,type:e,hourlyFeed:i.hourlyFeed,hourlyFeedDivider:i.hourlyFeedDivider,condition:i.condition,diagnosisKey:i.diagnosisKey,drugUnit:i.drugUnit})),{danger:!0,title:"Confirm type change",message:`
                                <p class="text-xl">Are you sure you want to change type?</p>
                                <ol style="list-style:auto;margin:10px;">
                                    <li>Some fields will be cleared as they do not apply on all types!</li>
                                    <li>All references to this ${M.type} will be removed.</li>
                                </ol>
                            `,positiveLabel:"Yes, change type",negativeLabel:"No, keep the current type"})},children:[a.jsx(u.i4,{children:a.jsx(u.ki,{placeholder:"Select type"})}),a.jsx(u.Bw,{children:a.jsx(u.DI,{children:F.map(e=>a.jsx(u.Ql,{value:e.value,children:e.label},e.value))})})]})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"key",children:"Key *"}),a.jsx(h.I,{name:"key",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.key,disabled:e,onChange:e=>L(s=>({...s,key:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"drug",children:[(0,j.Z)(M.type)," *"]}),a.jsx(h.I,{name:"drug",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.drug,disabled:e,onChange:e=>L(s=>({...s,drug:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"condition",children:["Condition ",Q?"*":""]}),a.jsx(y.g,{rows:3,name:"condition",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.condition,disabled:e,onChange:e=>L(s=>({...s,condition:e.target.value}))}),(0,a.jsxs)("span",{className:"font-bold opacity-50 text-xs",children:["e.g ",b._S]})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(m.X,{name:"validationType",id:"validationType",disabled:e,checked:"condition"===M.validationType,onCheckedChange:e=>L(e=>({...e,validationType:"condition"===e.validationType?"default":"condition"}))}),a.jsx(x._,{secondary:!0,htmlFor:"validationType",children:"Validate with conditional expression only"})]}),B&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"diagnosisKey",children:["Diagnosis Key ",Q?"":"*"]}),a.jsx(y.g,{rows:3,name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.diagnosisKey,disabled:e,onChange:e=>L(s=>({...s,diagnosisKey:e.target.value}))}),a.jsx("span",{className:"font-bold opacity-50 text-xs",children:"e.g NSep,Premature,Dehyd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"gestationKey",children:["Gestation Key ",Q?"":"*"]}),a.jsx(g.L,{modal:!0,value:`${M.gestationKey||""}`,disabled:e,onChange:([e])=>{L(s=>({...s,gestationKey:e.name,gestationKeyId:e?.uniqueKey}))}})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"minGestation",children:["Min Gestation (weeks) ",Q?"":"*"]}),a.jsx(h.I,{name:"minGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.minGestation,type:"number",disabled:e,onChange:e=>{let s=e.target.value,i=M.maxGestation;s||(i=""),L(e=>({...e,minGestation:s,maxGestation:i}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"maxGestation",error:Number(M.minGestation||"0")>Number(M.maxGestation||"0"),children:["Max Gestation (weeks) ",Q?"":"*"]}),a.jsx(h.I,{name:"maxGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.maxGestation,type:"number",disabled:e||!M.minGestation,min:M.minGestation,error:Number(M.minGestation||"0")>Number(M.maxGestation||"0"),onChange:e=>L(s=>({...s,maxGestation:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"weightKey",children:["Weight Key ",Q?"":"*"]}),a.jsx(g.L,{modal:!0,value:`${M.weightKey||""}`,disabled:e,onChange:([e])=>{L(s=>({...s,weightKey:e.name,weightKeyId:e?.uniqueKey}))}})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"minWeight",children:["Min Weight (grams) ",Q?"":"*"]}),a.jsx(h.I,{name:"minWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.minWeight,type:"number",disabled:e,onChange:e=>{let s=e.target.value,i=M.maxWeight;s||(i=""),L(e=>({...e,minWeight:s,maxWeight:i}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"maxWeight",error:Number(M.minWeight||"0")>Number(M.maxWeight||"0"),children:["Max Weight (grams) ",Q?"":"*"]}),a.jsx(h.I,{name:"maxWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.maxWeight,type:"number",disabled:e||!M.minWeight,min:M.minWeight,error:Number(M.minWeight||"0")>Number(M.maxWeight||"0"),onChange:e=>L(s=>({...s,maxWeight:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"ageKey",children:["Day of Life (Age) Key ",Q?"":"*"]}),a.jsx(g.L,{modal:!0,value:`${M.ageKey||""}`,disabled:e,onChange:([e])=>{L(s=>({...s,ageKey:e.name,ageKeyId:e?.uniqueKey}))}})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"minAge",children:["Min Day of Life (Age - hours) ",Q?"":"*"]}),a.jsx(h.I,{name:"minAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.minAge,type:"number",disabled:e,onChange:e=>{let s=e.target.value,i=M.maxAge;s||(i=""),L(e=>({...e,minAge:s,maxAge:i}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"maxAge",error:Number(M.minAge||"0")>Number(M.maxAge||"0"),children:["Max Day of Life (Age - hours) ",Q?"":"*"]}),a.jsx(h.I,{name:"maxAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.maxAge,type:"number",disabled:e||!M.minAge,min:M.minAge,error:Number(M.minAge||"0")>Number(M.maxAge||"0"),onChange:e=>L(s=>({...s,maxAge:e.target.value}))})]})]}),P&&a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(x._,{secondary:!0,htmlFor:"hourlyFeed",children:"Hourly feed *"}),a.jsx(h.I,{name:"hourlyFeed",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.hourlyFeed,type:"number",disabled:e,onChange:e=>L(s=>({...s,hourlyFeed:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(x._,{secondary:!0,htmlFor:"hourlyFeedDivider",children:"Hourly feed divider *"}),a.jsx(h.I,{name:"hourlyFeedDivider",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.hourlyFeedDivider,type:"number",disabled:e,onChange:e=>L(s=>({...s,hourlyFeedDivider:e.target.value}))})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x._,{secondary:!0,htmlFor:"dosage",children:["Dose (e.g. ",P?"ml/kg/24hrs":"mg/kg",") *"]}),a.jsx(h.I,{name:"dosage",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.dosage,disabled:e,onChange:e=>L(s=>({...s,dosage:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"dosageMultiplier",children:"Drug Dose Multiplier *"}),a.jsx(h.I,{name:"dosageMultiplier",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.dosageMultiplier,disabled:e,onChange:e=>L(s=>({...s,dosageMultiplier:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"drugUnit",children:"Drug Unit *"}),a.jsx(h.I,{name:"drugUnit",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.drugUnit,disabled:e,onChange:e=>L(s=>({...s,drugUnit:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"administrationFrequency",children:"Administration Frequency *"}),a.jsx(h.I,{name:"administrationFrequency",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.administrationFrequency,disabled:e,onChange:e=>L(s=>({...s,administrationFrequency:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"routeOfAdministration",children:"Route of Administration *"}),a.jsx(h.I,{name:"routeOfAdministration",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.routeOfAdministration,disabled:e,onChange:e=>L(s=>({...s,routeOfAdministration:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"managementText",children:"Management text *"}),a.jsx(h.I,{name:"managementText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.managementText,disabled:e,onChange:e=>L(s=>({...s,managementText:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(x._,{secondary:!0,htmlFor:"weight",children:"Dosage text *"}),a.jsx(h.I,{name:"dosageText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:M.dosageText,disabled:e,onChange:e=>L(s=>({...s,dosageText:e.target.value}))})]})]});return(0,a.jsxs)(a.Fragment,{children:[Z&&a.jsx(f.a,{overlay:!0}),a.jsx("div",{ref:D,children:!1===i?H:a.jsx(d.yo,{open:S,onOpenChange:e=>{e||U()},children:(0,a.jsxs)(d.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col w-full max-w-full sm:max-w-[80%] md:max-w-[80%] lg:max-w-[50%]",children:[(0,a.jsxs)(d.Tu,{className:"flex flex-row items-center py-2 px-4 border-b border-b-border text-left sm:text-left",children:[(0,a.jsxs)(d.bC,{children:[$?"Add":"",K?"Edit":""," ",s?.type||$]}),a.jsx(d.Ei,{className:"hidden"})]}),a.jsx("div",{ref:W,className:"flex-1 py-2 px-0 overflow-y-auto",children:a.jsx("div",{className:"px-4",children:H})}),(0,a.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex gap-x-2",children:[a.jsx("span",{className:"text-danger text-xs my-auto",children:"* Required"}),a.jsx("div",{className:"ml-auto"}),a.jsx(d.sw,{asChild:!0,children:a.jsx(c.z,{variant:"ghost",onClick:()=>{},children:"Cancel"})}),a.jsx(c.z,{onClick:()=>O(),disabled:z(),children:"Save"})]})]})})})]})}},75172:(e,s,i)=>{i.d(s,{a:()=>g});var a=i(17577),t=i(35047),r=i(15491),n=i(44099),l=i(60114),o=i(96221);i(63697);let d={initialised:!1,loading:!1,keys:[],drugs:[],searchQuery:"",typeFilter:"",statusFilter:"",sortBy:"name-asc"},u=(0,l.Ue)(e=>d);function g(){let e=u(),{drugs:s,searchQuery:i,typeFilter:l,statusFilter:g,sortBy:m}=e,c=(0,t.useRouter)(),h=(0,t.useSearchParams)(),y=(0,a.useMemo)(()=>r.Z.parse(h.toString()),[h]),{itemId:x}=y,f=(0,a.useMemo)(()=>s.filter(e=>e.itemId===x||e.key===x)[0]?.itemId,[x,s]),{alert:v}=(0,o.s)(),b=(0,a.useCallback)(()=>{let e=[],a=s.map(e=>[e.drug||"",e.type||"",e.key||"",e.dosageText||"",e.itemId]),t=[...a=a.filter((a,t)=>{let r=s[t],n=!0;if(i){let e=i.toLowerCase(),s=[r.drug,r.type,r.key,r.dosageText].join(" ").toLowerCase();n=n&&s.includes(e)}return l&&"all"!==l&&(n=n&&r.type?.toLowerCase()===l.toLowerCase()),g&&"all"!==g&&("draft"===g?n=n&&!0===r.isDraft:"published"===g&&(n=n&&!r.isDraft)),n&&e.push(s[t]),n})],r=[...e],n=t.map((e,s)=>({row:e,drug:r[s]}));switch(m){case"name-asc":n.sort((e,s)=>(e.drug.drug||"").localeCompare(s.drug.drug||""));break;case"name-desc":n.sort((e,s)=>(s.drug.drug||"").localeCompare(e.drug.drug||""));break;case"type-asc":n.sort((e,s)=>(e.drug.type||"").localeCompare(s.drug.type||""));break;case"type-desc":n.sort((e,s)=>(s.drug.type||"").localeCompare(e.drug.type||""));break;case"key-asc":n.sort((e,s)=>(e.drug.key||"").localeCompare(s.drug.key||""));break;case"key-desc":n.sort((e,s)=>(s.drug.key||"").localeCompare(e.drug.key||""))}return{tableData:n.map(e=>e.row),filteredDrugs:n.map(e=>e.drug)}},[s,i,l,g,m]),{tableData:p,filteredDrugs:j}=(0,a.useMemo)(()=>b(),[b]),N=(0,a.useCallback)(async()=>{try{u.setState({loading:!0});let e=await n.Z.get("/api/drugs-library?data="+JSON.stringify({returnDraftsIfExist:!0}));if(e.data.errors?.length)throw Error(e.data.errors?.join(", "));u.setState({drugs:e.data.data})}catch(e){v({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[v]);!function({events:e}){(0,a.useMemo)(()=>e,[e]),(0,a.useRef)({eventsTimeouts:{},eventsTimestamps:{}}),(0,a.useRef)(new Date().getTime()),(0,t.useRouter)()}({events:[{name:"data_changed",onEvent:{callback:async()=>{await N(),c.refresh()}}}]});let F=(0,a.useCallback)(async e=>{try{u.setState(s=>({loading:!0,drugs:s.drugs.filter(s=>!e.includes(s.itemId))}));let s=await n.Z.delete("/api/drugs-library?data="+JSON.stringify({itemsIds:e}));if(s.data.errors?.length)throw Error(s.data.errors?.join(", "));c.refresh(),v({title:"",message:"Drug deleted successfully!",variant:"success"})}catch(e){v({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[v,c.refresh]),k=(0,a.useCallback)(async e=>{try{u.setState({loading:!0});let i=[],a=[],t=s;u.setState(s=>(t=!f&&e?[...s.drugs,e]:s.drugs.map(s=>s.itemId!==e?.itemId?s:(e&&(s.key!==e.key&&a.push({old:s.key,new:e.key}),s.type!==e.type&&i.push(s.key)),{...s,...e})),{loading:!0,drugs:t}));let r={data:e?[e]:t,broadcastAction:!0},l=await n.Z.post("/api/drugs-library/save",r);if(l.data.errors?.length)throw Error(l.data.errors?.join(", "));await N(),c.refresh(),v({title:"",message:`Drug${e?"":"s"} saved successfully!`,variant:"success"})}catch(e){v({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[s,f,c.refresh]),C=(0,a.useCallback)(async e=>{try{u.setState({loading:!0});let s={data:e.map(e=>({itemId:e})),broadcastAction:!0},i=await n.Z.post("/api/drugs-library/copy",s);if(i.data.errors?.length)throw Error(i.data.errors?.join(", "));await N(),c.refresh(),v({title:"",message:`Drug${e.length<2?"":"s"} copied successfully!`,variant:"success"})}catch(e){v({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[c.refresh]);(0,a.useCallback)(()=>{u.setState(d)},[]);let w=(0,a.useCallback)(e=>{u.setState({searchQuery:e})},[]),A=(0,a.useCallback)(e=>{u.setState({typeFilter:e})},[]),I=(0,a.useCallback)(e=>{u.setState({statusFilter:e})},[]),K=(0,a.useCallback)(e=>{u.setState({sortBy:e})},[]);return{...e,filteredDrugs:j,tableData:p,selectedItemId:f,addLink:e=>`?${r.Z.stringify({...y,addItem:e})}`,editLink:e=>`?${r.Z.stringify({...y,itemId:e})}`,getDrugs:N,deleteDrugs:F,saveDrugs:k,copyDrugs:C,setSearchQuery:w,setTypeFilter:A,setStatusFilter:I,setSortBy:K}}}};