"use strict";exports.id=2179,exports.ids=[2179],exports.modules={82179:(e,i,s)=>{s.d(i,{A:()=>A});var a=s(10326),t=s(17577),r=s(35047),l=s(15491),n=s(47463),o=s(2165),d=s(7890),u=s(34474),c=s(81646),m=s(53313),g=s(90772),h=s(54432),x=s(87673),y=s(31048),v=s(11870),f=s(75172),b=s(58464),p=s(46670),j=s(79131);let N=[{value:"drug",label:"Drug"},{value:"fluid",label:"Fluid"}],F=(e,i="drug")=>({itemId:`${e?.itemId||(0,n.Z)()}`,type:`${e?.type||i}`,key:`${e?.key||""}`,keyId:`${e?.keyId||""}`,drug:`${e?.drug||""}`,minGestation:`${e?.minGestation===null?"":e?.minGestation}`,maxGestation:`${e?.maxGestation===null?"":e?.maxGestation}`,minWeight:`${e?.minWeight===null?"":e?.minWeight}`,maxWeight:`${e?.maxWeight===null?"":e?.maxWeight}`,minAge:`${e?.minAge===null?"":e?.minAge}`,maxAge:`${e?.maxAge===null?"":e?.maxAge}`,dosage:`${e?.dosage===null?"":e?.dosage}`,dosageMultiplier:`${e?.dosageMultiplier===null?"":e?.dosageMultiplier}`,hourlyFeed:`${e?.hourlyFeed===null?"":e?.hourlyFeed}`,hourlyFeedDivider:`${e?.hourlyFeedDivider===null?"":e?.hourlyFeedDivider}`,dayOfLife:`${e?.dayOfLife||""}`,dosageText:`${e?.dosageText||""}`,managementText:`${e?.managementText||""}`,gestationKey:`${e?.gestationKey||""}`,weightKey:`${e?.weightKey||""}`,diagnosisKey:`${e?.diagnosisKey||""}`,condition:`${e?.condition||""}`,administrationFrequency:`${e?.administrationFrequency||""}`,drugUnit:`${e?.drugUnit||""}`,routeOfAdministration:`${e?.routeOfAdministration||""}`,ageKey:`${e?.ageKey||""}`,validationType:`${e?.validationType||"default"}`});function A({disabled:e,item:i,floating:s,onChange:n}){let A=(0,r.useRouter)(),C=(0,r.useSearchParams)(),w=(0,t.useMemo)(()=>l.Z.parse(C.toString()),[C]),{itemId:k,addItem:$}=w,[I,G]=(0,o.Z)(),[S,K]=(0,o.Z)(),[W,D]=(0,t.useState)(!1),[T,_]=(0,t.useState)(F(i,$)),{keys:M,loading:L}=(0,f.a)(),{confirm:Z}=(0,p.t)(),O=(0,t.useCallback)(()=>{let e=()=>{n({...T,minWeight:T.minWeight?Number(T.minWeight):null,maxWeight:T.maxWeight?Number(T.maxWeight):null,minGestation:T.minGestation?Number(T.minGestation):null,maxGestation:T.maxGestation?Number(T.maxGestation):null,hourlyFeed:T.hourlyFeed?Number(T.hourlyFeed):null,hourlyFeedDivider:T.hourlyFeedDivider?Number(T.hourlyFeedDivider):null,minAge:T.minAge?Number(T.minAge):null,maxAge:T.maxAge?Number(T.maxAge):null,dosage:T.dosage?Number(T.dosage):null,dosageMultiplier:T.dosageMultiplier?Number(T.dosageMultiplier):null,type:T.type}),D(!1)};i&&T.key!==i?.key?Z(e,{danger:!0,title:"Confirm key change",message:`
                    <p class="text-xl">Are you sure you want to change key?</p>
                    <p>All references to the old key (${i.key}) will also be updated to: ${T.key}</p>
                `,positiveLabel:"Yes, keep changes",negativeLabel:"No, do not save"}):e()},[T,i,n]),q=(0,t.useCallback)(()=>{D(!1),_(F(void 0,$)),A.push(`?${l.Z.stringify({...w,itemId:void 0,addItem:void 0})}`);let e=G?.top||0;setTimeout(()=>window.scrollTo({top:e}),500)},[w,G,A.push]),{isFormComplete:E,isDrug:U,isFluid:z,validateWithCondition:R}=(0,t.useMemo)(()=>{let e="drug"===T.type,i="fluid"===T.type,s="condition"===T.validationType,a=!!(T.type&&T.key&&T.drug&&T.managementText&&T.dosageText&&T.administrationFrequency&&T.drugUnit&&T.routeOfAdministration&&T.dosage&&s?T.condition:T.weightKey&&T.minWeight&&T.maxWeight&&T.gestationKey&&T.minGestation&&T.maxGestation&&T.ageKey&&T.minAge&&T.maxAge&&Number(T.minGestation||"0")<=Number(T.maxGestation||"0")&&Number(T.minWeight||"0")<=Number(T.maxWeight||"0")&&Number(T.minAge||"0")<=Number(T.maxAge||"0")&&(!e||T.diagnosisKey)&&(!i||T.condition&&T.hourlyFeed&&T.hourlyFeedDivider&&Number(T.hourlyFeed||"0")<=Number(T.hourlyFeed||"0")&&Number(T.hourlyFeedDivider||"0")<=Number(T.hourlyFeedDivider||"0")));return{isDrug:e,isFluid:i,isFormComplete:a,validateWithCondition:s}},[T,$]),V=(0,t.useCallback)(()=>!E||L||e,[E,L,e]),B=(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"type",children:"Type *"}),(0,a.jsxs)(u.Ph,{value:T.type,required:!0,name:"type",disabled:e,onValueChange:e=>{let s=F(i?.type===e?i:void 0,$);Z(()=>_(i=>({...i,type:e,hourlyFeed:s.hourlyFeed,hourlyFeedDivider:s.hourlyFeedDivider,condition:s.condition,diagnosisKey:s.diagnosisKey,drugUnit:s.drugUnit})),{danger:!0,title:"Confirm type change",message:`
                                <p class="text-xl">Are you sure you want to change type?</p>
                                <ol style="list-style:auto;margin:10px;">
                                    <li>Some fields will be cleared as they do not apply on all types!</li>
                                    <li>All references to this ${T.type} will be removed.</li>
                                </ol>
                            `,positiveLabel:"Yes, change type",negativeLabel:"No, keep the current type"})},children:[a.jsx(u.i4,{children:a.jsx(u.ki,{placeholder:"Select type"})}),a.jsx(u.Bw,{children:a.jsx(u.DI,{children:N.map(e=>a.jsx(u.Ql,{value:e.value,children:e.label},e.value))})})]})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"key",children:"Key *"}),a.jsx(c.L,{modal:!0,value:`${T.key||""}`,disabled:e,onChange:([e])=>{_(i=>({...i,key:e.name,drug:e.label,keyId:e?.uniqueKey}))}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"drug",children:[(0,j.Z)(T.type)," *"]}),a.jsx(h.I,{name:"drug",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.drug,disabled:e,onChange:e=>_(i=>({...i,drug:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"condition",children:["Condition ",R?"*":""]}),a.jsx(x.g,{rows:3,name:"condition",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.condition,disabled:e,onChange:e=>_(i=>({...i,condition:e.target.value}))}),(0,a.jsxs)("span",{className:"font-bold opacity-50 text-xs",children:["e.g ",b._S]})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(m.X,{name:"validationType",id:"validationType",disabled:e,checked:"condition"===T.validationType,onCheckedChange:e=>_(e=>({...e,validationType:"condition"===e.validationType?"default":"condition"}))}),a.jsx(y._,{secondary:!0,htmlFor:"validationType",children:"Validate with conditional expression only"})]}),U&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"diagnosisKey",children:["Diagnosis Key ",R?"":"*"]}),a.jsx(x.g,{rows:3,name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.diagnosisKey,disabled:e,onChange:e=>_(i=>({...i,diagnosisKey:e.target.value}))}),a.jsx("span",{className:"font-bold opacity-50 text-xs",children:"e.g NSep,Premature,Dehyd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"gestationKey",children:["Gestation Key ",R?"":"*"]}),a.jsx(h.I,{name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.gestationKey,disabled:e,onChange:e=>_(i=>({...i,gestationKey:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"minGestation",children:["Min Gestation (weeks) ",R?"":"*"]}),a.jsx(h.I,{name:"minGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.minGestation,type:"number",disabled:e,onChange:e=>{let i=e.target.value,s=T.maxGestation;i||(s=""),_(e=>({...e,minGestation:i,maxGestation:s}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"maxGestation",error:Number(T.minGestation||"0")>Number(T.maxGestation||"0"),children:["Max Gestation (weeks) ",R?"":"*"]}),a.jsx(h.I,{name:"maxGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.maxGestation,type:"number",disabled:e||!T.minGestation,min:T.minGestation,error:Number(T.minGestation||"0")>Number(T.maxGestation||"0"),onChange:e=>_(i=>({...i,maxGestation:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"weightKey",children:["Weight Key ",R?"":"*"]}),a.jsx(h.I,{name:"weightKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.weightKey,disabled:e,onChange:e=>_(i=>({...i,weightKey:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"minWeight",children:["Min Weight (grams) ",R?"":"*"]}),a.jsx(h.I,{name:"minWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.minWeight,type:"number",disabled:e,onChange:e=>{let i=e.target.value,s=T.maxWeight;i||(s=""),_(e=>({...e,minWeight:i,maxWeight:s}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"maxWeight",error:Number(T.minWeight||"0")>Number(T.maxWeight||"0"),children:["Max Weight (grams) ",R?"":"*"]}),a.jsx(h.I,{name:"maxWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.maxWeight,type:"number",disabled:e||!T.minWeight,min:T.minWeight,error:Number(T.minWeight||"0")>Number(T.maxWeight||"0"),onChange:e=>_(i=>({...i,maxWeight:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"ageKey",children:["Day of Life (Age) Key ",R?"":"*"]}),a.jsx(h.I,{name:"ageKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.ageKey,disabled:e,onChange:e=>_(i=>({...i,ageKey:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"minAge",children:["Min Day of Life (Age - hours) ",R?"":"*"]}),a.jsx(h.I,{name:"minAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.minAge,type:"number",disabled:e,onChange:e=>{let i=e.target.value,s=T.maxAge;i||(s=""),_(e=>({...e,minAge:i,maxAge:s}))}})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"maxAge",error:Number(T.minAge||"0")>Number(T.maxAge||"0"),children:["Max Day of Life (Age - hours) ",R?"":"*"]}),a.jsx(h.I,{name:"maxAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.maxAge,type:"number",disabled:e||!T.minAge,min:T.minAge,error:Number(T.minAge||"0")>Number(T.maxAge||"0"),onChange:e=>_(i=>({...i,maxAge:e.target.value}))})]})]}),z&&a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(y._,{secondary:!0,htmlFor:"hourlyFeed",children:"Hourly feed *"}),a.jsx(h.I,{name:"hourlyFeed",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.hourlyFeed,type:"number",disabled:e,onChange:e=>_(i=>({...i,hourlyFeed:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(y._,{secondary:!0,htmlFor:"hourlyFeedDivider",children:"Hourly feed divider *"}),a.jsx(h.I,{name:"hourlyFeedDivider",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.hourlyFeedDivider,type:"number",disabled:e,onChange:e=>_(i=>({...i,hourlyFeedDivider:e.target.value}))})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(y._,{secondary:!0,htmlFor:"dosage",children:["Dose (e.g. ",z?"ml/kg/24hrs":"mg/kg",") *"]}),a.jsx(h.I,{name:"dosage",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.dosage,disabled:e,onChange:e=>_(i=>({...i,dosage:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"dosageMultiplier",children:"Drug Dose Multiplier *"}),a.jsx(h.I,{name:"dosageMultiplier",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.dosageMultiplier,disabled:e,onChange:e=>_(i=>({...i,dosageMultiplier:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"drugUnit",children:"Drug Unit *"}),a.jsx(h.I,{name:"drugUnit",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.drugUnit,disabled:e,onChange:e=>_(i=>({...i,drugUnit:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"administrationFrequency",children:"Administration Frequency *"}),a.jsx(h.I,{name:"administrationFrequency",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.administrationFrequency,disabled:e,onChange:e=>_(i=>({...i,administrationFrequency:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"routeOfAdministration",children:"Route of Administration *"}),a.jsx(h.I,{name:"routeOfAdministration",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.routeOfAdministration,disabled:e,onChange:e=>_(i=>({...i,routeOfAdministration:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"managementText",children:"Management text *"}),a.jsx(h.I,{name:"managementText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.managementText,disabled:e,onChange:e=>_(i=>({...i,managementText:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx(y._,{secondary:!0,htmlFor:"weight",children:"Dosage text *"}),a.jsx(h.I,{name:"dosageText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:T.dosageText,disabled:e,onChange:e=>_(i=>({...i,dosageText:e.target.value}))})]})]});return(0,a.jsxs)(a.Fragment,{children:[L&&a.jsx(v.a,{overlay:!0}),a.jsx("div",{ref:I,children:!1===s?B:a.jsx(d.yo,{open:W,onOpenChange:e=>{e||q()},children:(0,a.jsxs)(d.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col w-full max-w-full sm:max-w-[80%] md:max-w-[80%] lg:max-w-[50%]",children:[(0,a.jsxs)(d.Tu,{className:"flex flex-row items-center py-2 px-4 border-b border-b-border text-left sm:text-left",children:[(0,a.jsxs)(d.bC,{children:[$?"Add":"",k?"Edit":""," ",i?.type||$]}),a.jsx(d.Ei,{className:"hidden"})]}),a.jsx("div",{ref:S,className:"flex-1 py-2 px-0 overflow-y-auto",children:a.jsx("div",{className:"px-4",children:B})}),(0,a.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex gap-x-2",children:[a.jsx("span",{className:"text-danger text-xs my-auto",children:"* Required"}),a.jsx("div",{className:"ml-auto"}),a.jsx(d.sw,{asChild:!0,children:a.jsx(g.z,{variant:"ghost",onClick:()=>{},children:"Cancel"})}),a.jsx(g.z,{onClick:()=>O(),disabled:V(),children:"Save"})]})]})})})]})}},81646:(e,i,s)=>{s.d(i,{L:()=>n});var a=s(10326),t=s(17577),r=s(18905),l=s(49596);function n({value:e,disabled:i,modal:s,multiple:n,placeholder:o,error:d,onChange:u,filterDataKeys:c}){let{dataKeys:m,extractDataKeys:g}=(0,l.M)(),h=(0,t.useMemo)(()=>m.filter(e=>!c||c(e)).map(e=>({label:e.name,value:e.uniqueKey,caption:e.dataType||"",description:e.label})),[m,c]);return a.jsx(a.Fragment,{children:a.jsx(r.V,{multiple:n,modal:s,error:d,placeholder:`${e||""}`||o||"Select key",search:{placeholder:"Search data keys"},options:h,onSelect:e=>{let i=g(e.map(e=>e.value)).map(e=>({...e,children:g(e.options)}));u?.(i)}})})}},18905:(e,i,s)=>{s.d(i,{V:()=>c});var a=s(10326),t=s(17577),r=s(47206),l=s(32933),n=s(90772),o=s(54432),d=s(62288),u=s(77863);function c({options:e,selected:i,...s}){i=Array.isArray(i)?i:i?[i]:[];let t=e.map(e=>({...e,value:`${e.value}`})),r=i.map(e=>`${e}`);if(!s.multiple){let[e]=Array.isArray(r)?r:[r];e&&t.find(i=>i.value===e)}return a.jsx(m,{...s,options:t,selected:r})}function m({modal:e,header:i,placeholder:s,search:c,multiple:m=!1,error:g=!1,disabled:h=!1,selected:x,options:y=[],trigger:v,onTrigger:f,onSelect:b}){let[p,j]=(0,t.useState)(""),N=function(e,i){let[s,a]=(0,t.useState)(e);return s}(p),[F,A]=(0,t.useState)([]),C=(0,t.useMemo)(()=>x?Array.isArray(x)?x.map(e=>y.find(i=>i?.value===e)).map(e=>e):y.filter(e=>e?.value===x)||[]:[],[x,y]),w=(0,t.useMemo)(()=>y.map(e=>{let i=C.map(e=>e?.value).map(e=>`${e||""}`).filter(e=>e).includes(`${e?.value}`);return i=i||F.includes(e.value),{...e,isSelected:i}}).sort((e,i)=>(e.disabled?1:0)-(i.disabled?1:0)).sort((e,i)=>{let s=e.isSelected?1:0;return(i.isSelected?1:0)-s}).filter(e=>JSON.stringify([e.value||"",e.label||"",e.description||""]).toLowerCase().match(N.toLowerCase())),[y,N,C,F]);return a.jsx(a.Fragment,{children:(0,a.jsxs)(d.Vq,{modal:e,onOpenChange:()=>{j(""),A([])},children:[a.jsx(d.hg,{asChild:!0,children:v||(0,a.jsxs)(n.z,{disabled:h,variant:"outline",className:(0,u.cn)("justify-between w-full",g&&"border border-destructive hover:bg-destructive/10"),onClick:f,children:[a.jsx("span",{className:C.length?"":"opacity-50",children:C[0]?.label||s||""}),a.jsx(r.Z,{className:"size-4 opacity-50"})]})}),(0,a.jsxs)(d.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,a.jsxs)(d.fK,{className:"border-b border-b-border px-4 py-4",children:[a.jsx(d.$N,{className:"hidden",children:""}),a.jsx(d.Be,{className:"hidden",children:""}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4",children:[c?a.jsx("div",{className:"flex-1",children:a.jsx(o.I,{type:"search",placeholder:c.placeholder||"",value:p,onChange:e=>j(e.target.value)})}):null,i]})]}),a.jsx("div",{className:"flex-1 flex flex-col gap-y-1 overflow-y-auto px-4 py-2 overflow-x-hidden",children:w.map(e=>{let i=m?"button":d.GG;return a.jsx(t.Fragment,{children:a.jsx(i,{onClick:()=>{e.disabled||(e.isSelected?m?A(i=>i.filter(i=>i!==e.value)):b?.(C.filter(i=>i.value!==e.value)):m?A(i=>[...i,e.value]):b?.([e]))},className:(0,u.cn)("flex flex-col gap-y-1 border border-border p-2 rounded-md items-start text-left",e.disabled?"opacity-50 cursor-not-allowed":"transition-colors hover:bg-primary/20",e.isSelected&&"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.isSelected?a.jsx(l.Z,{className:"size-4 mr-2"}):null,(0,a.jsxs)("div",{children:[e.caption?a.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.caption||""}}):null,a.jsx("p",{children:e.label}),e.description?a.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.description||""}}):null]})]})})},e.value)})}),(0,a.jsxs)(d.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full gap-x-2",children:[a.jsx(d.GG,{asChild:!0,children:a.jsx(n.z,{variant:"ghost",children:"Close"})}),!!F.length&&a.jsx(d.GG,{asChild:!0,children:a.jsx(n.z,{onClick:()=>{b?.(F.map(e=>w.find(i=>i.value===e)).filter(e=>e))},children:"Save"})})]})]})]})})}},75172:(e,i,s)=>{s.d(i,{a:()=>c});var a=s(17577),t=s(35047),r=s(15491),l=s(44099),n=s(60114),o=s(96221);s(63697);let d={initialised:!1,loading:!1,keys:[],drugs:[]},u=(0,n.Ue)(e=>d);function c(){let e=u(),{drugs:i}=e,s=(0,t.useRouter)(),n=(0,t.useSearchParams)(),c=(0,a.useMemo)(()=>r.Z.parse(n.toString()),[n]),{itemId:m}=c,g=(0,a.useMemo)(()=>i.filter(e=>e.itemId===m||e.key===m)[0]?.itemId,[m,i]),{alert:h}=(0,o.s)(),x=(0,a.useCallback)(async()=>{try{u.setState({loading:!0});let e=await l.Z.get("/api/drugs-library?data="+JSON.stringify({returnDraftsIfExist:!0}));if(e.data.errors?.length)throw Error(e.data.errors?.join(", "));u.setState({drugs:e.data.data})}catch(e){h({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[h]);!function({events:e}){(0,a.useMemo)(()=>e,[e]),(0,a.useRef)({eventsTimeouts:{},eventsTimestamps:{}}),(0,a.useRef)(new Date().getTime()),(0,t.useRouter)()}({events:[{name:"data_changed",onEvent:{callback:async()=>{await x(),s.refresh()}}}]});let y=(0,a.useCallback)(async e=>{try{u.setState(i=>({loading:!0,drugs:i.drugs.filter(i=>!e.includes(i.itemId))}));let i=await l.Z.delete("/api/drugs-library?data="+JSON.stringify({itemsIds:e}));if(i.data.errors?.length)throw Error(i.data.errors?.join(", "));s.refresh(),h({title:"",message:"Drug deleted successfully!",variant:"success"})}catch(e){h({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[h,s.refresh]),v=(0,a.useCallback)(async e=>{try{u.setState({loading:!0});let a=[],t=[],r=i;u.setState(i=>(r=!g&&e?[...i.drugs,e]:i.drugs.map(i=>i.itemId!==e?.itemId?i:(e&&(i.key!==e.key&&t.push({old:i.key,new:e.key}),i.type!==e.type&&a.push(i.key)),{...i,...e})),{loading:!0,drugs:r}));let n={data:e?[e]:r,broadcastAction:!0},o=await l.Z.post("/api/drugs-library/save",n);if(o.data.errors?.length)throw Error(o.data.errors?.join(", "));await x(),s.refresh(),h({title:"",message:`Drug${e?"":"s"} saved successfully!`,variant:"success"})}catch(e){h({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[i,g,s.refresh]),f=(0,a.useCallback)(async e=>{try{u.setState({loading:!0});let i={data:e.map(e=>({itemId:e})),broadcastAction:!0},a=await l.Z.post("/api/drugs-library/copy",i);if(a.data.errors?.length)throw Error(a.data.errors?.join(", "));await x(),s.refresh(),h({title:"",message:`Drug${e.length<2?"":"s"} copied successfully!`,variant:"success"})}catch(e){h({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[s.refresh]);return(0,a.useCallback)(()=>{u.setState(d)},[]),{...e,selectedItemId:g,addLink:e=>`?${r.Z.stringify({...c,addItem:e})}`,editLink:e=>`?${r.Z.stringify({...c,itemId:e})}`,getDrugs:x,deleteDrugs:y,saveDrugs:v,copyDrugs:f}}},79131:(e,i,s)=>{s.d(i,{Z:()=>a});let a=e=>`${e||""}`.charAt(0).toUpperCase()+`${e||""}`.slice(1)}};