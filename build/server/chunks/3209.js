exports.id=3209,exports.ids=[3209],exports.modules={65615:(e,t,a)=>{let l={"3753e7204934c26ff5afc7fac412906b9ec7c2cd":()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getSession),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getAuthenticatedUser),cf37b218c9ffd359e595d215859090895afe32a3:()=>Promise.resolve().then(a.bind(a,40801)).then(e=>e.getAuthenticatedUserWithRoles),"6397523a8f8672c5182495764c492b3a235cbcab":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.$$ACTION_1),"76f0b17712f4501d72b44a5049e045af2774269b":()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.getSys),d97e2a08525547477613111effde4792d4260225:()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.updateSys),e1c6930531e9485f362babf55d97916a1ad501cf:()=>Promise.resolve().then(a.bind(a,60563)).then(e=>e.$$ACTION_0),"5b32a18b5d68c0559bdc20224d166443def15579":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSites),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSitesWithoutConfidentialData),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.saveSites),cec02b7793208620ac58f5f16076922997e6559c:()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.$$ACTION_0),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:()=>Promise.resolve().then(a.bind(a,82065)).then(e=>e.getSite),b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:()=>Promise.resolve().then(a.bind(a,66267)).then(e=>e.canAccessPage),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:()=>Promise.resolve().then(a.bind(a,66267)).then(e=>e.isAllowed),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.discardDrafts),a51a2d6c6369fbe75939846346b95c575004df1d:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.$$ACTION_0),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.countAllDrafts),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.getEditorDetails),d7b5dfae0e5e175752e21d0929fede082af11157:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.revalidatePath),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.$$ACTION_1),ed96721a8cdb9e337ce13bba84ed504642533051:()=>Promise.resolve().then(a.bind(a,71271)).then(e=>e.publishData),"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.saveDataKeysUpdateIfExist),"18105b87f644f168cafbc747f8197c9d6b0856c9":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.saveDataKeysIfNotExist),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.saveDataKeys),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.$$ACTION_2),"7d2b1575988c8ba2208de85022e895402fc6d2b9":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.$$ACTION_0),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.getDataKeys),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.exportDataKeys),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:()=>Promise.resolve().then(a.bind(a,94136)).then(e=>e.$$ACTION_1)};async function d(e,...t){return(await l[e]()).apply(null,t)}e.exports={"3753e7204934c26ff5afc7fac412906b9ec7c2cd":d.bind(null,"3753e7204934c26ff5afc7fac412906b9ec7c2cd"),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":d.bind(null,"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025"),cf37b218c9ffd359e595d215859090895afe32a3:d.bind(null,"cf37b218c9ffd359e595d215859090895afe32a3"),"6397523a8f8672c5182495764c492b3a235cbcab":d.bind(null,"6397523a8f8672c5182495764c492b3a235cbcab"),"76f0b17712f4501d72b44a5049e045af2774269b":d.bind(null,"76f0b17712f4501d72b44a5049e045af2774269b"),d97e2a08525547477613111effde4792d4260225:d.bind(null,"d97e2a08525547477613111effde4792d4260225"),e1c6930531e9485f362babf55d97916a1ad501cf:d.bind(null,"e1c6930531e9485f362babf55d97916a1ad501cf"),"5b32a18b5d68c0559bdc20224d166443def15579":d.bind(null,"5b32a18b5d68c0559bdc20224d166443def15579"),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":d.bind(null,"62f755d2b4c846d8090cd4b57ab2767f1a077d36"),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":d.bind(null,"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c"),cec02b7793208620ac58f5f16076922997e6559c:d.bind(null,"cec02b7793208620ac58f5f16076922997e6559c"),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:d.bind(null,"ea9a3fcf74a0c423c844e980536ccc9ede1b166d"),b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:d.bind(null,"b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59"),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:d.bind(null,"c7db9b1ba0cab2a335eda35b61797bc9a5b816ba"),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:d.bind(null,"a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01"),a51a2d6c6369fbe75939846346b95c575004df1d:d.bind(null,"a51a2d6c6369fbe75939846346b95c575004df1d"),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:d.bind(null,"c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca"),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:d.bind(null,"cb9a2ec0d6364666ae991ca69a1ccc30f74a5220"),d7b5dfae0e5e175752e21d0929fede082af11157:d.bind(null,"d7b5dfae0e5e175752e21d0929fede082af11157"),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:d.bind(null,"e5fa07e4fdc4dcce863b886208c69a80b05c95d4"),ed96721a8cdb9e337ce13bba84ed504642533051:d.bind(null,"ed96721a8cdb9e337ce13bba84ed504642533051"),"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":d.bind(null,"0d39aaa823e839a6bfddf6a5ed21623edef0aec2"),"18105b87f644f168cafbc747f8197c9d6b0856c9":d.bind(null,"18105b87f644f168cafbc747f8197c9d6b0856c9"),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":d.bind(null,"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86"),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":d.bind(null,"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a"),"7d2b1575988c8ba2208de85022e895402fc6d2b9":d.bind(null,"7d2b1575988c8ba2208de85022e895402fc6d2b9"),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":d.bind(null,"948e22b55d8b846c9687619f6f7f74f3fc26b22d"),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:d.bind(null,"c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744"),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:d.bind(null,"e50183efb5391ac0e2bc1cb207a43a2f6847d6ed")}},32955:(e,t,a)=>{Promise.resolve().then(a.bind(a,10484))},35303:()=>{},10484:(e,t,a)=>{"use strict";a.d(t,{Content:()=>eR});var l=a(10326),d=a(33071),s=a(11870),n=a(90772),i=a(17577),r=a(94464),o=a(941),c=a(2165),u=a(25479),f=a(1095),p=a(68452),_=a(43360),m=a(85121),y=a(81193),N=a(93931),b=a(11426),h=a(23051),I=a(41872),g=a(36304),x=a(29606),v=a(6263),j=a(12207),w=a(47463),A=a(58464);let L=(0,m.af)("nt_data_keys",{id:(0,y.eP)("id").primaryKey(),uuid:(0,N.Vj)("uuid").notNull().unique().default((0,f.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),uniqueKey:(0,N.Vj)("unique_key").notNull().unique().default((0,f.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,b.fL)("name").notNull(),label:(0,b.fL)("label").default("").notNull(),refId:(0,b.fL)("ref_id"),dataType:(0,b.fL)("data_type").notNull(),options:(0,g.JB)("options").default([]).$type().notNull(),metadata:(0,g.JB)("metadata").default({}).$type().notNull(),version:(0,h._L)("version").notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")});(0,u.lE)(L,({many:e,one:t})=>({history:e(k),draft:t(D,{fields:[L.uuid],references:[D.dataKeyId]})}));let D=(0,m.af)("nt_data_keys_drafts",{id:(0,y.eP)("id").primaryKey(),uuid:(0,N.Vj)("uuid").notNull().unique().default((0,f.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,b.fL)("name").notNull(),uniqueKey:(0,N.Vj)("unique_key").notNull(),dataKeyId:(0,N.Vj)("data_key_id").references(()=>L.uuid,{onDelete:"cascade"}),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id"),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(D,({one:e})=>({dataKey:e(L,{fields:[D.dataKeyId],references:[L.uuid]})}));let k=(0,m.af)("nt_data_keys_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),dataKeyId:(0,N.Vj)("data_key_id").references(()=>L.uuid,{onDelete:"cascade"}).notNull(),restoreKey:(0,N.Vj)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(k,({one:e})=>({dataKey:e(L,{fields:[k.dataKeyId],references:[L.uuid]})}));let B=(0,m.af)("nt_aliases",{id:(0,y.eP)("id").primaryKey(),uuid:(0,N.Vj)("uuid").notNull().unique().default((0,f.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,b.fL)("name").notNull(),alias:(0,b.fL)("alias").notNull(),script:(0,b.fL)("script").notNull(),oldScript:(0,b.fL)("old_script"),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")}),V=(0,p.Tr)({dataType:()=>"bytea"});(0,u.lE)(D,({one:e})=>({createdBy:e(F,{fields:[D.createdByUserId],references:[F.userId]})}));let K=(0,_.ys)("mailer_service",["gmail","smtp"]),$=(0,_.ys)("role_name",["user","admin","super_user"]),P=(0,_.ys)("site_type",["nodeapi","webeditor"]),T=(0,_.ys)("site_env",["production","stage","development","demo"]),C=(0,_.ys)("script_type",["admission","discharge","neolab","drecord","dff_calculator"]),R=(0,_.ys)("screen_type",["diagnosis","checklist","form","management","multi_select","single_select","progress","timer","yesno","drugs","fluids","feeds","zw_edliz_summary_table","mwi_edliz_summary_table","edliz_summary_table","dynamic_form"]),U=(0,_.ys)("drug_type",["drug","fluid","feed"]),S=(0,_.ys)("list_style",["none","number","bullet"]),z=(0,_.ys)("change_log_action",["create","update","delete","publish","restore","rollback","merge"]),q=(0,_.ys)("change_log_entity",["script","screen","diagnosis","config_key","drugs_library","data_key","alias","hospital","release","app_update_policy","apk_release"]),J=(0,_.ys)("apk_release_status",["uploaded","validated","approved","available","deprecated","revoked","rolled_back"]);(0,m.af)("nt_mailer_settings",{id:(0,y.eP)("id").primaryKey(),settingId:(0,N.Vj)("setting_id").notNull().unique().defaultRandom(),name:(0,b.fL)("name").notNull().unique(),service:K("service").notNull(),authUsername:(0,b.fL)("auth_username").notNull(),authPassword:(0,b.fL)("auth_password").notNull(),authType:(0,b.fL)("auth_type"),authMethod:(0,b.fL)("auth_method"),host:(0,b.fL)("host").notNull().default(""),port:(0,h._L)("port"),encryption:(0,b.fL)("encryption").notNull().default(""),fromAddress:(0,b.fL)("from_address").notNull().default(""),fromName:(0,b.fL)("from_name").notNull().default(""),isActive:(0,I.O7)("is_active").default(!1).notNull(),secure:(0,I.O7)("secure").default(!1).notNull()}),(0,m.af)("nt_email_templates",{id:(0,y.eP)("id").primaryKey(),templateId:(0,N.Vj)("template_id").notNull().unique().defaultRandom(),name:(0,b.fL)("name").notNull().unique(),data:(0,g.JB)("data").notNull()}),(0,m.af)("nt_sys",{_id:(0,y.eP)("_id").primaryKey(),id:(0,N.Vj)("id").notNull().unique().defaultRandom(),key:(0,b.fL)("key").notNull().unique(),value:(0,b.fL)("value").notNull()});let O=(0,m.af)("nt_tokens",{id:(0,y.eP)("id").primaryKey(),token:(0,h._L)("token").notNull().unique(),userId:(0,N.Vj)("user_id").references(()=>F.userId,{onDelete:"cascade"}),validUntil:(0,x.AB)("valid_until").notNull()});(0,u.lE)(O,({one:e})=>({user:e(F,{fields:[O.userId],references:[F.userId]})}));let E=(0,m.af)("nt_user_roles",{id:(0,y.eP)("id").primaryKey(),name:$("name").notNull().unique(),description:(0,b.fL)("description")});(0,u.lE)(E,({many:e})=>({users:e(F)})),(0,m.af)("nt_languages",{id:(0,y.eP)("id").primaryKey(),name:(0,b.fL)("name").notNull().unique(),iso:(0,b.fL)("iso").notNull().unique(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")});let F=(0,m.af)("nt_users",{id:(0,y.eP)("id").primaryKey(),userId:(0,N.Vj)("user_id").notNull().unique().defaultRandom(),role:$("role").references(()=>E.name,{onDelete:"cascade"}).default("user").notNull(),email:(0,b.fL)("email").notNull().unique(),password:(0,b.fL)("password").notNull(),displayName:(0,b.fL)("display_name").notNull(),firstName:(0,b.fL)("first_name"),lastName:(0,b.fL)("last_name"),avatar:(0,b.fL)("avatar"),avatar_sm:(0,b.fL)("avatar_sm"),avatar_md:(0,b.fL)("avatar_md"),activationDate:(0,x.AB)("activation_date"),lastLoginDate:(0,x.AB)("last_login_date"),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({searchIndex:(0,v.Kz)("users_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.email}) ||
                    to_tsvector('english', ${e.displayName}) ||
                    to_tsvector('english', ${e.firstName}) ||
                    to_tsvector('english', ${e.lastName})
                )`)}));(0,u.lE)(F,({many:e,one:t})=>({authTokens:e(Z),tokens:e(O),files:e(G),role:t(E,{fields:[F.role],references:[E.name]})}));let Z=(0,m.af)("nt_auth_clients",{id:(0,y.eP)("id").primaryKey(),clientId:(0,N.Vj)("client_id").notNull().unique().defaultRandom(),clientToken:(0,b.fL)("client_token").notNull().unique(),userId:(0,N.Vj)("user_id").references(()=>F.userId,{onDelete:"cascade"}),validUntil:(0,x.AB)("valid_until"),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(Z,({one:e})=>({user:e(F,{fields:[Z.userId],references:[F.userId]})})),(0,m.af)("nt_api_keys",{id:(0,y.eP)("id").primaryKey(),apiKeyId:(0,N.Vj)("api_key_id").notNull().unique().defaultRandom(),apiKey:(0,b.fL)("api_key").notNull().unique().$defaultFn(()=>(0,w.Z)()),validUntil:(0,x.AB)("valid_until"),createdAt:(0,x.AB)("created_at").defaultNow().notNull()}),(0,m.af)("nt_sites",{id:(0,y.eP)("id").primaryKey(),siteId:(0,N.Vj)("site_id").notNull().unique().defaultRandom(),name:(0,b.fL)("name").notNull().unique(),link:(0,b.fL)("link").notNull().unique(),apiKey:(0,b.fL)("api_key").notNull(),type:P("type").notNull(),env:T("env").notNull().default("production"),displayName:(0,b.fL)("display_name"),countryISO:(0,b.fL)("country_iso"),countryName:(0,b.fL)("country_name"),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")});let M=(0,m.af)("nt_hospitals",{id:(0,y.eP)("id").primaryKey(),hospitalId:(0,N.Vj)("hospital_id").notNull().unique().defaultRandom(),oldHospitalId:(0,b.fL)("old_hospital_id").unique(),name:(0,b.fL)("name").notNull().unique(),country:(0,b.fL)("country").default(""),version:(0,h._L)("version").default(1).notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({searchIndex:(0,v.Kz)("hospitals_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.name})
                )`)}));(0,u.lE)(M,({many:e,one:t})=>({history:e(W),draft:t(Y,{fields:[M.hospitalId],references:[Y.hospitalId]})}));let Y=(0,m.af)("nt_hospitals_drafts",{id:(0,y.eP)("id").primaryKey(),hospitalDraftId:(0,N.Vj)("hospital_draft_id").notNull().unique().defaultRandom(),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"cascade"}),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(Y,({one:e})=>({hospital:e(M,{fields:[Y.hospitalId],references:[M.hospitalId]}),createdBy:e(F,{fields:[Y.createdByUserId],references:[F.userId]})}));let W=(0,m.af)("nt_hospitals_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"cascade"}).notNull(),restoreKey:(0,N.Vj)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(W,({one:e})=>({hospital:e(M,{fields:[W.hospitalId],references:[M.hospitalId]})})),(0,m.af)("nt_editor_info",{id:(0,y.eP)("id").primaryKey(),dataVersion:(0,h._L)("data_version").notNull().default(1),lastPublishDate:(0,x.AB)("last_publish_date"),lastDataKeysSyncDate:(0,x.AB)("last_data_keys_sync_date")}),(0,m.af)("nt_devices",{id:(0,y.eP)("id").primaryKey(),deviceId:(0,b.fL)("device_id").notNull().unique(),deviceHash:(0,b.fL)("device_hash").notNull().unique(),details:(0,g.JB)("details").default({}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")}),(0,m.af)("nt_device_update_events",{id:(0,y.eP)("id").primaryKey(),eventId:(0,N.Vj)("event_id").notNull().unique().defaultRandom(),deviceId:(0,b.fL)("device_id").notNull(),eventType:(0,b.fL)("event_type").notNull(),appVersion:(0,b.fL)("app_version"),runtimeVersion:(0,b.fL)("runtime_version"),otaUpdateId:(0,b.fL)("ota_update_id"),otaChannel:(0,b.fL)("ota_channel"),payload:(0,g.JB)("payload").default("{}").notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull()},e=>({deviceIndex:(0,v.Kz)("device_update_events_device_idx").on(e.deviceId),typeIndex:(0,v.Kz)("device_update_events_type_idx").on(e.eventType)}));let H=(0,m.af)("nt_device_app_states",{id:(0,y.eP)("id").primaryKey(),deviceId:(0,b.fL)("device_id").notNull(),appVersion:(0,b.fL)("app_version").notNull(),runtimeVersion:(0,b.fL)("runtime_version").notNull(),otaUpdateId:(0,b.fL)("ota_update_id"),otaChannel:(0,b.fL)("ota_channel"),apkReleaseId:(0,N.Vj)("apk_release_id").references(()=>X.apkReleaseId,{onDelete:"set null"}),lastSeenAt:(0,x.AB)("last_seen_at").defaultNow().notNull(),reportedAt:(0,x.AB)("reported_at").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)},e=>({deviceUnique:(0,v.o9)("device_app_state_unique").on(e.deviceId)}));(0,u.lE)(H,({one:e})=>({apkRelease:e(X,{fields:[H.apkReleaseId],references:[X.apkReleaseId]})}));let G=(0,m.af)("nt_files",{id:(0,y.eP)("id").primaryKey(),fileId:(0,N.Vj)("file_id").notNull().unique().defaultRandom(),ownerId:(0,N.Vj)("owner_id").references(()=>F.userId,{onDelete:"cascade"}),filename:(0,b.fL)("filename").notNull(),contentType:(0,b.fL)("content_type").notNull(),size:(0,h._L)("size").notNull(),metadata:(0,g.JB)("metadata").default("{}").notNull(),data:V("data").notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")});(0,u.lE)(G,({many:e,one:t})=>({owner:t(F,{fields:[G.ownerId],references:[F.userId]})})),(0,m.af)("nt_files_chunks",{id:(0,y.eP)("id").primaryKey(),chunkId:(0,N.Vj)("chunk_id").notNull().unique().defaultRandom(),fileId:(0,N.Vj)("file_id").references(()=>G.fileId,{onDelete:"cascade"}).notNull(),data:V("data").notNull()});let X=(0,m.af)("nt_apk_releases",{id:(0,y.eP)("id").primaryKey(),apkReleaseId:(0,N.Vj)("apk_release_id").notNull().unique().defaultRandom(),runtimeVersion:(0,b.fL)("runtime_version").notNull(),versionName:(0,b.fL)("version_name").notNull(),versionCode:(0,h._L)("version_code").notNull(),status:J("status").notNull().default("uploaded"),isAvailable:(0,I.O7)("is_available").default(!1).notNull(),fileId:(0,N.Vj)("file_id").references(()=>G.fileId,{onDelete:"set null"}),fileSize:(0,h._L)("file_size"),checksumSha256:(0,b.fL)("checksum_sha256"),signatureSha256:(0,b.fL)("signature_sha256"),validatedAt:(0,x.AB)("validated_at"),approvedAt:(0,x.AB)("approved_at"),releaseNotes:(0,b.fL)("release_notes").default(""),releasedAt:(0,x.AB)("released_at"),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({uniqueVersionPerRuntime:(0,v.o9)("apk_release_unique_version").on(e.runtimeVersion,e.versionCode),statusIndex:(0,v.Kz)("apk_release_status_index").on(e.status)}));(0,u.lE)(X,({one:e})=>({file:e(G,{fields:[X.fileId],references:[G.fileId]}),createdBy:e(F,{fields:[X.createdByUserId],references:[F.userId]})}));let Q=(0,m.af)("nt_app_update_policies",{id:(0,y.eP)("id").primaryKey(),policyId:(0,N.Vj)("policy_id").notNull().unique().defaultRandom(),runtimeVersion:(0,b.fL)("runtime_version").notNull(),policyVersion:(0,h._L)("policy_version").default(1).notNull(),otaEnabled:(0,I.O7)("ota_enabled").default(!0).notNull(),otaChannel:(0,b.fL)("ota_channel").default("production").notNull(),apkAutoDownload:(0,I.O7)("apk_auto_download").default(!0).notNull(),apkForceInstall:(0,I.O7)("apk_force_install").default(!1).notNull(),apkGracePeriodHours:(0,h._L)("apk_grace_period_hours"),apkForceAfter:(0,x.AB)("apk_force_after"),apkInstallWindow:(0,b.fL)("apk_install_window").default("on_restart"),apkMessageTitle:(0,b.fL)("apk_message_title").default(""),apkMessageBody:(0,b.fL)("apk_message_body").default(""),currentApkReleaseId:(0,N.Vj)("current_apk_release_id").references(()=>X.apkReleaseId,{onDelete:"set null"}),rollbackApkReleaseId:(0,N.Vj)("rollback_apk_release_id").references(()=>X.apkReleaseId,{onDelete:"set null"}),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({}));(0,u.lE)(Q,({one:e})=>({currentApkRelease:e(X,{fields:[Q.currentApkReleaseId],references:[X.apkReleaseId],relationName:"currentApkRelease"}),rollbackApkRelease:e(X,{fields:[Q.rollbackApkReleaseId],references:[X.apkReleaseId],relationName:"rollbackApkRelease"}),createdBy:e(F,{fields:[Q.createdByUserId],references:[F.userId]})}));let ee=(0,m.af)("nt_apk_releases_drafts",{id:(0,y.eP)("id").primaryKey(),apkReleaseDraftId:(0,N.Vj)("apk_release_draft_id").notNull().unique().defaultRandom(),apkReleaseId:(0,N.Vj)("apk_release_id").references(()=>X.apkReleaseId,{onDelete:"cascade"}),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(ee,({one:e})=>({apkRelease:e(X,{fields:[ee.apkReleaseId],references:[X.apkReleaseId]}),createdBy:e(F,{fields:[ee.createdByUserId],references:[F.userId]})}));let et=(0,m.af)("nt_app_update_policies_drafts",{id:(0,y.eP)("id").primaryKey(),policyDraftId:(0,N.Vj)("policy_draft_id").notNull().unique().defaultRandom(),policyId:(0,N.Vj)("policy_id").references(()=>Q.policyId,{onDelete:"cascade"}),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(et,({one:e})=>({policy:e(Q,{fields:[et.policyId],references:[Q.policyId]}),createdBy:e(F,{fields:[et.createdByUserId],references:[F.userId]})}));let ea=(0,m.af)("nt_config_keys",{id:(0,y.eP)("id").primaryKey(),configKeyId:(0,N.Vj)("config_key_id").notNull().unique().defaultRandom(),oldConfigKeyId:(0,b.fL)("old_config_key_id").unique(),position:(0,h._L)("position").notNull(),version:(0,h._L)("version").notNull(),key:(0,b.fL)("key").notNull().unique(),label:(0,b.fL)("label").notNull().unique(),summary:(0,b.fL)("summary").notNull(),source:(0,b.fL)("source").default("editor"),preferences:(0,g.JB)("preferences").default(JSON.stringify(A.$7)).notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({searchIndex:(0,v.Kz)("config_keys_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.key}) ||
                    to_tsvector('english', ${e.label}) ||
                    to_tsvector('english', ${e.summary})
                )`)}));(0,u.lE)(ea,({many:e,one:t})=>({history:e(ed),draft:t(el,{fields:[ea.configKeyId],references:[el.configKeyId]})}));let el=(0,m.af)("nt_config_keys_drafts",{id:(0,y.eP)("id").primaryKey(),configKeyDraftId:(0,N.Vj)("config_key_draft_id").notNull().unique().defaultRandom(),configKeyId:(0,N.Vj)("config_key_id").references(()=>ea.configKeyId,{onDelete:"cascade"}),position:(0,h._L)("position").notNull(),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(el,({one:e})=>({configKey:e(ea,{fields:[el.configKeyId],references:[ea.configKeyId]}),createdBy:e(F,{fields:[el.createdByUserId],references:[F.userId]})}));let ed=(0,m.af)("nt_config_keys_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),configKeyId:(0,N.Vj)("config_key_id").references(()=>ea.configKeyId,{onDelete:"cascade"}).notNull(),restoreKey:(0,N.Vj)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(ed,({one:e})=>({configKey:e(ea,{fields:[ed.configKeyId],references:[ea.configKeyId]})}));let es=(0,m.af)("nt_scripts",{id:(0,y.eP)("id").primaryKey(),scriptId:(0,N.Vj)("script_id").notNull().unique().defaultRandom(),oldScriptId:(0,b.fL)("old_script_id").unique(),version:(0,h._L)("version").notNull(),type:C("type").notNull().default("admission"),position:(0,h._L)("position").notNull(),source:(0,b.fL)("source").default("editor"),title:(0,b.fL)("title").notNull(),printTitle:(0,b.fL)("print_title").notNull(),description:(0,b.fL)("description").notNull().default(""),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"set null"}),exportable:(0,I.O7)("exportable").notNull().default(!0),nuidSearchEnabled:(0,I.O7)("nuid_search_enabled").notNull().default(!1),nuidSearchFields:(0,g.JB)("nuid_search_fields").default("[]").notNull(),reviewable:(0,I.O7)("reviewable").notNull().default(!1),reviewConfigurations:(0,g.JB)("review_configurations").default("[]").notNull(),preferences:(0,g.JB)("preferences").default(JSON.stringify(A.$7)).notNull(),printConfig:(0,g.JB)("print_config").notNull().default(`{
              "headerFormat": "",
              "headerFields": [],
              "footerFields": [],
              "sections": []
            }`).$type(),printSections:(0,g.JB)("print_sections").default("[]").notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({searchIndex:(0,v.Kz)("scripts_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.title}) ||
                    to_tsvector('english', ${e.description})
                )`)}));(0,u.lE)(es,({many:e,one:t})=>({screens:e(er),screensDrafts:e(eo),screensHistory:e(ec),diagnoses:e(eu),diagnosesDrafts:e(ef),diagnosesHistory:e(ep),history:e(ei),drugsLibrary:e(em),draft:t(en,{fields:[es.scriptId],references:[en.scriptId]})}));let en=(0,m.af)("nt_scripts_drafts",{id:(0,y.eP)("id").primaryKey(),scriptDraftId:(0,N.Vj)("script_draft_id").notNull().unique().defaultRandom(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}),position:(0,h._L)("position").notNull(),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"set null"}),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(en,({one:e,many:t})=>({screensDrafts:t(eo),diagnosesDrafts:t(ef),script:e(es,{fields:[en.scriptId],references:[es.scriptId]}),createdBy:e(F,{fields:[en.createdByUserId],references:[F.userId]})}));let ei=(0,m.af)("nt_scripts_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,N.Vj)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(ei,({one:e})=>({script:e(es,{fields:[ei.scriptId],references:[es.scriptId]})}));let er=(0,m.af)("nt_screens",{id:(0,y.eP)("id").primaryKey(),screenId:(0,N.Vj)("screen_id").notNull().unique().defaultRandom(),oldScreenId:(0,b.fL)("old_screen_id").unique(),oldScriptId:(0,b.fL)("old_script_id"),version:(0,h._L)("version").notNull(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}).notNull(),type:R("type").notNull(),position:(0,h._L)("position").notNull(),source:(0,b.fL)("source").default("editor"),sectionTitle:(0,b.fL)("section_title").notNull(),previewTitle:(0,b.fL)("preview_title").notNull().default(""),previewPrintTitle:(0,b.fL)("preview_print_title").notNull().default(""),condition:(0,b.fL)("condition").notNull().default(""),skipToCondition:(0,b.fL)("skip_to_condition").notNull().default(""),skipToScreenId:(0,b.fL)("skip_to_screen_id"),epicId:(0,b.fL)("epic_id").notNull().default(""),storyId:(0,b.fL)("story_id").notNull().default(""),refId:(0,b.fL)("ref_id").notNull().default(""),refIdDataKey:(0,b.fL)("ref_id_data_key").notNull().default(""),refKey:(0,b.fL)("ref_key").notNull().default(""),refKeyDataKey:(0,b.fL)("ref_key_data_key").notNull().default(""),step:(0,b.fL)("step").notNull().default(""),actionText:(0,b.fL)("action_text").notNull().default(""),contentText:(0,b.fL)("content_text").notNull().default(""),contentTextImage:(0,g.JB)("content_text_image").$type(),infoText:(0,b.fL)("info_text").notNull().default(""),title:(0,b.fL)("title").notNull(),title1:(0,b.fL)("title1").notNull().default(""),title2:(0,b.fL)("title2").notNull().default(""),title3:(0,b.fL)("title3").notNull().default(""),title4:(0,b.fL)("title4").notNull().default(""),text1:(0,b.fL)("text1").notNull().default(""),text2:(0,b.fL)("text2").notNull().default(""),text3:(0,b.fL)("text3").notNull().default(""),image1:(0,g.JB)("image1").$type(),image2:(0,g.JB)("image2").$type(),image3:(0,g.JB)("image3").$type(),instructions:(0,b.fL)("instructions").notNull().default(""),instructions2:(0,b.fL)("instructions2").notNull().default(""),instructions3:(0,b.fL)("instructions3").notNull().default(""),instructions4:(0,b.fL)("instructions4").notNull().default(""),hcwDiagnosesInstructions:(0,b.fL)("hcw_diagnoses_instructions").notNull().default(""),suggestedDiagnosesInstructions:(0,b.fL)("suggested_diagnoses_instructions").notNull().default(""),notes:(0,b.fL)("notes").notNull().default(""),dataType:(0,b.fL)("data_type").notNull().default(""),key:(0,b.fL)("key").notNull().default(""),keyId:(0,b.fL)("key_id").notNull().default(""),label:(0,b.fL)("label").notNull().default(""),negativeLabel:(0,b.fL)("negative_label").notNull().default(""),positiveLabel:(0,b.fL)("positive_label").notNull().default(""),timerValue:(0,h._L)("timer_value"),multiplier:(0,h._L)("multiplier"),minValue:(0,h._L)("min_value"),maxValue:(0,h._L)("max_value"),exportable:(0,I.O7)("exportable").notNull().default(!0),printable:(0,I.O7)("printable"),skippable:(0,I.O7)("skippable").notNull().default(!1),confidential:(0,I.O7)("confidential").notNull().default(!1),prePopulate:(0,g.JB)("pre_populate").default("[]").$type().notNull(),fields:(0,g.JB)("fields").default("[]").$type().notNull(),items:(0,g.JB)("items").default("[]").$type().notNull(),preferences:(0,g.JB)("preferences").default(JSON.stringify(A.$7)).$type().notNull(),drugs:(0,g.JB)("drugs").default("[]").$type().notNull(),fluids:(0,g.JB)("fluids").default("[]").$type().notNull(),feeds:(0,g.JB)("feeds").default("[]").$type().notNull(),reasons:(0,g.JB)("reasons").default("[]").notNull().$type(),listStyle:S("list_style").default("none").notNull(),printDisplayColumns:(0,h._L)("print_display_columns").default(2).notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at"),collectionName:(0,b.fL)("collection_name").notNull().default(""),collectionLabel:(0,b.fL)("collection_label").notNull().default(""),repeatable:(0,I.O7)("repeatable")},e=>({searchIndex:(0,v.Kz)("screens_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.title})
                )`)}));(0,u.lE)(er,({many:e,one:t})=>({history:e(ec),script:t(es,{fields:[er.scriptId],references:[es.scriptId]}),draft:t(eo,{fields:[er.screenId],references:[eo.screenId]})}));let eo=(0,m.af)("nt_screens_drafts",{id:(0,y.eP)("id").primaryKey(),screenDraftId:(0,N.Vj)("screen_draft_id").notNull().unique().defaultRandom(),screenId:(0,N.Vj)("screen_id").references(()=>er.screenId,{onDelete:"cascade"}),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,N.Vj)("script_draft_id").references(()=>en.scriptDraftId,{onDelete:"cascade"}),type:R("type").notNull(),position:(0,h._L)("position").notNull(),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(eo,({one:e})=>({screen:e(er,{fields:[eo.screenId],references:[er.screenId]}),scriptDraft:e(en,{fields:[eo.scriptDraftId],references:[en.scriptDraftId]}),script:e(es,{fields:[eo.scriptId],references:[es.scriptId]}),createdBy:e(F,{fields:[eo.createdByUserId],references:[F.userId]})}));let ec=(0,m.af)("nt_screens_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),screenId:(0,N.Vj)("screen_id").references(()=>er.screenId,{onDelete:"cascade"}).notNull(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,b.fL)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(ec,({one:e})=>({screen:e(er,{fields:[ec.screenId],references:[er.screenId]}),script:e(es,{fields:[ec.scriptId],references:[es.scriptId]})}));let eu=(0,m.af)("nt_diagnoses",{id:(0,y.eP)("id").primaryKey(),diagnosisId:(0,N.Vj)("diagnosis_id").notNull().unique().defaultRandom(),oldDiagnosisId:(0,b.fL)("old_diagnosis_id").unique(),oldScriptId:(0,b.fL)("old_script_id"),version:(0,h._L)("version").notNull(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}).notNull(),position:(0,h._L)("position").notNull(),source:(0,b.fL)("source").default("editor"),expression:(0,b.fL)("expression").notNull(),name:(0,b.fL)("name").notNull().default(""),description:(0,b.fL)("description").notNull().default(""),key:(0,b.fL)("key").default(""),keyId:(0,b.fL)("key_id").notNull().default(""),severityOrder:(0,h._L)("severity_order"),expressionMeaning:(0,b.fL)("expression_meaning").notNull().default(""),symptoms:(0,g.JB)("symptoms").default("[]").$type().notNull(),text1:(0,b.fL)("text1").notNull().default(""),text2:(0,b.fL)("text2").notNull().default(""),text3:(0,b.fL)("text3").notNull().default(""),image1:(0,g.JB)("image1").$type(),image2:(0,g.JB)("image2").$type(),image3:(0,g.JB)("image3").$type(),preferences:(0,g.JB)("preferences").default(JSON.stringify(A.$7)).$type().notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")},e=>({searchIndex:(0,v.Kz)("diagnoses_search_index").using("gin",(0,f.i6)`(
                    to_tsvector('english', ${e.name})
                )`)}));(0,u.lE)(eu,({many:e,one:t})=>({history:e(ep),script:t(es,{fields:[eu.scriptId],references:[es.scriptId]}),draft:t(ef,{fields:[eu.diagnosisId],references:[ef.diagnosisId]})}));let ef=(0,m.af)("nt_diagnoses_drafts",{id:(0,y.eP)("id").primaryKey(),diagnosisDraftId:(0,N.Vj)("diagnosis_draft_id").notNull().unique().defaultRandom(),diagnosisId:(0,N.Vj)("diagnosis_id").references(()=>eu.diagnosisId,{onDelete:"cascade"}),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,N.Vj)("script_draft_id").references(()=>en.scriptDraftId,{onDelete:"cascade"}),position:(0,h._L)("position").notNull(),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(ef,({one:e})=>({diagnosis:e(eu,{fields:[ef.diagnosisId],references:[eu.diagnosisId]}),scriptDraft:e(en,{fields:[ef.scriptDraftId],references:[en.scriptDraftId]}),script:e(es,{fields:[ef.scriptId],references:[es.scriptId]}),createdBy:e(F,{fields:[ef.createdByUserId],references:[F.userId]})}));let ep=(0,m.af)("nt_diagnoses_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),diagnosisId:(0,N.Vj)("diagnosis_id").references(()=>eu.diagnosisId,{onDelete:"cascade"}).notNull(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,b.fL)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(ep,({one:e})=>({diagnosis:e(eu,{fields:[ep.diagnosisId],references:[eu.diagnosisId]}),script:e(es,{fields:[ep.scriptId],references:[es.scriptId]})}));let e_=(0,_.ys)("dff_item_validation_type",["default","condition"]),em=(0,m.af)("nt_drugs_library",{id:(0,y.eP)("id").primaryKey(),itemId:(0,N.Vj)("item_id").notNull().unique().defaultRandom(),key:(0,b.fL)("key").notNull().unique(),keyId:(0,b.fL)("key_id").notNull().default(""),type:U("type").notNull().default("drug"),drug:(0,b.fL)("drug").notNull().default(""),minGestation:(0,j.zz)("min_gestation"),maxGestation:(0,j.zz)("max_gestation"),minWeight:(0,j.zz)("min_weight"),maxWeight:(0,j.zz)("max_weight"),minAge:(0,j.zz)("min_age"),maxAge:(0,j.zz)("max_age"),hourlyFeed:(0,j.zz)("hourly_feed"),hourlyFeedDivider:(0,j.zz)("hourly_feed_divider"),dosage:(0,j.zz)("dosage"),dosageMultiplier:(0,j.zz)("dosage_multiplier"),dayOfLife:(0,b.fL)("day_of_life").notNull().default(""),dosageText:(0,b.fL)("dosage_text").notNull().default(""),managementText:(0,b.fL)("management_text").notNull().default(""),gestationKey:(0,b.fL)("gestation_key").notNull().default(""),weightKey:(0,b.fL)("weight_key").notNull().default(""),diagnosisKey:(0,b.fL)("diagnosis_key").notNull().default(""),ageKey:(0,b.fL)("age_key").notNull().default(""),ageKeyId:(0,b.fL)("age_key_id").notNull().default(""),gestationKeyId:(0,b.fL)("gestation_key_id").notNull().default(""),weightKeyId:(0,b.fL)("weight_key_id").notNull().default(""),diagnosisKeyId:(0,b.fL)("diagnosis_key_id").notNull().default(""),administrationFrequency:(0,b.fL)("administration_frequency").notNull().default(""),drugUnit:(0,b.fL)("drug_unit").notNull().default(""),routeOfAdministration:(0,b.fL)("route_of_administration").notNull().default(""),position:(0,h._L)("position").notNull(),condition:(0,b.fL)("condition").notNull().default(""),calculator_condition:(0,b.fL)("calculator_condition").notNull().default(""),validationType:e_("validation_type").default("default"),version:(0,h._L)("version").notNull(),publishDate:(0,x.AB)("publish_date").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,x.AB)("deleted_at")});(0,u.lE)(em,({many:e,one:t})=>({history:e(eN),draft:t(ey,{fields:[em.itemId],references:[ey.itemId]})}));let ey=(0,m.af)("nt_drugs_library_drafts",{id:(0,y.eP)("id").primaryKey(),itemDraftId:(0,N.Vj)("item_draft_id").notNull().unique().defaultRandom(),itemId:(0,N.Vj)("item_id").references(()=>em.itemId,{onDelete:"cascade"}),key:(0,b.fL)("key").notNull(),type:U("type").notNull().default("drug"),position:(0,h._L)("position").notNull(),data:(0,g.JB)("data").$type().notNull(),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),updatedAt:(0,x.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,u.lE)(ey,({one:e})=>({item:e(em,{fields:[ey.itemId],references:[em.itemId]}),createdBy:e(F,{fields:[ey.createdByUserId],references:[F.userId]})}));let eN=(0,m.af)("nt_drugs_library_history",{id:(0,y.eP)("id").primaryKey(),version:(0,h._L)("version").notNull(),itemId:(0,N.Vj)("item_id").references(()=>em.itemId,{onDelete:"cascade"}).notNull(),restoreKey:(0,N.Vj)("restore_key"),changes:(0,g.JB)("data").default([]),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(eN,({one:e})=>({item:e(em,{fields:[eN.itemId],references:[em.itemId]})}));let eb=(0,m.af)("nt_pending_deletion",{id:(0,y.eP)("id").primaryKey(),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"cascade"}),screenId:(0,N.Vj)("screen_id").references(()=>er.screenId,{onDelete:"cascade"}),screenScriptId:(0,N.Vj)("screen_script_id").references(()=>es.scriptId,{onDelete:"cascade"}),diagnosisId:(0,N.Vj)("diagnosis_id").references(()=>eu.diagnosisId,{onDelete:"cascade"}),diagnosisScriptId:(0,N.Vj)("diagnosis_script_id").references(()=>es.scriptId,{onDelete:"cascade"}),configKeyId:(0,N.Vj)("config_key_id").references(()=>ea.configKeyId,{onDelete:"cascade"}),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"cascade"}),drugsLibraryItemId:(0,N.Vj)("drugs_library_item_id").references(()=>em.itemId,{onDelete:"cascade"}),scriptDraftId:(0,N.Vj)("script_draft_id").references(()=>en.scriptDraftId,{onDelete:"cascade"}),screenDraftId:(0,N.Vj)("screen_draft_id").references(()=>eo.screenDraftId,{onDelete:"cascade"}),diagnosisDraftId:(0,N.Vj)("diagnosis_draft_id").references(()=>ef.diagnosisDraftId,{onDelete:"cascade"}),configKeyDraftId:(0,N.Vj)("config_key_draft_id").references(()=>el.configKeyDraftId,{onDelete:"cascade"}),hospitalDraftId:(0,N.Vj)("hospital_draft_id").references(()=>Y.hospitalDraftId,{onDelete:"cascade"}),drugsLibraryItemDraftId:(0,N.Vj)("drugs_library_item_draft_id").references(()=>ey.itemDraftId,{onDelete:"cascade"}),dataKeyId:(0,N.Vj)("data_key_id").references(()=>L.uuid,{onDelete:"cascade"}),dataKeyDraftId:(0,N.Vj)("data_key_draft_id").references(()=>L.uuid,{onDelete:"cascade"}),aliasId:(0,N.Vj)("alias_id").references(()=>B.uuid,{onDelete:"cascade"}),createdByUserId:(0,N.Vj)("created_by_user_id").references(()=>F.userId,{onDelete:"set null"}),createdAt:(0,x.AB)("created_at").defaultNow().notNull()});(0,u.lE)(eb,({one:e})=>({script:e(es,{fields:[eb.scriptId],references:[es.scriptId]}),screen:e(er,{fields:[eb.screenId],references:[er.screenId]}),screenScript:e(es,{fields:[eb.screenScriptId],references:[es.scriptId]}),diagnosis:e(eu,{fields:[eb.diagnosisId],references:[eu.diagnosisId]}),diagnosisScript:e(es,{fields:[eb.diagnosisScriptId],references:[es.scriptId]}),configKey:e(ea,{fields:[eb.configKeyId],references:[ea.configKeyId]}),hospital:e(M,{fields:[eb.hospitalId],references:[M.hospitalId]}),drugsLibraryItem:e(em,{fields:[eb.drugsLibraryItemId],references:[em.itemId]}),scriptDraft:e(en,{fields:[eb.scriptId],references:[en.scriptDraftId]}),screenDraft:e(eo,{fields:[eb.screenId],references:[eo.screenDraftId]}),diagnosisDraft:e(ef,{fields:[eb.diagnosisId],references:[ef.diagnosisDraftId]}),configKeyDraft:e(el,{fields:[eb.configKeyId],references:[el.configKeyDraftId]}),hospitalDraft:e(Y,{fields:[eb.hospitalId],references:[Y.hospitalDraftId]}),drugsLibraryItemDraft:e(ey,{fields:[eb.drugsLibraryItemDraftId],references:[ey.itemDraftId]}),dataKey:e(L,{fields:[eb.dataKeyId],references:[L.uuid]}),dataKeyDraft:e(D,{fields:[eb.dataKeyDraftId],references:[D.uuid]}),alias:e(B,{fields:[eb.aliasId],references:[B.uuid]}),createdBy:e(F,{fields:[eb.createdByUserId],references:[F.userId]})}));let eh=(0,m.af)("nt_change_logs",{id:(0,y.eP)("id").primaryKey(),changeLogId:(0,N.Vj)("change_log_id").notNull().unique().defaultRandom(),version:(0,h._L)("version").notNull(),entityType:q("entity_type").notNull(),entityId:(0,N.Vj)("entity_id").notNull(),parentVersion:(0,h._L)("parent_version"),mergedFromVersion:(0,h._L)("merged_from_version"),scriptId:(0,N.Vj)("script_id").references(()=>es.scriptId,{onDelete:"set null"}),screenId:(0,N.Vj)("screen_id").references(()=>er.screenId,{onDelete:"set null"}),diagnosisId:(0,N.Vj)("diagnosis_id").references(()=>eu.diagnosisId,{onDelete:"set null"}),configKeyId:(0,N.Vj)("config_key_id").references(()=>ea.configKeyId,{onDelete:"set null"}),hospitalId:(0,N.Vj)("hospital_id").references(()=>M.hospitalId,{onDelete:"set null"}),drugsLibraryItemId:(0,N.Vj)("drugs_library_item_id").references(()=>em.itemId,{onDelete:"set null"}),dataKeyId:(0,N.Vj)("data_key_id").references(()=>L.uuid,{onDelete:"set null"}),aliasId:(0,N.Vj)("alias_id").references(()=>B.uuid,{onDelete:"set null"}),action:z("action").notNull(),changes:(0,g.JB)("changes").$type().default([]).notNull(),fullSnapshot:(0,g.JB)("full_snapshot").$type().notNull(),previousSnapshot:(0,g.JB)("previous_snapshot").$type().default({}).notNull(),snapshotHash:(0,b.fL)("snapshot_hash"),description:(0,b.fL)("description").notNull().default(""),changeReason:(0,b.fL)("change_reason").notNull().default(""),isActive:(0,I.O7)("is_active").default(!0).notNull(),supersededBy:(0,h._L)("superseded_by"),supersededAt:(0,x.AB)("superseded_at"),userId:(0,N.Vj)("user_id").references(()=>F.userId,{onDelete:"set null"}).notNull(),dateOfChange:(0,x.AB)("date_of_change").defaultNow().notNull(),createdAt:(0,x.AB)("created_at").defaultNow().notNull(),dataVersion:(0,h._L)("data_version")},e=>({uniqueVersionPerEntity:(0,v.o9)("unique_version_per_entity").on(e.entityType,e.entityId,e.version),activeVersionIndex:(0,v.Kz)("active_version_index").on(e.entityId,e.isActive),entityIndex:(0,v.Kz)("change_logs_entity_index").on(e.entityType,e.entityId),versionChainIndex:(0,v.Kz)("version_chain_index").on(e.entityId,e.parentVersion),userIndex:(0,v.Kz)("change_logs_user_index").on(e.userId),dateIndex:(0,v.Kz)("change_logs_date_index").on(e.dateOfChange),dataVersionIndex:(0,v.Kz)("change_logs_data_version_index").on(e.dataVersion)}));(0,u.lE)(eh,({one:e})=>({user:e(F,{fields:[eh.userId],references:[F.userId],relationName:"changeLogUser"}),script:e(es,{fields:[eh.scriptId],references:[es.scriptId]}),screen:e(er,{fields:[eh.screenId],references:[er.screenId]}),diagnosis:e(eu,{fields:[eh.diagnosisId],references:[eu.diagnosisId]}),configKey:e(ea,{fields:[eh.configKeyId],references:[ea.configKeyId]}),hospital:e(M,{fields:[eh.hospitalId],references:[M.hospitalId]}),drugsLibraryItem:e(em,{fields:[eh.drugsLibraryItemId],references:[em.itemId]}),dataKey:e(L,{fields:[eh.dataKeyId],references:[L.uuid]}),alias:e(B,{fields:[eh.aliasId],references:[B.uuid]})})),$.enumValues;let eI=C.enumValues,eg=R.enumValues;var ex=a(60097),ev=a(31048),ej=a(53313);function ew({filters:e,setFilters:t}){let[a,d]=(0,c.Z)();return l.jsx("div",{ref:a,children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[l.jsx("div",{children:(0,l.jsxs)(ex.h_,{children:[l.jsx(ex.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{disabled:!0,variant:"outline",className:"w-full",children:[e.scriptsTypes.length?e.scriptsTypes.length>1?`${e.scriptsTypes.length} script types`:e.scriptsTypes[0]:"Select script types",l.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,l.jsxs)(ex.AW,{className:"max-h-[400px] overflow-y-auto",style:{width:d.width},children:[l.jsx(ex.Ju,{children:"Script types"}),l.jsx(ex.VD,{}),l.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:eI.map(a=>{let d=e.scriptsTypes.includes(a);return l.jsx(ex.bO,{checked:d,onCheckedChange:()=>{t(e=>({scriptsTypes:d?e.scriptsTypes.filter(e=>e!==a):[...e.scriptsTypes,a]}))},children:l.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},a)})})]})]})}),l.jsx("div",{children:(0,l.jsxs)(ex.h_,{children:[l.jsx(ex.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{disabled:!0,variant:"outline",className:"w-full",children:[e.screensTypes.length?e.screensTypes.length>1?`${e.screensTypes.length} screen types`:e.screensTypes[0]:"Select screen types",l.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,l.jsxs)(ex.AW,{className:"max-h-[400px] overflow-y-auto",style:{width:d.width},children:[l.jsx(ex.Ju,{children:"Screen types"}),l.jsx(ex.VD,{}),l.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:eg.map(a=>{let d=e.screensTypes.includes(a);return l.jsx(ex.bO,{checked:d,onCheckedChange:()=>{t(e=>({screensTypes:d?e.screensTypes.filter(e=>e!==a):[...e.screensTypes,a]}))},children:l.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},a)})})]})]})}),l.jsx("div",{children:(0,l.jsxs)(ev._,{htmlFor:"withImagesOnly",className:"flex items-center",children:[l.jsx(ej.X,{id:"withImagesOnly",checked:e.withImagesOnly,onCheckedChange:()=>t({withImagesOnly:!e.withImagesOnly})}),"\xa0 With images only"]})})]})})}var eA=a(7027),eL=a(90434),eD=a(7636),ek=a(77863),eB=a(71708),eV=a(41137),eK=a(7890),e$=a(79131);function eP({children:e,...t}){let{dataType:a,loadData:d}=t;return(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"h-[60px]"}),(0,l.jsxs)("div",{className:" h-[60px] border-b fixed top-0 left-0 w-full px-4 flex items-center bg-white z-10 gap-x-4 ",children:[l.jsx("div",{className:"text-xl",children:(0,e$.Z)(a)}),l.jsx("div",{className:"ml-auto"}),e,(0,l.jsxs)(eK.yo,{children:[l.jsx(eK.aM,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"outline",children:[l.jsx(eV.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})}),(0,l.jsxs)(eK.ue,{className:"p-0 flex flex-col",children:[(0,l.jsxs)(eK.Tu,{className:"p-4",children:[(0,l.jsxs)(eK.bC,{children:["Filter ",a]}),l.jsx(eK.Ei,{children:""})]}),l.jsx("div",{className:"flex-1 px-4 overflow-y-auto",children:l.jsx(ew,{...t})}),l.jsx(eK.FF,{className:"p-4 border-t",children:l.jsx(eK.sw,{asChild:!0,children:(0,l.jsxs)(n.z,{className:"w-full mt-6",onClick:()=>d(),children:["Load ",t.dataType]})})})]})]})]})]})}function eT(e){let{screens:t,screensColumns:a,setScreensColumns:d}=e,s=(0,i.useMemo)(()=>Object.keys({...t.data[0]}).map(e=>e),[t.data[0]]);return(0,l.jsxs)(l.Fragment,{children:[l.jsx(eP,{...e,children:(0,l.jsxs)(ex.h_,{children:[l.jsx(ex.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"outline",children:["Columns",l.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,l.jsxs)(ex.AW,{className:"max-h-[400px]",children:[l.jsx(ex.Ju,{children:"Screens"}),l.jsx(ex.VD,{}),l.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:s.map(e=>{let t=a.includes(e);return l.jsx(ex.bO,{checked:t,onCheckedChange:()=>{d(a=>t?a.filter(t=>t!==e):[...a,e])},children:e},e)})})]})]})}),l.jsx(eD.DataTable,{columns:[{name:"Screen",cellClassName:"w-10",cellRenderer:({value:e})=>l.jsx(eL.default,{target:"_blank",href:`${e}`,children:l.jsx(eA.Z,{className:"text-primary w-4 h-4"})})},...s.map(e=>({name:e,cellClassName:(0,ek.cn)("truncate max-w-[200px]",!a.includes(e)&&"hidden"),cellRenderer({value:a,rowIndex:d}){let s=t.data[d],n=null;return("image1"===e&&(n=s.image1),"image2"===e&&(n=s.image2),"image3"===e&&(n=s.image3),n)?l.jsx("div",{className:"w-10 h-10",children:l.jsx(eB.E,{alt:s.screenId,src:n.data})}):"scriptTitle"===e?(0,l.jsxs)(eL.default,{target:"_blank",href:`/script/${s.scriptId}`,className:"flex items-center text-primary",children:[l.jsx(eA.Z,{className:"text-gray-400 w-4 h-4"}),"\xa0",a]}):a}}))],data:t.data.map(e=>[`/script/${e.scriptId}/screen/${e.screenId}`,...s.map(t=>{let a=e[t];return null!==a&&"object"==typeof a?typeof a:`${a}`})])})]})}function eC(e){let{diagnoses:t,diagnosesColumns:a,setDiagnosesColumns:d}=e,s=(0,i.useMemo)(()=>Object.keys({...t.data[0]}).map(e=>e),[t.data[0]]);return(0,l.jsxs)(l.Fragment,{children:[l.jsx(eP,{...e,children:(0,l.jsxs)(ex.h_,{children:[l.jsx(ex.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"outline",children:["Columns",l.jsx(o.Z,{className:"ml-auto h-4 w-4"})]})}),(0,l.jsxs)(ex.AW,{className:"max-h-[400px]",children:[l.jsx(ex.Ju,{children:"Diagnoses"}),l.jsx(ex.VD,{}),l.jsx("div",{className:" max-h-[400px] overflow-y-auto",children:s.map(e=>{let t=a.includes(e);return l.jsx(ex.bO,{checked:t,onCheckedChange:()=>{d(a=>t?a.filter(t=>t!==e):[...a,e])},children:e},e)})})]})]})}),l.jsx(eD.DataTable,{columns:[{name:"Screen",cellClassName:"w-10",cellRenderer:({value:e})=>l.jsx(eL.default,{target:"_blank",href:`${e}`,children:l.jsx(eA.Z,{className:"text-primary w-4 h-4"})})},...s.map(e=>({name:e,cellClassName:(0,ek.cn)("truncate max-w-[200px]",!a.includes(e)&&"hidden"),cellRenderer({value:a,rowIndex:d}){let s=t.data[d],n=null;return("image1"===e&&(n=s.image1),"image2"===e&&(n=s.image2),"image3"===e&&(n=s.image3),"scriptTitle"===e)?(0,l.jsxs)(eL.default,{target:"_blank",href:`/script/${s.scriptId}`,className:"flex items-center text-primary",children:[l.jsx(eA.Z,{className:"text-gray-400 w-4 h-4"}),"\xa0",a]}):n?l.jsx("div",{className:"w-10 h-10",children:l.jsx(eB.E,{alt:s.diagnosisId,src:n.data})}):a}}))],data:t.data.map(e=>[`/script/${e.scriptId}/diagnosis/${e.diagnosisId}`,...s.map(t=>{let a=e[t];return null!==a&&"object"==typeof a?typeof a:`${a}`})])})]})}function eR(e){let t=function(e){let[t,a]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),[s,n]=(0,i.useState)({data:[]}),[o,c]=(0,i.useState)(["title"]),[u,f]=(0,i.useState)({data:[]}),[p,_]=(0,i.useState)(["title","image1","image2","image3","scriptTitle","hospitalName"]),[m,y]=(0,i.useState)({data:[]}),[N,b]=(0,i.useState)(["name","image1","image2","image3","scriptTitle","hospitalName"]),[h,I]=(0,i.useState)({screensIds:[],diagnosesIds:[],hospitalsIds:[],scriptsIds:[],screensTypes:[],scriptsTypes:[],withImagesOnly:!0,draftsOnly:!1}),[g,x]=(0,i.useState)(h),v=(0,i.useCallback)(e=>I(t=>({...t,..."function"==typeof e?e(t):e})),[]),j=(0,i.useMemo)(()=>!t||JSON.stringify(h)!==JSON.stringify(g),[h,g,t]),w=(0,i.useCallback)(async()=>{try{d(!0);let e={hospitalIds:h.hospitalsIds,returnDraftsIfExist:!0,scriptsIds:h.scriptsIds,withDeleted:!1},{errors:t,data:l}=(await r.Z.get(`/api/scripts?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));n({data:l}),x(h),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[h]),A=(0,i.useCallback)(async()=>{try{d(!0);let e={scriptsIds:h.scriptsIds,screensIds:h.screensIds,returnDraftsIfExist:!0,withDeleted:!1,withImagesOnly:h.withImagesOnly},{errors:t,data:l}=(await r.Z.get(`/api/screens?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));f({data:l}),x(h),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[h]),L=(0,i.useCallback)(async()=>{try{d(!0);let e={scriptsIds:h.scriptsIds,diagnosesIds:h.diagnosesIds,returnDraftsIfExist:!0,withDeleted:!1,withImagesOnly:h.withImagesOnly},{errors:t,data:l}=(await r.Z.get(`/api/diagnoses?data=${JSON.stringify(e)}`)).data;if(t?.length)throw Error(t.join(", "));y({data:l}),x(h),a(!0)}catch(e){alert(e.message)}finally{d(!1)}},[h]),D=(0,i.useCallback)(()=>{"diagnoses"===e.dataType?L():"screens"===e.dataType?A():w()},[e.dataType,L,A,w]);return{...e,loading:l,scripts:s,screens:u,diagnoses:m,filters:h,canLoadData:j,dataInitialised:t,scriptsColumns:o,screensColumns:p,diagnosesColumns:N,setScriptsColumns:c,setScreensColumns:_,setDiagnosesColumns:b,loadData:D,setLoading:d,setScripts:n,setScreens:f,setDiagnoses:y,_setFilters:I,setFilters:v,loadScripts:w,loadScreens:A,loadDiagnoses:L}}(e),{loading:a,dataInitialised:o,canLoadData:c,loadData:u}=t;return(0,l.jsxs)(l.Fragment,{children:[a&&l.jsx(s.a,{overlay:!0}),o?(0,l.jsxs)(l.Fragment,{children:["screens"===e.dataType&&l.jsx(eT,{...t}),"diagnoses"===e.dataType&&l.jsx(eC,{...t})]}):l.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex flex-col p-5 overflow-y-auto",children:l.jsx("div",{className:"m-auto w-full max-w-lg",children:l.jsx(d.Zb,{children:(0,l.jsxs)(d.aY,{children:[(0,l.jsxs)(d.Ol,{children:[l.jsx(d.ll,{children:"Filters"}),(0,l.jsxs)(d.SZ,{children:["Filter ",e.dataType]})]}),l.jsx(ew,{...e,...t}),(0,l.jsxs)(n.z,{className:"w-full mt-6",disabled:!c,onClick:()=>u(),children:["Load ",e.dataType]})]})})})})]})}},60097:(e,t,a)=>{"use strict";a.d(t,{$F:()=>u,AW:()=>f,Ju:()=>m,VD:()=>y,Xi:()=>p,bO:()=>_,h_:()=>c});var l=a(10326),d=a(17577),s=a(76234),n=a(39183),i=a(32933),r=a(53982),o=a(77863);let c=s.fC,u=s.xz;s.ZA,s.Uv,s.Tr,s.Ee,d.forwardRef(({className:e,inset:t,children:a,...d},i)=>(0,l.jsxs)(s.fF,{ref:i,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...d,children:[a,l.jsx(n.Z,{className:"ml-auto h-4 w-4"})]})).displayName=s.fF.displayName,d.forwardRef(({className:e,...t},a)=>l.jsx(s.tu,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=s.tu.displayName;let f=d.forwardRef(({className:e,sideOffset:t=4,...a},d)=>l.jsx(s.Uv,{children:l.jsx(s.VY,{ref:d,sideOffset:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));f.displayName=s.VY.displayName;let p=d.forwardRef(({className:e,inset:t,...a},d)=>l.jsx(s.ck,{ref:d,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));p.displayName=s.ck.displayName;let _=d.forwardRef(({className:e,children:t,checked:a,...d},n)=>(0,l.jsxs)(s.oC,{ref:n,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...d,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(s.wU,{children:l.jsx(i.Z,{className:"h-4 w-4"})})}),t]}));_.displayName=s.oC.displayName,d.forwardRef(({className:e,children:t,...a},d)=>(0,l.jsxs)(s.Rk,{ref:d,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(s.wU,{children:l.jsx(r.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=s.Rk.displayName;let m=d.forwardRef(({className:e,inset:t,...a},d)=>l.jsx(s.__,{ref:d,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));m.displayName=s.__.displayName;let y=d.forwardRef(({className:e,...t},a)=>l.jsx(s.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));y.displayName=s.Z0.displayName},31048:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var l=a(10326),d=a(17577),s=a(29152),n=a(79360),i=a(77863);let r=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=d.forwardRef(({className:e,secondary:t,error:a,...d},n)=>l.jsx(s.f,{ref:n,className:(0,i.cn)(r(),t&&"text-xs",a?"text-danger":"",e),...d}));o.displayName=s.f.displayName},7890:(e,t,a)=>{"use strict";a.d(t,{Ei:()=>h,FF:()=>N,Tu:()=>y,aM:()=>c,bC:()=>b,sw:()=>u,ue:()=>m,yo:()=>o});var l=a(10326),d=a(17577),s=a(37956),n=a(79360),i=a(94019),r=a(77863);let o=s.fC,c=s.xz,u=s.x8,f=s.h_,p=d.forwardRef(({className:e,...t},a)=>l.jsx(s.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));p.displayName=s.aV.displayName;let _=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=d.forwardRef(({side:e="right",className:t,children:a,hideCloseButton:d,...n},o)=>(0,l.jsxs)(f,{children:[l.jsx(p,{}),(0,l.jsxs)(s.VY,{ref:o,className:(0,r.cn)(_({side:e}),t),...n,children:[a,!0!==d&&(0,l.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(i.Z,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=s.VY.displayName;let y=({className:e,...t})=>l.jsx("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});y.displayName="SheetHeader";let N=({className:e,...t})=>l.jsx("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});N.displayName="SheetFooter";let b=d.forwardRef(({className:e,...t},a)=>l.jsx(s.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold text-foreground",e),...t}));b.displayName=s.Dx.displayName;let h=d.forwardRef(({className:e,...t},a)=>l.jsx(s.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=s.dk.displayName},16722:(e,t,a)=>{"use strict";a.d(t,{Uv:()=>s,VO:()=>d,d4:()=>l,fR:()=>i});let l=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],d=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],s=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],n={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},i={admission:[{...n,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...n,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...n,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...n,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...n,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},58464:(e,t,a)=>{"use strict";a.d(t,{$7:()=>r,F4:()=>_,PU:()=>n,Tf:()=>u,UQ:()=>m,_S:()=>i,m1:()=>c,ph:()=>f,uh:()=>o,y0:()=>p});var l=a(16722),d=a(75743),s=a(20698);let n={headerFormat:"",headerFields:[],footerFields:[],sections:[]},i="Example: ($key = true and $key2 = false) or $key3 = 'HD'",r={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},o=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],c=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"},{label:"DFF Calculator",value:"dff_calculator"}],u=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],f=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}];({...u.reduce((e,t)=>{let a=t.value,l=t.value,d=[l,`${l}_option`];return"single_select"===a&&(d=[...d,"dropdown","dropdown_option"]),{...e,[l]:d}},{}),...l.Uv.reduce((e,t)=>{let a=t.name,l=t.name,d=[l,`${l}_option`];return"dropdown"===a&&(d=[...d,"single_select","single_select_option"]),{...e,[l]:d}},{})});let p=[{value:"checklist",label:"checklist",hasChildren:!0},{value:"multi_select",label:"multi_select",hasChildren:!0},{value:"single_select",label:"single_select",hasChildren:!0},{value:"yesno",label:"yesno",hasChildren:!1},{value:"zw_edliz_summary_table",label:"zw_edliz_summary_table",hasChildren:!0},{value:"mwi_edliz_summary_table",label:"mwi_edliz_summary_table",hasChildren:!0},{value:"diagnosis",label:"diagnosis",hasChildren:!0},{value:"diagnosis_symptom_sign",label:"diagnosis_symptom_sign",hasChildren:!1},{value:"diagnosis_symptom_risk",label:"diagnosis_symptom_risk",hasChildren:!1},{value:"date",label:"date",hasChildren:!1},{value:"datetime",label:"datetime",hasChildren:!1},{value:"dropdown",label:"dropdown",hasChildren:!0},{value:"number",label:"number",hasChildren:!1},{value:"text",label:"text",hasChildren:!1},{value:"timer",label:"timer",hasChildren:!1},{value:"period",label:"period",hasChildren:!1},{value:"option",label:"option",hasChildren:!1}],_=[{value:"label.asc",label:"Label (asc)",Icon:d.Z},{value:"label.desc",label:"Label (desc)",Icon:s.Z},{value:"key.asc",label:"Key (asc)",Icon:d.Z},{value:"key.desc",label:"Key (desc)",Icon:s.Z},{value:"type.asc",label:"Type (asc)",Icon:d.Z},{value:"type.desc",label:"Type (desc)",Icon:s.Z},{value:"refId.asc",label:"Ref ID (asc)",Icon:d.Z},{value:"refId.desc",label:"Ref ID (desc)",Icon:s.Z},{value:"createdAt.asc",label:"Creation date (asc)",Icon:d.Z},{value:"createdAt.desc",label:"Creation date (desc)",Icon:s.Z},{value:"updatedAt.asc",label:"Update date (asc)",Icon:d.Z},{value:"updatedAt.desc",label:"Update date (desc)",Icon:s.Z}],m=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}]},79131:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=e=>`${e||""}`.charAt(0).toUpperCase()+`${e||""}`.slice(1)},68584:(e,t,a)=>{"use strict";a.d(t,{V:()=>l});let l=(0,a(68570).createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/app/(ops)/components/content.tsx#Content`)},91732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var l=a(19510),d=a(58585),s=a(40801);async function n({children:e}){let[t]=await Promise.all([(0,s.getAuthenticatedUser)()]);return["admin","super_user"].includes(t?.role)||(0,d.redirect)("/"),l.jsx(l.Fragment,{children:e})}}};