exports.id=4692,exports.ids=[4692],exports.modules={7738:(e,a,s)=>{Promise.resolve().then(s.bind(s,9162))},47234:(e,a,s)=>{"use strict";s.d(a,{DataKeyForm:()=>_});var l=s(10326),r=s(17577),t=s(90434),d=s(15491),i=s(47463),n=s(74723),c=s(94019),o=s(941),x=s(96633),m=s(35047),u=s(44099),h=s(77863),p=s(58939),f=s(11870),y=s(90772),j=s(62288),b=s(34474),v=s(31048),g=s(54432),N=s(33071),w=s(35392),C=s(96221),k=s(46670),T=s(3529);function _(e){return!0!==e.modal?l.jsx($,{...e}):l.jsx(l.Fragment,{children:l.jsx(j.Vq,{open:e.open,onOpenChange:e.onOpenChange,children:(0,l.jsxs)(j.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,l.jsxs)(j.fK,{className:"border-b border-b-border px-4 py-4",children:[l.jsx(j.$N,{children:e.item?.dataKey?"Edit data key":"Add data key"}),l.jsx(j.Be,{className:"hidden",children:""})]}),e.open&&l.jsx($,{...e})]})})})}function $(e){let a=(0,r.useRef)(null),{item:s,dataKeys:p,dataKey:b,disabled:v,onOpenChange:g}=e,_=b||s?.dataKey,$=(0,n.cI)({defaultValues:{id:_?.id||void 0,uuid:_?.uuid||(0,i.Z)(),name:_?.name||"",label:_?.label||"",dataType:_?.dataType||null,parentKeys:_?.parentKeys||[],defaults:_?.defaults||{},children:_?.children||[]}}),{formState:{isDirty:D},handleSubmit:R,setValue:S,watch:z}=$,{confirm:K}=(0,k.t)(),{alert:A}=(0,C.s)(),F=(0,m.useRouter)(),{viewOnly:E}=(0,T.b)(),V=R(async({children:e,...a})=>{try{P(!0);let s=[a,...e.map(e=>({...e,parentKeys:e.parentKeys.map(e=>e===_?.name?a.name:e)}))],l=(await u.Z.post("/api/data-keys/save",{data:s,broadcastAction:!0})).data;l.errors?.length?A({title:"Error",message:l.errors.join(", "),variant:"error"}):(F.refresh(),A({message:"Data key created!",variant:"success",onClose:()=>{g?.(!1),F.push("/data-keys?"+d.Z.stringify({sort:a.id?void 0:"createdAt.desc"}))}}))}catch(e){A({title:"Error",message:e.message,variant:"error"})}finally{P(!1)}}),[I,B]=(0,r.useState)({}),[O,P]=(0,r.useState)(!1),G=z("name"),Q=z("dataType"),q=z("children"),M=E||!!v,Y=["dropdown","checklist","diagnosis","drug","fluid","multi_select","single_select","zw_edliz_summary_table_option","mwi_edliz_summary_table_option"].includes(Q);return(0,l.jsxs)(l.Fragment,{children:[O&&l.jsx(f.a,{overlay:!0}),(0,l.jsxs)("div",{ref:a,className:"flex-1 flex flex-col gap-y-4 overflow-y-auto px-4 py-2",children:[l.jsx(Z,{...e,form:$,disabled:M}),Y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-2 flex items-center",children:[l.jsx("h1",{className:"text-xl flex-1",children:"Options"}),Y&&!v&&l.jsx("div",{className:"w-[130px]",children:l.jsx(w.V,{disabled:M,selected:[],placeholder:"Add option",search:{placeholder:"Search data keys"},options:p.sort((e,a)=>(e.dataType!==`${Q}_option`?1:0)-(a.dataType!==`${Q}_option`?1:0)).filter(e=>!q.map(e=>e.name).includes(e.name)).map(e=>({value:e.name,label:e.name,description:e.label||"",caption:e.dataType||""})),onSelect:([e])=>{let a=p.find(a=>a.name===e?.value);if(a){let e=q.length,s={...a,parentKeys:[...a.parentKeys,G]};S(`children.${e}`,s,{shouldDirty:!0}),setTimeout(()=>{S(`children.${e}.uuid`,s.uuid,{shouldDirty:!0,shouldTouch:!0}),S(`children.${e}.name`,s.name,{shouldDirty:!0,shouldTouch:!0}),S(`children.${e}.label`,s.label,{shouldDirty:!0,shouldTouch:!0}),S(`children.${e}.dataType`,s.dataType,{shouldDirty:!0,shouldTouch:!0}),S(`children.${e}.parentKeys`,s.parentKeys,{shouldDirty:!0,shouldTouch:!0})},0)}}})})]}),q.map((a,s)=>{let r=`children.${s}`,t=I[r],d=()=>B(e=>({...e,[r]:!e[r]}));return l.jsx(N.Zb,{children:(0,l.jsxs)(N.aY,{className:"px-4 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx("div",{role:"button",className:(0,h.cn)("text-sm font-bold",t&&"hidden"),onClick:d,children:a.label})}),l.jsx("button",{className:(0,h.cn)(M&&"hidden"),onClick:()=>{K(()=>S("children",q.filter((e,a)=>a!==s),{shouldDirty:!0}),{title:"Delete option",message:"Are you sure?",danger:!0})},children:l.jsx(c.Z,{className:"size-4 opacity-40"})}),l.jsx("button",{className:"h-auto",onClick:d,children:t?l.jsx(x.Z,{className:"size-4 opacity-40"}):l.jsx(o.Z,{className:"size-4 opacity-40"})})]}),t&&l.jsx("div",{className:(0,h.cn)("flex flex-col mt-5 gap-y-2"),children:l.jsx(Z,{...e,form:$,disabled:M,childIndex:s})})]})},a.uuid)})]}):null]}),e.modal?(0,l.jsxs)(j.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full",children:[l.jsx(j.GG,{asChild:!0,children:l.jsx(y.z,{variant:"ghost",children:"Cancel"})}),l.jsx(y.z,{onClick:V,children:"Save"})]}):(0,l.jsxs)("div",{className:"flex items-center justify-end border-t border-t-border px-4 py-2 w-full gap-x-4",children:[l.jsx(y.z,{asChild:!0,variant:"ghost",children:l.jsx(t.default,{href:"/data-keys",children:"Cancel"})}),l.jsx(y.z,{disabled:M||!D,onClick:V,children:"Save"})]})]})}function Z({disabled:e,childIndex:a,dataKeys:s,form:{control:t,register:d}}){let i=(0,r.useMemo)(()=>(0,p.j_)(s).map(e=>e.value),[s]),c=void 0===a?"dataType":`children.${a}.dataType`,o=void 0===a?"label":`children.${a}.label`,x=void 0===a?"name":`children.${a}.name`;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[l.jsx(v._,{htmlFor:c,children:"Type *"}),l.jsx(n.Qr,{control:t,name:c,rules:{required:!0},render:({field:{value:a,onChange:s}})=>(0,l.jsxs)(b.Ph,{value:a||void 0,onValueChange:e=>s(e),disabled:e,children:[l.jsx(b.i4,{children:l.jsx(b.ki,{placeholder:""})}),l.jsx(b.Bw,{children:i.map(e=>l.jsx(b.Ql,{value:e,children:e},e))})]})})]}),(0,l.jsxs)("div",{children:[l.jsx(v._,{htmlFor:x,children:"Key *"}),l.jsx(n.Qr,{control:t,name:x,rules:{required:!0},render:({field:{value:a,name:s,onChange:r,onBlur:t}})=>l.jsx(g.I,{name:s,disabled:e,value:a,onChange:r,onBlur:t})})]}),(0,l.jsxs)("div",{children:[l.jsx(v._,{htmlFor:o,children:"Label *"}),l.jsx(n.Qr,{control:t,name:o,rules:{required:!0},render:({field:{value:a,name:s,onChange:r,onBlur:t}})=>l.jsx(g.I,{name:s,disabled:e,value:a,onChange:r,onBlur:t})})]})]})}},35392:(e,a,s)=>{"use strict";s.d(a,{V:()=>u});var l=s(10326),r=s(17577),t=s(41291),d=s(47206),i=s(32933),n=s(30811),c=s(90772),o=s(54432),x=s(62288),m=s(77863);function u({options:e,selected:a,...s}){a=Array.isArray(a)?a:a?[a]:[];let r=e.map(e=>({...e,value:`${e.value}`})),d=a.map(e=>`${e}`),i=!0;if(!s.multiple){let[e]=Array.isArray(d)?d:[d];e&&(i=!!r.find(a=>a.value===e))}return i?l.jsx(l.Fragment,{children:l.jsx(h,{...s,options:r,selected:d})}):(0,l.jsxs)("div",{className:"relative flex gap-x-2 items-center",children:[(0,l.jsxs)(n.J2,{modal:s.modal,children:[l.jsx(n.xo,{children:l.jsx(t.Z,{className:"size-4 text-destructive"})}),l.jsx(n.yk,{className:"p-0 bg-background",children:(0,l.jsxs)("div",{className:"p-4 bg-destructive/20 text-destructive",children:[l.jsx("b",{children:d[0]})," is not defined in the datakeys library. Click ",l.jsx("b",{children:"`change`"})," to select from the library"]})})]}),l.jsx(o.I,{disabled:!0,value:d[0],onChange:()=>{},className:"w-full disabled:opacity-70 pr-1w-16"}),l.jsx(h,{...s,options:r,selected:d,trigger:l.jsx("div",{role:s.disabled?void 0:"button",className:(0,m.cn)("w-16 absolute top-0 right-0 h-full text-xs flex items-center justify-center px-2",s.disabled?"opacity-70":"text-primary"),children:"Change"})})]})}function h({modal:e,header:a,placeholder:s,search:t,multiple:n=!1,error:u=!1,disabled:h=!1,selected:p,options:f=[],trigger:y,onSelect:j}){let[b,v]=(0,r.useState)(""),g=(0,r.useDeferredValue)(b),N=(0,r.useMemo)(()=>p?Array.isArray(p)?p.map(e=>f.find(a=>a?.value===e)).map(e=>e):f.filter(e=>e?.value===p)||[]:[],[p,f]),w=(0,r.useMemo)(()=>f.map(e=>{let a=N.map(e=>e?.value).map(e=>`${e||""}`).filter(e=>e).includes(`${e?.value}`);return{...e,isSelected:a}}).sort((e,a)=>(e.disabled?1:0)-(a.disabled?1:0)).sort((e,a)=>{let s=e.isSelected?1:0;return(a.isSelected?1:0)-s}).filter(e=>`${e?.value||""}`.includes(g)),[f,g,N]);return l.jsx(l.Fragment,{children:(0,l.jsxs)(x.Vq,{modal:e,onOpenChange:()=>{v("")},children:[l.jsx(x.hg,{asChild:!0,children:y||(0,l.jsxs)(c.z,{disabled:h,variant:"outline",className:(0,m.cn)("justify-between w-full",u&&"border border-destructive hover:bg-destructive/10"),children:[l.jsx("span",{className:N.length?"":"opacity-50",children:N[0]?.label||s||""}),l.jsx(d.Z,{className:"size-4 opacity-50"})]})}),(0,l.jsxs)(x.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,l.jsxs)(x.fK,{className:"border-b border-b-border px-4 py-4",children:[l.jsx(x.$N,{className:"hidden",children:""}),l.jsx(x.Be,{className:"hidden",children:""}),(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[t?l.jsx("div",{className:"flex-1",children:l.jsx(o.I,{type:"search",placeholder:t.placeholder||"",value:b,onChange:e=>v(e.target.value)})}):null,a]})]}),l.jsx("div",{className:"flex-1 flex flex-col gap-y-1 overflow-y-auto px-4 py-2 overflow-x-hidden",children:w.map(e=>{let a=n?"button":x.GG;return l.jsx(r.Fragment,{children:l.jsx(a,{onClick:()=>{e.disabled||(e.isSelected?j?.(N.filter(a=>a.value!==e.value)):j?.(n?[...N,e]:[e]))},className:(0,m.cn)("flex flex-col gap-y-1 border border-border p-2 rounded-md items-start text-left",e.disabled?"opacity-50 cursor-not-allowed":"transition-colors hover:bg-primary/20",e.isSelected&&"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground"),children:(0,l.jsxs)("div",{className:"flex items-center",children:[e.isSelected?l.jsx(i.Z,{className:"size-4 mr-2"}):null,(0,l.jsxs)("div",{children:[e.caption?l.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.caption||""}}):null,l.jsx("p",{children:e.label}),e.description?l.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.description||""}}):null]})]})})},e.value)})}),l.jsx(x.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full",children:l.jsx(x.GG,{asChild:!0,children:l.jsx(c.z,{variant:"ghost",children:"Close"})})})]})]})})}},31048:(e,a,s)=>{"use strict";s.d(a,{_:()=>c});var l=s(10326),r=s(17577),t=s(34478),d=s(79360),i=s(77863);let n=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,secondary:a,error:s,...r},d)=>l.jsx(t.f,{ref:d,className:(0,i.cn)(n(),a&&"text-xs",s?"text-danger":"",e),...r}));c.displayName=t.f.displayName},34474:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>f,DI:()=>x,Ph:()=>o,Ql:()=>j,U$:()=>b,i4:()=>u,ki:()=>m,n5:()=>y});var l=s(10326),r=s(17577),t=s(18792),d=s(941),i=s(96633),n=s(32933),c=s(77863);let o=t.fC,x=t.ZA,m=t.B4,u=r.forwardRef(({className:e,children:a,error:s,...r},i)=>(0,l.jsxs)(t.xz,{ref:i,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s&&"border-danger",e),...r,children:[a,l.jsx(t.JO,{asChild:!0,children:l.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=t.xz.displayName;let h=r.forwardRef(({className:e,...a},s)=>l.jsx(t.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:l.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=t.u_.displayName;let p=r.forwardRef(({className:e,...a},s)=>l.jsx(t.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:l.jsx(d.Z,{className:"h-4 w-4"})}));p.displayName=t.$G.displayName;let f=r.forwardRef(({className:e,children:a,position:s="popper",...r},d)=>l.jsx(t.h_,{children:(0,l.jsxs)(t.VY,{ref:d,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[l.jsx(h,{}),l.jsx(t.l_,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),l.jsx(p,{})]})}));f.displayName=t.VY.displayName;let y=r.forwardRef(({className:e,...a},s)=>l.jsx(t.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));y.displayName=t.__.displayName;let j=r.forwardRef(({className:e,children:a,...s},r)=>(0,l.jsxs)(t.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(t.wU,{children:l.jsx(n.Z,{className:"h-4 w-4"})})}),l.jsx(t.eT,{children:a})]}));j.displayName=t.ck.displayName;let b=r.forwardRef(({className:e,...a},s)=>l.jsx(t.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));b.displayName=t.Z0.displayName},58939:(e,a,s)=>{"use strict";s.d(a,{Ed:()=>o,j_:()=>d,l1:()=>i});var l=s(10326),r=s(17577),t=s(34474);function d(e){return Object.values(e.filter(e=>e.dataType).reduce((e,a)=>({...e,[a.dataType]:{value:a.dataType,label:a.dataType}}),{})).sort((e,a)=>{let s=0;return e.label<a.label&&(s=-1),e.label>a.label&&(s=1),s})}let i="all",n=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}],c=(e,a=i)=>[...e].filter(e=>"all"===a||(a===n[0].value?!e.isDraft:a===n[1].value?!!e.isDraft:e.dataType===a));function o({dataKeys:e,onFilter:a}){let[s,o]=(0,r.useState)(i),x=(0,r.useCallback)(s=>{o(s),a(c(e,s),s)},[e,a]);return l.jsx(l.Fragment,{children:(0,l.jsxs)(t.Ph,{value:s,onValueChange:e=>x(e),children:[l.jsx(t.i4,{children:l.jsx(t.ki,{placeholder:"All types"})}),(0,l.jsxs)(t.Bw,{children:[l.jsx(t.Ql,{value:"all",children:"All keys"}),l.jsx(t.U$,{}),(0,l.jsxs)(t.DI,{children:[l.jsx(t.n5,{children:"Status"}),n.map(e=>l.jsx(t.Ql,{value:e.value,children:l.jsx("div",{className:"flex items-center gap-x-2",children:l.jsx("span",{children:e.label})})},e.value))]}),l.jsx(t.U$,{}),(0,l.jsxs)(t.DI,{children:[l.jsx(t.n5,{children:"Types"}),d(e).map(e=>l.jsx(t.Ql,{value:e.value,children:l.jsx("div",{className:"flex items-center gap-x-2",children:l.jsx("span",{children:e.label})})},e.value))]})]})]})})}},41291:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4326:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var l=s(19510),r=s(21113),t=s(24569),d=s(46697);function i(){return l.jsx(t.V,{children:l.jsx(d.Zb,{children:l.jsx(d.aY,{className:"p-0",children:l.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Data type"},{name:"",align:"right",cellClassName:"w-20"}],data:[]})})})})}},24569:(e,a,s)=>{"use strict";s.d(a,{V:()=>t});var l=s(19510),r=s(50650);function t({className:e,...a}){return l.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,s)=>{"use strict";s.d(a,{w:()=>i});var l=s(68570);let r=(0,l.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx`),{__esModule:t,$$typeof:d}=r;r.default;let i=(0,l.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,s)=>{"use strict";s.d(a,{Zb:()=>d,aY:()=>i});var l=s(19510),r=s(71159),t=s(50650);let d=r.forwardRef(({className:e,...a},s)=>l.jsx("div",{ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));d.displayName="Card",r.forwardRef(({className:e,...a},s)=>l.jsx("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},s)=>l.jsx("h3",{ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},s)=>l.jsx("p",{ref:s,className:(0,t.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let i=r.forwardRef(({className:e,...a},s)=>l.jsx("div",{ref:s,className:(0,t.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent",r.forwardRef(({className:e,...a},s)=>l.jsx("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"}};