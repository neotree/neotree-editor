exports.id=4692,exports.ids=[4692],exports.modules={7738:(e,a,r)=>{Promise.resolve().then(r.bind(r,9162))},47234:(e,a,r)=>{"use strict";r.d(a,{DataKeyForm:()=>_});var s=r(10326),t=r(17577),l=r(90434),d=r(15491),n=r(47463),i=r(74723),o=r(94019),c=r(941),u=r(96633),p=r(35047),x=r(44099),m=r(77863),h=r(58939),f=r(11870),j=r(90772),y=r(62288),v=r(34474),b=r(31048),g=r(54432),N=r(33071),w=r(35392),C=r(96221),R=r(46670),k=r(3529);function _(e){return!0!==e.modal?s.jsx(D,{...e}):s.jsx(s.Fragment,{children:s.jsx(y.Vq,{open:e.open,onOpenChange:e.onOpenChange,children:(0,s.jsxs)(y.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,s.jsxs)(y.fK,{className:"border-b border-b-border px-4 py-4",children:[s.jsx(y.$N,{children:e.item?.dataKey?"Edit data key":"Add data key"}),s.jsx(y.Be,{className:"hidden",children:""})]}),e.open&&s.jsx(D,{...e})]})})})}function D(e){let a=(0,t.useRef)(null),{item:r,dataKeys:h,dataKey:v,disabled:b,onOpenChange:g}=e,_=v||r?.dataKey,D=(0,i.cI)({defaultValues:{id:_?.id||void 0,uuid:_?.uuid||(0,n.Z)(),name:_?.name||"",label:_?.label||"",dataType:_?.dataType||null,parentKeys:_?.parentKeys||[],defaults:_?.defaults||{},children:_?.children||[]}}),{formState:{isDirty:P},handleSubmit:z,setValue:A,watch:F}=D,{confirm:Z}=(0,R.t)(),{alert:O}=(0,C.s)(),$=(0,p.useRouter)(),{viewOnly:S}=(0,k.b)(),E=z(async({children:e,...a})=>{try{M(!0);let r=[a,...e.map(e=>({...e,parentKeys:e.parentKeys.map(e=>e===_?.name?a.name:e)}))],s=(await x.Z.post("/api/data-keys/save",{data:r,broadcastAction:!0})).data;s.errors?.length?O({title:"Error",message:s.errors.join(", "),variant:"error"}):($.refresh(),O({message:"Data key created!",variant:"success",onClose:()=>{g?.(!1),$.push("/data-keys?"+d.Z.stringify({sort:a.id?void 0:"createdAt.desc"}))}}))}catch(e){O({title:"Error",message:e.message,variant:"error"})}finally{M(!1)}}),[V,K]=(0,t.useState)({}),[I,M]=(0,t.useState)(!1),B=F("name"),Y=F("dataType"),G=F("children"),Q=S||!!b,q=["dropdown","checklist","diagnosis","drug","fluid","multi_select","single_select","zw_edliz_summary_table_option","mwi_edliz_summary_table_option"].includes(Y);return(0,s.jsxs)(s.Fragment,{children:[I&&s.jsx(f.a,{overlay:!0}),(0,s.jsxs)("div",{ref:a,className:"flex-1 flex flex-col gap-y-4 overflow-y-auto px-4 py-2",children:[s.jsx(T,{...e,form:D,disabled:Q}),q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[s.jsx("h1",{className:"text-xl flex-1",children:"Options"}),q&&!b&&s.jsx("div",{className:"w-[130px]",children:s.jsx(w.V,{disabled:Q,selected:[],placeholder:"Add option",search:{placeholder:"Search data keys"},options:h.sort((e,a)=>(e.dataType!==`${Y}_option`?1:0)-(a.dataType!==`${Y}_option`?1:0)).filter(e=>!G.map(e=>e.name).includes(e.name)).map(e=>({value:e.name,label:e.name,description:e.label||"",caption:e.dataType||""})),onSelect:([e])=>{let a=h.find(a=>a.name===e?.value);if(a){let e=G.length,r={...a,parentKeys:[...a.parentKeys,B]};A(`children.${e}`,r,{shouldDirty:!0}),setTimeout(()=>{A(`children.${e}.uuid`,r.uuid,{shouldDirty:!0,shouldTouch:!0}),A(`children.${e}.name`,r.name,{shouldDirty:!0,shouldTouch:!0}),A(`children.${e}.label`,r.label,{shouldDirty:!0,shouldTouch:!0}),A(`children.${e}.dataType`,r.dataType,{shouldDirty:!0,shouldTouch:!0}),A(`children.${e}.parentKeys`,r.parentKeys,{shouldDirty:!0,shouldTouch:!0})},0)}}})})]}),G.map((a,r)=>{let t=`children.${r}`,l=V[t],d=()=>K(e=>({...e,[t]:!e[t]}));return s.jsx(N.Zb,{children:(0,s.jsxs)(N.aY,{className:"px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{role:"button",className:(0,m.cn)("text-sm font-bold",l&&"hidden"),onClick:d,children:a.label})}),s.jsx("button",{className:(0,m.cn)(Q&&"hidden"),onClick:()=>{Z(()=>A("children",G.filter((e,a)=>a!==r),{shouldDirty:!0}),{title:"Delete option",message:"Are you sure?",danger:!0})},children:s.jsx(o.Z,{className:"size-4 opacity-40"})}),s.jsx("button",{className:"h-auto",onClick:d,children:l?s.jsx(u.Z,{className:"size-4 opacity-40"}):s.jsx(c.Z,{className:"size-4 opacity-40"})})]}),l&&s.jsx("div",{className:(0,m.cn)("flex flex-col mt-5 gap-y-2"),children:s.jsx(T,{...e,form:D,disabled:Q,childIndex:r})})]})},a.uuid)})]}):null]}),e.modal?(0,s.jsxs)(y.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full",children:[s.jsx(y.GG,{asChild:!0,children:s.jsx(j.z,{variant:"ghost",children:"Cancel"})}),s.jsx(j.z,{onClick:E,children:"Save"})]}):(0,s.jsxs)("div",{className:"flex items-center justify-end border-t border-t-border px-4 py-2 w-full gap-x-4",children:[s.jsx(j.z,{asChild:!0,variant:"ghost",children:s.jsx(l.default,{href:"/data-keys",children:"Cancel"})}),s.jsx(j.z,{disabled:Q||!P,onClick:E,children:"Save"})]})]})}function T({disabled:e,childIndex:a,dataKeys:r,form:{control:l,register:d}}){let n=(0,t.useMemo)(()=>(0,h.j_)(r).map(e=>e.value),[r]),o=void 0===a?"dataType":`children.${a}.dataType`,c=void 0===a?"label":`children.${a}.label`,u=void 0===a?"name":`children.${a}.name`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx(b._,{htmlFor:o,children:"Type *"}),s.jsx(i.Qr,{control:l,name:o,rules:{required:!0},render:({field:{value:a,onChange:r}})=>(0,s.jsxs)(v.Ph,{value:a||void 0,onValueChange:e=>r(e),disabled:e,children:[s.jsx(v.i4,{children:s.jsx(v.ki,{placeholder:""})}),s.jsx(v.Bw,{children:n.map(e=>s.jsx(v.Ql,{value:e,children:e},e))})]})})]}),(0,s.jsxs)("div",{children:[s.jsx(b._,{htmlFor:u,children:"Key *"}),s.jsx(i.Qr,{control:l,name:u,rules:{required:!0},render:({field:{value:a,name:r,onChange:t,onBlur:l}})=>s.jsx(g.I,{name:r,disabled:e,value:a,onChange:t,onBlur:l})})]}),(0,s.jsxs)("div",{children:[s.jsx(b._,{htmlFor:c,children:"Label *"}),s.jsx(i.Qr,{control:l,name:c,rules:{required:!0},render:({field:{value:a,name:r,onChange:t,onBlur:l}})=>s.jsx(g.I,{name:r,disabled:e,value:a,onChange:t,onBlur:l})})]})]})}},35392:(e,a,r)=>{"use strict";r.d(a,{V:()=>x});var s=r(10326),t=r(17577),l=r(41291),d=r(47206),n=r(32933),i=r(30811),o=r(90772),c=r(54432),u=r(62288),p=r(77863);function x({options:e,selected:a,...r}){a=Array.isArray(a)?a:a?[a]:[];let t=e.map(e=>({...e,value:`${e.value}`})),d=a.map(e=>`${e}`),n=!0;if(!r.multiple){let[e]=Array.isArray(d)?d:[d];e&&(n=!!t.find(a=>a.value===e))}return n?s.jsx(s.Fragment,{children:s.jsx(m,{...r,options:t,selected:d})}):(0,s.jsxs)("div",{className:"relative flex gap-x-2 items-center",children:[(0,s.jsxs)(i.J2,{modal:r.modal,children:[s.jsx(i.xo,{children:s.jsx(l.Z,{className:"size-4 text-destructive"})}),s.jsx(i.yk,{className:"p-0 bg-background",children:(0,s.jsxs)("div",{className:"p-4 bg-destructive/20 text-destructive",children:[s.jsx("b",{children:d[0]})," is not defined in the datakeys library. Click ",s.jsx("b",{children:"`change`"})," to select from the library"]})})]}),s.jsx(c.I,{disabled:!0,value:d[0],onChange:()=>{},className:"w-full disabled:opacity-70 pr-1w-16"}),s.jsx(m,{...r,options:t,selected:d,trigger:s.jsx("div",{role:r.disabled?void 0:"button",className:(0,p.cn)("w-16 absolute top-0 right-0 h-full text-xs flex items-center justify-center px-2",r.disabled?"opacity-70":"text-primary"),children:"Change"})})]})}function m({modal:e,header:a,placeholder:r,search:l,multiple:i=!1,error:x=!1,disabled:m=!1,selected:h,options:f=[],trigger:j,onSelect:y}){let[v,b]=(0,t.useState)(""),g=(0,t.useDeferredValue)(v),N=(0,t.useMemo)(()=>h?Array.isArray(h)?h.map(e=>f.find(a=>a?.value===e)).map(e=>e):f.filter(e=>e?.value===h)||[]:[],[h,f]),w=(0,t.useMemo)(()=>f.map(e=>{let a=N.map(e=>e?.value).map(e=>`${e||""}`).filter(e=>e).includes(`${e?.value}`);return{...e,isSelected:a}}).sort((e,a)=>(e.disabled?1:0)-(a.disabled?1:0)).sort((e,a)=>{let r=e.isSelected?1:0;return(a.isSelected?1:0)-r}).filter(e=>`${e?.value||""}`.includes(g)),[f,g,N]);return s.jsx(s.Fragment,{children:(0,s.jsxs)(u.Vq,{modal:e,onOpenChange:()=>{b("")},children:[s.jsx(u.hg,{asChild:!0,children:j||(0,s.jsxs)(o.z,{disabled:m,variant:"outline",className:(0,p.cn)("justify-between w-full",x&&"border border-destructive hover:bg-destructive/10"),children:[s.jsx("span",{className:N.length?"":"opacity-50",children:N[0]?.label||r||""}),s.jsx(d.Z,{className:"size-4 opacity-50"})]})}),(0,s.jsxs)(u.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,s.jsxs)(u.fK,{className:"border-b border-b-border px-4 py-4",children:[s.jsx(u.$N,{className:"hidden",children:""}),s.jsx(u.Be,{className:"hidden",children:""}),(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[l?s.jsx("div",{className:"flex-1",children:s.jsx(c.I,{type:"search",placeholder:l.placeholder||"",value:v,onChange:e=>b(e.target.value)})}):null,a]})]}),s.jsx("div",{className:"flex-1 flex flex-col gap-y-1 overflow-y-auto px-4 py-2 overflow-x-hidden",children:w.map(e=>{let a=i?"button":u.GG;return s.jsx(t.Fragment,{children:s.jsx(a,{onClick:()=>{e.disabled||(e.isSelected?y?.(N.filter(a=>a.value!==e.value)):y?.(i?[...N,e]:[e]))},className:(0,p.cn)("flex flex-col gap-y-1 border border-border p-2 rounded-md items-start text-left",e.disabled?"opacity-50 cursor-not-allowed":"transition-colors hover:bg-primary/20",e.isSelected&&"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.isSelected?s.jsx(n.Z,{className:"size-4 mr-2"}):null,(0,s.jsxs)("div",{children:[e.caption?s.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.caption||""}}):null,s.jsx("p",{children:e.label}),e.description?s.jsx("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.description||""}}):null]})]})})},e.value)})}),s.jsx(u.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full",children:s.jsx(u.GG,{asChild:!0,children:s.jsx(o.z,{variant:"ghost",children:"Close"})})})]})]})})}},31048:(e,a,r)=>{"use strict";r.d(a,{_:()=>o});var s=r(10326),t=r(17577),l=r(34478),d=r(79360),n=r(77863);let i=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,secondary:a,error:r,...t},d)=>s.jsx(l.f,{ref:d,className:(0,n.cn)(i(),a&&"text-xs",r?"text-danger":"",e),...t}));o.displayName=l.f.displayName},30811:(e,a,r)=>{"use strict";r.d(a,{J2:()=>n,xo:()=>i,yk:()=>o});var s=r(10326),t=r(17577),l=r(74964),d=r(77863);let n=l.fC,i=l.xz,o=t.forwardRef(({className:e,align:a="center",sideOffset:r=4,...t},n)=>s.jsx(l.h_,{children:s.jsx(l.VY,{ref:n,align:a,sideOffset:r,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));o.displayName=l.VY.displayName},34474:(e,a,r)=>{"use strict";r.d(a,{Bw:()=>f,DI:()=>u,Ph:()=>c,Ql:()=>y,U$:()=>v,i4:()=>x,ki:()=>p,n5:()=>j});var s=r(10326),t=r(17577),l=r(18792),d=r(941),n=r(96633),i=r(32933),o=r(77863);let c=l.fC,u=l.ZA,p=l.B4,x=t.forwardRef(({className:e,children:a,error:r,...t},n)=>(0,s.jsxs)(l.xz,{ref:n,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r&&"border-danger",e),...t,children:[a,s.jsx(l.JO,{asChild:!0,children:s.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.xz.displayName;let m=t.forwardRef(({className:e,...a},r)=>s.jsx(l.u_,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=l.u_.displayName;let h=t.forwardRef(({className:e,...a},r)=>s.jsx(l.$G,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(d.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let f=t.forwardRef(({className:e,children:a,position:r="popper",...t},d)=>s.jsx(l.h_,{children:(0,s.jsxs)(l.VY,{ref:d,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...t,children:[s.jsx(m,{}),s.jsx(l.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(h,{})]})}));f.displayName=l.VY.displayName;let j=t.forwardRef(({className:e,...a},r)=>s.jsx(l.__,{ref:r,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));j.displayName=l.__.displayName;let y=t.forwardRef(({className:e,children:a,...r},t)=>(0,s.jsxs)(l.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(i.Z,{className:"h-4 w-4"})})}),s.jsx(l.eT,{children:a})]}));y.displayName=l.ck.displayName;let v=t.forwardRef(({className:e,...a},r)=>s.jsx(l.Z0,{ref:r,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));v.displayName=l.Z0.displayName},58939:(e,a,r)=>{"use strict";r.d(a,{Ed:()=>c,j_:()=>d,l1:()=>n});var s=r(10326),t=r(17577),l=r(34474);function d(e){return Object.values(e.filter(e=>e.dataType).reduce((e,a)=>({...e,[a.dataType]:{value:a.dataType,label:a.dataType}}),{})).sort((e,a)=>{let r=0;return e.label<a.label&&(r=-1),e.label>a.label&&(r=1),r})}let n="all",i=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}],o=(e,a=n)=>[...e].filter(e=>"all"===a||(a===i[0].value?!e.isDraft:a===i[1].value?!!e.isDraft:e.dataType===a));function c({dataKeys:e,onFilter:a}){let[r,c]=(0,t.useState)(n),u=(0,t.useCallback)(r=>{c(r),a(o(e,r),r)},[e,a]);return s.jsx(s.Fragment,{children:(0,s.jsxs)(l.Ph,{value:r,onValueChange:e=>u(e),children:[s.jsx(l.i4,{children:s.jsx(l.ki,{placeholder:"All types"})}),(0,s.jsxs)(l.Bw,{children:[s.jsx(l.Ql,{value:"all",children:"All keys"}),s.jsx(l.U$,{}),(0,s.jsxs)(l.DI,{children:[s.jsx(l.n5,{children:"Status"}),i.map(e=>s.jsx(l.Ql,{value:e.value,children:s.jsx("div",{className:"flex items-center gap-x-2",children:s.jsx("span",{children:e.label})})},e.value))]}),s.jsx(l.U$,{}),(0,s.jsxs)(l.DI,{children:[s.jsx(l.n5,{children:"Types"}),d(e).map(e=>s.jsx(l.Ql,{value:e.value,children:s.jsx("div",{className:"flex items-center gap-x-2",children:s.jsx("span",{children:e.label})})},e.value))]})]})]})})}},41291:(e,a,r)=>{"use strict";r.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4326:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var s=r(19510),t=r(21113),l=r(24569),d=r(46697);function n(){return s.jsx(l.V,{children:s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"p-0",children:s.jsx(t.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Data type"},{name:"",align:"right",cellClassName:"w-20"}],data:[]})})})})}},24569:(e,a,r)=>{"use strict";r.d(a,{V:()=>l});var s=r(19510),t=r(50650);function l({className:e,...a}){return s.jsx("div",{...a,className:(0,t.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,r)=>{"use strict";r.d(a,{w:()=>n});var s=r(68570);let t=(0,s.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx`),{__esModule:l,$$typeof:d}=t;t.default;let n=(0,s.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,r)=>{"use strict";r.d(a,{Zb:()=>d,aY:()=>n});var s=r(19510),t=r(71159),l=r(50650);let d=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));d.displayName="Card",t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",t.forwardRef(({className:e,...a},r)=>s.jsx("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",t.forwardRef(({className:e,...a},r)=>s.jsx("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let n=t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",t.forwardRef(({className:e,...a},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},74964:(e,a,r)=>{"use strict";r.d(a,{VY:()=>G,fC:()=>M,h_:()=>Y,xz:()=>B});var s=r(17577),t=r(82561),l=r(48051),d=r(93095),n=r(825),i=r(80699),o=r(10441),c=r(88957),u=r(84321),p=r(83078),x=r(9815),m=r(45226),h=r(34214),f=r(52067),j=r(35664),y=r(58260),v=r(10326),b="Popover",[g,N]=(0,d.b)(b,[u.D7]),w=(0,u.D7)(),[C,R]=g(b),k=e=>{let{__scopePopover:a,children:r,open:t,defaultOpen:l,onOpenChange:d,modal:n=!1}=e,i=w(a),o=s.useRef(null),[p,x]=s.useState(!1),[m,h]=(0,f.T)({prop:t,defaultProp:l??!1,onChange:d,caller:b});return(0,v.jsx)(u.fC,{...i,children:(0,v.jsx)(C,{scope:a,contentId:(0,c.M)(),triggerRef:o,open:m,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:p,onCustomAnchorAdd:s.useCallback(()=>x(!0),[]),onCustomAnchorRemove:s.useCallback(()=>x(!1),[]),modal:n,children:r})})};k.displayName=b;var _="PopoverAnchor";s.forwardRef((e,a)=>{let{__scopePopover:r,...t}=e,l=R(_,r),d=w(r),{onCustomAnchorAdd:n,onCustomAnchorRemove:i}=l;return s.useEffect(()=>(n(),()=>i()),[n,i]),(0,v.jsx)(u.ee,{...d,...t,ref:a})}).displayName=_;var D="PopoverTrigger",T=s.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,d=R(D,r),n=w(r),i=(0,l.e)(a,d.triggerRef),o=(0,v.jsx)(m.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":I(d.open),...s,ref:i,onClick:(0,t.M)(e.onClick,d.onOpenToggle)});return d.hasCustomAnchor?o:(0,v.jsx)(u.ee,{asChild:!0,...n,children:o})});T.displayName=D;var P="PopoverPortal",[z,A]=g(P,{forceMount:void 0}),F=e=>{let{__scopePopover:a,forceMount:r,children:s,container:t}=e,l=R(P,a);return(0,v.jsx)(z,{scope:a,forceMount:r,children:(0,v.jsx)(x.z,{present:r||l.open,children:(0,v.jsx)(p.h,{asChild:!0,container:t,children:s})})})};F.displayName=P;var Z="PopoverContent",O=s.forwardRef((e,a)=>{let r=A(Z,e.__scopePopover),{forceMount:s=r.forceMount,...t}=e,l=R(Z,e.__scopePopover);return(0,v.jsx)(x.z,{present:s||l.open,children:l.modal?(0,v.jsx)(S,{...t,ref:a}):(0,v.jsx)(E,{...t,ref:a})})});O.displayName=Z;var $=(0,h.Z8)("PopoverContent.RemoveScroll"),S=s.forwardRef((e,a)=>{let r=R(Z,e.__scopePopover),d=s.useRef(null),n=(0,l.e)(a,d),i=s.useRef(!1);return s.useEffect(()=>{let e=d.current;if(e)return(0,j.Ry)(e)},[]),(0,v.jsx)(y.Z,{as:$,allowPinchZoom:!0,children:(0,v.jsx)(V,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,t.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,t.M)(e.onPointerDownOutside,e=>{let a=e.detail.originalEvent,r=0===a.button&&!0===a.ctrlKey,s=2===a.button||r;i.current=s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,t.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),E=s.forwardRef((e,a)=>{let r=R(Z,e.__scopePopover),t=s.useRef(!1),l=s.useRef(!1);return(0,v.jsx)(V,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(t.current||r.triggerRef.current?.focus(),a.preventDefault()),t.current=!1,l.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(t.current=!0,"pointerdown"!==a.detail.originalEvent.type||(l.current=!0));let s=a.target;r.triggerRef.current?.contains(s)&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&l.current&&a.preventDefault()}})}),V=s.forwardRef((e,a)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:t,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:x,onInteractOutside:m,...h}=e,f=R(Z,r),j=w(r);return(0,i.EW)(),(0,v.jsx)(o.M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:t,onUnmountAutoFocus:l,children:(0,v.jsx)(n.XB,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:x,onDismiss:()=>f.onOpenChange(!1),children:(0,v.jsx)(u.VY,{"data-state":I(f.open),role:"dialog",id:f.contentId,...j,...h,ref:a,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),K="PopoverClose";function I(e){return e?"open":"closed"}s.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,l=R(K,r);return(0,v.jsx)(m.WV.button,{type:"button",...s,ref:a,onClick:(0,t.M)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=K,s.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,t=w(r);return(0,v.jsx)(u.Eh,{...t,...s,ref:a})}).displayName="PopoverArrow";var M=k,B=T,Y=F,G=O}};