"use strict";exports.id=413,exports.ids=[413],exports.modules={10413:(e,t,a)=>{a.d(t,{Z:()=>n});var d=a(7310),l=a(48937),i=a(93567);let n=globalThis.drizzle||function(){let e=(0,l.Z)(process.env.POSTGRES_DB_URL);return(0,d.t)(e,{schema:i,logger:!1})}()},93567:(e,t,a)=>{a.r(t),a.d(t,{aliases:()=>k,apiKeys:()=>Q,apkReleaseStatusEnum:()=>J,apkReleases:()=>ep,apkReleasesDrafts:()=>em,apkReleasesDraftsRelations:()=>eg,apkReleasesRelations:()=>ey,appUpdatePolicies:()=>eN,appUpdatePoliciesDrafts:()=>eL,appUpdatePoliciesDraftsRelations:()=>eh,appUpdatePoliciesRelations:()=>eI,authClients:()=>G,authClientsRelations:()=>Y,bytea:()=>K,changeLogActionEnum:()=>P,changeLogEntityEnum:()=>E,changeLogs:()=>e1,changeLogsRelations:()=>e6,configKeys:()=>eA,configKeysDrafts:()=>eB,configKeysDraftsRelations:()=>ev,configKeysHistory:()=>ek,configKeysHistoryRelations:()=>eK,configKeysRelations:()=>eD,dataKeys:()=>h,dataKeysDrafts:()=>D,dataKeysDraftsRelations:()=>w,dataKeysHistory:()=>B,dataKeysHistoryRelations:()=>v,dataKeysRelations:()=>A,deviceAppStates:()=>eo,deviceAppStatesRelations:()=>eu,deviceUpdateEvents:()=>er,devices:()=>es,diagnoses:()=>ez,diagnosesDrafts:()=>eS,diagnosesDraftsRelations:()=>eO,diagnosesHistory:()=>eH,diagnosesHistoryRelations:()=>eC,diagnosesRelations:()=>eT,drugTypeEnum:()=>q,drugsLibrary:()=>eF,drugsLibraryDrafts:()=>eW,drugsLibraryDraftsRelations:()=>eG,drugsLibraryHistory:()=>eY,drugsLibraryHistoryRelations:()=>eQ,drugsLibraryItemValidationType:()=>eZ,drugsLibraryRelations:()=>eM,editorInfo:()=>en,emailTemplates:()=>T,files:()=>ef,filesChunks:()=>e_,filesRelations:()=>ec,hospitals:()=>ee,hospitalsDrafts:()=>ea,hospitalsDraftsRelations:()=>ed,hospitalsHistory:()=>el,hospitalsHistoryRelations:()=>ei,hospitalsRelations:()=>et,languages:()=>F,listStyleEnum:()=>U,mailerServiceEnum:()=>b,mailerSettings:()=>z,pendingDeletion:()=>eX,pendingDeletionRelations:()=>e0,roleNameEnum:()=>V,rolesRelations:()=>Z,screenTypeEnum:()=>$,screens:()=>e$,screensDrafts:()=>eU,screensDraftsRelations:()=>eP,screensHistory:()=>eE,screensHistoryRelations:()=>eJ,screensRelations:()=>eq,scriptTypeEnum:()=>x,scripts:()=>ew,scriptsDrafts:()=>eV,scriptsDraftsRelations:()=>ej,scriptsHistory:()=>eR,scriptsHistoryRelations:()=>ex,scriptsRelations:()=>eb,siteEnvEnum:()=>R,siteTypeEnum:()=>j,sites:()=>X,sys:()=>S,tokens:()=>O,tokensRelations:()=>H,userRoles:()=>C,users:()=>M,usersRelations:()=>W});var d=a(11009),l=a(34149),i=a(31540),n=a(55396),s=a(8324),r=a(95961),o=a(80967),u=a(72140),f=a(12941),c=a(98748),_=a(28680),p=a(1575),y=a(8483),N=a(69909),I=a(9576),m=a(42655),g=a(69146);let L={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}};[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}].reduce((e,t)=>{let a=t.value,d=t.value,l=[d,`${d}_option`];return"single_select"===a&&(l=[...l,"dropdown","dropdown_option"]),{...e,[d]:l}},{}),[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}].reduce((e,t)=>{let a=t.name,d=t.name,l=[d,`${d}_option`];return"dropdown"===a&&(l=[...l,"single_select","single_select_option"]),{...e,[d]:l}},{}),m.Z,g.Z,m.Z,g.Z,m.Z,g.Z,m.Z,g.Z,m.Z,g.Z,m.Z,g.Z;let h=(0,s.af)("nt_data_keys",{id:(0,r.eP)("id").primaryKey(),uuid:(0,o.Vj)("uuid").notNull().unique().default((0,l.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),uniqueKey:(0,o.Vj)("unique_key").notNull().unique().default((0,l.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,u.fL)("name").notNull(),label:(0,u.fL)("label").default("").notNull(),refId:(0,u.fL)("ref_id"),dataType:(0,u.fL)("data_type").notNull(),options:(0,_.JB)("options").default([]).$type().notNull(),metadata:(0,_.JB)("metadata").default({}).$type().notNull(),version:(0,f._L)("version").notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),A=(0,d.lE)(h,({many:e,one:t})=>({history:e(B),draft:t(D,{fields:[h.uuid],references:[D.dataKeyId]})})),D=(0,s.af)("nt_data_keys_drafts",{id:(0,r.eP)("id").primaryKey(),uuid:(0,o.Vj)("uuid").notNull().unique().default((0,l.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,u.fL)("name").notNull(),uniqueKey:(0,o.Vj)("unique_key").notNull(),dataKeyId:(0,o.Vj)("data_key_id").references(()=>h.uuid,{onDelete:"cascade"}),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id"),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)});(0,d.lE)(D,({one:e})=>({dataKey:e(h,{fields:[D.dataKeyId],references:[h.uuid]})}));let B=(0,s.af)("nt_data_keys_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),dataKeyId:(0,o.Vj)("data_key_id").references(()=>h.uuid,{onDelete:"cascade"}).notNull(),restoreKey:(0,o.Vj)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),v=(0,d.lE)(B,({one:e})=>({dataKey:e(h,{fields:[B.dataKeyId],references:[h.uuid]})})),k=(0,s.af)("nt_aliases",{id:(0,r.eP)("id").primaryKey(),uuid:(0,o.Vj)("uuid").notNull().unique().default((0,l.i6)`md5(random()::text || clock_timestamp()::text)::uuid`),name:(0,u.fL)("name").notNull(),alias:(0,u.fL)("alias").notNull(),script:(0,u.fL)("script").notNull(),oldScript:(0,u.fL)("old_script"),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),K=(0,i.Tr)({dataType:()=>"bytea"}),w=(0,d.lE)(D,({one:e})=>({createdBy:e(M,{fields:[D.createdByUserId],references:[M.userId]})})),b=(0,n.ys)("mailer_service",["gmail","smtp"]),V=(0,n.ys)("role_name",["user","admin","super_user"]),j=(0,n.ys)("site_type",["nodeapi","webeditor"]),R=(0,n.ys)("site_env",["production","stage","development","demo"]),x=(0,n.ys)("script_type",["admission","discharge","neolab","drecord","dff_calculator"]),$=(0,n.ys)("screen_type",["diagnosis","checklist","form","management","multi_select","single_select","progress","timer","yesno","drugs","fluids","feeds","zw_edliz_summary_table","mwi_edliz_summary_table","edliz_summary_table","dynamic_form"]),q=(0,n.ys)("drug_type",["drug","fluid","feed"]),U=(0,n.ys)("list_style",["none","number","bullet"]),P=(0,n.ys)("change_log_action",["create","update","delete","publish","restore","rollback","merge"]),E=(0,n.ys)("change_log_entity",["script","screen","diagnosis","config_key","drugs_library","data_key","alias","hospital","release","app_update_policy","apk_release"]),J=(0,n.ys)("apk_release_status",["uploaded","validated","approved","available","deprecated","revoked","rolled_back"]),z=(0,s.af)("nt_mailer_settings",{id:(0,r.eP)("id").primaryKey(),settingId:(0,o.Vj)("setting_id").notNull().unique().defaultRandom(),name:(0,u.fL)("name").notNull().unique(),service:b("service").notNull(),authUsername:(0,u.fL)("auth_username").notNull(),authPassword:(0,u.fL)("auth_password").notNull(),authType:(0,u.fL)("auth_type"),authMethod:(0,u.fL)("auth_method"),host:(0,u.fL)("host").notNull().default(""),port:(0,f._L)("port"),encryption:(0,u.fL)("encryption").notNull().default(""),fromAddress:(0,u.fL)("from_address").notNull().default(""),fromName:(0,u.fL)("from_name").notNull().default(""),isActive:(0,c.O7)("is_active").default(!1).notNull(),secure:(0,c.O7)("secure").default(!1).notNull()}),T=(0,s.af)("nt_email_templates",{id:(0,r.eP)("id").primaryKey(),templateId:(0,o.Vj)("template_id").notNull().unique().defaultRandom(),name:(0,u.fL)("name").notNull().unique(),data:(0,_.JB)("data").notNull()}),S=(0,s.af)("nt_sys",{_id:(0,r.eP)("_id").primaryKey(),id:(0,o.Vj)("id").notNull().unique().defaultRandom(),key:(0,u.fL)("key").notNull().unique(),value:(0,u.fL)("value").notNull()}),O=(0,s.af)("nt_tokens",{id:(0,r.eP)("id").primaryKey(),token:(0,f._L)("token").notNull().unique(),userId:(0,o.Vj)("user_id").references(()=>M.userId,{onDelete:"cascade"}),validUntil:(0,p.AB)("valid_until").notNull()}),H=(0,d.lE)(O,({one:e})=>({user:e(M,{fields:[O.userId],references:[M.userId]})})),C=(0,s.af)("nt_user_roles",{id:(0,r.eP)("id").primaryKey(),name:V("name").notNull().unique(),description:(0,u.fL)("description")}),Z=(0,d.lE)(C,({many:e})=>({users:e(M)})),F=(0,s.af)("nt_languages",{id:(0,r.eP)("id").primaryKey(),name:(0,u.fL)("name").notNull().unique(),iso:(0,u.fL)("iso").notNull().unique(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),M=(0,s.af)("nt_users",{id:(0,r.eP)("id").primaryKey(),userId:(0,o.Vj)("user_id").notNull().unique().defaultRandom(),role:V("role").references(()=>C.name,{onDelete:"cascade"}).default("user").notNull(),email:(0,u.fL)("email").notNull().unique(),password:(0,u.fL)("password").notNull(),displayName:(0,u.fL)("display_name").notNull(),firstName:(0,u.fL)("first_name"),lastName:(0,u.fL)("last_name"),avatar:(0,u.fL)("avatar"),avatar_sm:(0,u.fL)("avatar_sm"),avatar_md:(0,u.fL)("avatar_md"),activationDate:(0,p.AB)("activation_date"),lastLoginDate:(0,p.AB)("last_login_date"),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({searchIndex:(0,y.Kz)("users_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.email}) ||
                    to_tsvector('english', ${e.displayName}) ||
                    to_tsvector('english', ${e.firstName}) ||
                    to_tsvector('english', ${e.lastName})
                )`)})),W=(0,d.lE)(M,({many:e,one:t})=>({authTokens:e(G),tokens:e(O),files:e(ef),role:t(C,{fields:[M.role],references:[C.name]})})),G=(0,s.af)("nt_auth_clients",{id:(0,r.eP)("id").primaryKey(),clientId:(0,o.Vj)("client_id").notNull().unique().defaultRandom(),clientToken:(0,u.fL)("client_token").notNull().unique(),userId:(0,o.Vj)("user_id").references(()=>M.userId,{onDelete:"cascade"}),validUntil:(0,p.AB)("valid_until"),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),Y=(0,d.lE)(G,({one:e})=>({user:e(M,{fields:[G.userId],references:[M.userId]})})),Q=(0,s.af)("nt_api_keys",{id:(0,r.eP)("id").primaryKey(),apiKeyId:(0,o.Vj)("api_key_id").notNull().unique().defaultRandom(),apiKey:(0,u.fL)("api_key").notNull().unique().$defaultFn(()=>(0,I.Z)()),validUntil:(0,p.AB)("valid_until"),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),X=(0,s.af)("nt_sites",{id:(0,r.eP)("id").primaryKey(),siteId:(0,o.Vj)("site_id").notNull().unique().defaultRandom(),name:(0,u.fL)("name").notNull().unique(),link:(0,u.fL)("link").notNull().unique(),apiKey:(0,u.fL)("api_key").notNull(),type:j("type").notNull(),env:R("env").notNull().default("production"),displayName:(0,u.fL)("display_name"),countryISO:(0,u.fL)("country_iso"),countryName:(0,u.fL)("country_name"),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),ee=(0,s.af)("nt_hospitals",{id:(0,r.eP)("id").primaryKey(),hospitalId:(0,o.Vj)("hospital_id").notNull().unique().defaultRandom(),oldHospitalId:(0,u.fL)("old_hospital_id").unique(),name:(0,u.fL)("name").notNull().unique(),country:(0,u.fL)("country").default(""),version:(0,f._L)("version").default(1).notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({searchIndex:(0,y.Kz)("hospitals_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.name})
                )`)})),et=(0,d.lE)(ee,({many:e,one:t})=>({history:e(el),draft:t(ea,{fields:[ee.hospitalId],references:[ea.hospitalId]})})),ea=(0,s.af)("nt_hospitals_drafts",{id:(0,r.eP)("id").primaryKey(),hospitalDraftId:(0,o.Vj)("hospital_draft_id").notNull().unique().defaultRandom(),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"cascade"}),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),ed=(0,d.lE)(ea,({one:e})=>({hospital:e(ee,{fields:[ea.hospitalId],references:[ee.hospitalId]}),createdBy:e(M,{fields:[ea.createdByUserId],references:[M.userId]})})),el=(0,s.af)("nt_hospitals_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"cascade"}).notNull(),restoreKey:(0,o.Vj)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),ei=(0,d.lE)(el,({one:e})=>({hospital:e(ee,{fields:[el.hospitalId],references:[ee.hospitalId]})})),en=(0,s.af)("nt_editor_info",{id:(0,r.eP)("id").primaryKey(),dataVersion:(0,f._L)("data_version").notNull().default(1),lastPublishDate:(0,p.AB)("last_publish_date"),lastDataKeysSyncDate:(0,p.AB)("last_data_keys_sync_date")}),es=(0,s.af)("nt_devices",{id:(0,r.eP)("id").primaryKey(),deviceId:(0,u.fL)("device_id").notNull().unique(),deviceHash:(0,u.fL)("device_hash").notNull().unique(),details:(0,_.JB)("details").default({}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),er=(0,s.af)("nt_device_update_events",{id:(0,r.eP)("id").primaryKey(),eventId:(0,o.Vj)("event_id").notNull().unique().defaultRandom(),deviceId:(0,u.fL)("device_id").notNull(),eventType:(0,u.fL)("event_type").notNull(),appVersion:(0,u.fL)("app_version"),runtimeVersion:(0,u.fL)("runtime_version"),otaUpdateId:(0,u.fL)("ota_update_id"),otaChannel:(0,u.fL)("ota_channel"),payload:(0,_.JB)("payload").default("{}").notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull()},e=>({deviceIndex:(0,y.Kz)("device_update_events_device_idx").on(e.deviceId),typeIndex:(0,y.Kz)("device_update_events_type_idx").on(e.eventType)})),eo=(0,s.af)("nt_device_app_states",{id:(0,r.eP)("id").primaryKey(),deviceId:(0,u.fL)("device_id").notNull(),appVersion:(0,u.fL)("app_version").notNull(),runtimeVersion:(0,u.fL)("runtime_version").notNull(),otaUpdateId:(0,u.fL)("ota_update_id"),otaChannel:(0,u.fL)("ota_channel"),apkReleaseId:(0,o.Vj)("apk_release_id").references(()=>ep.apkReleaseId,{onDelete:"set null"}),lastSeenAt:(0,p.AB)("last_seen_at").defaultNow().notNull(),reportedAt:(0,p.AB)("reported_at").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)},e=>({deviceUnique:(0,y.o9)("device_app_state_unique").on(e.deviceId)})),eu=(0,d.lE)(eo,({one:e})=>({apkRelease:e(ep,{fields:[eo.apkReleaseId],references:[ep.apkReleaseId]})})),ef=(0,s.af)("nt_files",{id:(0,r.eP)("id").primaryKey(),fileId:(0,o.Vj)("file_id").notNull().unique().defaultRandom(),ownerId:(0,o.Vj)("owner_id").references(()=>M.userId,{onDelete:"cascade"}),filename:(0,u.fL)("filename").notNull(),contentType:(0,u.fL)("content_type").notNull(),size:(0,f._L)("size").notNull(),metadata:(0,_.JB)("metadata").default("{}").notNull(),data:K("data").notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),ec=(0,d.lE)(ef,({many:e,one:t})=>({owner:t(M,{fields:[ef.ownerId],references:[M.userId]})})),e_=(0,s.af)("nt_files_chunks",{id:(0,r.eP)("id").primaryKey(),chunkId:(0,o.Vj)("chunk_id").notNull().unique().defaultRandom(),fileId:(0,o.Vj)("file_id").references(()=>ef.fileId,{onDelete:"cascade"}).notNull(),data:K("data").notNull()}),ep=(0,s.af)("nt_apk_releases",{id:(0,r.eP)("id").primaryKey(),apkReleaseId:(0,o.Vj)("apk_release_id").notNull().unique().defaultRandom(),runtimeVersion:(0,u.fL)("runtime_version").notNull(),versionName:(0,u.fL)("version_name").notNull(),versionCode:(0,f._L)("version_code").notNull(),status:J("status").notNull().default("uploaded"),isAvailable:(0,c.O7)("is_available").default(!1).notNull(),fileId:(0,o.Vj)("file_id").references(()=>ef.fileId,{onDelete:"set null"}),fileSize:(0,f._L)("file_size"),checksumSha256:(0,u.fL)("checksum_sha256"),signatureSha256:(0,u.fL)("signature_sha256"),validatedAt:(0,p.AB)("validated_at"),approvedAt:(0,p.AB)("approved_at"),releaseNotes:(0,u.fL)("release_notes").default(""),releasedAt:(0,p.AB)("released_at"),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({uniqueVersionPerRuntime:(0,y.o9)("apk_release_unique_version").on(e.runtimeVersion,e.versionCode),statusIndex:(0,y.Kz)("apk_release_status_index").on(e.status)})),ey=(0,d.lE)(ep,({one:e})=>({file:e(ef,{fields:[ep.fileId],references:[ef.fileId]}),createdBy:e(M,{fields:[ep.createdByUserId],references:[M.userId]})})),eN=(0,s.af)("nt_app_update_policies",{id:(0,r.eP)("id").primaryKey(),policyId:(0,o.Vj)("policy_id").notNull().unique().defaultRandom(),runtimeVersion:(0,u.fL)("runtime_version").notNull(),policyVersion:(0,f._L)("policy_version").default(1).notNull(),otaEnabled:(0,c.O7)("ota_enabled").default(!0).notNull(),otaChannel:(0,u.fL)("ota_channel").default("production").notNull(),apkAutoDownload:(0,c.O7)("apk_auto_download").default(!0).notNull(),apkForceInstall:(0,c.O7)("apk_force_install").default(!1).notNull(),apkGracePeriodHours:(0,f._L)("apk_grace_period_hours"),apkForceAfter:(0,p.AB)("apk_force_after"),apkInstallWindow:(0,u.fL)("apk_install_window").default("on_restart"),apkMessageTitle:(0,u.fL)("apk_message_title").default(""),apkMessageBody:(0,u.fL)("apk_message_body").default(""),currentApkReleaseId:(0,o.Vj)("current_apk_release_id").references(()=>ep.apkReleaseId,{onDelete:"set null"}),rollbackApkReleaseId:(0,o.Vj)("rollback_apk_release_id").references(()=>ep.apkReleaseId,{onDelete:"set null"}),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({})),eI=(0,d.lE)(eN,({one:e})=>({currentApkRelease:e(ep,{fields:[eN.currentApkReleaseId],references:[ep.apkReleaseId],relationName:"currentApkRelease"}),rollbackApkRelease:e(ep,{fields:[eN.rollbackApkReleaseId],references:[ep.apkReleaseId],relationName:"rollbackApkRelease"}),createdBy:e(M,{fields:[eN.createdByUserId],references:[M.userId]})})),em=(0,s.af)("nt_apk_releases_drafts",{id:(0,r.eP)("id").primaryKey(),apkReleaseDraftId:(0,o.Vj)("apk_release_draft_id").notNull().unique().defaultRandom(),apkReleaseId:(0,o.Vj)("apk_release_id").references(()=>ep.apkReleaseId,{onDelete:"cascade"}),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),eg=(0,d.lE)(em,({one:e})=>({apkRelease:e(ep,{fields:[em.apkReleaseId],references:[ep.apkReleaseId]}),createdBy:e(M,{fields:[em.createdByUserId],references:[M.userId]})})),eL=(0,s.af)("nt_app_update_policies_drafts",{id:(0,r.eP)("id").primaryKey(),policyDraftId:(0,o.Vj)("policy_draft_id").notNull().unique().defaultRandom(),policyId:(0,o.Vj)("policy_id").references(()=>eN.policyId,{onDelete:"cascade"}),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),eh=(0,d.lE)(eL,({one:e})=>({policy:e(eN,{fields:[eL.policyId],references:[eN.policyId]}),createdBy:e(M,{fields:[eL.createdByUserId],references:[M.userId]})})),eA=(0,s.af)("nt_config_keys",{id:(0,r.eP)("id").primaryKey(),configKeyId:(0,o.Vj)("config_key_id").notNull().unique().defaultRandom(),oldConfigKeyId:(0,u.fL)("old_config_key_id").unique(),position:(0,f._L)("position").notNull(),version:(0,f._L)("version").notNull(),key:(0,u.fL)("key").notNull().unique(),label:(0,u.fL)("label").notNull().unique(),summary:(0,u.fL)("summary").notNull(),source:(0,u.fL)("source").default("editor"),preferences:(0,_.JB)("preferences").default(JSON.stringify(L)).notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({searchIndex:(0,y.Kz)("config_keys_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.key}) ||
                    to_tsvector('english', ${e.label}) ||
                    to_tsvector('english', ${e.summary})
                )`)})),eD=(0,d.lE)(eA,({many:e,one:t})=>({history:e(ek),draft:t(eB,{fields:[eA.configKeyId],references:[eB.configKeyId]})})),eB=(0,s.af)("nt_config_keys_drafts",{id:(0,r.eP)("id").primaryKey(),configKeyDraftId:(0,o.Vj)("config_key_draft_id").notNull().unique().defaultRandom(),configKeyId:(0,o.Vj)("config_key_id").references(()=>eA.configKeyId,{onDelete:"cascade"}),position:(0,f._L)("position").notNull(),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),ev=(0,d.lE)(eB,({one:e})=>({configKey:e(eA,{fields:[eB.configKeyId],references:[eA.configKeyId]}),createdBy:e(M,{fields:[eB.createdByUserId],references:[M.userId]})})),ek=(0,s.af)("nt_config_keys_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),configKeyId:(0,o.Vj)("config_key_id").references(()=>eA.configKeyId,{onDelete:"cascade"}).notNull(),restoreKey:(0,o.Vj)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),eK=(0,d.lE)(ek,({one:e})=>({configKey:e(eA,{fields:[ek.configKeyId],references:[eA.configKeyId]})})),ew=(0,s.af)("nt_scripts",{id:(0,r.eP)("id").primaryKey(),scriptId:(0,o.Vj)("script_id").notNull().unique().defaultRandom(),oldScriptId:(0,u.fL)("old_script_id").unique(),version:(0,f._L)("version").notNull(),type:x("type").notNull().default("admission"),position:(0,f._L)("position").notNull(),source:(0,u.fL)("source").default("editor"),title:(0,u.fL)("title").notNull(),printTitle:(0,u.fL)("print_title").notNull(),description:(0,u.fL)("description").notNull().default(""),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"set null"}),exportable:(0,c.O7)("exportable").notNull().default(!0),nuidSearchEnabled:(0,c.O7)("nuid_search_enabled").notNull().default(!1),nuidSearchFields:(0,_.JB)("nuid_search_fields").default("[]").notNull(),reviewable:(0,c.O7)("reviewable").notNull().default(!1),reviewConfigurations:(0,_.JB)("review_configurations").default("[]").notNull(),preferences:(0,_.JB)("preferences").default(JSON.stringify(L)).notNull(),printConfig:(0,_.JB)("print_config").notNull().default(`{
              "headerFormat": "",
              "headerFields": [],
              "footerFields": [],
              "sections": []
            }`).$type(),printSections:(0,_.JB)("print_sections").default("[]").notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({searchIndex:(0,y.Kz)("scripts_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.title}) ||
                    to_tsvector('english', ${e.description})
                )`)})),eb=(0,d.lE)(ew,({many:e,one:t})=>({screens:e(e$),screensDrafts:e(eU),screensHistory:e(eE),diagnoses:e(ez),diagnosesDrafts:e(eS),diagnosesHistory:e(eH),history:e(eR),drugsLibrary:e(eF),draft:t(eV,{fields:[ew.scriptId],references:[eV.scriptId]})})),eV=(0,s.af)("nt_scripts_drafts",{id:(0,r.eP)("id").primaryKey(),scriptDraftId:(0,o.Vj)("script_draft_id").notNull().unique().defaultRandom(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),position:(0,f._L)("position").notNull(),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"set null"}),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),ej=(0,d.lE)(eV,({one:e,many:t})=>({screensDrafts:t(eU),diagnosesDrafts:t(eS),script:e(ew,{fields:[eV.scriptId],references:[ew.scriptId]}),createdBy:e(M,{fields:[eV.createdByUserId],references:[M.userId]})})),eR=(0,s.af)("nt_scripts_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,o.Vj)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),ex=(0,d.lE)(eR,({one:e})=>({script:e(ew,{fields:[eR.scriptId],references:[ew.scriptId]})})),e$=(0,s.af)("nt_screens",{id:(0,r.eP)("id").primaryKey(),screenId:(0,o.Vj)("screen_id").notNull().unique().defaultRandom(),oldScreenId:(0,u.fL)("old_screen_id").unique(),oldScriptId:(0,u.fL)("old_script_id"),version:(0,f._L)("version").notNull(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}).notNull(),type:$("type").notNull(),position:(0,f._L)("position").notNull(),source:(0,u.fL)("source").default("editor"),sectionTitle:(0,u.fL)("section_title").notNull(),previewTitle:(0,u.fL)("preview_title").notNull().default(""),previewPrintTitle:(0,u.fL)("preview_print_title").notNull().default(""),condition:(0,u.fL)("condition").notNull().default(""),skipToCondition:(0,u.fL)("skip_to_condition").notNull().default(""),skipToScreenId:(0,u.fL)("skip_to_screen_id"),epicId:(0,u.fL)("epic_id").notNull().default(""),storyId:(0,u.fL)("story_id").notNull().default(""),refId:(0,u.fL)("ref_id").notNull().default(""),refIdDataKey:(0,u.fL)("ref_id_data_key").notNull().default(""),refKey:(0,u.fL)("ref_key").notNull().default(""),refKeyDataKey:(0,u.fL)("ref_key_data_key").notNull().default(""),step:(0,u.fL)("step").notNull().default(""),actionText:(0,u.fL)("action_text").notNull().default(""),contentText:(0,u.fL)("content_text").notNull().default(""),contentTextImage:(0,_.JB)("content_text_image").$type(),infoText:(0,u.fL)("info_text").notNull().default(""),title:(0,u.fL)("title").notNull(),title1:(0,u.fL)("title1").notNull().default(""),title2:(0,u.fL)("title2").notNull().default(""),title3:(0,u.fL)("title3").notNull().default(""),title4:(0,u.fL)("title4").notNull().default(""),text1:(0,u.fL)("text1").notNull().default(""),text2:(0,u.fL)("text2").notNull().default(""),text3:(0,u.fL)("text3").notNull().default(""),image1:(0,_.JB)("image1").$type(),image2:(0,_.JB)("image2").$type(),image3:(0,_.JB)("image3").$type(),instructions:(0,u.fL)("instructions").notNull().default(""),instructions2:(0,u.fL)("instructions2").notNull().default(""),instructions3:(0,u.fL)("instructions3").notNull().default(""),instructions4:(0,u.fL)("instructions4").notNull().default(""),hcwDiagnosesInstructions:(0,u.fL)("hcw_diagnoses_instructions").notNull().default(""),suggestedDiagnosesInstructions:(0,u.fL)("suggested_diagnoses_instructions").notNull().default(""),notes:(0,u.fL)("notes").notNull().default(""),dataType:(0,u.fL)("data_type").notNull().default(""),key:(0,u.fL)("key").notNull().default(""),keyId:(0,u.fL)("key_id").notNull().default(""),label:(0,u.fL)("label").notNull().default(""),negativeLabel:(0,u.fL)("negative_label").notNull().default(""),positiveLabel:(0,u.fL)("positive_label").notNull().default(""),timerValue:(0,f._L)("timer_value"),multiplier:(0,f._L)("multiplier"),minValue:(0,f._L)("min_value"),maxValue:(0,f._L)("max_value"),exportable:(0,c.O7)("exportable").notNull().default(!0),printable:(0,c.O7)("printable"),skippable:(0,c.O7)("skippable").notNull().default(!1),confidential:(0,c.O7)("confidential").notNull().default(!1),prePopulate:(0,_.JB)("pre_populate").default("[]").$type().notNull(),fields:(0,_.JB)("fields").default("[]").$type().notNull(),items:(0,_.JB)("items").default("[]").$type().notNull(),preferences:(0,_.JB)("preferences").default(JSON.stringify(L)).$type().notNull(),drugs:(0,_.JB)("drugs").default("[]").$type().notNull(),fluids:(0,_.JB)("fluids").default("[]").$type().notNull(),feeds:(0,_.JB)("feeds").default("[]").$type().notNull(),reasons:(0,_.JB)("reasons").default("[]").notNull().$type(),listStyle:U("list_style").default("none").notNull(),printDisplayColumns:(0,f._L)("print_display_columns").default(2).notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at"),collectionName:(0,u.fL)("collection_name").notNull().default(""),collectionLabel:(0,u.fL)("collection_label").notNull().default(""),repeatable:(0,c.O7)("repeatable")},e=>({searchIndex:(0,y.Kz)("screens_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.title})
                )`)})),eq=(0,d.lE)(e$,({many:e,one:t})=>({history:e(eE),script:t(ew,{fields:[e$.scriptId],references:[ew.scriptId]}),draft:t(eU,{fields:[e$.screenId],references:[eU.screenId]})})),eU=(0,s.af)("nt_screens_drafts",{id:(0,r.eP)("id").primaryKey(),screenDraftId:(0,o.Vj)("screen_draft_id").notNull().unique().defaultRandom(),screenId:(0,o.Vj)("screen_id").references(()=>e$.screenId,{onDelete:"cascade"}),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,o.Vj)("script_draft_id").references(()=>eV.scriptDraftId,{onDelete:"cascade"}),type:$("type").notNull(),position:(0,f._L)("position").notNull(),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),eP=(0,d.lE)(eU,({one:e})=>({screen:e(e$,{fields:[eU.screenId],references:[e$.screenId]}),scriptDraft:e(eV,{fields:[eU.scriptDraftId],references:[eV.scriptDraftId]}),script:e(ew,{fields:[eU.scriptId],references:[ew.scriptId]}),createdBy:e(M,{fields:[eU.createdByUserId],references:[M.userId]})})),eE=(0,s.af)("nt_screens_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),screenId:(0,o.Vj)("screen_id").references(()=>e$.screenId,{onDelete:"cascade"}).notNull(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,u.fL)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),eJ=(0,d.lE)(eE,({one:e})=>({screen:e(e$,{fields:[eE.screenId],references:[e$.screenId]}),script:e(ew,{fields:[eE.scriptId],references:[ew.scriptId]})})),ez=(0,s.af)("nt_diagnoses",{id:(0,r.eP)("id").primaryKey(),diagnosisId:(0,o.Vj)("diagnosis_id").notNull().unique().defaultRandom(),oldDiagnosisId:(0,u.fL)("old_diagnosis_id").unique(),oldScriptId:(0,u.fL)("old_script_id"),version:(0,f._L)("version").notNull(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}).notNull(),position:(0,f._L)("position").notNull(),source:(0,u.fL)("source").default("editor"),expression:(0,u.fL)("expression").notNull(),name:(0,u.fL)("name").notNull().default(""),description:(0,u.fL)("description").notNull().default(""),key:(0,u.fL)("key").default(""),keyId:(0,u.fL)("key_id").notNull().default(""),severityOrder:(0,f._L)("severity_order"),expressionMeaning:(0,u.fL)("expression_meaning").notNull().default(""),symptoms:(0,_.JB)("symptoms").default("[]").$type().notNull(),text1:(0,u.fL)("text1").notNull().default(""),text2:(0,u.fL)("text2").notNull().default(""),text3:(0,u.fL)("text3").notNull().default(""),image1:(0,_.JB)("image1").$type(),image2:(0,_.JB)("image2").$type(),image3:(0,_.JB)("image3").$type(),preferences:(0,_.JB)("preferences").default(JSON.stringify(L)).$type().notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")},e=>({searchIndex:(0,y.Kz)("diagnoses_search_index").using("gin",(0,l.i6)`(
                    to_tsvector('english', ${e.name})
                )`)})),eT=(0,d.lE)(ez,({many:e,one:t})=>({history:e(eH),script:t(ew,{fields:[ez.scriptId],references:[ew.scriptId]}),draft:t(eS,{fields:[ez.diagnosisId],references:[eS.diagnosisId]})})),eS=(0,s.af)("nt_diagnoses_drafts",{id:(0,r.eP)("id").primaryKey(),diagnosisDraftId:(0,o.Vj)("diagnosis_draft_id").notNull().unique().defaultRandom(),diagnosisId:(0,o.Vj)("diagnosis_id").references(()=>ez.diagnosisId,{onDelete:"cascade"}),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,o.Vj)("script_draft_id").references(()=>eV.scriptDraftId,{onDelete:"cascade"}),position:(0,f._L)("position").notNull(),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),eO=(0,d.lE)(eS,({one:e})=>({diagnosis:e(ez,{fields:[eS.diagnosisId],references:[ez.diagnosisId]}),scriptDraft:e(eV,{fields:[eS.scriptDraftId],references:[eV.scriptDraftId]}),script:e(ew,{fields:[eS.scriptId],references:[ew.scriptId]}),createdBy:e(M,{fields:[eS.createdByUserId],references:[M.userId]})})),eH=(0,s.af)("nt_diagnoses_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),diagnosisId:(0,o.Vj)("diagnosis_id").references(()=>ez.diagnosisId,{onDelete:"cascade"}).notNull(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,u.fL)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),eC=(0,d.lE)(eH,({one:e})=>({diagnosis:e(ez,{fields:[eH.diagnosisId],references:[ez.diagnosisId]}),script:e(ew,{fields:[eH.scriptId],references:[ew.scriptId]})})),eZ=(0,n.ys)("dff_item_validation_type",["default","condition"]),eF=(0,s.af)("nt_drugs_library",{id:(0,r.eP)("id").primaryKey(),itemId:(0,o.Vj)("item_id").notNull().unique().defaultRandom(),key:(0,u.fL)("key").notNull().unique(),keyId:(0,u.fL)("key_id").notNull().default(""),type:q("type").notNull().default("drug"),drug:(0,u.fL)("drug").notNull().default(""),minGestation:(0,N.zz)("min_gestation"),maxGestation:(0,N.zz)("max_gestation"),minWeight:(0,N.zz)("min_weight"),maxWeight:(0,N.zz)("max_weight"),minAge:(0,N.zz)("min_age"),maxAge:(0,N.zz)("max_age"),hourlyFeed:(0,N.zz)("hourly_feed"),hourlyFeedDivider:(0,N.zz)("hourly_feed_divider"),dosage:(0,N.zz)("dosage"),dosageMultiplier:(0,N.zz)("dosage_multiplier"),dayOfLife:(0,u.fL)("day_of_life").notNull().default(""),dosageText:(0,u.fL)("dosage_text").notNull().default(""),managementText:(0,u.fL)("management_text").notNull().default(""),gestationKey:(0,u.fL)("gestation_key").notNull().default(""),weightKey:(0,u.fL)("weight_key").notNull().default(""),diagnosisKey:(0,u.fL)("diagnosis_key").notNull().default(""),ageKey:(0,u.fL)("age_key").notNull().default(""),ageKeyId:(0,u.fL)("age_key_id").notNull().default(""),gestationKeyId:(0,u.fL)("gestation_key_id").notNull().default(""),weightKeyId:(0,u.fL)("weight_key_id").notNull().default(""),diagnosisKeyId:(0,u.fL)("diagnosis_key_id").notNull().default(""),administrationFrequency:(0,u.fL)("administration_frequency").notNull().default(""),drugUnit:(0,u.fL)("drug_unit").notNull().default(""),routeOfAdministration:(0,u.fL)("route_of_administration").notNull().default(""),position:(0,f._L)("position").notNull(),condition:(0,u.fL)("condition").notNull().default(""),calculator_condition:(0,u.fL)("calculator_condition").notNull().default(""),validationType:eZ("validation_type").default("default"),version:(0,f._L)("version").notNull(),publishDate:(0,p.AB)("publish_date").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,p.AB)("deleted_at")}),eM=(0,d.lE)(eF,({many:e,one:t})=>({history:e(eY),draft:t(eW,{fields:[eF.itemId],references:[eW.itemId]})})),eW=(0,s.af)("nt_drugs_library_drafts",{id:(0,r.eP)("id").primaryKey(),itemDraftId:(0,o.Vj)("item_draft_id").notNull().unique().defaultRandom(),itemId:(0,o.Vj)("item_id").references(()=>eF.itemId,{onDelete:"cascade"}),key:(0,u.fL)("key").notNull(),type:q("type").notNull().default("drug"),position:(0,f._L)("position").notNull(),data:(0,_.JB)("data").$type().notNull(),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),updatedAt:(0,p.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),eG=(0,d.lE)(eW,({one:e})=>({item:e(eF,{fields:[eW.itemId],references:[eF.itemId]}),createdBy:e(M,{fields:[eW.createdByUserId],references:[M.userId]})})),eY=(0,s.af)("nt_drugs_library_history",{id:(0,r.eP)("id").primaryKey(),version:(0,f._L)("version").notNull(),itemId:(0,o.Vj)("item_id").references(()=>eF.itemId,{onDelete:"cascade"}).notNull(),restoreKey:(0,o.Vj)("restore_key"),changes:(0,_.JB)("data").default([]),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),eQ=(0,d.lE)(eY,({one:e})=>({item:e(eF,{fields:[eY.itemId],references:[eF.itemId]})})),eX=(0,s.af)("nt_pending_deletion",{id:(0,r.eP)("id").primaryKey(),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),screenId:(0,o.Vj)("screen_id").references(()=>e$.screenId,{onDelete:"cascade"}),screenScriptId:(0,o.Vj)("screen_script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),diagnosisId:(0,o.Vj)("diagnosis_id").references(()=>ez.diagnosisId,{onDelete:"cascade"}),diagnosisScriptId:(0,o.Vj)("diagnosis_script_id").references(()=>ew.scriptId,{onDelete:"cascade"}),configKeyId:(0,o.Vj)("config_key_id").references(()=>eA.configKeyId,{onDelete:"cascade"}),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"cascade"}),drugsLibraryItemId:(0,o.Vj)("drugs_library_item_id").references(()=>eF.itemId,{onDelete:"cascade"}),scriptDraftId:(0,o.Vj)("script_draft_id").references(()=>eV.scriptDraftId,{onDelete:"cascade"}),screenDraftId:(0,o.Vj)("screen_draft_id").references(()=>eU.screenDraftId,{onDelete:"cascade"}),diagnosisDraftId:(0,o.Vj)("diagnosis_draft_id").references(()=>eS.diagnosisDraftId,{onDelete:"cascade"}),configKeyDraftId:(0,o.Vj)("config_key_draft_id").references(()=>eB.configKeyDraftId,{onDelete:"cascade"}),hospitalDraftId:(0,o.Vj)("hospital_draft_id").references(()=>ea.hospitalDraftId,{onDelete:"cascade"}),drugsLibraryItemDraftId:(0,o.Vj)("drugs_library_item_draft_id").references(()=>eW.itemDraftId,{onDelete:"cascade"}),dataKeyId:(0,o.Vj)("data_key_id").references(()=>h.uuid,{onDelete:"cascade"}),dataKeyDraftId:(0,o.Vj)("data_key_draft_id").references(()=>h.uuid,{onDelete:"cascade"}),aliasId:(0,o.Vj)("alias_id").references(()=>k.uuid,{onDelete:"cascade"}),createdByUserId:(0,o.Vj)("created_by_user_id").references(()=>M.userId,{onDelete:"set null"}),createdAt:(0,p.AB)("created_at").defaultNow().notNull()}),e0=(0,d.lE)(eX,({one:e})=>({script:e(ew,{fields:[eX.scriptId],references:[ew.scriptId]}),screen:e(e$,{fields:[eX.screenId],references:[e$.screenId]}),screenScript:e(ew,{fields:[eX.screenScriptId],references:[ew.scriptId]}),diagnosis:e(ez,{fields:[eX.diagnosisId],references:[ez.diagnosisId]}),diagnosisScript:e(ew,{fields:[eX.diagnosisScriptId],references:[ew.scriptId]}),configKey:e(eA,{fields:[eX.configKeyId],references:[eA.configKeyId]}),hospital:e(ee,{fields:[eX.hospitalId],references:[ee.hospitalId]}),drugsLibraryItem:e(eF,{fields:[eX.drugsLibraryItemId],references:[eF.itemId]}),scriptDraft:e(eV,{fields:[eX.scriptId],references:[eV.scriptDraftId]}),screenDraft:e(eU,{fields:[eX.screenId],references:[eU.screenDraftId]}),diagnosisDraft:e(eS,{fields:[eX.diagnosisId],references:[eS.diagnosisDraftId]}),configKeyDraft:e(eB,{fields:[eX.configKeyId],references:[eB.configKeyDraftId]}),hospitalDraft:e(ea,{fields:[eX.hospitalId],references:[ea.hospitalDraftId]}),drugsLibraryItemDraft:e(eW,{fields:[eX.drugsLibraryItemDraftId],references:[eW.itemDraftId]}),dataKey:e(h,{fields:[eX.dataKeyId],references:[h.uuid]}),dataKeyDraft:e(D,{fields:[eX.dataKeyDraftId],references:[D.uuid]}),alias:e(k,{fields:[eX.aliasId],references:[k.uuid]}),createdBy:e(M,{fields:[eX.createdByUserId],references:[M.userId]})})),e1=(0,s.af)("nt_change_logs",{id:(0,r.eP)("id").primaryKey(),changeLogId:(0,o.Vj)("change_log_id").notNull().unique().defaultRandom(),version:(0,f._L)("version").notNull(),entityType:E("entity_type").notNull(),entityId:(0,o.Vj)("entity_id").notNull(),parentVersion:(0,f._L)("parent_version"),mergedFromVersion:(0,f._L)("merged_from_version"),scriptId:(0,o.Vj)("script_id").references(()=>ew.scriptId,{onDelete:"set null"}),screenId:(0,o.Vj)("screen_id").references(()=>e$.screenId,{onDelete:"set null"}),diagnosisId:(0,o.Vj)("diagnosis_id").references(()=>ez.diagnosisId,{onDelete:"set null"}),configKeyId:(0,o.Vj)("config_key_id").references(()=>eA.configKeyId,{onDelete:"set null"}),hospitalId:(0,o.Vj)("hospital_id").references(()=>ee.hospitalId,{onDelete:"set null"}),drugsLibraryItemId:(0,o.Vj)("drugs_library_item_id").references(()=>eF.itemId,{onDelete:"set null"}),dataKeyId:(0,o.Vj)("data_key_id").references(()=>h.uuid,{onDelete:"set null"}),aliasId:(0,o.Vj)("alias_id").references(()=>k.uuid,{onDelete:"set null"}),action:P("action").notNull(),changes:(0,_.JB)("changes").$type().default([]).notNull(),fullSnapshot:(0,_.JB)("full_snapshot").$type().notNull(),previousSnapshot:(0,_.JB)("previous_snapshot").$type().default({}).notNull(),snapshotHash:(0,u.fL)("snapshot_hash"),description:(0,u.fL)("description").notNull().default(""),changeReason:(0,u.fL)("change_reason").notNull().default(""),isActive:(0,c.O7)("is_active").default(!0).notNull(),supersededBy:(0,f._L)("superseded_by"),supersededAt:(0,p.AB)("superseded_at"),userId:(0,o.Vj)("user_id").references(()=>M.userId,{onDelete:"set null"}).notNull(),dateOfChange:(0,p.AB)("date_of_change").defaultNow().notNull(),createdAt:(0,p.AB)("created_at").defaultNow().notNull(),dataVersion:(0,f._L)("data_version")},e=>({uniqueVersionPerEntity:(0,y.o9)("unique_version_per_entity").on(e.entityType,e.entityId,e.version),activeVersionIndex:(0,y.Kz)("active_version_index").on(e.entityId,e.isActive),entityIndex:(0,y.Kz)("change_logs_entity_index").on(e.entityType,e.entityId),versionChainIndex:(0,y.Kz)("version_chain_index").on(e.entityId,e.parentVersion),userIndex:(0,y.Kz)("change_logs_user_index").on(e.userId),dateIndex:(0,y.Kz)("change_logs_date_index").on(e.dateOfChange),dataVersionIndex:(0,y.Kz)("change_logs_data_version_index").on(e.dataVersion)})),e6=(0,d.lE)(e1,({one:e})=>({user:e(M,{fields:[e1.userId],references:[M.userId],relationName:"changeLogUser"}),script:e(ew,{fields:[e1.scriptId],references:[ew.scriptId]}),screen:e(e$,{fields:[e1.screenId],references:[e$.screenId]}),diagnosis:e(ez,{fields:[e1.diagnosisId],references:[ez.diagnosisId]}),configKey:e(eA,{fields:[e1.configKeyId],references:[eA.configKeyId]}),hospital:e(ee,{fields:[e1.hospitalId],references:[ee.hospitalId]}),drugsLibraryItem:e(eF,{fields:[e1.drugsLibraryItemId],references:[eF.itemId]}),dataKey:e(h,{fields:[e1.dataKeyId],references:[h.uuid]}),alias:e(k,{fields:[e1.aliasId],references:[k.uuid]})}))}};