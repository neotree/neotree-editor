"use strict";exports.id=413,exports.ids=[413],exports.modules={68122:(e,t,i)=>{i.d(t,{$7:()=>n,uh:()=>d});let n={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},d=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"}]},10413:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(7310),d=i(48937),l=i(57418);let s=globalThis.drizzle||function(){let e=(0,d.Z)(process.env.POSTGRES_DB_URL);return(0,n.t)(e,{schema:l,logger:!1})}()},57418:(e,t,i)=>{i.r(t),i.d(t,{apiKeys:()=>J,authClients:()=>$,authClientsRelations:()=>P,bytea:()=>g,configKeys:()=>C,configKeysDrafts:()=>F,configKeysDraftsRelations:()=>M,configKeysHistory:()=>G,configKeysHistoryRelations:()=>W,configKeysRelations:()=>Z,devices:()=>U,diagnoses:()=>eo,diagnosesDrafts:()=>ef,diagnosesDraftsRelations:()=>ec,diagnosesHistory:()=>ep,diagnosesHistoryRelations:()=>e_,diagnosesRelations:()=>eu,editorInfo:()=>T,emailTemplates:()=>K,files:()=>z,filesChunks:()=>H,filesRelations:()=>O,hospitals:()=>S,languages:()=>b,mailerServiceEnum:()=>I,mailerSettings:()=>v,pendingDeletion:()=>eN,pendingDeletionRelations:()=>ey,roleNameEnum:()=>m,rolesRelations:()=>x,screenTypeEnum:()=>h,screens:()=>en,screensDrafts:()=>el,screensDraftsRelations:()=>es,screensHistory:()=>ea,screensHistoryRelations:()=>er,screensRelations:()=>ed,scriptTypeEnum:()=>D,scripts:()=>Q,scriptsDrafts:()=>Y,scriptsDraftsRelations:()=>ee,scriptsHistory:()=>et,scriptsHistoryRelations:()=>ei,scriptsRelations:()=>X,siteEnvEnum:()=>A,siteTypeEnum:()=>L,sites:()=>E,sys:()=>w,tokens:()=>V,tokensRelations:()=>k,userRoles:()=>j,users:()=>q,usersRelations:()=>R});var n=i(11009),d=i(34149),l=i(8324),s=i(95961),a=i(80967),r=i(72140),o=i(12941),u=i(98748),f=i(28680),c=i(1575),p=i(8483),_=i(9576),N=i(31540),y=i(55396);let g=(0,N.Tr)({dataType:()=>"bytea"}),I=(0,y.ys)("mailer_service",["gmail","smtp"]),m=(0,y.ys)("role_name",["user","admin","super_user"]),L=(0,y.ys)("site_type",["nodeapi","webeditor"]),A=(0,y.ys)("site_env",["production","stage","development","demo"]),D=(0,y.ys)("script_type",["admission","discharge","neolab"]),h=(0,y.ys)("screen_type",["diagnosis","checklist","form","management","multi_select","single_select","progress","timer","yesno","zw_edliz_summary_table","mwi_edliz_summary_table","edliz_summary_table"]);var B=i(68122);let v=(0,l.af)("nt_mailer_settings",{id:(0,s.eP)("id").primaryKey(),settingId:(0,a.Vj)("setting_id").notNull().unique().defaultRandom(),name:(0,r.fL)("name").notNull().unique(),service:I("service").notNull(),authUsername:(0,r.fL)("auth_username").notNull(),authPassword:(0,r.fL)("auth_password").notNull(),authType:(0,r.fL)("auth_type"),authMethod:(0,r.fL)("auth_method"),host:(0,r.fL)("host").notNull().default(""),port:(0,o._L)("port"),encryption:(0,r.fL)("encryption").notNull().default(""),fromAddress:(0,r.fL)("from_address").notNull().default(""),fromName:(0,r.fL)("from_name").notNull().default(""),isActive:(0,u.O7)("is_active").default(!1).notNull(),secure:(0,u.O7)("secure").default(!1).notNull()}),K=(0,l.af)("nt_email_templates",{id:(0,s.eP)("id").primaryKey(),templateId:(0,a.Vj)("template_id").notNull().unique().defaultRandom(),name:(0,r.fL)("name").notNull().unique(),data:(0,f.JB)("data").notNull()}),w=(0,l.af)("nt_sys",{_id:(0,s.eP)("_id").primaryKey(),id:(0,a.Vj)("id").notNull().unique().defaultRandom(),key:(0,r.fL)("key").notNull().unique(),value:(0,r.fL)("value").notNull()}),V=(0,l.af)("nt_tokens",{id:(0,s.eP)("id").primaryKey(),token:(0,o._L)("token").notNull().unique(),userId:(0,a.Vj)("user_id").references(()=>q.userId,{onDelete:"cascade"}),validUntil:(0,c.AB)("valid_until").notNull()}),k=(0,n.lE)(V,({one:e})=>({user:e(q,{fields:[V.userId],references:[q.userId]})})),j=(0,l.af)("nt_user_roles",{id:(0,s.eP)("id").primaryKey(),name:m("name").notNull().unique(),description:(0,r.fL)("description")}),x=(0,n.lE)(j,({many:e})=>({users:e(q)})),b=(0,l.af)("nt_languages",{id:(0,s.eP)("id").primaryKey(),name:(0,r.fL)("name").notNull().unique(),iso:(0,r.fL)("iso").notNull().unique(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")}),q=(0,l.af)("nt_users",{id:(0,s.eP)("id").primaryKey(),userId:(0,a.Vj)("user_id").notNull().unique().defaultRandom(),role:m("role").references(()=>j.name,{onDelete:"cascade"}).default("user").notNull(),email:(0,r.fL)("email").notNull().unique(),password:(0,r.fL)("password").notNull(),displayName:(0,r.fL)("display_name").notNull(),firstName:(0,r.fL)("first_name"),lastName:(0,r.fL)("last_name"),avatar:(0,r.fL)("avatar"),avatar_sm:(0,r.fL)("avatar_sm"),avatar_md:(0,r.fL)("avatar_md"),activationDate:(0,c.AB)("activation_date"),lastLoginDate:(0,c.AB)("last_login_date"),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("users_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.email}) ||
                    to_tsvector('english', ${e.displayName}) ||
                    to_tsvector('english', ${e.firstName}) ||
                    to_tsvector('english', ${e.lastName})
                )`)})),R=(0,n.lE)(q,({many:e,one:t})=>({authTokens:e($),tokens:e(V),files:e(z),role:t(j,{fields:[q.role],references:[j.name]})})),$=(0,l.af)("nt_auth_clients",{id:(0,s.eP)("id").primaryKey(),clientId:(0,a.Vj)("client_id").notNull().unique().defaultRandom(),clientToken:(0,r.fL)("client_token").notNull().unique(),userId:(0,a.Vj)("user_id").references(()=>q.userId,{onDelete:"cascade"}),validUntil:(0,c.AB)("valid_until"),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),P=(0,n.lE)($,({one:e})=>({user:e(q,{fields:[$.userId],references:[q.userId]})})),J=(0,l.af)("nt_api_keys",{id:(0,s.eP)("id").primaryKey(),apiKeyId:(0,a.Vj)("api_key_id").notNull().unique().defaultRandom(),apiKey:(0,r.fL)("api_key").notNull().unique().$defaultFn(()=>(0,_.Z)()),validUntil:(0,c.AB)("valid_until"),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),E=(0,l.af)("nt_sites",{id:(0,s.eP)("id").primaryKey(),siteId:(0,a.Vj)("site_id").notNull().unique().defaultRandom(),name:(0,r.fL)("name").notNull().unique(),link:(0,r.fL)("link").notNull().unique(),apiKey:(0,r.fL)("api_key").notNull(),type:L("type").notNull(),env:A("env").notNull().default("production"),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")}),S=(0,l.af)("nt_hospitals",{id:(0,s.eP)("id").primaryKey(),hospitalId:(0,a.Vj)("hospital_id").notNull().unique().defaultRandom(),oldHospitalId:(0,r.fL)("old_hospital_id").unique(),name:(0,r.fL)("name").notNull().unique(),country:(0,r.fL)("country").default(""),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("hospitals_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.name})
                )`)})),T=(0,l.af)("nt_editor_info",{id:(0,s.eP)("id").primaryKey(),dataVersion:(0,o._L)("data_version").notNull().default(1),lastPublishDate:(0,c.AB)("last_publish_date")}),U=(0,l.af)("nt_devices",{id:(0,s.eP)("id").primaryKey(),deviceId:(0,r.fL)("device_id").notNull().unique(),deviceHash:(0,r.fL)("device_hash").notNull().unique(),details:(0,f.JB)("details").default({}),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")}),z=(0,l.af)("nt_files",{id:(0,s.eP)("id").primaryKey(),fileId:(0,a.Vj)("file_id").notNull().unique().defaultRandom(),ownerId:(0,a.Vj)("owner_id").references(()=>q.userId,{onDelete:"cascade"}),filename:(0,r.fL)("filename").notNull(),contentType:(0,r.fL)("content_type").notNull(),size:(0,o._L)("size").notNull(),metadata:(0,f.JB)("metadata").default("{}").notNull(),data:g("data").notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")}),O=(0,n.lE)(z,({many:e,one:t})=>({owner:t(q,{fields:[z.ownerId],references:[q.userId]})})),H=(0,l.af)("nt_files_chunks",{id:(0,s.eP)("id").primaryKey(),chunkId:(0,a.Vj)("chunk_id").notNull().unique().defaultRandom(),fileId:(0,a.Vj)("file_id").references(()=>z.fileId,{onDelete:"cascade"}).notNull(),data:g("data").notNull()}),C=(0,l.af)("nt_config_keys",{id:(0,s.eP)("id").primaryKey(),configKeyId:(0,a.Vj)("config_key_id").notNull().unique().defaultRandom(),oldConfigKeyId:(0,r.fL)("old_config_key_id").unique(),position:(0,o._L)("position").notNull(),version:(0,o._L)("version").notNull(),key:(0,r.fL)("key").notNull().unique(),label:(0,r.fL)("label").notNull().unique(),summary:(0,r.fL)("summary").notNull(),source:(0,r.fL)("source").default("editor"),preferences:(0,f.JB)("preferences").default(JSON.stringify(B.$7)).notNull(),publishDate:(0,c.AB)("publish_date").defaultNow().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("config_keys_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.key}) ||
                    to_tsvector('english', ${e.label}) ||
                    to_tsvector('english', ${e.summary})
                )`)})),Z=(0,n.lE)(C,({many:e,one:t})=>({history:e(G),draft:t(F,{fields:[C.configKeyId],references:[F.configKeyId]})})),F=(0,l.af)("nt_config_keys_drafts",{id:(0,s.eP)("id").primaryKey(),configKeyDraftId:(0,a.Vj)("config_key_draft_id").notNull().unique().defaultRandom(),configKeyId:(0,a.Vj)("config_key_id").references(()=>C.configKeyId,{onDelete:"cascade"}),position:(0,o._L)("position").notNull(),data:(0,f.JB)("data").$type().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),M=(0,n.lE)(F,({one:e})=>({configKey:e(C,{fields:[F.configKeyId],references:[C.configKeyId]})})),G=(0,l.af)("nt_config_keys_history",{id:(0,s.eP)("id").primaryKey(),version:(0,o._L)("version").notNull(),configKeyId:(0,a.Vj)("config_key_id").references(()=>C.configKeyId,{onDelete:"cascade"}).notNull(),restoreKey:(0,a.Vj)("restore_key"),changes:(0,f.JB)("data").default([]),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),W=(0,n.lE)(G,({one:e})=>({configKey:e(C,{fields:[G.configKeyId],references:[C.configKeyId]})})),Q=(0,l.af)("nt_scripts",{id:(0,s.eP)("id").primaryKey(),scriptId:(0,a.Vj)("script_id").notNull().unique().defaultRandom(),oldScriptId:(0,r.fL)("old_script_id").unique(),version:(0,o._L)("version").notNull(),type:D("type").notNull().default("admission"),position:(0,o._L)("position").notNull(),source:(0,r.fL)("source").default("editor"),title:(0,r.fL)("title").notNull(),printTitle:(0,r.fL)("print_title").notNull(),description:(0,r.fL)("description").notNull().default(""),hospitalId:(0,a.Vj)("hospital_id").references(()=>S.hospitalId,{onDelete:"cascade"}),exportable:(0,u.O7)("exportable").notNull().default(!0),nuidSearchEnabled:(0,u.O7)("nuid_search_enabled").notNull().default(!1),nuidSearchFields:(0,f.JB)("nuid_search_fields").default("[]").notNull(),preferences:(0,f.JB)("preferences").default(JSON.stringify(B.$7)).notNull(),publishDate:(0,c.AB)("publish_date").defaultNow().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("scripts_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.title}) ||
                    to_tsvector('english', ${e.description})
                )`)})),X=(0,n.lE)(Q,({many:e,one:t})=>({screens:e(en),screensDrafts:e(el),screensHistory:e(ea),diagnoses:e(eo),diagnosesDrafts:e(ef),diagnosesHistory:e(ep),history:e(et),draft:t(Y,{fields:[Q.scriptId],references:[Y.scriptId]})})),Y=(0,l.af)("nt_scripts_drafts",{id:(0,s.eP)("id").primaryKey(),scriptDraftId:(0,a.Vj)("script_draft_id").notNull().unique().defaultRandom(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),position:(0,o._L)("position").notNull(),data:(0,f.JB)("data").$type().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),ee=(0,n.lE)(Y,({one:e,many:t})=>({screensDrafts:t(el),diagnosesDrafts:t(ef),script:e(Q,{fields:[Y.scriptId],references:[Q.scriptId]})})),et=(0,l.af)("nt_scripts_history",{id:(0,s.eP)("id").primaryKey(),version:(0,o._L)("version").notNull(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,a.Vj)("restore_key"),changes:(0,f.JB)("data").default([]),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),ei=(0,n.lE)(et,({one:e})=>({script:e(Q,{fields:[et.scriptId],references:[Q.scriptId]})})),en=(0,l.af)("nt_screens",{id:(0,s.eP)("id").primaryKey(),screenId:(0,a.Vj)("screen_id").notNull().unique().defaultRandom(),oldScreenId:(0,r.fL)("old_screen_id").unique(),oldScriptId:(0,r.fL)("old_script_id"),version:(0,o._L)("version").notNull(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}).notNull(),type:h("type").notNull(),position:(0,o._L)("position").notNull(),source:(0,r.fL)("source").default("editor"),sectionTitle:(0,r.fL)("section_title").notNull(),previewTitle:(0,r.fL)("preview_title").notNull().default(""),previewPrintTitle:(0,r.fL)("preview_print_title").notNull().default(""),condition:(0,r.fL)("condition").notNull().default(""),skipToCondition:(0,r.fL)("skip_to_condition").notNull().default(""),skipToScreenId:(0,r.fL)("skip_to_screen_id"),epicId:(0,r.fL)("epic_id").notNull().default(""),storyId:(0,r.fL)("story_id").notNull().default(""),refId:(0,r.fL)("ref_id").notNull().default(""),refKey:(0,r.fL)("ref_key").notNull().default(""),step:(0,r.fL)("step").notNull().default(""),actionText:(0,r.fL)("action_text").notNull().default(""),contentText:(0,r.fL)("content_text").notNull().default(""),infoText:(0,r.fL)("info_text").notNull().default(""),title:(0,r.fL)("title").notNull(),title1:(0,r.fL)("title1").notNull().default(""),title2:(0,r.fL)("title2").notNull().default(""),title3:(0,r.fL)("title3").notNull().default(""),title4:(0,r.fL)("title4").notNull().default(""),text1:(0,r.fL)("text1").notNull().default(""),text2:(0,r.fL)("text2").notNull().default(""),text3:(0,r.fL)("text3").notNull().default(""),image1:(0,f.JB)("image1"),image2:(0,f.JB)("image2"),image3:(0,f.JB)("image3"),instructions:(0,r.fL)("instructions").notNull().default(""),instructions2:(0,r.fL)("instructions2").notNull().default(""),instructions3:(0,r.fL)("instructions3").notNull().default(""),instructions4:(0,r.fL)("instructions4").notNull().default(""),hcwDiagnosesInstructions:(0,r.fL)("hcw_diagnoses_instructions").notNull().default(""),suggestedDiagnosesInstructions:(0,r.fL)("suggested_diagnoses_instructions").notNull().default(""),notes:(0,r.fL)("notes").notNull().default(""),dataType:(0,r.fL)("data_type").notNull().default(""),key:(0,r.fL)("key").notNull().default(""),label:(0,r.fL)("label").notNull().default(""),negativeLabel:(0,r.fL)("negative_label").notNull().default(""),positiveLabel:(0,r.fL)("positive_label").notNull().default(""),timerValue:(0,o._L)("timer_value"),multiplier:(0,o._L)("multiplier"),minValue:(0,o._L)("min_value"),maxValue:(0,o._L)("max_value"),exportable:(0,u.O7)("exportable").notNull().default(!0),printable:(0,u.O7)("printable"),skippable:(0,u.O7)("skippable").notNull().default(!1),confidential:(0,u.O7)("confidential").notNull().default(!1),prePopulate:(0,f.JB)("pre_populate").default("[]").notNull(),fields:(0,f.JB)("fields").default("[]").notNull(),items:(0,f.JB)("items").default("[]").notNull(),preferences:(0,f.JB)("preferences").default(JSON.stringify(B.$7)).notNull(),publishDate:(0,c.AB)("publish_date").defaultNow().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("screens_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.title})
                )`)})),ed=(0,n.lE)(en,({many:e,one:t})=>({history:e(ea),script:t(Q,{fields:[en.scriptId],references:[Q.scriptId]}),draft:t(el,{fields:[en.screenId],references:[el.screenId]})})),el=(0,l.af)("nt_screens_drafts",{id:(0,s.eP)("id").primaryKey(),screenDraftId:(0,a.Vj)("screen_draft_id").notNull().unique().defaultRandom(),screenId:(0,a.Vj)("screen_id").references(()=>en.screenId,{onDelete:"cascade"}),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,a.Vj)("script_draft_id").references(()=>Y.scriptDraftId,{onDelete:"cascade"}),type:h("type").notNull(),position:(0,o._L)("position").notNull(),data:(0,f.JB)("data").$type().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),es=(0,n.lE)(el,({one:e})=>({screen:e(en,{fields:[el.screenId],references:[en.screenId]}),scriptDraft:e(Y,{fields:[el.scriptDraftId],references:[Y.scriptDraftId]}),script:e(Q,{fields:[el.scriptId],references:[Q.scriptId]})})),ea=(0,l.af)("nt_screens_history",{id:(0,s.eP)("id").primaryKey(),version:(0,o._L)("version").notNull(),screenId:(0,a.Vj)("screen_id").references(()=>en.screenId,{onDelete:"cascade"}).notNull(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,r.fL)("restore_key"),changes:(0,f.JB)("data").default([]),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),er=(0,n.lE)(ea,({one:e})=>({screen:e(en,{fields:[ea.screenId],references:[en.screenId]}),script:e(Q,{fields:[ea.scriptId],references:[Q.scriptId]})})),eo=(0,l.af)("nt_diagnoses",{id:(0,s.eP)("id").primaryKey(),diagnosisId:(0,a.Vj)("diagnosis_id").notNull().unique().defaultRandom(),oldDiagnosisId:(0,r.fL)("old_diagnosis_id").unique(),oldScriptId:(0,r.fL)("old_script_id"),version:(0,o._L)("version").notNull(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}).notNull(),position:(0,o._L)("position").notNull(),source:(0,r.fL)("source").default("editor"),expression:(0,r.fL)("expression").notNull(),name:(0,r.fL)("name").notNull().default(""),description:(0,r.fL)("description").notNull().default(""),key:(0,r.fL)("key").default(""),severityOrder:(0,o._L)("severity_order"),expressionMeaning:(0,r.fL)("expression_meaning").notNull().default(""),symptoms:(0,f.JB)("symptoms").default("[]").notNull(),text1:(0,r.fL)("text1").notNull().default(""),text2:(0,r.fL)("text2").notNull().default(""),text3:(0,r.fL)("text3").notNull().default(""),image1:(0,f.JB)("image1"),image2:(0,f.JB)("image2"),image3:(0,f.JB)("image3"),preferences:(0,f.JB)("preferences").default(JSON.stringify(B.$7)).notNull(),publishDate:(0,c.AB)("publish_date").defaultNow().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date),deletedAt:(0,c.AB)("deleted_at")},e=>({searchIndex:(0,p.Kz)("diagnoses_search_index").using("gin",(0,d.i6)`(
                    to_tsvector('english', ${e.name})
                )`)})),eu=(0,n.lE)(eo,({many:e,one:t})=>({history:e(ep),script:t(Q,{fields:[eo.scriptId],references:[Q.scriptId]}),draft:t(ef,{fields:[eo.diagnosisId],references:[ef.diagnosisId]})})),ef=(0,l.af)("nt_diagnoses_drafts",{id:(0,s.eP)("id").primaryKey(),diagnosisDraftId:(0,a.Vj)("diagnosis_draft_id").notNull().unique().defaultRandom(),diagnosisId:(0,a.Vj)("diagnosis_id").references(()=>eo.diagnosisId,{onDelete:"cascade"}),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),scriptDraftId:(0,a.Vj)("script_draft_id").references(()=>Y.scriptDraftId,{onDelete:"cascade"}),position:(0,o._L)("position").notNull(),data:(0,f.JB)("data").$type().notNull(),createdAt:(0,c.AB)("created_at").defaultNow().notNull(),updatedAt:(0,c.AB)("updated_at").defaultNow().notNull().$onUpdate(()=>new Date)}),ec=(0,n.lE)(ef,({one:e})=>({diagnosis:e(eo,{fields:[ef.diagnosisId],references:[eo.diagnosisId]}),scriptDraft:e(Y,{fields:[ef.scriptDraftId],references:[Y.scriptDraftId]}),script:e(Q,{fields:[ef.scriptId],references:[Q.scriptId]})})),ep=(0,l.af)("nt_diagnoses_history",{id:(0,s.eP)("id").primaryKey(),version:(0,o._L)("version").notNull(),diagnosisId:(0,a.Vj)("diagnosis_id").references(()=>eo.diagnosisId,{onDelete:"cascade"}).notNull(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}).notNull(),restoreKey:(0,r.fL)("restore_key"),changes:(0,f.JB)("data").default([]),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),e_=(0,n.lE)(ep,({one:e})=>({diagnosis:e(eo,{fields:[ep.diagnosisId],references:[eo.diagnosisId]}),script:e(Q,{fields:[ep.scriptId],references:[Q.scriptId]})})),eN=(0,l.af)("nt_pending_deletion",{id:(0,s.eP)("id").primaryKey(),scriptId:(0,a.Vj)("script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),screenId:(0,a.Vj)("screen_id").references(()=>en.screenId,{onDelete:"cascade"}),screenScriptId:(0,a.Vj)("screen_script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),diagnosisId:(0,a.Vj)("diagnosis_id").references(()=>eo.diagnosisId,{onDelete:"cascade"}),diagnosisScriptId:(0,a.Vj)("diagnosis_script_id").references(()=>Q.scriptId,{onDelete:"cascade"}),configKeyId:(0,a.Vj)("config_key_id").references(()=>C.configKeyId,{onDelete:"cascade"}),scriptDraftId:(0,a.Vj)("script_draft_id").references(()=>Y.scriptDraftId,{onDelete:"cascade"}),screenDraftId:(0,a.Vj)("screen_draft_id").references(()=>el.screenDraftId,{onDelete:"cascade"}),diagnosisDraftId:(0,a.Vj)("diagnosis_draft_id").references(()=>ef.diagnosisDraftId,{onDelete:"cascade"}),configKeyDraftId:(0,a.Vj)("config_key_draft_id").references(()=>F.configKeyDraftId,{onDelete:"cascade"}),createdAt:(0,c.AB)("created_at").defaultNow().notNull()}),ey=(0,n.lE)(eN,({one:e})=>({script:e(Q,{fields:[eN.scriptId],references:[Q.scriptId]}),screen:e(en,{fields:[eN.screenId],references:[en.screenId]}),screenScript:e(Q,{fields:[eN.screenScriptId],references:[Q.scriptId]}),diagnosis:e(eo,{fields:[eN.diagnosisId],references:[eo.diagnosisId]}),diagnosisScript:e(Q,{fields:[eN.diagnosisScriptId],references:[Q.scriptId]}),configKey:e(C,{fields:[eN.configKeyId],references:[C.configKeyId]}),scriptDraft:e(Y,{fields:[eN.scriptId],references:[Y.scriptDraftId]}),screenDraft:e(el,{fields:[eN.screenId],references:[el.screenDraftId]}),diagnosisDraft:e(ef,{fields:[eN.diagnosisId],references:[ef.diagnosisDraftId]}),configKeyDraft:e(F,{fields:[eN.configKeyId],references:[F.configKeyDraftId]})}))}};