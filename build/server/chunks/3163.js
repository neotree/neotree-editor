exports.id=3163,exports.ids=[3163],exports.modules={50064:(e,t,a)=>{Promise.resolve().then(a.bind(a,77228))},33434:(e,t,a)=>{Promise.resolve().then(a.bind(a,10827)),Promise.resolve().then(a.bind(a,82617))},2025:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var s=a(10326),r=a(62288),i=a(77863);function l({children:e,title:t,description:a,actions:l,trigger:o,contentProps:d,footerProps:n,...c}){return s.jsx(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...c,children:[o,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,i.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",d?.className),...d,children:[(0,s.jsxs)(r.fK,{className:(0,i.cn)(t||a?"":"hidden","border-b border-b-border px-4 py-4"),children:[s.jsx(r.$N,{className:(0,i.cn)(t?"":"hidden"),children:t}),s.jsx(r.Be,{className:(0,i.cn)(a?"":"hidden"),children:a})]}),s.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:e}),s.jsx(r.cN,{className:(0,i.cn)("border-t border-t-border px-4 py-2 items-center w-full",l?"":"hidden",n?.className),...n,children:l})]})]})})}},62288:(e,t,a)=>{"use strict";a.d(t,{$N:()=>h,Be:()=>g,GG:()=>f,Vq:()=>d,cN:()=>x,cZ:()=>p,fK:()=>m,hg:()=>n});var s=a(10326),r=a(17577),i=a(98958),l=a(94019),o=a(77863);let d=i.fC,n=i.xz,c=i.h_,f=i.x8,u=r.forwardRef(({className:e,...t},a)=>s.jsx(i.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=i.aV.displayName;let p=r.forwardRef(({className:e,children:t,hideCloseButton:a,...r},d)=>(0,s.jsxs)(c,{children:[s.jsx(u,{}),(0,s.jsxs)(i.VY,{ref:d,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,!0!==a&&(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(l.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let h=r.forwardRef(({className:e,...t},a)=>s.jsx(i.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));h.displayName=i.Dx.displayName;let g=r.forwardRef(({className:e,...t},a)=>s.jsx(i.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=i.dk.displayName},31048:(e,t,a)=>{"use strict";a.d(t,{_:()=>n});var s=a(10326),r=a(17577),i=a(34478),l=a(28671),o=a(77863);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef(({className:e,secondary:t,error:a,...r},l)=>s.jsx(i.f,{ref:l,className:(0,o.cn)(d(),t&&"text-xs",a?"text-danger":"",e),...r}));n.displayName=i.f.displayName},34474:(e,t,a)=>{"use strict";a.d(t,{Bw:()=>h,DI:()=>f,Ph:()=>c,Ql:()=>y,i4:()=>p,ki:()=>u,n5:()=>g});var s=a(10326),r=a(17577),i=a(18792),l=a(941),o=a(96633),d=a(32933),n=a(77863);let c=i.fC,f=i.ZA,u=i.B4,p=r.forwardRef(({className:e,children:t,error:a,...r},o)=>(0,s.jsxs)(i.xz,{ref:o,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a&&"border-danger",e),...r,children:[t,s.jsx(i.JO,{asChild:!0,children:s.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.xz.displayName;let m=r.forwardRef(({className:e,...t},a)=>s.jsx(i.u_,{ref:a,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));m.displayName=i.u_.displayName;let x=r.forwardRef(({className:e,...t},a)=>s.jsx(i.$G,{ref:a,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(l.Z,{className:"h-4 w-4"})}));x.displayName=i.$G.displayName;let h=r.forwardRef(({className:e,children:t,position:a="popper",...r},l)=>s.jsx(i.h_,{children:(0,s.jsxs)(i.VY,{ref:l,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[s.jsx(m,{}),s.jsx(i.l_,{className:(0,n.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(x,{})]})}));h.displayName=i.VY.displayName;let g=r.forwardRef(({className:e,...t},a)=>s.jsx(i.__,{ref:a,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));g.displayName=i.__.displayName;let y=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(i.ck,{ref:r,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(i.wU,{children:s.jsx(d.Z,{className:"h-4 w-4"})})}),s.jsx(i.eT,{children:t})]}));y.displayName=i.ck.displayName,r.forwardRef(({className:e,...t},a)=>s.jsx(i.Z0,{ref:a,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.Z0.displayName},82617:(e,t,a)=>{"use strict";a.d(t,{ScriptsContextProvider:()=>c,h:()=>n});var s=a(10326),r=a(17577),i=a(35047),l=a(15491),o=a(12260);let d=(0,r.createContext)(null),n=()=>(0,r.useContext)(d);function c({children:e,...t}){let a=function({}){let e=(0,i.useRouter)(),{scriptId:t}=(0,i.useParams)(),{parsed:a}=(0,o.l)(),s=(0,r.useCallback)(()=>{e.push("/")},[e]),d=(0,r.useCallback)(()=>{e.push(`/script/${t}?${l.Z.stringify({...a,section:"screens"})}`)},[e,a,t]);return{onCancelDiagnosisForm:(0,r.useCallback)(()=>{e.push(`/script/${t}?${l.Z.stringify({...a,section:"diagnoses"})}`)},[e,a,t]),onCancelScreenForm:d,onCancelScriptForm:s}}(t);return s.jsx(d.Provider,{value:{...t,...a},children:e})}},95602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(19510),r=a(58585),i=a(97283),l=a(82006),o=a(2111),d=a(68570);let n=(0,d.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx`),{__esModule:c,$$typeof:f}=n;n.default,(0,d.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#ScriptsContext`),(0,d.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#useScriptsContext`);let u=(0,d.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#ScriptsContextProvider`);var p=a(85431),m=a(66267),x=a(24569),h=a(46697);async function g({children:e}){let{user:t,yes:a}=await (0,m.canAccessPage)();if(t||(0,r.redirect)("/login"),!a)return s.jsx(x.V,{children:s.jsx(h.Zb,{children:s.jsx(h.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let d=await (0,o.getHospitals)();return(0,s.jsxs)(s.Fragment,{children:[s.jsx(p.D,{children:"Scripts"}),s.jsx(u,{...i,...l,hospitals:d,getHospitals:o.getHospitals,children:e})]})}},17162:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(19510),r=a(21113),i=a(24569),l=a(46697);function o(){return s.jsx(i.V,{children:s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Description"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},82006:(e,t,a)=>{"use strict";a.r(t),a.d(t,{uploadFile:()=>p});var s=a(24330);a(60166);var r=a(9576),i=a(88317),l=a(57435),o=a(10413),d=a(57418),n=a(89114);async function c(e,t){let a={success:!1,file:null};try{if(!e.fileId)throw Error("Missing fileId");if(!e.data)throw Error("No file uploaded");await o.Z.insert(d.files).values(e);let s=await (0,n._I)(e.fileId);if(!s)throw Error("Failed to upload file");a.success=!0,a.file=s.file,t?.broadcastAction&&i.Z.emit("data_changed","upload_file")}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("_uploadFile ERROR",e.message)}finally{return a}}var f=a(44652),u=a(66267);async function p(e,t){let a={success:!1,file:null};try{for(let s of(await (0,u.isAllowed)(["upload_files"]),Array.from(e.entries()))){let[i,l]=s;if("object"==typeof l){let s=Buffer.from(await l.arrayBuffer()),i=e.get("fileId")?.toString()||(0,r.Z)(),o={...(0,f.R)(e.get("metadata")?.toString()||"{}")},d=(e.get("size")?function(e,t){if("0"==`${e}`)return 0;let a=`${e||""}`.replaceAll(" ",""),[s,r]=(a=a.includes(".")?a.replaceAll(",",""):a.split(",").length>2?a.replaceAll(",",""):a.replaceAll(",",".")).split("."),i=!s||isNaN(Number(s))?"":s;return""==(i+=!r||isNaN(Number(r))?"":`.${r}`)||void 0===i||isNaN(Number(i))?t?.notNull?0:null:Number(i)}((0,f.R)(e.get("size")?.toString())):0)||l.size,n=e.get("filename")?.toString()||l.name,u=[i,n].filter(e=>e).join("__");(o.width||o.height)&&(u=`${u}?w=${o.width}&h=${o.height}`),a=await c({fileId:i,data:s,filename:u,size:d,contentType:e.get("contentType")?.toString()||l.type,metadata:o},t)}}}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("uploadFile ERROR",e.message)}finally{return a}}(0,a(40618).h)([p]),(0,s.j)("3e664d99e344ef57ddb61621574f5391e47ffd78",p)},2111:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>x,$$ACTION_1:()=>g,$$ACTION_2:()=>w,$$ACTION_3:()=>b,$$ACTION_4:()=>R,countHospitals:()=>h,deleteHospitals:()=>m,getHospital:()=>N,getHospitals:()=>y,saveHospitals:()=>j});var s=a(24330);a(60166);var r=a(57745),i=a(57435),l=a(10413),o=a(57418),d=a(88317);async function n(e){let t={success:!1};try{let a=e.filter(e=>e.id),s=e.filter(e=>!e.id),i=[];for(let e of a)try{await l.Z.update(o.hospitals).set(e).where((0,r.eq)(o.hospitals.id,e.id))}catch(e){i.push(e.message)}s.length&&await l.Z.insert(o.hospitals).values(s),i.length?t.errors=i:t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_saveHospitals ERROR",e.message)}finally{return t?.errors?.length||d.Z.emit("data_changed","save_hospitals"),t}}async function c(e){let t={success:!1};try{e.ids.length&&await l.Z.delete(o.hospitals).where((0,r.d3)(o.hospitals.id,e.ids)),t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_deleteHospitals ERROR",e.message)}finally{return t?.errors?.length||d.Z.emit("data_changed","delete_hospitals"),t}}var f=a(88453),u=a(66267),p=a(40618);let m=(0,s.j)("5713a6fd71779a04f540a06e5e613a4939090a9b",x);async function x(...e){try{return await (0,u.isAllowed)(),await c(...e)}catch(e){return i.Z.error("deleteHospitals ERROR",e.message),{errors:[e.message],success:!1}}}let h=(0,s.j)("e0a27e8a7773580c75293c2a82a738cd87a24345",g);async function g(...e){try{return await (0,u.isAllowed)(),await (0,f.Py)(...e)}catch(e){return i.Z.error("countHospitals ERROR",e.message),{errors:[e.message],data:0}}}let y=(0,s.j)("e99a61aadf3a687f5e5f362e8931f54b110ed1c8",w);async function w(...e){try{return await (0,u.isAllowed)(),await (0,f.O8)(...e)}catch(e){return i.Z.error("getHospitals ERROR",e.message),{errors:[e.message],data:[]}}}let N=(0,s.j)("4d3efe0c4ece005691da0b0285728b17fb230b01",b);async function b(...e){return await (0,u.isAllowed)(),await (0,f.C9)(...e)}let j=(0,s.j)("3587bff1b8b40c65f5865326c885942cf0db5e9e",R);async function R(...e){try{return await (0,u.isAllowed)(),await n(...e)}catch(e){return i.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}(0,p.h)([m,h,y,N,j]),(0,s.j)("3c56d7ce36ee4d8d0281afafe6eee9310b0b1654",m),(0,s.j)("6bb90b144ce2739e2ebb2360f140bfcb26941837",h),(0,s.j)("671906d85ccc63e5e47168ff4716f835db5e69eb",y),(0,s.j)("69a3c9a16de410213b0554c366b618c4fc7627cb",N),(0,s.j)("cbf90680ca26b9a0028d1714fb51618089f0e380",j)},24569:(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var s=a(19510),r=a(50650);function i({className:e,...t}){return s.jsx("div",{...t,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var s=a(68570);let r=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let o=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx#DataTable`)},46697:(e,t,a)=>{"use strict";a.d(t,{Zb:()=>l,aY:()=>o});var s=a(19510),r=a(71159),i=a(50650);let l=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",r.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",r.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let o=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},89114:(e,t,a)=>{"use strict";a.d(t,{_I:()=>d,KU:()=>o});var s=a(57745),r=a(10413),i=a(57418),l=a(57435);async function o(e){try{return{file:await r.Z.query.files.findFirst({where:(0,s.eq)(i.files.fileId,e)})||null}}catch(e){return l.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}async function d(e){try{return{file:await r.Z.query.files.findFirst({where:(0,s.eq)(i.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})||null}}catch(e){return l.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}},88453:(e,t,a)=>{"use strict";a.d(t,{Py:()=>f,C9:()=>n,O8:()=>d});var s=a(57745),r=a(30900),i=a(10413),l=a(57418),o=a(57435);async function d(e){try{let{hospitalsIds:t}={...e},a=t||[],o=a?.length?(0,s.d3)(l.hospitals.hospitalId,a.filter(e=>r.Z(e))):void 0,d=a?.length?(0,s.d3)(l.hospitals.oldHospitalId,a.filter(e=>!r.Z(e))):void 0,n=[(0,s.Ft)(l.hospitals.deletedAt),...o&&d?[(0,s.or)(o,d)]:[]];return{data:(await i.Z.select({hospital:l.hospitals}).from(l.hospitals).where(n.length?(0,s.xD)(...n):void 0)).map(e=>e.hospital)}}catch(e){return o.Z.error("_getHospitals ERROR",e.message),{data:[],errors:[e.message]}}}async function n(e){let{hospitalId:t}={...e};try{if(!t)throw Error("Missing hospitalId");let e=r.Z(t)?(0,s.eq)(l.hospitals.hospitalId,t):void 0,a=r.Z(t)?void 0:(0,s.eq)(l.hospitals.oldHospitalId,t);return{data:await i.Z.query.hospitals.findFirst({where:(0,s.xD)((0,s.Ft)(l.hospitals.deletedAt),e||a)})}}catch(e){return o.Z.error("_getHospital ERROR",e.message),{errors:[e.message]}}}var c=a(60938);async function f(){try{let[{count:e}]=await i.Z.select({count:(0,c.QX)()}).from(l.hospitals);return{data:e}}catch(e){return o.Z.error("_getHospitals ERROR",e.message),{data:0,errors:[e.message]}}}},44652:(e,t,a)=>{"use strict";function s(e){try{return JSON.parse(e)}catch(e){return null}}a.d(t,{R:()=>s})}};