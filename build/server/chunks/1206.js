exports.id=1206,exports.ids=[1206],exports.modules={7738:(e,a,t)=>{Promise.resolve().then(t.bind(t,9162))},45769:(e,a,t)=>{Promise.resolve().then(t.bind(t,10827)),Promise.resolve().then(t.bind(t,82617))},69486:(e,a,t)=>{"use strict";t.d(a,{D:()=>l});var s=t(10326),r=t(77863);function l({children:e,className:a}){return s.jsx("div",{className:(0,r.cn)("pb-1 border-b border-b-primary",a),children:s.jsx("span",{className:"uppercase text-primary text-sm",children:e})})}},29354:(e,a,t)=>{"use strict";t.d(a,{h:()=>i});var s=t(10326),r=t(38178),l=t(77863);function i({children:e,className:a}){return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"h-16"}),s.jsx("div",{className:(0,l.cn)(`
                        fixed 
                        left-0 
                        bottom-0 
                        h-16 
                        w-full 
                        border-t 
                        border-t-border 
                        z-[1] 
                        bg-primary-foreground 
                        dark:bg-background 
                        shadow-md 
                        dark:shadow-foreground/10
                    `),children:s.jsx(r.V,{children:s.jsx("div",{className:(0,l.cn)("flex justify-end gap-x-4",a),children:e})})})]})}},18048:(e,a,t)=>{"use strict";t.d(a,{u:()=>n});var s=t(10326);t(17577);var r=t(62288),l=t(77863);let i=(0,t(60114).Ue)((e,a)=>({modals:{},open(a){e(e=>({modals:{...e.modals,[a]:!0}}))},toggle(t){let s=a().modals;e(e=>({modals:{...e.modals,[t]:!s[t]}}))},close(a){e(e=>({modals:{...e.modals,[a]:!1}}))},isOpen:e=>!!a().modals[e],set(a){e(e=>({modals:{...e.modals,...a}}))}}));function n({id:e,children:a,title:t,description:n,actions:o,trigger:d,contentProps:c,footerProps:u,...f}){let{close:m,isOpen:h,set:p}=i();return s.jsx(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...f,open:(e?h(e):void 0)||f.open,onOpenChange:a=>{e&&p({[e]:a}),f?.onOpenChange?.(a)},children:[d,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,l.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",c?.className),...c,children:[(0,s.jsxs)(r.fK,{className:(0,l.cn)(t||n?"":"hidden","border-b border-b-border px-4 py-4"),children:[s.jsx(r.$N,{className:(0,l.cn)(t?"":"hidden"),children:t}),s.jsx(r.Be,{className:(0,l.cn)(n?"":"hidden"),children:n})]}),s.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:a}),s.jsx(r.cN,{className:(0,l.cn)("border-t border-t-border px-4 py-2 items-center w-full",o?"":"hidden",u?.className),...u,children:o})]})]})})}},99463:(e,a,t)=>{"use strict";t.d(a,{w:()=>m});var s=t(10326),r=t(17577),l=t(74723),i=t(58464),n=t(7890),o=t(34474),d=t(31048),c=t(53313),u=t(90772),f=t(77863);function m({id:e,label:a,hide:t,title:m,description:h,data:p,disabled:x,onSave:g}){let b=(0,r.useMemo)(()=>{let a=!1;return Object.values(p).forEach(t=>{t[e]&&(a=!0)}),a},[p,e]),{reset:y,watch:v,setValue:w,handleSubmit:j}=(0,l.cI)({defaultValues:{...i.$7,...p}}),N=v("fontSize"),R=v("fontWeight"),E=v("fontStyle"),C=v("textColor"),_=j(g),[$,S]=(0,r.useState)(!1);return t?null:s.jsx(s.Fragment,{children:(0,s.jsxs)(n.yo,{onOpenChange:e=>{y({...i.$7,...p}),S(e)},children:[s.jsx(n.aM,{asChild:!0,children:s.jsx(u.z,{variant:"link",className:(0,f.cn)("p-0 text-xs",!b&&"text-muted-foreground/80 hover:text-muted-foreground"),children:a||`${b?"Update":"Set"} preferences`})}),(0,s.jsxs)(n.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,s.jsxs)(n.Tu,{className:"px-4 py-4 border-b border-b-border",children:[s.jsx(n.bC,{children:m}),s.jsx(n.Ei,{className:h?"":"hidden",children:h})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:$&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[s.jsx(d._,{secondary:!0,htmlFor:`fontSize.${e}`,children:"Font size"}),s.jsx("div",{children:(0,s.jsxs)(o.Ph,{value:N[e]||"default",required:!0,name:`fontSize.${e}`,disabled:x,onValueChange:a=>{let t=a||void 0;"default"===t&&(t=void 0),w(`fontSize.${e}`,t,{shouldDirty:!0})},children:[s.jsx(o.i4,{children:s.jsx(o.ki,{placeholder:"Default"})}),s.jsx(o.Bw,{children:s.jsx(o.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>s.jsx(o.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[!!C[e]&&(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[s.jsx(d._,{secondary:!0,htmlFor:`textColor.${e}`,children:"Text color"}),s.jsx("input",{type:"color",value:C[e],onChange:a=>w(`textColor.${e}`,a.target.value,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(c.X,{id:`defaultTextColor.${e}`,name:`defaultTextColor.${e}`,disabled:x,checked:!C[e],onCheckedChange:()=>{let a=C[e]?void 0:"#000000";w(`textColor.${e}`,a,{shouldDirty:!0})}}),s.jsx(d._,{secondary:!0,htmlFor:`defaultTextColor.${e}`,children:"Default text color"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(c.X,{name:"bold",id:"bold",disabled:x,checked:"bold"===R[e],onCheckedChange:()=>w(`fontWeight.${e}`,R[e]?void 0:"bold",{shouldDirty:!0})}),s.jsx(d._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(c.X,{name:"italic",id:"italic",disabled:x,checked:(E[e]||[]).includes("italic"),onCheckedChange:()=>{let a=E[e]||[];a.includes("italic")?a=a.filter(e=>"italic"!==e):a.push("italic"),a.length||(a=void 0),w(`fontStyle.${e}`,a,{shouldDirty:!0})}}),s.jsx(d._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,s.jsxs)(n.FF,{className:"px-4 py-4 border-t border-t-border",children:[s.jsx("div",{className:"ml-auto"}),s.jsx(n.sw,{asChild:!0,children:s.jsx(u.z,{variant:"outline",children:"Cancel"})}),s.jsx(n.sw,{asChild:!0,children:s.jsx(u.z,{disabled:x,onClick:()=>_(),children:"Save"})})]})]})]})})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>d});var s=t(10326),r=t(17577),l=t(34478),i=t(79360),n=t(77863);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,secondary:a,error:t,...r},i)=>s.jsx(l.f,{ref:i,className:(0,n.cn)(o(),a&&"text-xs",t?"text-danger":"",e),...r}));d.displayName=l.f.displayName},88846:(e,a,t)=>{"use strict";t.d(a,{E:()=>o,m:()=>d});var s=t(10326),r=t(17577),l=t(18623),i=t(53982),n=t(77863);let o=r.forwardRef(({className:e,...a},t)=>s.jsx(l.fC,{className:(0,n.cn)("grid gap-2",e),...a,ref:t}));o.displayName=l.fC.displayName;let d=r.forwardRef(({className:e,...a},t)=>s.jsx(l.ck,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:s.jsx(l.z$,{className:"flex items-center justify-center",children:s.jsx(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d.displayName=l.ck.displayName},34474:(e,a,t)=>{"use strict";t.d(a,{Bw:()=>x,DI:()=>u,Ph:()=>c,Ql:()=>b,U$:()=>y,i4:()=>m,ki:()=>f,n5:()=>g});var s=t(10326),r=t(17577),l=t(18792),i=t(941),n=t(96633),o=t(32933),d=t(77863);let c=l.fC,u=l.ZA,f=l.B4,m=r.forwardRef(({className:e,children:a,error:t,...r},n)=>(0,s.jsxs)(l.xz,{ref:n,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t&&"border-danger",e),...r,children:[a,s.jsx(l.JO,{asChild:!0,children:s.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let h=r.forwardRef(({className:e,...a},t)=>s.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=l.u_.displayName;let p=r.forwardRef(({className:e,...a},t)=>s.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(i.Z,{className:"h-4 w-4"})}));p.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:a,position:t="popper",...r},i)=>s.jsx(l.h_,{children:(0,s.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[s.jsx(h,{}),s.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(p,{})]})}));x.displayName=l.VY.displayName;let g=r.forwardRef(({className:e,...a},t)=>s.jsx(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));g.displayName=l.__.displayName;let b=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(o.Z,{className:"h-4 w-4"})})}),s.jsx(l.eT,{children:a})]}));b.displayName=l.ck.displayName;let y=r.forwardRef(({className:e,...a},t)=>s.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));y.displayName=l.Z0.displayName},87673:(e,a,t)=>{"use strict";t.d(a,{g:()=>i});var s=t(10326),r=t(17577),l=t(77863);let i=r.forwardRef(({className:e,noRing:a,...t},r)=>s.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",e),ref:r,...t}));i.displayName="Textarea"},16722:(e,a,t)=>{"use strict";t.d(a,{Uv:()=>l,VO:()=>r,d4:()=>s,fR:()=>n});let s=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],r=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],l=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],i={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},n={admission:[{...i,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...i,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...i,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...i,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...i,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},58464:(e,a,t)=>{"use strict";t.d(a,{$7:()=>i,PU:()=>r,Tf:()=>d,_S:()=>l,f3:()=>u,m1:()=>o,ph:()=>c,uh:()=>n});var s=t(16722);let r={headerFields:[],footerFields:[],sections:[]},l="Example: ($key = true and $key2 = false) or $key3 = 'HD'",i={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},n=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],o=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"}],d=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],c=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}],u={...d.reduce((e,a)=>{let t=a.value,s=a.value,r=[s,`${s}_option`];return"single_select"===t&&(r=[...r,"dropdown","dropdown_option"]),{...e,[s]:r}},{}),...s.Uv.reduce((e,a)=>{let t=a.name,s=a.name,r=[s,`${s}_option`];return"dropdown"===t&&(r=[...r,"single_select","single_select_option"]),{...e,[s]:r}},{})}},82617:(e,a,t)=>{"use strict";t.d(a,{ScriptsContextProvider:()=>u,h:()=>c});var s=t(10326),r=t(17577),l=t(35047),i=t(15491),n=t(44099),o=t(12260);let d=(0,r.createContext)(null),c=()=>(0,r.useContext)(d);function u({children:e,...a}){let t=function({}){let e=(0,l.useRouter)(),{scriptId:a}=(0,l.useParams)(),{parsed:t}=(0,o.l)(),[s,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)({data:[]}),[f,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)([]),x=(0,r.useCallback)(()=>{e.push("/")},[e]),g=(0,r.useCallback)(()=>{e.push(`/script/${a}?${i.Z.stringify({...t,section:"screens"})}`)},[e,t,a]),b=(0,r.useCallback)(()=>{e.push(`/script/${a}?${i.Z.stringify({...t,section:"diagnoses"})}`)},[e,t,a]),y=(0,r.useCallback)(async()=>{try{d(!0);let e=await n.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(e.data?.errors?.length)throw Error(e.data.errors.join(", "));u(e.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{d(!1)}},[a,open,alert]);return{screens:c,screensLoading:s,keys:h,keysLoading:f,loadKeys:(0,r.useCallback)(async()=>{try{m(!0);let e=await n.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(e.data?.errors?.length)throw Error(e.data.errors.join(", "));let t=e.data.data.reduce((e,a)=>[...e,...a.keys],[]);p(t)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{m(!1)}},[a,open,alert]),loadScreens:y,onCancelDiagnosisForm:b,onCancelScreenForm:g,onCancelScriptForm:x}}(a);return s.jsx(d.Provider,{value:{...a,...t},children:e})}},12260:(e,a,t)=>{"use strict";t.d(a,{l:()=>i});var s=t(35047),r=t(15491),l=t(17577);function i(){let e=(0,s.useRouter)(),a=(0,s.useSearchParams)(),t=(0,l.useMemo)(()=>a.toString(),[a]),i=(0,l.useMemo)(()=>r.Z.parse(a.toString()),[a]),n=(0,l.useCallback)(e=>r.Z.stringify({...i,...e}),[i]),o=(0,l.useCallback)(a=>{e.push(`?${n(a)}`)},[n,e]);return{parsed:i,stringified:t,replace:(0,l.useCallback)(a=>{e.replace(`?${n(a)}`)},[n,e]),push:o,toSearchParams:n}}},61892:(e,a,t)=>{"use strict";function s(e){return null==e||""===e}t.d(a,{x:()=>s})},41236:(e,a,t)=>{"use strict";t.d(a,{_:()=>o});var s=t(19510),r=t(57371),l=t(39755),i=t(24569),n=t(46697);function o({title:e,backLink:a,children:t}){return s.jsx("div",{className:"pb-20",children:s.jsx(i.V,{className:"flex flex-col gap-y-4",children:s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-0",children:[!!e&&(0,s.jsxs)("div",{className:"text-xl flex items-center gap-x-4 mb-4 p-4",children:[!!a&&s.jsx(r.default,{href:a,children:s.jsx(l.Z,{className:"h-5 w-5"})}),s.jsx("span",{children:e})]}),t]})})})})}},95602:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(19510),r=t(58585),l=t(87845),i=t(47080),n=t(2111),o=t(68570);let d=(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/contexts/scripts/index.tsx`),{__esModule:c,$$typeof:u}=d;d.default,(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/contexts/scripts/index.tsx#ScriptsContext`),(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/contexts/scripts/index.tsx#useScriptsContext`);let f=(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/contexts/scripts/index.tsx#ScriptsContextProvider`);var m=t(85431),h=t(66267),p=t(24569),x=t(46697),g=t(94136);async function b({children:e}){let{user:a,yes:t}=await (0,h.canAccessPage)();if(a||(0,r.redirect)("/login"),!t)return s.jsx(p.V,{children:s.jsx(x.Zb,{children:s.jsx(x.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[o,d]=await Promise.all([(0,n.getHospitals)(),(0,g.getDataKeys)()]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(m.D,{children:"Scripts"}),s.jsx(f,{...l,...i,hospitals:o,getHospitals:n.getHospitals,dataKeys:d,children:e})]})}},17162:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(19510),r=t(21113),l=t(24569),i=t(46697);function n(){return s.jsx(l.V,{children:s.jsx(i.Zb,{children:s.jsx(i.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Description"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},47080:(e,a,t)=>{"use strict";t.r(a),t.d(a,{getFiles:()=>h,uploadFile:()=>p,uploadFileFromSite:()=>x});var s=t(24330);t(60166);var r=t(9576),l=t(61460),i=t(89114),n=t(57435),o=t(44652),d=t(66267),c=t(59271),u=t(49530),f=t(20123),m=t(40618);let h=i.Re;async function p(e,a){let t={success:!1,data:null};try{for(let s of(await (0,d.isAllowed)(["upload_files"]),Array.from(e.entries()))){let[i,n]=s;if("object"==typeof n){let s=Buffer.from(await n.arrayBuffer()),i=e.get("fileId")?.toString()||(0,r.Z)(),d={...(0,o.R)(e.get("metadata")?.toString()||"{}")},c=(e.get("size")?function(e,a){if("0"==`${e}`)return 0;let t=`${e||""}`.replaceAll(" ",""),[s,r]=(t=t.includes(".")?t.replaceAll(",",""):t.split(",").length>2?t.replaceAll(",",""):t.replaceAll(",",".")).split("."),l=!s||isNaN(Number(s))?"":s;return""==(l+=!r||isNaN(Number(r))?"":`.${r}`)||void 0===l||isNaN(Number(l))?a?.notNull?0:null:Number(l)}((0,o.R)(e.get("size")?.toString())):0)||n.size,u=e.get("filename")?.toString()||n.name,f=[i,u].filter(e=>e).join("__");(d.width||d.height)&&(f=`${f}?w=${d.width}&h=${d.height}`),t=await (0,l.G)({fileId:i,data:s,filename:f,size:c,contentType:e.get("contentType")?.toString()||n.type,metadata:d},a)}}}catch(e){t.success=!1,t.errors=[e.message],n.Z.error("uploadFile ERROR",e.message)}finally{return t}}async function x({fileId:e,siteURL:a}){try{let t=await (0,f.QF)({links:[a]});if(t.errors)throw Error(t.errors.join(", "));let{data:[s]}=t;if(!s)throw Error(`Site (${a}) was not found!`);let r=await (0,c.U)({baseURL:s.link,apiKey:s.apiKey}),n=await (0,i._I)(e);if(n.errors)throw Error(n.errors.join(", "));if(n?.data){let a=u.Z.stringify({...n.data.metadata});return a=a?`?${a}`:"",{data:{fileId:e,fileURL:[process.env.NEXT_PUBLIC_APP_URL,`/files/${e}${a}`].join("")}}}let o=(await r.get(`/api/files/${e}/download`)).data;if(o.errors)throw Error(o.errors.join(", "));if(!o.data)return{errors:["File not found"],data:null};await (0,l.G)({fileId:e,data:o.data.data,filename:o.data.filename,size:o.data.size,contentType:o.data.contentType,metadata:{...o.data.metadata}});let d=u.Z.stringify({...o.data.metadata});return d=d?`?${d}`:"",{data:{fileId:e,fileURL:[s.link,`/files/${e}${d}`].join("")}}}catch(e){return n.Z.error("downloadFileFromSite ERROR",e.message),{data:null,errors:[e.message]}}}(0,m.h)([h,p,x]),(0,s.j)("2603647352d6143615fc841cdc7888ee820ade32",h),(0,s.j)("404a555bd8d515b558a1176ea51d19e2670f363a",p),(0,s.j)("88c9bf8e342e37a966245e15ed8f7c8c90e2db0c",x)},2111:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>p,$$ACTION_1:()=>g,$$ACTION_2:()=>y,$$ACTION_3:()=>w,$$ACTION_4:()=>N,countHospitals:()=>x,deleteHospitals:()=>h,getHospital:()=>v,getHospitals:()=>b,saveHospitals:()=>j});var s=t(24330);t(60166);var r=t(57745),l=t(57435),i=t(10413),n=t(93567),o=t(88317);async function d(e){let a={success:!1};try{let t=e.filter(e=>e.id),s=e.filter(e=>!e.id),l=[];for(let e of t)try{await i.Z.update(n.hospitals).set(e).where((0,r.eq)(n.hospitals.id,e.id))}catch(e){l.push(e.message)}s.length&&await i.Z.insert(n.hospitals).values(s),l.length?a.errors=l:a.success=!0}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("_saveHospitals ERROR",e.message)}finally{return a?.errors?.length||o.Z.emit("data_changed","save_hospitals"),a}}async function c(e){let a={success:!1},{ids:t,hospitalsIds:s,confirmDeleteAll:d}={...e};try{let e=[t?.length?(0,r.d3)(n.hospitals.id,t):void 0,s?.length?(0,r.d3)(n.hospitals.hospitalId,s):void 0].filter(e=>e);if(!e.length&&!d)throw Error("Please confirm that you want to delete all the hospitals!");await i.Z.delete(n.hospitals).where((0,r.xD)(...e)),a.success=!0}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("_deleteHospitals ERROR",e.message)}finally{return a?.errors?.length||o.Z.emit("data_changed","delete_hospitals"),a}}var u=t(88453),f=t(66267),m=t(40618);let h=(0,s.j)("fa5ff364dc8e373c61bf5e919181e39a885e487c",p);async function p(...e){try{return await (0,f.isAllowed)(),await c(...e)}catch(e){return l.Z.error("deleteHospitals ERROR",e.message),{errors:[e.message],success:!1}}}let x=(0,s.j)("feb32317fd290d504cec676a0a7a8518ee2e101d",g);async function g(...e){try{return await (0,f.isAllowed)(),await (0,u.Py)(...e)}catch(e){return l.Z.error("countHospitals ERROR",e.message),{errors:[e.message],data:0}}}let b=(0,s.j)("35990ba7ae3c980de9d0dd031253e064853ea97c",y);async function y(...e){try{return await (0,f.isAllowed)(),await (0,u.O8)(...e)}catch(e){return l.Z.error("getHospitals ERROR",e.message),{errors:[e.message],data:[]}}}let v=(0,s.j)("97a35acd0bc43b4a8af2145bf173f255f7cfcaa6",w);async function w(...e){return await (0,f.isAllowed)(),await (0,u.C9)(...e)}let j=(0,s.j)("b1d8498ed9ba2ed0b2e75905de015d99eac788da",N);async function N(...e){try{return await (0,f.isAllowed)(),await d(...e)}catch(e){return l.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}(0,m.h)([h,x,b,v,j]),(0,s.j)("d13ede16692bf847809ef4f0f07e07202d176123",h),(0,s.j)("0435982985ccbc8a6ff401a05d234cbb357a5ba0",x),(0,s.j)("9999285484ed2cc27c47ee1cec1b91e8cfd7b525",b),(0,s.j)("43b29b99ca25e7001283c24afd253dc9b6e45967",v),(0,s.j)("224c4cde8babcf2dee45bef9b5abcb2062ab2765",j)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>l});var s=t(19510),r=t(50650);function l({className:e,...a}){return s.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>n});var s=t(68570);let r=(0,s.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,s.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>i,aY:()=>n});var s=t(19510),r=t(71159),l=t(50650);let i=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let n=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},61460:(e,a,t)=>{"use strict";t.d(a,{G:()=>o});var s=t(88317),r=t(57435),l=t(10413),i=t(93567),n=t(89114);async function o(e,a){let t={success:!1,data:null};try{if(!e.fileId)throw Error("Missing fileId");if(!e.data)throw Error("No file uploaded");await l.Z.insert(i.files).values(e);let r=await (0,n._I)(e.fileId);if(!r)throw Error("Failed to upload file");t.success=!0,t.data=r.data,r.data&&a?.broadcastAction!==!1&&s.Z.emit("file_uploaded")}catch(e){t.success=!1,t.errors=[e.message],r.Z.error("_uploadFile ERROR",e.message)}finally{return t}}},89114:(e,a,t)=>{"use strict";t.d(a,{_I:()=>d,Re:()=>h,KU:()=>o});var s=t(57745),r=t(10413),l=t(93567),i=t(57435),n=t(44380);async function o(e){try{let a=await r.Z.query.files.findFirst({where:(0,s.eq)(l.files.fileId,e)});return{data:a?{...a,url:(0,n.TI)(`/files/${a.fileId}`)}:null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}async function d(e){try{let a=await r.Z.query.files.findFirst({where:(0,s.eq)(l.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}});return{data:a?{...a,url:(0,n.TI)(`/files/${a.fileId}`)}:null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}var c=t(34149),u=t(60938),f=t(81445),m=t(41502);async function h(e){try{let{filesIds:a,archived:t,searchValue:i,limit:o,page:d=1,uploadDateGTE:h,uploadDateLTE:p}={...e},x=Math.max(0,d),g=i?["%",i,"%"].join(""):"",b=[t?(0,s.K0)(l.files.deletedAt):(0,s.Ft)(l.files.deletedAt),...a?.length?[(0,s.d3)(l.files.fileId,a)]:[],...g?[(0,c.i6)`LOWER(screens.name) like LOWER(${g})`]:[],h?(0,s.eg)(l.files.createdAt,"string"==typeof h?new Date(h):h):void 0,p?(0,s.G)(l.files.createdAt,"string"==typeof p?new Date(p):p):void 0],y=r.Z.select({count:(0,u.QX)()}).from(l.files);b.length&&y.where((0,s.xD)(...b));let[{count:v}]=await y.execute(),w=1;v&&(w=(0,m.x)(o)?1:Math.ceil(v/o),x=Math.min(x,w));let j=(0,m.x)(o)?void 0:Math.max(0,(x-1)*o);return{data:(await r.Z.query.files.findMany({where:b.length?(0,s.xD)(...b):void 0,limit:o,offset:j,orderBy:(0,f.C)(l.files.createdAt),columns:{fileId:!0,contentType:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})).map(e=>({...e,url:(0,n.TI)(`/files/${e.fileId}`)})),searchValue:i,totalPages:w,totalRows:v,page:x,limit:o}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:[],totalPages:0,totalRows:0,page:1}}}},88453:(e,a,t)=>{"use strict";t.d(a,{Py:()=>u,C9:()=>d,O8:()=>o});var s=t(57745),r=t(30900),l=t(10413),i=t(93567),n=t(57435);async function o(e){try{let{hospitalsIds:a}={...e},t=a||[],n=t?.length?(0,s.d3)(i.hospitals.hospitalId,t.filter(e=>r.Z(e))):void 0,o=t?.length?(0,s.d3)(i.hospitals.oldHospitalId,t.filter(e=>!r.Z(e))):void 0,d=[(0,s.Ft)(i.hospitals.deletedAt),...n&&o?[(0,s.or)(n,o)]:[]];return{data:(await l.Z.select({hospital:i.hospitals}).from(i.hospitals).where(d.length?(0,s.xD)(...d):void 0)).map(e=>e.hospital)}}catch(e){return n.Z.error("_getHospitals ERROR",e.message),{data:[],errors:[e.message]}}}async function d(e){let{hospitalId:a}={...e};try{if(!a)throw Error("Missing hospitalId");let e=r.Z(a)?(0,s.eq)(i.hospitals.hospitalId,a):void 0,t=r.Z(a)?void 0:(0,s.eq)(i.hospitals.oldHospitalId,a);return{data:await l.Z.query.hospitals.findFirst({where:(0,s.xD)((0,s.Ft)(i.hospitals.deletedAt),e||t)})}}catch(e){return n.Z.error("_getHospital ERROR",e.message),{errors:[e.message]}}}var c=t(60938);async function u(){try{let[{count:e}]=await l.Z.select({count:(0,c.QX)()}).from(i.hospitals);return{data:e}}catch(e){return n.Z.error("_getHospitals ERROR",e.message),{data:0,errors:[e.message]}}}},44652:(e,a,t)=>{"use strict";function s(e){try{return JSON.parse(e)}catch(e){return null}}t.d(a,{R:()=>s})}};