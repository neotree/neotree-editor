exports.id=5323,exports.ids=[5323],exports.modules={28263:(e,a,t)=>{let l={"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.saveDataKeysUpdateIfExist),"18105b87f644f168cafbc747f8197c9d6b0856c9":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.saveDataKeysIfNotExist),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.saveDataKeys),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.$$ACTION_2),"7d2b1575988c8ba2208de85022e895402fc6d2b9":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.$$ACTION_0),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.getDataKeys),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.exportDataKeys),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:()=>Promise.resolve().then(t.bind(t,94136)).then(e=>e.$$ACTION_1),b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"3753e7204934c26ff5afc7fac412906b9ec7c2cd":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),cf37b218c9ffd359e595d215859090895afe32a3:()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"6397523a8f8672c5182495764c492b3a235cbcab":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),"76f0b17712f4501d72b44a5049e045af2774269b":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),d97e2a08525547477613111effde4792d4260225:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),e1c6930531e9485f362babf55d97916a1ad501cf:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),"5b32a18b5d68c0559bdc20224d166443def15579":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSites),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSitesWithoutConfidentialData),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.saveSites),cec02b7793208620ac58f5f16076922997e6559c:()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.$$ACTION_0),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSite),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.discardDrafts),a51a2d6c6369fbe75939846346b95c575004df1d:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.$$ACTION_0),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.countAllDrafts),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.getEditorDetails),d7b5dfae0e5e175752e21d0929fede082af11157:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.revalidatePath),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.$$ACTION_1),ed96721a8cdb9e337ce13bba84ed504642533051:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.publishData)};async function s(e,...a){return(await l[e]()).apply(null,a)}e.exports={"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":s.bind(null,"0d39aaa823e839a6bfddf6a5ed21623edef0aec2"),"18105b87f644f168cafbc747f8197c9d6b0856c9":s.bind(null,"18105b87f644f168cafbc747f8197c9d6b0856c9"),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":s.bind(null,"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86"),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":s.bind(null,"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a"),"7d2b1575988c8ba2208de85022e895402fc6d2b9":s.bind(null,"7d2b1575988c8ba2208de85022e895402fc6d2b9"),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":s.bind(null,"948e22b55d8b846c9687619f6f7f74f3fc26b22d"),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:s.bind(null,"c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744"),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:s.bind(null,"e50183efb5391ac0e2bc1cb207a43a2f6847d6ed"),b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:s.bind(null,"b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59"),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:s.bind(null,"c7db9b1ba0cab2a335eda35b61797bc9a5b816ba"),"3753e7204934c26ff5afc7fac412906b9ec7c2cd":s.bind(null,"3753e7204934c26ff5afc7fac412906b9ec7c2cd"),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":s.bind(null,"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025"),cf37b218c9ffd359e595d215859090895afe32a3:s.bind(null,"cf37b218c9ffd359e595d215859090895afe32a3"),"6397523a8f8672c5182495764c492b3a235cbcab":s.bind(null,"6397523a8f8672c5182495764c492b3a235cbcab"),"76f0b17712f4501d72b44a5049e045af2774269b":s.bind(null,"76f0b17712f4501d72b44a5049e045af2774269b"),d97e2a08525547477613111effde4792d4260225:s.bind(null,"d97e2a08525547477613111effde4792d4260225"),e1c6930531e9485f362babf55d97916a1ad501cf:s.bind(null,"e1c6930531e9485f362babf55d97916a1ad501cf"),"5b32a18b5d68c0559bdc20224d166443def15579":s.bind(null,"5b32a18b5d68c0559bdc20224d166443def15579"),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":s.bind(null,"62f755d2b4c846d8090cd4b57ab2767f1a077d36"),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":s.bind(null,"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c"),cec02b7793208620ac58f5f16076922997e6559c:s.bind(null,"cec02b7793208620ac58f5f16076922997e6559c"),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:s.bind(null,"ea9a3fcf74a0c423c844e980536ccc9ede1b166d"),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:s.bind(null,"a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01"),a51a2d6c6369fbe75939846346b95c575004df1d:s.bind(null,"a51a2d6c6369fbe75939846346b95c575004df1d"),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:s.bind(null,"c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca"),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:s.bind(null,"cb9a2ec0d6364666ae991ca69a1ccc30f74a5220"),d7b5dfae0e5e175752e21d0929fede082af11157:s.bind(null,"d7b5dfae0e5e175752e21d0929fede082af11157"),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:s.bind(null,"e5fa07e4fdc4dcce863b886208c69a80b05c95d4"),ed96721a8cdb9e337ce13bba84ed504642533051:s.bind(null,"ed96721a8cdb9e337ce13bba84ed504642533051")}},42782:(e,a,t)=>{Promise.resolve().then(t.bind(t,7636))},38861:(e,a,t)=>{Promise.resolve().then(t.bind(t,49596))},96948:(e,a,t)=>{"use strict";t.d(a,{Alert:()=>i});var l=t(96221),s=t(35047);function i(e){(0,s.useRouter)();let{alert:a}=(0,l.s)();return null}t(17577)},34474:(e,a,t)=>{"use strict";t.d(a,{Bw:()=>y,DI:()=>f,Ph:()=>o,Ql:()=>g,U$:()=>v,i4:()=>u,ki:()=>b,n5:()=>p});var l=t(10326),s=t(17577),i=t(44875),n=t(941),r=t(96633),d=t(32933),c=t(77863);let o=i.fC,f=i.ZA,b=i.B4,u=s.forwardRef(({className:e,children:a,error:t,...s},r)=>(0,l.jsxs)(i.xz,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t&&"border-danger",e),...s,children:[a,l.jsx(i.JO,{asChild:!0,children:l.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.xz.displayName;let h=s.forwardRef(({className:e,...a},t)=>l.jsx(i.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:l.jsx(r.Z,{className:"h-4 w-4"})}));h.displayName=i.u_.displayName;let m=s.forwardRef(({className:e,...a},t)=>l.jsx(i.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:l.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=i.$G.displayName;let y=s.forwardRef(({className:e,children:a,position:t="popper",...s},n)=>l.jsx(i.h_,{children:(0,l.jsxs)(i.VY,{ref:n,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[l.jsx(h,{}),l.jsx(i.l_,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),l.jsx(m,{})]})}));y.displayName=i.VY.displayName;let p=s.forwardRef(({className:e,...a},t)=>l.jsx(i.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));p.displayName=i.__.displayName;let g=s.forwardRef(({className:e,children:a,...t},s)=>(0,l.jsxs)(i.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(i.wU,{children:l.jsx(d.Z,{className:"h-4 w-4"})})}),l.jsx(i.eT,{children:a})]}));g.displayName=i.ck.displayName;let v=s.forwardRef(({className:e,...a},t)=>l.jsx(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));v.displayName=i.Z0.displayName},16722:(e,a,t)=>{"use strict";t.d(a,{Uv:()=>i,VO:()=>s,d4:()=>l,fR:()=>r});let l=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],s=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],i=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],n={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},r={admission:[{...n,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...n,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...n,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...n,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...n,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},58464:(e,a,t)=>{"use strict";t.d(a,{$7:()=>d,F4:()=>h,PU:()=>n,Tf:()=>f,UQ:()=>m,_S:()=>r,m1:()=>o,ph:()=>b,uh:()=>c,y0:()=>u});var l=t(16722),s=t(75743),i=t(20698);let n={headerFormat:"",headerFields:[],footerFields:[],sections:[]},r="Example: ($key = true and $key2 = false) or $key3 = 'HD'",d={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},c=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],o=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"},{label:"DFF Calculator",value:"dff_calculator"}],f=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],b=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}];({...f.reduce((e,a)=>{let t=a.value,l=a.value,s=[l,`${l}_option`];return"single_select"===t&&(s=[...s,"dropdown","dropdown_option"]),{...e,[l]:s}},{}),...l.Uv.reduce((e,a)=>{let t=a.name,l=a.name,s=[l,`${l}_option`];return"dropdown"===t&&(s=[...s,"single_select","single_select_option"]),{...e,[l]:s}},{})});let u=[{value:"checklist",label:"checklist",hasChildren:!0},{value:"multi_select",label:"multi_select",hasChildren:!0},{value:"single_select",label:"single_select",hasChildren:!0},{value:"yesno",label:"yesno",hasChildren:!1},{value:"zw_edliz_summary_table",label:"zw_edliz_summary_table",hasChildren:!0},{value:"mwi_edliz_summary_table",label:"mwi_edliz_summary_table",hasChildren:!0},{value:"diagnosis",label:"diagnosis",hasChildren:!0},{value:"diagnosis_symptom_sign",label:"diagnosis_symptom_sign",hasChildren:!1},{value:"diagnosis_symptom_risk",label:"diagnosis_symptom_risk",hasChildren:!1},{value:"date",label:"date",hasChildren:!1},{value:"datetime",label:"datetime",hasChildren:!1},{value:"dropdown",label:"dropdown",hasChildren:!0},{value:"number",label:"number",hasChildren:!1},{value:"text",label:"text",hasChildren:!1},{value:"timer",label:"timer",hasChildren:!1},{value:"period",label:"period",hasChildren:!1},{value:"option",label:"option",hasChildren:!1}],h=[{value:"label.asc",label:"Label (asc)",Icon:s.Z},{value:"label.desc",label:"Label (desc)",Icon:i.Z},{value:"key.asc",label:"Key (asc)",Icon:s.Z},{value:"key.desc",label:"Key (desc)",Icon:i.Z},{value:"type.asc",label:"Type (asc)",Icon:s.Z},{value:"type.desc",label:"Type (desc)",Icon:i.Z},{value:"refId.asc",label:"Ref ID (asc)",Icon:s.Z},{value:"refId.desc",label:"Ref ID (desc)",Icon:i.Z},{value:"createdAt.asc",label:"Creation date (asc)",Icon:s.Z},{value:"createdAt.desc",label:"Creation date (desc)",Icon:i.Z},{value:"updatedAt.asc",label:"Update date (asc)",Icon:s.Z},{value:"updatedAt.desc",label:"Update date (desc)",Icon:i.Z}],m=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}]},49596:(e,a,t)=>{"use strict";t.d(a,{DataKeysCtxProvider:()=>g,M:()=>p});var l=t(10326),s=t(17577),i=t(44099),n=t(93396),r=t(35047),d=t(96221),c=t(96948),o=t(58464),f=t(37530),b=t(3529),u=t(11877);let h=e=>e?.name||e?.label||e?.uniqueKey||"Data key",m=e=>e?{uuid:e.uuid||"",uniqueKey:e.uniqueKey||"",name:e.name||"",refId:e.refId||"",dataType:e.dataType||"",label:e.label||"",options:Array.isArray(e.options)?e.options:[],metadata:e.metadata||{},version:"number"==typeof e.version?e.version:Number(e.version||0)||0}:null,y=(0,s.createContext)(null),p=()=>{let e=(0,s.useContext)(y);if(!e)throw Error("useChart must be used within a <DataKeysCtxProvider />");return e};function g({children:e,prefetchDataKeys:a=!0}){(0,s.useRef)(!1);let t=(0,r.useRouter)(),{alert:p}=(0,d.s)(),{authenticatedUser:g}=(0,b.b)(),[v,w]=(0,n.v1)("uuid",{clearOnDefault:!0,shallow:!0,history:"push",defaultValue:""}),[x,k]=(0,s.useState)([]),[N,C]=(0,s.useState)(o.F4[0].value),[D,S]=(0,s.useState)(""),[I,T]=(0,s.useState)(""),[P,_]=(0,s.useState)(1),[j]=(0,s.useState)(100),[A,$]=(0,s.useState)(!1),[K,V]=(0,s.useState)([]),[Z,R]=(0,s.useState)(),E=(0,s.useCallback)(async e=>{$(!0);try{let a=new URLSearchParams;e?.names?.length&&a.set("names",JSON.stringify(e.names)),e?.uniqueKeys?.length&&a.set("uniqueKeys",JSON.stringify(e.uniqueKeys)),e?.dataKeysIds?.length&&a.set("dataKeysIds",JSON.stringify(e.dataKeysIds));let t=await i.Z.get(`/api/data-keys?${a.toString()}`),l=function(e,a=o.F4[0].value){let t=[...e],l=({key1:e,key2:a,sortDirection:t})=>{e=(e||"").trim().toLowerCase(),a=(a||"").trim().toLowerCase();let l=0;return"asc"===t?(e<a&&(l=-1),e>a&&(l=1)):(e>a&&(l=-1),e<a&&(l=1)),l};switch(a){case"refId.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:(e.refId||"").trim(),key2:(a.refId||"").trim()}));break;case"refId.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:(e.refId||"").trim(),key2:(a.refId||"").trim()}));break;case"key.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:e.name,key2:a.name}));break;case"label.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"label.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"type.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"type.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"createdAt.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;case"createdAt.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;case"updatedAt.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:new Date(e.updatedAt||"").getTime().toString(),key2:new Date(a.updatedAt||"").getTime().toString()}));break;case"updatedAt.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:new Date(e.updatedAt||"").getTime().toString(),key2:new Date(a.updatedAt||"").getTime().toString()}));break;default:t=e.sort((e,a)=>l({sortDirection:"asc",key1:e.name,key2:a.name}))}return t}(t.data.data,N);V(l),R(t.data.errors),_(1)}catch(e){V([]),R([e.message])}finally{$(!1)}},[N]),M=(0,s.useMemo)(()=>{let e=[...K];if(D&&(e="published"===D?e.filter(e=>!e?.isDraft):"draft"===D?e.filter(e=>!!e?.isDraft):e.filter(e=>e?.dataType===D)),I){let{normalizedValue:a,isExactMatch:t}=(0,u.l)(I);a&&(e=e.filter(e=>[e.name||"",e.label||""].map(e=>e.toLowerCase()).some(e=>t?e===a:e.includes(a))))}return e},[K,D,I]),{dataKeys:z,pagination:O}=(0,s.useMemo)(()=>{if(!M.length)return{dataKeys:[],pagination:void 0};let e=function(e,a,t){let l=e.length,s=(a-1)*t;return{data:e.slice(s,s+t),pagination:{page:a,limit:t,total:l,totalPages:Math.ceil(l/t)}}}(M,P,j);return{dataKeys:e.data,pagination:e.pagination}},[M,P,j]),[U,F]=(0,s.useState)(!1),L=(0,s.useCallback)(async(e,a)=>{try{F(!0);let l=e.map(e=>({...e,version:"string"==typeof e.version?Number(e.version):e.version})),s=(await i.Z.post("/api/data-keys/save",{data:l,broadcastAction:!0})).data;s.errors?.length?p({title:"Error",message:s.errors.join(", "),variant:"error"}):(await E(),t.refresh(),p({message:"Data key saved!",variant:"success",onClose:()=>a?.()}))}catch(e){p({title:"Error",message:"Failed to save data key: "+e.message,onClose:()=>a?.(e.message)})}finally{F(!1)}},[p,t.refresh,E]),[Y,B]=(0,s.useState)(!1),J=(0,s.useCallback)(async e=>{if(!e.length)return;let a=g?.userId,t=g?.displayName;for(let l of e){if(!l?.uuid)continue;let e=m(l);if(!e)continue;let s=h(l);await (0,f.KL)({entityId:l.uuid,entityType:"dataKey",entityTitle:s,snapshot:e,userId:a,userName:t,description:`Marked "${s}" for deletion`})}},[g?.userId,g?.displayName]),q=(0,s.useCallback)(async e=>{let a=K.filter(a=>a?.uuid&&e.includes(a.uuid));try{B(!0);let l=(await i.Z.delete("/api/data-keys?data="+JSON.stringify({dataKeysIds:e,broadcastAction:!0}))).data;if(l.errors?.length)throw Error(l.errors[0]);await J(a),k([]),await E(),t.refresh(),p({title:"Success",message:"Data keys deleted successfully!",variant:"success"})}catch(e){p({title:"Error",message:e.message,variant:"error"})}finally{B(!1)}},[t.refresh,p,E,K,J]),[W,H]=(0,s.useState)(!1),G=(0,s.useCallback)(async e=>{try{H(!0);let a=(await i.Z.post("/api/data-keys/export",e)).data;if(a.errors?.length)throw Error(a.errors[0]);await E(),k([]),p({title:"Success",message:"Data exported successfully!",variant:"success"})}catch(e){p({title:"Error",message:e.message,variant:"error"})}finally{H(!1)}},[E,p]),Q=(0,s.useCallback)((e=o.F4[0].value)=>{C(e),k([]),_(1)},[]),X=(0,s.useCallback)((e,a)=>{let t=e.map(e=>K.find(a=>a.uniqueKey===e||a.uuid===e)).filter(e=>e);return a?.withNested&&t.filter(e=>e.options.length).forEach(e=>{let l=X(e.options,a);t=[...t,...l]}),t.filter((e,a)=>t.map(e=>e.uniqueKey).indexOf(e.uniqueKey)===a)},[K]);return Z?.length?l.jsx(c.Alert,{title:"Error",message:"Failed to load data keys: "+Z.join(", "),buttonLabel:"Try again",onClose:()=>E()}):l.jsx(l.Fragment,{children:l.jsx(y.Provider,{value:{loadingDataKeys:A,saving:U,exporting:W,deleting:Y,dataKeys:z,allDataKeys:K,errors:Z,selected:x,currentDataKeyUuid:v,sort:N,filter:D,searchValue:I,pagination:O,currentPage:P,itemsPerPage:j,setCurrentPage:_,setSearchValue:T,extractDataKeys:X,deleteDataKeys:q,saveDataKeys:L,exportDataKeys:G,setCurrentDataKeyUuid:w,loadDataKeys:E,setSelected:k,setSort:C,onSort:Q,setFilter:S},children:e})})}},51605:(e,a,t)=>{"use strict";t.d(a,{v:()=>s});var l=t(3529);function s({isDraft:e,userId:a}){let{authenticatedUser:t}=(0,l.b)();return!!(e&&a&&a!==t?.userId)}},37530:(e,a,t)=>{"use strict";t.d(a,{$u:()=>n,KL:()=>d});var l=t(24875);let s=new Set(["id","createdAt","updatedAt","deletedAt","oldScriptId","oldScreenId","oldDiagnosisId","oldConfigKeyId","version","publishDate","isDraft","isDeleted","draftCreatedByUserId","createdByUserId","updatedByUserId","createdBy","updatedBy"]);class i{constructor(e){this.originalSnapshot=null,this.isInitialized=!1,this.options=e}setSnapshot(e){if(this.isInitialized){console.warn("Snapshot already initialized, ignoring subsequent calls");return}this.originalSnapshot=JSON.parse(JSON.stringify(e)),this.isInitialized=!0,console.log("Initial snapshot set for entity:",this.options.entityId)}async trackChanges(e,a){if(!this.isInitialized||!this.originalSnapshot){console.warn("Snapshot not initialized, initializing now"),this.setSnapshot(e);return}console.log("Tracking changes for entity:",this.options.entityId);let t=this.detectChanges(this.originalSnapshot,e);console.log("Detected changes:",t.length);let s=new Map((await l.pb.getEntityChanges(this.options.entityId,this.options.entityType)).map(e=>[e.fieldPath,e])),i=this.resolveEntityTitle(e);for(let n of t){let t=s.get(n.path);t?(await l.pb.updateChange(t.id,{newValue:n.newValue,timestamp:Date.now(),description:a,fullSnapshot:e,entityTitle:i}),console.log("Updated change for field:",n.path)):(await l.pb.addChange({entityId:this.options.entityId,entityType:this.options.entityType,action:"update",fieldPath:n.path,fieldName:n.name,oldValue:n.oldValue,newValue:n.newValue,userId:this.options.userId,userName:this.options.userName,description:a,fullSnapshot:e,entityTitle:i}),console.log("Added new change for field:",n.path))}for(let[e,a]of Array.from(s))t.some(a=>a.path===e)||(await l.pb.deleteChange(a.id),console.log("Removed reverted change for field:",e));0===t.length&&(await l.pb.clearEntityChanges(this.options.entityId,this.options.entityType),console.log("All changes cleared - form back to original state"))}resolveEntityTitle(e){if(this.options.resolveEntityTitle){let a=this.options.resolveEntityTitle(e);if(a&&a.toString().trim().length)return a.toString().trim()}let a=this.extractTitle(e);return a?a:"string"==typeof this.options.entityTitle&&this.options.entityTitle.trim().length?this.options.entityTitle.trim():this.extractTitle(this.originalSnapshot)||`${this.options.entityType} ${this.options.entityId}`}extractTitle(e){if(!e||"object"!=typeof e)return null;for(let a of["title","name","label","key","printTitle","displayName","sectionTitle","collectionLabel"]){let t=e[a];if("string"==typeof t&&t.trim().length)return t.trim()}return null}isMeaningfulValue(e){return null!=e&&("string"!=typeof e||""!==e.trim())}detectChanges(e,a,t=""){let l=[];return null==e?null!=a&&this.isMeaningfulValue(a)&&l.push({path:t||"root",name:t.split(".").pop()||"root",oldValue:e,newValue:a}):null==a?this.isMeaningfulValue(e)&&l.push({path:t||"root",name:t.split(".").pop()||"root",oldValue:e,newValue:a}):"object"!=typeof e||"object"!=typeof a?e!==a&&this.isMeaningfulValue(a)&&l.push({path:t||"root",name:t.split(".").pop()||"root",oldValue:e,newValue:a}):Array.isArray(e)&&Array.isArray(a)?JSON.stringify(e)!==JSON.stringify(a)&&l.push({path:t||"root",name:t.split(".").pop()||"root",oldValue:e,newValue:a}):Array.from(new Set([...Object.keys(e),...Object.keys(a)])).forEach(i=>{if(s.has(i))return;let n=t?`${t}.${i}`:i,r=e[i],d=a[i];(this.isMeaningfulValue(r)||this.isMeaningfulValue(d))&&("object"!=typeof r||"object"!=typeof d||null===r||null===d||Array.isArray(r)||Array.isArray(d)?JSON.stringify(r)!==JSON.stringify(d)&&this.isMeaningfulValue(d)&&l.push({path:n,name:i,oldValue:r,newValue:d}):l.push(...this.detectChanges(r,d,n)))}),l}async clearChanges(){await l.pb.clearEntityChanges(this.options.entityId,this.options.entityType),this.originalSnapshot=null,this.isInitialized=!1,console.log("Change tracker reset for entity:",this.options.entityId)}async getPendingChanges(){return await l.pb.getEntityChanges(this.options.entityId,this.options.entityType)}}function n(e){return new i(e)}let r=["title","name","label","key","printTitle","sectionTitle","collectionLabel","drug","fluid","feed"];async function d({entityId:e,entityType:a,entityTitle:t,snapshot:s,userId:i,userName:n,description:d}){if(!e)return;let c=t?.trim()||function(e){if(!e||"object"!=typeof e)return null;for(let a of r){let t=e[a];if("string"==typeof t&&t.trim().length)return t.trim()}return null}(s)||`${a} ${e}`;await l.pb.clearEntityChanges(e,a),await l.pb.addChange({entityId:e,entityType:a,entityTitle:c,action:"delete",fieldPath:"entity",fieldName:c,oldValue:s??null,newValue:null,userId:i||void 0,userName:n||void 0,description:d||`Marked "${c}" for deletion`,fullSnapshot:s??null})}},11877:(e,a,t)=>{"use strict";t.d(a,{l:()=>n,y:()=>i});let l=['"',"“"],s=['"',"”"];function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(e){let a=`${e??""}`.trim();if(!a)return{normalizedValue:"",isExactMatch:!1};let t=l.includes(a[0]),i=s.includes(a[a.length-1]),n=a.length>1&&t&&i;return{normalizedValue:(n?a.slice(1,-1):a).trim().toLowerCase(),isExactMatch:n}}},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},3333:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var l=t(19510),s=t(75644);function i({children:e}){return l.jsx(s.g2,{children:e})}},4326:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var l=t(19510),s=t(21113),i=t(24569),n=t(46697);function r(){return l.jsx(i.V,{children:l.jsx(n.Zb,{children:l.jsx(n.aY,{className:"p-0",children:l.jsx(s.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Data type"},{name:"",align:"right",cellClassName:"w-20"}],data:[]})})})})}},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>i});var l=t(19510),s=t(50650);function i({className:e,...a}){return l.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>r});var l=t(68570);let s=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/data-table/index.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let r=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>r,Zb:()=>n,aY:()=>c,ll:()=>d});var l=t(19510),s=t(71159),i=t(50650);let n=s.forwardRef(({className:e,...a},t)=>l.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));n.displayName="Card";let r=s.forwardRef(({className:e,...a},t)=>l.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));r.displayName="CardHeader";let d=s.forwardRef(({className:e,...a},t)=>l.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle",s.forwardRef(({className:e,...a},t)=>l.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let c=s.forwardRef(({className:e,...a},t)=>l.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",s.forwardRef(({className:e,...a},t)=>l.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},75644:(e,a,t)=>{"use strict";t.d(a,{g2:()=>r});var l=t(68570);let s=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/data-keys/index.tsx`),{__esModule:i,$$typeof:n}=s;s.default,(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/data-keys/index.tsx#DataKeysCtx`),(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/data-keys/index.tsx#useDataKeysCtx`);let r=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/data-keys/index.tsx#DataKeysCtxProvider`)}};