"use strict";exports.id=1416,exports.ids=[1416,7636],exports.modules={69486:(e,s,l)=>{l.d(s,{D:()=>r});var a=l(10326),t=l(77863);function r({children:e,className:s}){return a.jsx("div",{className:(0,t.cn)("pb-1 border-b border-b-primary",s),children:a.jsx("span",{className:"uppercase text-primary text-sm",children:e})})}},29354:(e,s,l)=>{l.d(s,{h:()=>n});var a=l(10326),t=l(38178),r=l(77863);function n({children:e,className:s}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"h-16"}),a.jsx("div",{className:(0,r.cn)(`
                        fixed 
                        left-0 
                        bottom-0 
                        h-16 
                        w-full 
                        border-t 
                        border-t-border 
                        z-[1] 
                        bg-primary-foreground 
                        dark:bg-background 
                        shadow-md 
                        dark:shadow-foreground/10
                    `),children:a.jsx(t.V,{children:a.jsx("div",{className:(0,r.cn)("flex justify-end gap-x-4",s),children:e})})})]})}},7636:(e,s,l)=>{l.d(s,{DataTable:()=>w});var a=l(10326),t=l(17577),r=l(9439),n=l(61541),i=l(99598),d=l(15940),o=l(77863),c=l(90772),u=l(53313),h=l(65304),m=l(61198),f=l(60097),x=l(79256),p=l(25696),g=l(91216),b=l(47206);let y=[{value:"asc",label:"Asc",Icon:x.Z},{value:"desc",label:"Desc",Icon:p.Z},{value:"hide",label:"Hide",divider:!0,Icon:g.Z}],j=({column:e,value:s,onFilter:l})=>{let t=y.filter(e=>e.value===s)[0],r=t?.Icon||b.Z;return(0,a.jsxs)(f.h_,{children:[a.jsx(f.$F,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",className:" focus-visible:ring-0  focus-visible:ring-transparent  focus-visible:ring-offset-0 ",children:[a.jsx("span",{className:"mr-2",children:e.name}),a.jsx(r,{className:"w-4 h-4"})]})}),a.jsx(f.AW,{align:"end",children:y.filter(s=>"hide"!==s.value||!1!==e.canHide).map(e=>(0,a.jsxs)(f.Xi,{onClick:()=>l(e.value),className:(0,o.cn)(e.divider?"border-t":""),children:[a.jsx(e.Icon,{className:"w-4 h-4 mr-2"}),e.label]},e.value))})]})},N=(0,t.forwardRef)(({searchButton:e,hideSearchButton:s,...l},t)=>a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:(0,o.cn)("flex w-full"),children:[a.jsx("div",{className:(0,o.cn)("relative w-full"),children:a.jsx("input",{ref:t,type:"search",placeholder:"Search",...l,className:(0,o.cn)("w-full pl-4 py-2 rounded-l-full border focus:outline-none focus:border-secondary bg-transparent",l.className)})}),!s&&a.jsx("button",{type:"button",className:(0,o.cn)("px-5 py-2.5 transition-colors bg-transparent border border-l-0 rounded-r-full hover:bg-secondary/10 disabled:opacity-50 disabled:cursor-not-allowed",e?.className),...e,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})})]})}));function v({title:e,search:s,headerActions:l}){let r=!s&&!e&&!l,[n,i]=(0,t.useState)(s?.value||"");return r?null:a.jsx(a.Fragment,{children:a.jsx("div",{className:"px-4 py-4 flex flex-col gap-y-2",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 md:flex-row md:gap-y-0 md:gap-x-2",children:[(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-x-2",!e&&"hidden"),children:[!!e&&a.jsx("div",{className:(0,o.cn)("md:mr-auto","string"==typeof e?"text-2xl":""),children:e}),a.jsx("div",{className:"ml-auto"})]}),a.jsx("div",{className:(0,o.cn)("flex-1",!s&&"hidden"),children:!!s&&a.jsx("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),n&&s?.setValue?.(n)},children:a.jsx(N,{placeholder:s?.inputPlaceholder||"Search",value:n,onChange:e=>{let l=e.target.value;i(l),l||s?.setValue?.(l)},searchButton:{type:"submit"}})})}),a.jsx("div",{className:(0,o.cn)("flex flex-row flex-wrap gap-x-2 gap-y-1 md:ml-auto",!l&&"hidden"),children:l})]})})})}N.displayName="SearchInput";let w=e=>{let{selectable:s=!1,loading:l,sortable:f,tableClassname:x,tableRowClassname:p,tableBodyClassname:g,filter:b,onSort:y}=e,N=(0,t.useRef)(null),{searchValue:w,state:{columns:C,rows:I,skeletonRows:k,selected:S},setSearchValue:T,setState:R,setFilter:V,setSelected:z,toggleColumn:$}=function({props:e}){(0,t.useRef)(!1);let{selectable:s,sortable:l,selectedIndexes:a,columns:r,data:n,maxRows:i,search:d,onFilteredRowsChange:o,onSelect:c}=e,[u,h]=(0,t.useState)(""),f=(0,m.N)(d?.value||u),x=(0,t.useCallback)((e="")=>{h(e),d?.setValue?.(e)},[d]),[p,g]=(0,t.useState)({selected:{},columns:[],unfilteredRows:[],rows:[],skeletonRows:[]});(0,t.useCallback)(()=>s?{...a?.reduce((e,s)=>({...e,[s]:!0}),{})}:{},[a,s]);let b=(0,t.useCallback)(e=>{let s=[];g(l=>{let a=e.length===l.rows.length,t=Object.values(l.selected).filter(e=>e).length===l.rows.length,r={...l.selected};return e.forEach(e=>{r[e]=a?!t:!r[e]}),s=Object.keys(r).filter(e=>r[e]).map(e=>Number(e)),{...l,selected:r}}),c?.(s)},[g,c]);return{state:p,searchValue:f,setSearchValue:x,setState:g,setSelected:b,toggleColumn:e=>g(s=>{let l=[...s.columns].map(s=>({...s,filter:null,hidden:s.columnIndex===e?!s.hidden:s.hidden}));return{...s,columns:l}}),setFilter:(e,s)=>g(l=>{let a=[...l.columns].map(l=>{let a=l.columnIndex===e?s:null;return{...l,filter:a}}),t=a.filter(s=>s.columnIndex===e)[0],r=[...l.rows];return s&&(r=function({column:e,rows:s}){return s.sort((s,l)=>{let a=s.cells.filter(s=>s.columnIndex===e.columnIndex)[0].value||"",t=l.cells.filter(s=>s.columnIndex===e.columnIndex)[0].value||"",r=0;if("number"===e.filterType){let s=Number(a),l=Number(t);if(!(isNaN(s)||isNaN(l)))switch(e.filter){case"asc":r=s-l;break;case"desc":r=l-s}}else if("text"===e.filterType)switch(e.filter){case"asc":r=a.localeCompare(t);break;case"desc":r=t.localeCompare(a)}return r})}({rows:r,column:t})),{...l,columns:a,rows:r}})}}({props:e}),D=(0,t.useMemo)(()=>l?k:I,[l,k,I]),O=(0,t.useCallback)((e,s)=>{let l=[];R(a=>{let t=(0,n.q)([...a.rows],e,s);return l=t.map((e,s)=>({oldIndex:e.rowIndex,newIndex:s})),{...a,rows:t}}),y?.(e,s,l),z([])},[R,y,z]),F=!w&&f&&!e.rowRenderer;return(0,a.jsxs)(a.Fragment,{children:[a.jsx(v,{...e,search:e.search?{...e.search,value:w,setValue:T}:void 0}),a.jsx(r.ZP,{allowDrag:!!F,onSortEnd:O,draggedItemClassName:"opacity-90 z-[9999999999999]",customHolderRef:N,children:a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)(d.iA,{className:(0,o.cn)("w-full overflow-x-auto",x),children:[a.jsx(d.xD,{className:(0,o.cn)(e.theadClassName),children:(0,a.jsxs)(d.SC,{children:[s&&a.jsx(d.ss,{className:(0,o.cn)(C[0]?.cellClassName,"w-8"),children:a.jsx(u.X,{disabled:l,checked:!!D.length&&Object.values(S).filter(e=>e).length===D.length,onCheckedChange:()=>z(D.map(e=>e.rowIndex))})}),F&&a.jsx(d.ss,{className:(0,o.cn)(C[0]?.cellClassName,"w-4")}),C.map(s=>a.jsx(d.ss,{colSpan:s.colSpan,align:s.align,className:(0,o.cn)(e.cellClassName,e.thClassName,s.cellClassName,s.thClassName,"px-2",s.hidden?"hidden":"",s.align?({left:"text-left",center:"text-center",right:"text-right",justify:"text-justify",char:""})[s.align]:""),children:(()=>{switch(s.filterType){case"number":case"text":return a.jsx(j,{column:s,value:s.filter,onFilter:e=>{"hide"===e?$(s.columnIndex):V(s.columnIndex,e)}});default:return a.jsx(c.z,{variant:"ghost",size:"sm",className:" focus-visible:ring-0  focus-visible:ring-transparent  focus-visible:ring-offset-0 hover:bg-transparent hover:text-primary ",children:s.name||""})}})()},s.id))]})}),(0,a.jsxs)(d.RM,{ref:N,className:g,children:[!D.length&&a.jsx(d.SC,{className:"p-0",children:a.jsx(d.pj,{colSpan:C.length+(s?1:0)+(F?1:0),className:"p-4 text-center text-muted-foreground",children:e.noDataMessage||"No data to display"})}),D.map(n=>{if(b&&!b(n.rowIndex))return null;let c={...e.getRowOptions?.({rowIndex:n.rowIndex})};c={...c,className:(0,o.cn)(e.trClassName,"hover:bg-primary/10",S[n.rowIndex]?"bg-primary/10":"",p,c.className)};let m=[...s?[a.jsx(d.pj,{className:(0,o.cn)(C[0]?.cellClassName,"w-8"),children:a.jsx(u.X,{disabled:l,checked:!!S[n.rowIndex],onCheckedChange:()=>z([n.rowIndex])})},"select-checkbox")]:[],...F?[a.jsx(d.pj,{className:(0,o.cn)(C[0]?.cellClassName,"w-4 cursor-move"),children:a.jsx(r.TI,{children:a.jsx(i.Z,{className:"w-4 h-4 text-muted-foreground"})})},"sort-handle")]:[],...n.cells.map(s=>{let r=C[s.columnIndex],i={...e.getCellOptions?.({rowIndex:n.rowIndex,columnIndex:s.columnIndex})};return(0,t.createElement)(d.pj,{...i,key:s.id,colSpan:r.colSpan,align:r.align,className:(0,o.cn)(e.cellClassName,e.tdClassName,r.cellClassName,r.tdClassName,"px-4",i.className,r.hidden?"hidden":"")},l?a.jsx(h.O,{className:"h-4 w-[120px] bg-black/10 dark:bg-white/10"}):r.cellRenderer?r.cellRenderer(s):s.value)})];return e.rowRenderer?e.rowRenderer({props:c,cells:m,rowIndex:n.rowIndex}):a.jsx(r.TR,{children:a.jsx(d.SC,{...c,children:m})},n.id)})]})]})})})]})}},63148:(e,s,l)=>{l.d(s,{_:()=>r});var a=l(10326),t=l(33071);function r({children:e,errors:s=[]}){return a.jsx(a.Fragment,{children:a.jsx(t.Zb,{className:"bg-destructive/20 border-destructive text-destructive",children:(0,a.jsxs)(t.aY,{className:"flex flex-col gap-y-4 px-4 py-2",children:[e,!!s.length&&a.jsx("div",{children:s.map((e,s)=>{let l=`${s}`;return a.jsx("p",{children:e},l)})})]})})})}},54328:(e,s,l)=>{l.d(s,{O:()=>h});var a=l(10326),t=l(17577),r=l(9015),n=l(30811),i=l(51605),d=l(77863),o=l(11870),c=l(44099),u=l(63148);let h=(0,t.forwardRef)(({isDraft:e,userId:s,dataType:l,card:h},m)=>{let f=(0,i.v)({isDraft:e,userId:s});(0,t.useImperativeHandle)(m,()=>({isLocked:f}),[f]);let{loading:x,error:p,user:g,getUser:b}=function({userId:e,loadOnMount:s=!1}){(0,t.useRef)(!1);let[l,a]=(0,t.useState)(!1),[r,n]=(0,t.useState)(null),[i,d]=(0,t.useState)(""),o=(0,t.useCallback)(async(s=e)=>{try{if(d(""),!l&&e){a(!0);let e=(await c.Z.get(`/api/users/${s}`)).data;n(e)}}catch(e){d(e.message)}finally{a(!1)}},[l,e]);return{loading:l,user:r,error:i,getUser:o}}({userId:s,loadOnMount:!!h}),y=(0,t.useCallback)(async e=>{e&&!x&&!g&&s&&b()},[s,g,x]);return h&&f&&!x?a.jsx(u._,{children:(0,a.jsxs)("div",{className:"flex items-center gap-x-4",children:[a.jsx(r.Z,{className:"w-4 h-4"}),g?(0,a.jsxs)("div",{children:[a.jsx("strong",{children:g.displayName})," is working on this ",l||""]}):null]})}):a.jsx(a.Fragment,{children:(0,a.jsxs)(n.J2,{onOpenChange:y,children:[a.jsx(n.xo,{asChild:!0,children:a.jsx("button",{disabled:!f,children:a.jsx(r.Z,{className:(0,d.cn)("w-4 h-4 text-destructive/80",!f&&"opacity-0")})})}),a.jsx(n.yk,{className:"p-0 text-sm max-w-[200px]",children:x?a.jsx("div",{className:"p-2 flex justify-center",children:a.jsx(o.a,{padding:0})}):p||!g?a.jsx("div",{className:"p-2 text-destructive bg-destructive/20",children:p||"Failed to load user!"}):(0,a.jsxs)("div",{className:"p-2",children:[a.jsx("strong",{children:g.displayName})," is working on this ",l||""]})})]})})});h.displayName="LockStatus"},18048:(e,s,l)=>{l.d(s,{u:()=>i});var a=l(10326);l(17577);var t=l(62288),r=l(77863);let n=(0,l(60114).Ue)((e,s)=>({modals:{},open(s){e(e=>({modals:{...e.modals,[s]:!0}}))},toggle(l){let a=s().modals;e(e=>({modals:{...e.modals,[l]:!a[l]}}))},close(s){e(e=>({modals:{...e.modals,[s]:!1}}))},isOpen:e=>!!s().modals[e],set(s){e(e=>({modals:{...e.modals,...s}}))}}));function i({id:e,children:s,title:l,description:i,actions:d,trigger:o,contentProps:c,footerProps:u,...h}){let{close:m,isOpen:f,set:x}=n();return a.jsx(a.Fragment,{children:(0,a.jsxs)(t.Vq,{...h,open:(e?f(e):void 0)||h.open,onOpenChange:s=>{e&&x({[e]:s}),h?.onOpenChange?.(s)},children:[o,(0,a.jsxs)(t.cZ,{hideCloseButton:!0,className:(0,r.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",c?.className),...c,children:[(0,a.jsxs)(t.fK,{className:(0,r.cn)(l||i?"":"hidden","border-b border-b-border px-4 py-4"),children:[a.jsx(t.$N,{className:(0,r.cn)(l?"":"hidden"),children:l}),a.jsx(t.Be,{className:(0,r.cn)(i?"":"hidden"),children:i})]}),a.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:s}),a.jsx(t.cN,{className:(0,r.cn)("border-t border-t-border px-4 py-2 items-center w-full",d?"":"hidden",u?.className),...u,children:d})]})]})})}},99463:(e,s,l)=>{l.d(s,{w:()=>m});var a=l(10326),t=l(17577),r=l(74723),n=l(58464),i=l(7890),d=l(34474),o=l(31048),c=l(53313),u=l(90772),h=l(77863);function m({id:e,label:s,hide:l,title:m,description:f,data:x,disabled:p,onSave:g}){let b=(0,t.useMemo)(()=>{let s=!1;return Object.values(x).forEach(l=>{l[e]&&(s=!0)}),s},[x,e]),{reset:y,watch:j,setValue:N,handleSubmit:v}=(0,r.cI)({defaultValues:{...n.$7,...x}}),w=j("fontSize"),C=j("fontWeight"),I=j("fontStyle"),k=j("textColor"),S=v(g),[T,R]=(0,t.useState)(!1);return l?null:a.jsx(a.Fragment,{children:(0,a.jsxs)(i.yo,{onOpenChange:e=>{y({...n.$7,...x}),R(e)},children:[a.jsx(i.aM,{asChild:!0,children:a.jsx(u.z,{variant:"link",className:(0,h.cn)("p-0 text-xs",!b&&"text-muted-foreground/80 hover:text-muted-foreground"),children:s||`${b?"Update":"Set"} preferences`})}),(0,a.jsxs)(i.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,a.jsxs)(i.Tu,{className:"px-4 py-4 border-b border-b-border",children:[a.jsx(i.bC,{children:m}),a.jsx(i.Ei,{className:f?"":"hidden",children:f})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-x-2 items-center",children:[a.jsx(o._,{secondary:!0,htmlFor:`fontSize.${e}`,children:"Font size"}),a.jsx("div",{children:(0,a.jsxs)(d.Ph,{value:w[e]||"default",required:!0,name:`fontSize.${e}`,disabled:p,onValueChange:s=>{let l=s||void 0;"default"===l&&(l=void 0),N(`fontSize.${e}`,l,{shouldDirty:!0})},children:[a.jsx(d.i4,{children:a.jsx(d.ki,{placeholder:"Default"})}),a.jsx(d.Bw,{children:a.jsx(d.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>a.jsx(d.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),a.jsx("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[!!k[e]&&(0,a.jsxs)("div",{className:"flex gap-x-2 items-center",children:[a.jsx(o._,{secondary:!0,htmlFor:`textColor.${e}`,children:"Text color"}),a.jsx("input",{type:"color",value:k[e],onChange:s=>N(`textColor.${e}`,s.target.value,{shouldDirty:!0})})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(c.X,{id:`defaultTextColor.${e}`,name:`defaultTextColor.${e}`,disabled:p,checked:!k[e],onCheckedChange:()=>{let s=k[e]?void 0:"#000000";N(`textColor.${e}`,s,{shouldDirty:!0})}}),a.jsx(o._,{secondary:!0,htmlFor:`defaultTextColor.${e}`,children:"Default text color"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(c.X,{name:"bold",id:"bold",disabled:p,checked:"bold"===C[e],onCheckedChange:()=>N(`fontWeight.${e}`,C[e]?void 0:"bold",{shouldDirty:!0})}),a.jsx(o._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(c.X,{name:"italic",id:"italic",disabled:p,checked:(I[e]||[]).includes("italic"),onCheckedChange:()=>{let s=I[e]||[];s.includes("italic")?s=s.filter(e=>"italic"!==e):s.push("italic"),s.length||(s=void 0),N(`fontStyle.${e}`,s,{shouldDirty:!0})}}),a.jsx(o._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,a.jsxs)(i.FF,{className:"px-4 py-4 border-t border-t-border",children:[a.jsx("div",{className:"ml-auto"}),a.jsx(i.sw,{asChild:!0,children:a.jsx(u.z,{variant:"outline",children:"Cancel"})}),a.jsx(i.sw,{asChild:!0,children:a.jsx(u.z,{disabled:p,onClick:()=>S(),children:"Save"})})]})]})]})})}},53313:(e,s,l)=>{l.d(s,{X:()=>d});var a=l(10326),t=l(17577),r=l(13635),n=l(32933),i=l(77863);let d=t.forwardRef(({className:e,...s},l)=>a.jsx(r.fC,{ref:l,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(r.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:a.jsx(n.Z,{className:"h-4 w-4"})})}));d.displayName=r.fC.displayName},54432:(e,s,l)=>{l.d(s,{I:()=>n});var a=l(10326),t=l(17577),r=l(77863);let n=t.forwardRef(({className:e,type:s,noRing:l,error:t,...n},i)=>a.jsx("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",t&&"border-danger",t&&!l&&"focus-visible:ring-danger",e),ref:i,...n}));n.displayName="Input"},34474:(e,s,l)=>{l.d(s,{Bw:()=>p,DI:()=>u,Ph:()=>c,Ql:()=>b,U$:()=>y,i4:()=>m,ki:()=>h,n5:()=>g});var a=l(10326),t=l(17577),r=l(44875),n=l(941),i=l(96633),d=l(32933),o=l(77863);let c=r.fC,u=r.ZA,h=r.B4,m=t.forwardRef(({className:e,children:s,error:l,...t},i)=>(0,a.jsxs)(r.xz,{ref:i,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l&&"border-danger",e),...t,children:[s,a.jsx(r.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=r.xz.displayName;let f=t.forwardRef(({className:e,...s},l)=>a.jsx(r.u_,{ref:l,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));f.displayName=r.u_.displayName;let x=t.forwardRef(({className:e,...s},l)=>a.jsx(r.$G,{ref:l,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));x.displayName=r.$G.displayName;let p=t.forwardRef(({className:e,children:s,position:l="popper",...t},n)=>a.jsx(r.h_,{children:(0,a.jsxs)(r.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:l,...t,children:[a.jsx(f,{}),a.jsx(r.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(x,{})]})}));p.displayName=r.VY.displayName;let g=t.forwardRef(({className:e,...s},l)=>a.jsx(r.__,{ref:l,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));g.displayName=r.__.displayName;let b=t.forwardRef(({className:e,children:s,...l},t)=>(0,a.jsxs)(r.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...l,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(r.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),a.jsx(r.eT,{children:s})]}));b.displayName=r.ck.displayName;let y=t.forwardRef(({className:e,...s},l)=>a.jsx(r.Z0,{ref:l,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));y.displayName=r.Z0.displayName},15940:(e,s,l)=>{l.d(s,{RM:()=>d,SC:()=>o,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>i});var a=l(10326),t=l(17577),r=l(77863);let n=t.forwardRef(({className:e,...s},l)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:l,className:(0,r.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let i=t.forwardRef(({className:e,...s},l)=>a.jsx("thead",{ref:l,className:(0,r.cn)("[&_tr]:border-b",e),...s}));i.displayName="TableHeader";let d=t.forwardRef(({className:e,...s},l)=>a.jsx("tbody",{ref:l,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...s}));d.displayName="TableBody",t.forwardRef(({className:e,...s},l)=>a.jsx("tfoot",{ref:l,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=t.forwardRef(({className:e,...s},l)=>a.jsx("tr",{ref:l,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let c=t.forwardRef(({className:e,...s},l)=>a.jsx("th",{ref:l,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let u=t.forwardRef(({className:e,...s},l)=>a.jsx("td",{ref:l,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));u.displayName="TableCell",t.forwardRef(({className:e,...s},l)=>a.jsx("caption",{ref:l,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},87673:(e,s,l)=>{l.d(s,{g:()=>n});var a=l(10326),t=l(17577),r=l(77863);let n=t.forwardRef(({className:e,noRing:s,...l},t)=>a.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",e),ref:t,...l}));n.displayName="Textarea"},61198:(e,s,l)=>{l.d(s,{N:()=>t});var a=l(17577);function t(e,s){let[l,t]=(0,a.useState)(e);return l}},51605:(e,s,l)=>{l.d(s,{v:()=>t});var a=l(3529);function t({isDraft:e,userId:s}){let{authenticatedUser:l}=(0,a.b)();return!!(e&&s&&s!==l?.userId)}},37530:(e,s,l)=>{l.d(s,{$:()=>n});var a=l(24875);let t=new Set(["id","createdAt","updatedAt","deletedAt","oldScriptId","oldScreenId","oldDiagnosisId","oldConfigKeyId","version","publishDate","isDraft","isDeleted","draftCreatedByUserId","createdByUserId","updatedByUserId","createdBy","updatedBy"]);class r{constructor(e){this.originalSnapshot=null,this.isInitialized=!1,this.options=e}setSnapshot(e){if(this.isInitialized){console.warn("Snapshot already initialized, ignoring subsequent calls");return}this.originalSnapshot=JSON.parse(JSON.stringify(e)),this.isInitialized=!0,console.log("Initial snapshot set for entity:",this.options.entityId)}async trackChanges(e,s){if(!this.isInitialized||!this.originalSnapshot){console.warn("Snapshot not initialized, initializing now"),this.setSnapshot(e);return}console.log("Tracking changes for entity:",this.options.entityId);let l=this.detectChanges(this.originalSnapshot,e);console.log("Detected changes:",l.length);let t=new Map((await a.pb.getEntityChanges(this.options.entityId,this.options.entityType)).map(e=>[e.fieldPath,e])),r=this.resolveEntityTitle(e);for(let n of l){let l=t.get(n.path);l?(await a.pb.updateChange(l.id,{newValue:n.newValue,timestamp:Date.now(),description:s,fullSnapshot:e,entityTitle:r}),console.log("Updated change for field:",n.path)):(await a.pb.addChange({entityId:this.options.entityId,entityType:this.options.entityType,action:"update",fieldPath:n.path,fieldName:n.name,oldValue:n.oldValue,newValue:n.newValue,userId:this.options.userId,userName:this.options.userName,description:s,fullSnapshot:e,entityTitle:r}),console.log("Added new change for field:",n.path))}for(let[e,s]of Array.from(t))l.some(s=>s.path===e)||(await a.pb.deleteChange(s.id),console.log("Removed reverted change for field:",e));0===l.length&&(await a.pb.clearEntityChanges(this.options.entityId,this.options.entityType),console.log("All changes cleared - form back to original state"))}resolveEntityTitle(e){if(this.options.resolveEntityTitle){let s=this.options.resolveEntityTitle(e);if(s&&s.toString().trim().length)return s.toString().trim()}let s=this.extractTitle(e);return s?s:"string"==typeof this.options.entityTitle&&this.options.entityTitle.trim().length?this.options.entityTitle.trim():this.extractTitle(this.originalSnapshot)||`${this.options.entityType} ${this.options.entityId}`}extractTitle(e){if(!e||"object"!=typeof e)return null;for(let s of["title","name","label","key","printTitle","displayName","sectionTitle","collectionLabel"]){let l=e[s];if("string"==typeof l&&l.trim().length)return l.trim()}return null}isMeaningfulValue(e){return null!=e&&("string"!=typeof e||""!==e.trim())}detectChanges(e,s,l=""){let a=[];return null==e?null!=s&&this.isMeaningfulValue(s)&&a.push({path:l||"root",name:l.split(".").pop()||"root",oldValue:e,newValue:s}):null==s?this.isMeaningfulValue(e)&&a.push({path:l||"root",name:l.split(".").pop()||"root",oldValue:e,newValue:s}):"object"!=typeof e||"object"!=typeof s?e!==s&&this.isMeaningfulValue(s)&&a.push({path:l||"root",name:l.split(".").pop()||"root",oldValue:e,newValue:s}):Array.isArray(e)&&Array.isArray(s)?JSON.stringify(e)!==JSON.stringify(s)&&a.push({path:l||"root",name:l.split(".").pop()||"root",oldValue:e,newValue:s}):Array.from(new Set([...Object.keys(e),...Object.keys(s)])).forEach(r=>{if(t.has(r))return;let n=l?`${l}.${r}`:r,i=e[r],d=s[r];(this.isMeaningfulValue(i)||this.isMeaningfulValue(d))&&("object"!=typeof i||"object"!=typeof d||null===i||null===d||Array.isArray(i)||Array.isArray(d)?JSON.stringify(i)!==JSON.stringify(d)&&this.isMeaningfulValue(d)&&a.push({path:n,name:r,oldValue:i,newValue:d}):a.push(...this.detectChanges(i,d,n)))}),a}async clearChanges(){await a.pb.clearEntityChanges(this.options.entityId,this.options.entityType),this.originalSnapshot=null,this.isInitialized=!1,console.log("Change tracker reset for entity:",this.options.entityId)}async getPendingChanges(){return await a.pb.getEntityChanges(this.options.entityId,this.options.entityType)}}function n(e){return new r(e)}},61892:(e,s,l)=>{l.d(s,{x:()=>a});function a(e){return null==e||""===e}},41236:(e,s,l)=>{l.d(s,{_:()=>d});var a=l(19510),t=l(57371),r=l(39755),n=l(24569),i=l(46697);function d({title:e,backLink:s,children:l}){return a.jsx("div",{className:"pb-20",children:a.jsx(n.V,{className:"flex flex-col gap-y-4",children:a.jsx(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"p-0",children:[!!e&&(0,a.jsxs)("div",{className:"text-xl flex items-center gap-x-4 mb-4 p-4",children:[!!s&&a.jsx(t.default,{href:s,children:a.jsx(r.Z,{className:"h-5 w-5"})}),a.jsx("span",{children:e})]}),l]})})})})}}};