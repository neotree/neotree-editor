exports.id=1548,exports.ids=[1548],exports.modules={50064:(e,t,a)=>{Promise.resolve().then(a.bind(a,77228))},33434:(e,t,a)=>{Promise.resolve().then(a.bind(a,10827)),Promise.resolve().then(a.bind(a,82617))},2025:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var s=a(10326),r=a(62288),i=a(77863);function l({children:e,title:t,description:a,actions:l,trigger:o,contentProps:n,footerProps:c,...d}){return s.jsx(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...d,children:[o,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,i.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",n?.className),...n,children:[(0,s.jsxs)(r.fK,{className:(0,i.cn)(t||a?"":"hidden","border-b border-b-border px-4 py-4"),children:[s.jsx(r.$N,{className:(0,i.cn)(t?"":"hidden"),children:t}),s.jsx(r.Be,{className:(0,i.cn)(a?"":"hidden"),children:a})]}),s.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:e}),s.jsx(r.cN,{className:(0,i.cn)("border-t border-t-border px-4 py-2 items-center w-full",l?"":"hidden",c?.className),...c,children:l})]})]})})}},62288:(e,t,a)=>{"use strict";a.d(t,{$N:()=>x,Be:()=>h,GG:()=>f,Vq:()=>n,cN:()=>g,cZ:()=>p,fK:()=>m,hg:()=>c});var s=a(10326),r=a(17577),i=a(98958),l=a(94019),o=a(77863);let n=i.fC,c=i.xz,d=i.h_,f=i.x8,u=r.forwardRef(({className:e,...t},a)=>s.jsx(i.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=i.aV.displayName;let p=r.forwardRef(({className:e,children:t,hideCloseButton:a,...r},n)=>(0,s.jsxs)(d,{children:[s.jsx(u,{}),(0,s.jsxs)(i.VY,{ref:n,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,!0!==a&&(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(l.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let g=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});g.displayName="DialogFooter";let x=r.forwardRef(({className:e,...t},a)=>s.jsx(i.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=i.Dx.displayName;let h=r.forwardRef(({className:e,...t},a)=>s.jsx(i.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=i.dk.displayName},31048:(e,t,a)=>{"use strict";a.d(t,{_:()=>c});var s=a(10326),r=a(17577),i=a(34478),l=a(28671),o=a(77863);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,secondary:t,error:a,...r},l)=>s.jsx(i.f,{ref:l,className:(0,o.cn)(n(),t&&"text-xs",a?"text-danger":"",e),...r}));c.displayName=i.f.displayName},82617:(e,t,a)=>{"use strict";a.d(t,{ScriptsContextProvider:()=>d,h:()=>c});var s=a(10326),r=a(17577),i=a(35047),l=a(15491),o=a(12260);let n=(0,r.createContext)(null),c=()=>(0,r.useContext)(n);function d({children:e,...t}){let a=function({}){let e=(0,i.useRouter)(),{scriptId:t}=(0,i.useParams)(),{parsed:a}=(0,o.l)(),s=(0,r.useCallback)(()=>{e.push("/")},[e]),n=(0,r.useCallback)(()=>{e.push(`/script/${t}?${l.Z.stringify({...a,section:"screens"})}`)},[e,a,t]);return{onCancelDiagnosisForm:(0,r.useCallback)(()=>{e.push(`/script/${t}?${l.Z.stringify({...a,section:"diagnoses"})}`)},[e,a,t]),onCancelScreenForm:n,onCancelScriptForm:s}}(t);return s.jsx(n.Provider,{value:{...t,...a},children:e})}},95602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(19510),r=a(58585),i=a(3283),l=a(82006),o=a(2111),n=a(68570);let c=(0,n.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx`),{__esModule:d,$$typeof:f}=c;c.default,(0,n.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#ScriptsContext`),(0,n.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#useScriptsContext`);let u=(0,n.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/contexts/scripts/index.tsx#ScriptsContextProvider`);var p=a(85431),m=a(66267),g=a(24569),x=a(46697);async function h({children:e}){let{user:t,yes:a}=await (0,m.canAccessPage)();if(t||(0,r.redirect)("/login"),!a)return s.jsx(g.V,{children:s.jsx(x.Zb,{children:s.jsx(x.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let n=await (0,o.getHospitals)();return(0,s.jsxs)(s.Fragment,{children:[s.jsx(p.D,{children:"Scripts"}),s.jsx(u,{...i,...l,hospitals:n,getHospitals:o.getHospitals,children:e})]})}},17162:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(19510),r=a(21113),i=a(24569),l=a(46697);function o(){return s.jsx(i.V,{children:s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Description"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},82006:(e,t,a)=>{"use strict";a.r(t),a.d(t,{uploadFile:()=>p});var s=a(24330);a(60166);var r=a(9576),i=a(88317),l=a(57435),o=a(10413),n=a(57418),c=a(89114);async function d(e,t){let a={success:!1,file:null};try{if(!e.fileId)throw Error("Missing fileId");if(!e.data)throw Error("No file uploaded");await o.Z.insert(n.files).values(e);let s=await (0,c._I)(e.fileId);if(!s)throw Error("Failed to upload file");a.success=!0,a.file=s.file,t?.broadcastAction&&i.Z.emit("data_changed","upload_file")}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("_uploadFile ERROR",e.message)}finally{return a}}var f=a(44652),u=a(66267);async function p(e,t){let a={success:!1,file:null};try{for(let s of(await (0,u.isAllowed)(["upload_files"]),Array.from(e.entries()))){let[i,l]=s;if("object"==typeof l){let s=Buffer.from(await l.arrayBuffer()),i=e.get("fileId")?.toString()||(0,r.Z)(),o={...(0,f.R)(e.get("metadata")?.toString()||"{}")},n=(e.get("size")?function(e,t){if("0"==`${e}`)return 0;let a=`${e||""}`.replaceAll(" ",""),[s,r]=(a=a.includes(".")?a.replaceAll(",",""):a.split(",").length>2?a.replaceAll(",",""):a.replaceAll(",",".")).split("."),i=!s||isNaN(Number(s))?"":s;return""==(i+=!r||isNaN(Number(r))?"":`.${r}`)||void 0===i||isNaN(Number(i))?t?.notNull?0:null:Number(i)}((0,f.R)(e.get("size")?.toString())):0)||l.size,c=e.get("filename")?.toString()||l.name,u=[i,c].filter(e=>e).join("__");(o.width||o.height)&&(u=`${u}?w=${o.width}&h=${o.height}`),a=await d({fileId:i,data:s,filename:u,size:n,contentType:e.get("contentType")?.toString()||l.type,metadata:o},t)}}}catch(e){a.success=!1,a.errors=[e.message],l.Z.error("uploadFile ERROR",e.message)}finally{return a}}(0,a(40618).h)([p]),(0,s.j)("3e664d99e344ef57ddb61621574f5391e47ffd78",p)},2111:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>g,$$ACTION_1:()=>h,$$ACTION_2:()=>w,$$ACTION_3:()=>N,$$ACTION_4:()=>j,countHospitals:()=>x,deleteHospitals:()=>m,getHospital:()=>b,getHospitals:()=>y,saveHospitals:()=>R});var s=a(24330);a(60166);var r=a(57745),i=a(57435),l=a(10413),o=a(57418),n=a(88317);async function c(e){let t={success:!1};try{let a=e.filter(e=>e.id),s=e.filter(e=>!e.id),i=[];for(let e of a)try{await l.Z.update(o.hospitals).set(e).where((0,r.eq)(o.hospitals.id,e.id))}catch(e){i.push(e.message)}s.length&&await l.Z.insert(o.hospitals).values(s),i.length?t.errors=i:t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_saveHospitals ERROR",e.message)}finally{return t?.errors?.length||n.Z.emit("data_changed","save_hospitals"),t}}async function d(e){let t={success:!1};try{e.ids.length&&await l.Z.delete(o.hospitals).where((0,r.d3)(o.hospitals.id,e.ids)),t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_deleteHospitals ERROR",e.message)}finally{return t?.errors?.length||n.Z.emit("data_changed","delete_hospitals"),t}}var f=a(88453),u=a(66267),p=a(40618);let m=(0,s.j)("5713a6fd71779a04f540a06e5e613a4939090a9b",g);async function g(...e){try{return await (0,u.isAllowed)(),await d(...e)}catch(e){return i.Z.error("deleteHospitals ERROR",e.message),{errors:[e.message],success:!1}}}let x=(0,s.j)("e0a27e8a7773580c75293c2a82a738cd87a24345",h);async function h(...e){try{return await (0,u.isAllowed)(),await (0,f.Py)(...e)}catch(e){return i.Z.error("countHospitals ERROR",e.message),{errors:[e.message],data:0}}}let y=(0,s.j)("e99a61aadf3a687f5e5f362e8931f54b110ed1c8",w);async function w(...e){try{return await (0,u.isAllowed)(),await (0,f.O8)(...e)}catch(e){return i.Z.error("getHospitals ERROR",e.message),{errors:[e.message],data:[]}}}let b=(0,s.j)("4d3efe0c4ece005691da0b0285728b17fb230b01",N);async function N(...e){return await (0,u.isAllowed)(),await (0,f.C9)(...e)}let R=(0,s.j)("3587bff1b8b40c65f5865326c885942cf0db5e9e",j);async function j(...e){try{return await (0,u.isAllowed)(),await c(...e)}catch(e){return i.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}(0,p.h)([m,x,y,b,R]),(0,s.j)("3c56d7ce36ee4d8d0281afafe6eee9310b0b1654",m),(0,s.j)("6bb90b144ce2739e2ebb2360f140bfcb26941837",x),(0,s.j)("671906d85ccc63e5e47168ff4716f835db5e69eb",y),(0,s.j)("69a3c9a16de410213b0554c366b618c4fc7627cb",b),(0,s.j)("cbf90680ca26b9a0028d1714fb51618089f0e380",R)},24569:(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var s=a(19510),r=a(50650);function i({className:e,...t}){return s.jsx("div",{...t,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var s=a(68570);let r=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let o=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx#DataTable`)},46697:(e,t,a)=>{"use strict";a.d(t,{Zb:()=>l,aY:()=>o});var s=a(19510),r=a(71159),i=a(50650);let l=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",r.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",r.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let o=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},89114:(e,t,a)=>{"use strict";a.d(t,{_I:()=>n,KU:()=>o});var s=a(57745),r=a(10413),i=a(57418),l=a(57435);async function o(e){try{return{file:await r.Z.query.files.findFirst({where:(0,s.eq)(i.files.fileId,e)})||null}}catch(e){return l.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}async function n(e){try{return{file:await r.Z.query.files.findFirst({where:(0,s.eq)(i.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})||null}}catch(e){return l.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}},88453:(e,t,a)=>{"use strict";a.d(t,{Py:()=>f,C9:()=>c,O8:()=>n});var s=a(57745),r=a(30900),i=a(10413),l=a(57418),o=a(57435);async function n(e){try{let{hospitalsIds:t}={...e},a=t||[],o=a?.length?(0,s.d3)(l.hospitals.hospitalId,a.filter(e=>r.Z(e))):void 0,n=a?.length?(0,s.d3)(l.hospitals.oldHospitalId,a.filter(e=>!r.Z(e))):void 0,c=[(0,s.Ft)(l.hospitals.deletedAt),...o&&n?[(0,s.or)(o,n)]:[]];return{data:(await i.Z.select({hospital:l.hospitals}).from(l.hospitals).where(c.length?(0,s.xD)(...c):void 0)).map(e=>e.hospital)}}catch(e){return o.Z.error("_getHospitals ERROR",e.message),{data:[],errors:[e.message]}}}async function c(e){let{hospitalId:t}={...e};try{if(!t)throw Error("Missing hospitalId");let e=r.Z(t)?(0,s.eq)(l.hospitals.hospitalId,t):void 0,a=r.Z(t)?void 0:(0,s.eq)(l.hospitals.oldHospitalId,t);return{data:await i.Z.query.hospitals.findFirst({where:(0,s.xD)((0,s.Ft)(l.hospitals.deletedAt),e||a)})}}catch(e){return o.Z.error("_getHospital ERROR",e.message),{errors:[e.message]}}}var d=a(60938);async function f(){try{let[{count:e}]=await i.Z.select({count:(0,d.QX)()}).from(l.hospitals);return{data:e}}catch(e){return o.Z.error("_getHospitals ERROR",e.message),{data:0,errors:[e.message]}}}},44652:(e,t,a)=>{"use strict";function s(e){try{return JSON.parse(e)}catch(e){return null}}a.d(t,{R:()=>s})}};