exports.id=581,exports.ids=[581],exports.modules={42782:(e,t,a)=>{Promise.resolve().then(a.bind(a,7636))},55685:(e,t,a)=>{Promise.resolve().then(a.bind(a,10827)),Promise.resolve().then(a.bind(a,49596)),Promise.resolve().then(a.bind(a,82617))},69486:(e,t,a)=>{"use strict";a.d(t,{D:()=>l});var s=a(10326),r=a(77863);function l({children:e,className:t}){return s.jsx("div",{className:(0,r.cn)("pb-1 border-b border-b-primary",t),children:s.jsx("span",{className:"uppercase text-primary text-sm",children:e})})}},29354:(e,t,a)=>{"use strict";a.d(t,{h:()=>i});var s=a(10326),r=a(38178),l=a(77863);function i({children:e,className:t}){return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"h-16"}),s.jsx("div",{className:(0,l.cn)(`
                        fixed 
                        left-0 
                        bottom-0 
                        h-16 
                        w-full 
                        border-t 
                        border-t-border 
                        z-[1] 
                        bg-primary-foreground 
                        dark:bg-background 
                        shadow-md 
                        dark:shadow-foreground/10
                    `),children:s.jsx(r.V,{children:s.jsx("div",{className:(0,l.cn)("flex justify-end gap-x-4",t),children:e})})})]})}},63148:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});var s=a(10326),r=a(33071),l=a(77863);function i({color:e,children:t,errors:a=[]}){return s.jsx(s.Fragment,{children:s.jsx(r.Zb,{className:(0,l.cn)("bg-destructive/20 border-destructive text-destructive","warning"===e&&"bg-yellow-200/20 border-yellow-400 text-yellow-600"),children:(0,s.jsxs)(r.aY,{className:"flex flex-col gap-y-4 px-4 py-2",children:[t,!!a.length&&s.jsx("div",{children:a.map((e,t)=>{let a=`${t}`;return s.jsx("p",{children:e},a)})})]})})})}},54328:(e,t,a)=>{"use strict";a.d(t,{O:()=>f});var s=a(10326),r=a(17577),l=a(9015),i=a(30811),n=a(51605),d=a(77863),c=a(11870),o=a(94464),u=a(63148);let f=(0,r.forwardRef)(({isDraft:e,userId:t,dataType:a,card:f},x)=>{let h=(0,n.v)({isDraft:e,userId:t});(0,r.useImperativeHandle)(x,()=>({isLocked:h}),[h]);let{loading:m,error:p,user:g,getUser:b}=function({userId:e,loadOnMount:t=!1}){(0,r.useRef)(!1);let[a,s]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),[n,d]=(0,r.useState)(""),c=(0,r.useCallback)(async(t=e)=>{try{if(d(""),!a&&e){s(!0);let e=(await o.Z.get(`/api/users/${t}`)).data;i(e)}}catch(e){d(e.message)}finally{s(!1)}},[a,e]);return{loading:a,user:l,error:n,getUser:c}}({userId:t,loadOnMount:!!f}),y=(0,r.useCallback)(async e=>{e&&!m&&!g&&t&&b()},[t,g,m]);return f&&h&&!m?s.jsx(u._,{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[s.jsx(l.Z,{className:"w-4 h-4"}),g?(0,s.jsxs)("div",{children:[s.jsx("strong",{children:g.displayName})," is working on this ",a||""]}):null]})}):s.jsx(s.Fragment,{children:(0,s.jsxs)(i.J2,{onOpenChange:y,children:[s.jsx(i.xo,{asChild:!0,children:s.jsx("button",{disabled:!h,children:s.jsx(l.Z,{className:(0,d.cn)("w-4 h-4 text-destructive/80",!h&&"opacity-0")})})}),s.jsx(i.yk,{className:"p-0 text-sm max-w-[200px]",children:m?s.jsx("div",{className:"p-2 flex justify-center",children:s.jsx(c.a,{padding:0})}):p||!g?s.jsx("div",{className:"p-2 text-destructive bg-destructive/20",children:p||"Failed to load user!"}):(0,s.jsxs)("div",{className:"p-2",children:[s.jsx("strong",{children:g.displayName})," is working on this ",a||""]})})]})})});f.displayName="LockStatus"},18048:(e,t,a)=>{"use strict";a.d(t,{u:()=>n});var s=a(10326);a(17577);var r=a(62288),l=a(77863);let i=(0,a(60114).Ue)((e,t)=>({modals:{},open(t){e(e=>({modals:{...e.modals,[t]:!0}}))},toggle(a){let s=t().modals;e(e=>({modals:{...e.modals,[a]:!s[a]}}))},close(t){e(e=>({modals:{...e.modals,[t]:!1}}))},isOpen:e=>!!t().modals[e],set(t){e(e=>({modals:{...e.modals,...t}}))}}));function n({id:e,children:t,title:a,description:n,actions:d,trigger:c,contentProps:o,footerProps:u,...f}){let{close:x,isOpen:h,set:m}=i();return s.jsx(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...f,open:(e?h(e):void 0)||f.open,onOpenChange:t=>{e&&m({[e]:t}),f?.onOpenChange?.(t)},children:[c,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,l.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",o?.className),...o,children:[(0,s.jsxs)(r.fK,{className:(0,l.cn)(a||n?"":"hidden","border-b border-b-border px-4 py-4"),children:[s.jsx(r.$N,{className:(0,l.cn)(a?"":"hidden"),children:a}),s.jsx(r.Be,{className:(0,l.cn)(n?"":"hidden"),children:n})]}),s.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:t}),s.jsx(r.cN,{className:(0,l.cn)("border-t border-t-border px-4 py-2 items-center w-full",d?"":"hidden",u?.className),...u,children:d})]})]})})}},99463:(e,t,a)=>{"use strict";a.d(t,{w:()=>x});var s=a(10326),r=a(17577),l=a(74723),i=a(58464),n=a(7890),d=a(34474),c=a(31048),o=a(53313),u=a(90772),f=a(77863);function x({id:e,label:t,hide:a,title:x,description:h,data:m,disabled:p,onSave:g}){let b=(0,r.useMemo)(()=>{let t=!1;return Object.values(m).forEach(a=>{a[e]&&(t=!0)}),t},[m,e]),{reset:y,watch:j,setValue:v,handleSubmit:w}=(0,l.cI)({defaultValues:{...i.$7,...m}}),N=j("fontSize"),R=j("fontWeight"),C=j("fontStyle"),$=j("textColor"),S=w(g),[k,I]=(0,r.useState)(!1);return a?null:s.jsx(s.Fragment,{children:(0,s.jsxs)(n.yo,{onOpenChange:e=>{y({...i.$7,...m}),I(e)},children:[s.jsx(n.aM,{asChild:!0,children:s.jsx(u.z,{variant:"link",className:(0,f.cn)("p-0 text-xs",!b&&"text-muted-foreground/80 hover:text-muted-foreground"),children:t||`${b?"Update":"Set"} preferences`})}),(0,s.jsxs)(n.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,s.jsxs)(n.Tu,{className:"px-4 py-4 border-b border-b-border",children:[s.jsx(n.bC,{children:x}),s.jsx(n.Ei,{className:h?"":"hidden",children:h})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[s.jsx(c._,{secondary:!0,htmlFor:`fontSize.${e}`,children:"Font size"}),s.jsx("div",{children:(0,s.jsxs)(d.Ph,{value:N[e]||"default",required:!0,name:`fontSize.${e}`,disabled:p,onValueChange:t=>{let a=t||void 0;"default"===a&&(a=void 0),v(`fontSize.${e}`,a,{shouldDirty:!0})},children:[s.jsx(d.i4,{children:s.jsx(d.ki,{placeholder:"Default"})}),s.jsx(d.Bw,{children:s.jsx(d.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>s.jsx(d.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[!!$[e]&&(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[s.jsx(c._,{secondary:!0,htmlFor:`textColor.${e}`,children:"Text color"}),s.jsx("input",{type:"color",value:$[e],onChange:t=>v(`textColor.${e}`,t.target.value,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(o.X,{id:`defaultTextColor.${e}`,name:`defaultTextColor.${e}`,disabled:p,checked:!$[e],onCheckedChange:()=>{let t=$[e]?void 0:"#000000";v(`textColor.${e}`,t,{shouldDirty:!0})}}),s.jsx(c._,{secondary:!0,htmlFor:`defaultTextColor.${e}`,children:"Default text color"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(o.X,{name:"bold",id:"bold",disabled:p,checked:"bold"===R[e],onCheckedChange:()=>v(`fontWeight.${e}`,R[e]?void 0:"bold",{shouldDirty:!0})}),s.jsx(c._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[s.jsx(o.X,{name:"italic",id:"italic",disabled:p,checked:(C[e]||[]).includes("italic"),onCheckedChange:()=>{let t=C[e]||[];t.includes("italic")?t=t.filter(e=>"italic"!==e):t.push("italic"),t.length||(t=void 0),v(`fontStyle.${e}`,t,{shouldDirty:!0})}}),s.jsx(c._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,s.jsxs)(n.FF,{className:"px-4 py-4 border-t border-t-border",children:[s.jsx("div",{className:"ml-auto"}),s.jsx(n.sw,{asChild:!0,children:s.jsx(u.z,{variant:"outline",children:"Cancel"})}),s.jsx(n.sw,{asChild:!0,children:s.jsx(u.z,{disabled:p,onClick:()=>S(),children:"Save"})})]})]})]})})}},54432:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var s=a(10326),r=a(17577),l=a(77863);let i=r.forwardRef(({className:e,type:t,noRing:a,error:r,...i},n)=>s.jsx("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",r&&"border-danger",r&&!a&&"focus-visible:ring-danger",e),ref:n,...i}));i.displayName="Input"},34474:(e,t,a)=>{"use strict";a.d(t,{Bw:()=>p,DI:()=>u,Ph:()=>o,Ql:()=>b,U$:()=>y,i4:()=>x,ki:()=>f,n5:()=>g});var s=a(10326),r=a(17577),l=a(75334),i=a(941),n=a(96633),d=a(32933),c=a(77863);let o=l.fC,u=l.ZA,f=l.B4,x=r.forwardRef(({className:e,children:t,error:a,...r},n)=>(0,s.jsxs)(l.xz,{ref:n,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a&&"border-danger",e),...r,children:[t,s.jsx(l.JO,{asChild:!0,children:s.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.xz.displayName;let h=r.forwardRef(({className:e,...t},a)=>s.jsx(l.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=l.u_.displayName;let m=r.forwardRef(({className:e,...t},a)=>s.jsx(l.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(i.Z,{className:"h-4 w-4"})}));m.displayName=l.$G.displayName;let p=r.forwardRef(({className:e,children:t,position:a="popper",...r},i)=>s.jsx(l.h_,{children:(0,s.jsxs)(l.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[s.jsx(h,{}),s.jsx(l.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(m,{})]})}));p.displayName=l.VY.displayName;let g=r.forwardRef(({className:e,...t},a)=>s.jsx(l.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));g.displayName=l.__.displayName;let b=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(l.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(d.Z,{className:"h-4 w-4"})})}),s.jsx(l.eT,{children:t})]}));b.displayName=l.ck.displayName;let y=r.forwardRef(({className:e,...t},a)=>s.jsx(l.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));y.displayName=l.Z0.displayName},87673:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var s=a(10326),r=a(17577),l=a(77863);let i=r.forwardRef(({className:e,noRing:t,...a},r)=>s.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",e),ref:r,...a}));i.displayName="Textarea"},82617:(e,t,a)=>{"use strict";a.d(t,{ScriptsContextProvider:()=>u,h:()=>o});var s=a(10326),r=a(17577),l=a(35047),i=a(15491),n=a(94464),d=a(12260);let c=(0,r.createContext)(null),o=()=>(0,r.useContext)(c);function u({children:e,...t}){let a=function({}){let e=(0,l.useRouter)(),{scriptId:t}=(0,l.useParams)(),{parsed:a}=(0,d.l)(),[s,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)({data:[]}),[f,x]=(0,r.useState)(!1),[h,m]=(0,r.useState)([]),p=(0,r.useCallback)(()=>{e.push("/")},[e]),g=(0,r.useCallback)(()=>{e.push(`/script/${t}?${i.Z.stringify({...a,section:"screens"})}`)},[e,a,t]),b=(0,r.useCallback)(()=>{e.push(`/script/${t}?${i.Z.stringify({...a,section:"diagnoses"})}`)},[e,a,t]),y=(0,r.useCallback)(async()=>{try{c(!0);let e=await n.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(e.data?.errors?.length)throw Error(e.data.errors.join(", "));u(e.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{c(!1)}},[t,open,alert]);return{screens:o,screensLoading:s,keys:h,keysLoading:f,loadKeys:(0,r.useCallback)(async()=>{try{x(!0);let{data:e}=await n.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(e?.errors?.length)throw Error(e.errors.join(", "));let a=e.data.reduce((e,t)=>[...e,...t.dataKeys],[]);m(a)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{x(!1)}},[t,open,alert]),loadScreens:y,onCancelDiagnosisForm:b,onCancelScreenForm:g,onCancelScriptForm:p}}(t);return s.jsx(c.Provider,{value:{...t,...a},children:e})}},51605:(e,t,a)=>{"use strict";a.d(t,{v:()=>r});var s=a(3529);function r({isDraft:e,userId:t}){let{authenticatedUser:a}=(0,s.b)();return!!(e&&t&&t!==a?.userId)}},12260:(e,t,a)=>{"use strict";a.d(t,{l:()=>i});var s=a(35047),r=a(15491),l=a(17577);function i(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),a=(0,l.useMemo)(()=>t.toString(),[t]),i=(0,l.useMemo)(()=>r.Z.parse(t.toString()),[t]),n=(0,l.useCallback)(e=>r.Z.stringify({...i,...e}),[i]),d=(0,l.useCallback)(t=>{e.push(`?${n(t)}`)},[n,e]);return{parsed:i,stringified:a,replace:(0,l.useCallback)(t=>{e.replace(`?${n(t)}`)},[n,e]),push:d,toSearchParams:n}}},61892:(e,t,a)=>{"use strict";function s(e){return null==e||""===e}a.d(t,{x:()=>s})},41236:(e,t,a)=>{"use strict";a.d(t,{_:()=>d});var s=a(19510),r=a(57371),l=a(39755),i=a(24569),n=a(46697);function d({title:e,backLink:t,children:a}){return s.jsx("div",{className:"pb-20",children:s.jsx(i.V,{className:"flex flex-col gap-y-4",children:s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-0",children:[!!e&&(0,s.jsxs)("div",{className:"text-xl flex items-center gap-x-4 mb-4 p-4",children:[!!t&&s.jsx(r.default,{href:t,children:s.jsx(l.Z,{className:"h-5 w-5"})}),s.jsx("span",{children:e})]}),a]})})})})}},95602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(19510),r=a(58585),l=a(85576),i=a(47080),n=a(57848),d=a(68570);(0,d.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#ScriptsContext`),(0,d.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#useScriptsContext`);let c=(0,d.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#ScriptsContextProvider`);var o=a(85431),u=a(66267),f=a(24569),x=a(46697),h=a(75644);async function m({children:e}){let{user:t,yes:a}=await (0,u.canAccessPage)();if(t||(0,r.redirect)("/login"),!a)return s.jsx(f.V,{children:s.jsx(x.Zb,{children:s.jsx(x.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[d]=await Promise.all([(0,n.getHospitals)()]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.D,{children:"Scripts"}),s.jsx(h.g2,{children:s.jsx(c,{...l,...i,hospitals:d,getHospitals:n.getHospitals,children:e})})]})}},17162:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(19510),r=a(21113),l=a(24569),i=a(46697);function n(){return s.jsx(l.V,{children:s.jsx(i.Zb,{children:s.jsx(i.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Description"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},47080:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getFiles:()=>w,uploadFile:()=>N,uploadFileFromSite:()=>R});var s=a(24330);a(60166);var r=a(9576),l=a(84770),i=a(92048),n=a.n(i),d=a(19801),c=a.n(d),o=a(55315),u=a.n(o),f=a(61282),x=a(61460),h=a(89114),m=a(57435),p=a(44652),g=a(66267),b=a(59271),y=a(49530),j=a(20123),v=a(40618);let w=h.Re;async function N(e,t){let a={success:!1,data:null};try{for(let s of(await (0,g.isAllowed)(["upload_files"]),Array.from(e.entries()))){let[i,d]=s;if("object"==typeof d){let s=Buffer.from(await d.arrayBuffer()),i=e.get("fileId")?.toString()||(0,r.Z)(),o={...(0,p.R)(e.get("metadata")?.toString()||"{}")},h=(e.get("size")?function(e,t){if("0"==`${e}`)return 0;let a=`${e||""}`.replaceAll(" ",""),[s,r]=(a=a.includes(".")?a.replaceAll(",",""):a.split(",").length>2?a.replaceAll(",",""):a.replaceAll(",",".")).split("."),l=!s||isNaN(Number(s))?"":s;return""==(l+=!r||isNaN(Number(r))?"":`.${r}`)||void 0===l||isNaN(Number(l))?t?.notNull?0:null:Number(l)}((0,p.R)(e.get("size")?.toString())):0)||d.size,m=e.get("filename")?.toString()||d.name,g=[i,m].filter(e=>e).join("__");if((o.width||o.height)&&(g=`${g}?w=${o.width}&h=${o.height}`),"application/vnd.android.package-archive"===(e.get("contentType")?.toString()||d.type)||m.toLowerCase().endsWith(".apk"))try{let e=(0,l.createHash)("sha256").update(s).digest("hex");o.apkChecksumSha256=e;let t=u().join(c().tmpdir(),`${i}.apk`);n().writeFileSync(t,s);try{let e=(0,f.execFileSync)("apksigner",["verify","--print-certs",t],{encoding:"utf-8"}).match(/SHA-256 digest:\\s*([A-Fa-f0-9:]+)/);e?.[1]&&(o.apkSignatureSha256=e[1].replace(/:/g,"").toLowerCase(),o.apkSignatureVerifiedAt=new Date().toISOString())}catch(e){}finally{try{n().unlinkSync(t)}catch{}}}catch(e){}a=await (0,x.G)({fileId:i,data:s,filename:g,size:h,contentType:e.get("contentType")?.toString()||d.type,metadata:o},t)}}}catch(e){a.success=!1,a.errors=[e.message],m.Z.error("uploadFile ERROR",e.message)}finally{return a}}async function R({fileId:e,siteURL:t}){try{let a=await (0,j.QF)({links:[t]});if(a.errors)throw Error(a.errors.join(", "));let{data:[s]}=a;if(!s)throw Error(`Site (${t}) was not found!`);let r=await (0,b.U)({baseURL:s.link,apiKey:s.apiKey}),l=await (0,h._I)(e);if(l.errors)throw Error(l.errors.join(", "));if(l?.data){let t=y.Z.stringify({...l.data.metadata});return t=t?`?${t}`:"",{data:{fileId:e,fileURL:[process.env.NEXT_PUBLIC_APP_URL,`/files/${e}${t}`].join("")}}}let i=(await r.get(`/api/files/${e}/download`)).data;if(i.errors)throw Error(i.errors.join(", "));if(!i.data)return{errors:["File not found"],data:null};await (0,x.G)({fileId:e,data:i.data.data,filename:i.data.filename,size:i.data.size,contentType:i.data.contentType,metadata:{...i.data.metadata}});let n=y.Z.stringify({...i.data.metadata});return n=n?`?${n}`:"",{data:{fileId:e,fileURL:[s.link,`/files/${e}${n}`].join("")}}}catch(e){return m.Z.error("downloadFileFromSite ERROR",e.message),{data:null,errors:[e.message]}}}(0,v.h)([w,N,R]),(0,s.j)("07831c4bb9517b44960f2000801bac3ebfc8ab58",w),(0,s.j)("fc90fab3cf6d83b3212118dca7b824d52efe8930",N),(0,s.j)("ee7a403b0138a1e79c1602ce2fc6dab1e92d398b",R)},57848:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>o,$$ACTION_1:()=>f,$$ACTION_2:()=>h,$$ACTION_3:()=>p,$$ACTION_4:()=>b,countHospitals:()=>u,deleteHospitals:()=>c,getHospital:()=>m,getHospitals:()=>x,saveHospitals:()=>g});var s=a(24330);a(60166);var r=a(73543),l=a(20084),i=a(57435),n=a(66267),d=a(40618);let c=(0,s.j)("b06193ff0e4128f45c3f976e3ad26d6214806533",o);async function o(e){try{let t=await (0,n.isAllowed)();return await (0,r.x0)({...e,userId:t.user?.userId})}catch(e){return i.Z.error("deleteHospitals ERROR",e.message),{errors:[e.message],success:!1}}}let u=(0,s.j)("1d64387034edf7a0645a7711866443dbfb275bab",f);async function f(...e){try{return await (0,n.isAllowed)(),await (0,l.Py)(...e)}catch(e){return i.Z.error("countHospitals ERROR",e.message),{errors:[e.message],data:l.SE}}}let x=(0,s.j)("ec70ac92449a53ad035f906fb539489bd9cbaf6d",h);async function h(...e){try{return await (0,n.isAllowed)(),await (0,l.O8)(...e)}catch(e){return i.Z.error("getHospitals ERROR",e.message),{errors:[e.message],data:[]}}}let m=(0,s.j)("a8b2714789802ad9f5d800fc600d0f40ebb6146d",p);async function p(...e){return await (0,n.isAllowed)(),await (0,l.C9)(...e)}let g=(0,s.j)("c3c4f6894379fcfcd48f96588fac9d4081c2bb05",b);async function b(e){try{let t=await (0,n.isAllowed)();return await (0,r.rr)({...e,userId:t.user?.userId})}catch(e){return i.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}(0,d.h)([c,u,x,m,g]),(0,s.j)("37529abc9900cbfcb6ae3db1b137052aa4af2b07",c),(0,s.j)("fc0e6a68387ba954748405f993291f3833545380",u),(0,s.j)("ac6cc9ac17f6de48bfd6821622584fe0f17f00e2",x),(0,s.j)("3ad1cad9a8631e65599fe0e955c39ac951698197",m),(0,s.j)("1d5bdcd911ef6dd33f0b5d10944a568f4f68c55a",g)},21113:(e,t,a)=>{"use strict";a.d(t,{w:()=>s});let s=(0,a(68570).createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/data-table/index.tsx#DataTable`)},61460:(e,t,a)=>{"use strict";a.d(t,{G:()=>d});var s=a(88317),r=a(57435),l=a(10413),i=a(93567),n=a(89114);async function d(e,t){let a={success:!1,data:null};try{if(!e.fileId)throw Error("Missing fileId");if(!e.data)throw Error("No file uploaded");await l.Z.insert(i.files).values(e);let r=await (0,n._I)(e.fileId);if(!r)throw Error("Failed to upload file");a.success=!0,a.data=r.data,r.data&&t?.broadcastAction!==!1&&s.Z.emit("file_uploaded")}catch(e){a.success=!1,a.errors=[e.message],r.Z.error("_uploadFile ERROR",e.message)}finally{return a}}},89114:(e,t,a)=>{"use strict";a.d(t,{_I:()=>c,Re:()=>h,KU:()=>d});var s=a(57745),r=a(10413),l=a(93567),i=a(57435),n=a(44380);async function d(e){try{let t=await r.Z.query.files.findFirst({where:(0,s.eq)(l.files.fileId,e)});return{data:t?{...t,url:(0,n.TI)(`/files/${t.fileId}`)}:null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}async function c(e){try{let t=await r.Z.query.files.findFirst({where:(0,s.eq)(l.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}});return{data:t?{...t,url:(0,n.TI)(`/files/${t.fileId}`)}:null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}var o=a(34149),u=a(60938),f=a(81445),x=a(41502);async function h(e){try{let{filesIds:t,archived:a,searchValue:i,limit:d,page:c=1,uploadDateGTE:h,uploadDateLTE:m}={...e},p=Math.max(0,c),g=i?["%",i,"%"].join(""):"",b=[a?(0,s.K0)(l.files.deletedAt):(0,s.Ft)(l.files.deletedAt),...t?.length?[(0,s.d3)(l.files.fileId,t)]:[],...g?[(0,o.i6)`LOWER(screens.name) like LOWER(${g})`]:[],h?(0,s.eg)(l.files.createdAt,"string"==typeof h?new Date(h):h):void 0,m?(0,s.G)(l.files.createdAt,"string"==typeof m?new Date(m):m):void 0],y=r.Z.select({count:(0,u.QX)()}).from(l.files);b.length&&y.where((0,s.xD)(...b));let[{count:j}]=await y.execute(),v=1;j&&(v=(0,x.x)(d)?1:Math.ceil(j/d),p=Math.min(p,v));let w=(0,x.x)(d)?void 0:Math.max(0,(p-1)*d);return{data:(await r.Z.query.files.findMany({where:b.length?(0,s.xD)(...b):void 0,limit:d,offset:w,orderBy:(0,f.C)(l.files.createdAt),columns:{fileId:!0,contentType:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})).map(e=>({...e,url:(0,n.TI)(`/files/${e.fileId}`)})),searchValue:i,totalPages:v,totalRows:j,page:p,limit:d}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:[],totalPages:0,totalRows:0,page:1}}}},44652:(e,t,a)=>{"use strict";function s(e){try{return JSON.parse(e)}catch(e){return null}}a.d(t,{R:()=>s})}};