(()=>{var e={};e.id=9681,e.ids=[9681],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},18070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>x,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(49303),o=r(88716),n=r(60670),a=r(87070),u=r(72761),c=r(75262),p=r(57435);async function l(e){try{if(!(await (0,u.$)()).yes)return a.NextResponse.json({errors:["Unauthorised"]});let t=await e.json(),r=await (0,c.copyDiagnoses)(t);return a.NextResponse.json(r)}catch(e){return p.Z.log("/api/diagnoses/copy",e),a.NextResponse.json({errors:[e.message]})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/diagnoses/copy/route",pathname:"/api/diagnoses/copy",filename:"route",bundlePath:"app/api/diagnoses/copy/route"},resolvedPagePath:"/home/farai/Workbench/Neotree/neotree-editor/app/api/diagnoses/copy/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:y}=d,h="/api/diagnoses/copy/route";function m(){return(0,n.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},55607:(e,t,r)=>{"use strict";r.d(t,{Ng:()=>c,_U:()=>x,QF:()=>u,YF:()=>d});var s=r(57745),i=r(30900),o=r(10413),n=r(57418),a=r(57435);async function u(e){try{let{sitesIds:t}={...e},r=t||[],a=r?.length?(0,s.d3)(n.sites.siteId,r.filter(e=>i.Z(e))):void 0,u=[(0,s.Ft)(n.sites.deletedAt),a];return{data:(await o.Z.select({site:n.sites}).from(n.sites).where(u.length?(0,s.xD)(...u):void 0)).map(e=>e.site)}}catch(e){return a.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function c(e){let{siteId:t}={...e};try{if(!t)throw Error("Missing siteId");let e=i.Z(t)?(0,s.eq)(n.sites.siteId,t):void 0;return{data:await o.Z.query.sites.findFirst({where:(0,s.xD)((0,s.Ft)(n.sites.deletedAt),e)})}}catch(e){return a.Z.error("_getSite ERROR",e.message),{errors:[e.message]}}}var p=r(71615);let l=()=>{let e=function(){let e=(0,p.headers)(),t=e.get("x-url"),r=e.get("x-next-url-host"),s=e.get("x-next-url-href"),i=e.get("x-next-url-port"),o=e.get("x-next-url-hostname"),n=e.get("x-next-url-pathname"),a=e.get("x-next-url-search"),u=e.get("x-next-url-protocol"),c=e.get("x-next-url-username"),l=e.get("x-next-url-locale"),d=e.get("x-next-url-origin"),x=e.get("x-geo-city"),g=e.get("x-geo-country");return{url:t||"",host:r||"",href:s||"",port:i||"",hostname:o||"",pathname:n||"",search:a||"",protocol:u||"",username:c||"",locale:l||"",origin:d||"",city:x||"",country:g||"",region:e.get("x-geo-region")||"",latitude:e.get("x-geo-latitude")||"",longitude:e.get("x-geo-longitude")||""}}();return{webeditor:{name:"Local editor",siteId:"fb76af5a-bf86-4050-821e-44f1bf316bf4",link:e.origin,type:"webeditor",apiKey:"localhost"},nodeapi:{name:"Local editor",siteId:"5cb4aa54-2cfe-49e2-9cdd-392a9b8c124e",link:e.origin,type:"webeditor",apiKey:"localhost"}}};async function d(e){try{let{types:t=[]}={...e},r=[...t.length?[(0,s.d3)(n.sites.type,t)]:[]],i=await o.Z.query.sites.findMany({where:r.length?(0,s.xD)(...r):void 0,columns:{siteId:!0,type:!0,name:!0,link:!0}});return l(),{data:[...i]}}catch(e){return a.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function x(e){try{let t=await o.Z.query.sites.findFirst({where:(0,s.eq)(n.sites.siteId,e),columns:{apiKey:!0,link:!0}}),r=t||null;if(!t){let t=l();Object.values(t).forEach(t=>{t.siteId===e&&(r={link:t.link,apiKey:t.apiKey})})}return{data:r}}catch(e){return a.Z.error("_getSiteApiKey ERROR",e.message),{data:null,errors:[e.message]}}}},88317:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(55802).io)(process.env.NEXT_PUBLIC_APP_URL)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1633,1381,1744,3788,1490,5802,5059,4084,413,6267,3269,5262],()=>r(18070));module.exports=s})();