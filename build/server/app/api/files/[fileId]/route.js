"use strict";(()=>{var e={};e.id=9479,e.ids=[9479],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},49411:e=>{e.exports=require("node:path")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},89415:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>q,requestAsyncStorage:()=>c,routeModule:()=>f,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>d});var n=t(49303),a=t(88716),i=t(60670),o=t(87070),u=t(89114),l=t(57435);class p extends Response{constructor(e,r){super(e,{...r,status:200,headers:{...r?.headers}})}}async function d(e,{params:{fileId:r}}){try{if(!r)return new o.NextResponse(null,{status:400,statusText:"Bad Request"});let{file:e,errors:t}=await (0,u.KU)(r);if(t?.length)return new o.NextResponse(null,{status:400,statusText:t.join(", ")});if(!e?.data)return new o.NextResponse(null,{status:404,statusText:"Not found"});let s=new ReadableStream({async start(r){r.enqueue(e.data),r.close()}});return new p(s)}catch(e){return l.Z.error("[GET] /api/files/"+r,e),new o.NextResponse("Internal Error",{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/files/[fileId]/route",pathname:"/api/files/[fileId]",filename:"route",bundlePath:"app/api/files/[fileId]/route"},resolvedPagePath:"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/api/files/[fileId]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:x,serverHooks:m}=f,g="/api/files/[fileId]/route";function q(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}},89114:(e,r,t)=>{t.d(r,{_I:()=>u,KU:()=>o});var s=t(57745),n=t(10413),a=t(57418),i=t(57435);async function o(e){try{return{file:await n.Z.query.files.findFirst({where:(0,s.eq)(a.files.fileId,e)})||null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}async function u(e){try{return{file:await n.Z.query.files.findFirst({where:(0,s.eq)(a.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})||null}}catch(e){return i.Z.error("_getFiles ERROR",e.message),{errors:[e.message],file:null}}}},57435:(e,r,t)=>{t.d(r,{Z:()=>p});var s=t(87561),n=t.n(s),a=t(49411),i=t.n(a),o=t(51744),u=t.n(o);function l(e,...r){let t=u()(new Date).format("YYYYMMDD"),s=i().resolve(`logs/${t}`);n().existsSync(s)||n().mkdirSync(s);let a=`${new Date().toUTCString()} ${JSON.stringify([...r,__filename])}
`,o=`${s}/logs.txt`;"error"===e&&(o=`${s}/errors.txt`),n().appendFileSync(o,a)}let p={log:(...e)=>{l("log",...e)},error:(...e)=>{try{l("error",...e)}catch(e){console.log(e)}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[5822,1744,5972,413],()=>t(89415));module.exports=s})();