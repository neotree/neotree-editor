(()=>{var e={};e.id=7297,e.ids=[7297],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},83569:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>b,tree:()=>o}),t(13005),t(17872),t(56367),t(12699),t(77482),t(96560);var r=t(23191),s=t(88716),d=t(37922),n=t.n(d),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(a,l);let o=["",{children:["(dashboard)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13005)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/users/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,17872)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/users/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,77482)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/not-found.tsx"]}],c=["/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/users/page.tsx"],u="/(dashboard)/users/page",f={require:t,loadChunk:()=>Promise.resolve()},b=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33646:(e,a,t)=>{let r={"15e9024c7a317568a0bfe153647ab40d4a782996":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.getUser),"1977ec2d9d02f9d05c365f2b0c361b6bda56d4b9":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.searchUsers),"1a887bafa5bdbb80006e55a4af6cb4a8b6c64b5d":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.createUsers),"1d50295030f25981c6202bf941a3b2576a09a317":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.setPassword),"2c56cdafc83bcdd180a689448b216edb18936af9":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.$$ACTION_4),"30776f4c4a368e78980f8117cefaf77df1f67743":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.$$ACTION_1),"38db96d8998f5107454ecf82118abd7af347d295":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.getUsers),"46092427241ea6fbfbd33cf01bdd70a14cf92f90":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.$$ACTION_2),"67f588a162fcecb1a75791f69b6cff347ad9923a":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.getFullUser),"7ed58da9bdd1fcaabea1b4a8c01155185ea42d50":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.$$ACTION_0),"8002a85e229f7939cdcf277a95e859c8310681f6":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.isEmailRegistered),"86bb37e35f63659c1e7cf3ba878f97f6925e4521":()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.updateUsers),cdb03413b17de7f459a06c1da6dcecd39449a521:()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.deleteUsers),e643f22d4242e305446816ef0c71ada1ec53143f:()=>Promise.resolve().then(t.bind(t,73508)).then(e=>e.$$ACTION_3),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),"576365f197acb2f10e29644ba43ca25aec52e8b7":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),"87e3fefa3f04c6561e0a6bc48f3614975897d014":()=>Promise.resolve().then(t.bind(t,43767)).then(e=>e.getRoles),"055174a9ccd19bad29237b1c3a8c05cd527be07b":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),"088c57d60b5ed83f7dd0192c87404045099f271b":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),"099e6b671d625a88f30c9806fa7bdac48e2a3710":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.$$ACTION_0),"580940ab09cedb0e060484c8b6a6463e9a81461a":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSitesWithoutConfidentialData),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSites),"783eb2f9264b34f18cf3044d2185e64f2f39333e":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.getSite),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":()=>Promise.resolve().then(t.bind(t,82065)).then(e=>e.saveSites),"112a744ae93bf04aba1a4250d687a325a73a55c1":()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.publishData),"294bf0d6332f28a618099d7c02669de60070f8a2":()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.$$ACTION_1),"2995d4697010486034183adc4a3028bfd106123b":()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.discardDrafts),"354f249d3682e1a7ac814300889c8b929172be69":()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.getEditorDetails),"3af78304ef3b80b391189cdb5be758ed14bb9be7":()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.countAllDrafts),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.$$ACTION_0),afc9c4d3ed7201152607116aa5f72d4579144ffc:()=>Promise.resolve().then(t.bind(t,71271)).then(e=>e.revalidatePath)};async function s(e,...a){return(await r[e]()).apply(null,a)}e.exports={"15e9024c7a317568a0bfe153647ab40d4a782996":s.bind(null,"15e9024c7a317568a0bfe153647ab40d4a782996"),"1977ec2d9d02f9d05c365f2b0c361b6bda56d4b9":s.bind(null,"1977ec2d9d02f9d05c365f2b0c361b6bda56d4b9"),"1a887bafa5bdbb80006e55a4af6cb4a8b6c64b5d":s.bind(null,"1a887bafa5bdbb80006e55a4af6cb4a8b6c64b5d"),"1d50295030f25981c6202bf941a3b2576a09a317":s.bind(null,"1d50295030f25981c6202bf941a3b2576a09a317"),"2c56cdafc83bcdd180a689448b216edb18936af9":s.bind(null,"2c56cdafc83bcdd180a689448b216edb18936af9"),"30776f4c4a368e78980f8117cefaf77df1f67743":s.bind(null,"30776f4c4a368e78980f8117cefaf77df1f67743"),"38db96d8998f5107454ecf82118abd7af347d295":s.bind(null,"38db96d8998f5107454ecf82118abd7af347d295"),"46092427241ea6fbfbd33cf01bdd70a14cf92f90":s.bind(null,"46092427241ea6fbfbd33cf01bdd70a14cf92f90"),"67f588a162fcecb1a75791f69b6cff347ad9923a":s.bind(null,"67f588a162fcecb1a75791f69b6cff347ad9923a"),"7ed58da9bdd1fcaabea1b4a8c01155185ea42d50":s.bind(null,"7ed58da9bdd1fcaabea1b4a8c01155185ea42d50"),"8002a85e229f7939cdcf277a95e859c8310681f6":s.bind(null,"8002a85e229f7939cdcf277a95e859c8310681f6"),"86bb37e35f63659c1e7cf3ba878f97f6925e4521":s.bind(null,"86bb37e35f63659c1e7cf3ba878f97f6925e4521"),cdb03413b17de7f459a06c1da6dcecd39449a521:s.bind(null,"cdb03413b17de7f459a06c1da6dcecd39449a521"),e643f22d4242e305446816ef0c71ada1ec53143f:s.bind(null,"e643f22d4242e305446816ef0c71ada1ec53143f"),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":s.bind(null,"8d3a0534ac3ddb0c44a91b766b2183165c62dbed"),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":s.bind(null,"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c"),"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":s.bind(null,"103d82a5a607c9f7f049ac9bfe2bb62dc7128462"),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":s.bind(null,"3054c9aa3ede38673855ee3dff9f25ad492b7d73"),"576365f197acb2f10e29644ba43ca25aec52e8b7":s.bind(null,"576365f197acb2f10e29644ba43ca25aec52e8b7"),"87e3fefa3f04c6561e0a6bc48f3614975897d014":s.bind(null,"87e3fefa3f04c6561e0a6bc48f3614975897d014"),"055174a9ccd19bad29237b1c3a8c05cd527be07b":s.bind(null,"055174a9ccd19bad29237b1c3a8c05cd527be07b"),"088c57d60b5ed83f7dd0192c87404045099f271b":s.bind(null,"088c57d60b5ed83f7dd0192c87404045099f271b"),"099e6b671d625a88f30c9806fa7bdac48e2a3710":s.bind(null,"099e6b671d625a88f30c9806fa7bdac48e2a3710"),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":s.bind(null,"0c0d564b6e8549cd52e9489443ca8f11eb739d52"),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":s.bind(null,"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6"),"580940ab09cedb0e060484c8b6a6463e9a81461a":s.bind(null,"580940ab09cedb0e060484c8b6a6463e9a81461a"),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":s.bind(null,"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435"),"783eb2f9264b34f18cf3044d2185e64f2f39333e":s.bind(null,"783eb2f9264b34f18cf3044d2185e64f2f39333e"),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":s.bind(null,"8e6d2d1bfc206d2044ed01620bfa151c6fd87125"),"112a744ae93bf04aba1a4250d687a325a73a55c1":s.bind(null,"112a744ae93bf04aba1a4250d687a325a73a55c1"),"294bf0d6332f28a618099d7c02669de60070f8a2":s.bind(null,"294bf0d6332f28a618099d7c02669de60070f8a2"),"2995d4697010486034183adc4a3028bfd106123b":s.bind(null,"2995d4697010486034183adc4a3028bfd106123b"),"354f249d3682e1a7ac814300889c8b929172be69":s.bind(null,"354f249d3682e1a7ac814300889c8b929172be69"),"3af78304ef3b80b391189cdb5be758ed14bb9be7":s.bind(null,"3af78304ef3b80b391189cdb5be758ed14bb9be7"),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:s.bind(null,"ac5d4de4d5312ee7fa1967d05ccea3edfbd18033"),afc9c4d3ed7201152607116aa5f72d4579144ffc:s.bind(null,"afc9c4d3ed7201152607116aa5f72d4579144ffc")}},61619:(e,a,t)=>{Promise.resolve().then(t.bind(t,69516)),Promise.resolve().then(t.bind(t,10827))},13268:(e,a,t)=>{Promise.resolve().then(t.bind(t,9162))},69516:(e,a,t)=>{"use strict";t.d(a,{UsersTable:()=>ey});var r=t(10326),s=t(17577),d=t(85999);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var i=t(57967),l=t.n(i),o=t(44099),c=t(82561),u=t(48051),f=t(93095),b=t(825),h=t(88957),p=t(17103),m=(t(83078),t(9815)),x=t(45226),g=t(34214),v=t(52067),y=t(6009),[w,j]=(0,f.b)("Tooltip",[p.D7]),N=(0,p.D7)(),C="TooltipProvider",P="tooltip.open",[R,I]=w(C),k=e=>{let{__scopeTooltip:a,delayDuration:t=700,skipDelayDuration:d=300,disableHoverableContent:n=!1,children:i}=e,[l,o]=s.useState(!0),c=s.useRef(!1),u=s.useRef(0);return s.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,r.jsx)(R,{scope:a,isOpenDelayed:l,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(u.current),o(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o(!0),d)},[d]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:n,children:i})};k.displayName=C;var _="Tooltip",[T,E]=w(_),U=e=>{let{__scopeTooltip:a,children:t,open:d,defaultOpen:n=!1,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=e,c=I(_,e.__scopeTooltip),u=N(a),[f,b]=s.useState(null),m=(0,h.M)(),x=s.useRef(0),g=l??c.disableHoverableContent,y=o??c.delayDuration,w=s.useRef(!1),[j=!1,C]=(0,v.T)({prop:d,defaultProp:n,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(P))):c.onClose(),i?.(e)}}),R=s.useMemo(()=>j?w.current?"delayed-open":"instant-open":"closed",[j]),k=s.useCallback(()=>{window.clearTimeout(x.current),w.current=!1,C(!0)},[C]),E=s.useCallback(()=>{window.clearTimeout(x.current),C(!1)},[C]),U=s.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{w.current=!0,C(!0)},y)},[y,C]);return s.useEffect(()=>()=>window.clearTimeout(x.current),[]),(0,r.jsx)(p.fC,{...u,children:(0,r.jsx)(T,{scope:a,contentId:m,open:j,stateAttribute:R,trigger:f,onTriggerChange:b,onTriggerEnter:s.useCallback(()=>{c.isOpenDelayed?U():k()},[c.isOpenDelayed,U,k]),onTriggerLeave:s.useCallback(()=>{g?E():window.clearTimeout(x.current)},[E,g]),onOpen:k,onClose:E,disableHoverableContent:g,children:t})})};U.displayName=_;var A="TooltipTrigger",Z=s.forwardRef((e,a)=>{let{__scopeTooltip:t,...d}=e,n=E(A,t),i=I(A,t),l=N(t),o=s.useRef(null),f=(0,u.e)(a,o,n.onTriggerChange),b=s.useRef(!1),h=s.useRef(!1),m=s.useCallback(()=>b.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,r.jsx)(p.ee,{asChild:!0,...l,children:(0,r.jsx)(x.WV.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...d,ref:f,onPointerMove:(0,c.M)(e.onPointerMove,e=>{"touch"===e.pointerType||h.current||i.isPointerInTransitRef.current||(n.onTriggerEnter(),h.current=!0)}),onPointerLeave:(0,c.M)(e.onPointerLeave,()=>{n.onTriggerLeave(),h.current=!1}),onPointerDown:(0,c.M)(e.onPointerDown,()=>{b.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:(0,c.M)(e.onFocus,()=>{b.current||n.onOpen()}),onBlur:(0,c.M)(e.onBlur,n.onClose),onClick:(0,c.M)(e.onClick,n.onClose)})})});Z.displayName=A;var[q,S]=w("TooltipPortal",{forceMount:void 0}),D="TooltipContent",O=s.forwardRef((e,a)=>{let t=S(D,e.__scopeTooltip),{forceMount:s=t.forceMount,side:d="top",...n}=e,i=E(D,e.__scopeTooltip);return(0,r.jsx)(m.z,{present:s||i.open,children:i.disableHoverableContent?(0,r.jsx)(L,{side:d,...n,ref:a}):(0,r.jsx)(F,{side:d,...n,ref:a})})}),F=s.forwardRef((e,a)=>{let t=E(D,e.__scopeTooltip),d=I(D,e.__scopeTooltip),n=s.useRef(null),i=(0,u.e)(a,n),[l,o]=s.useState(null),{trigger:c,onClose:f}=t,b=n.current,{onPointerInTransitChange:h}=d,p=s.useCallback(()=>{o(null),h(!1)},[h]),m=s.useCallback((e,a)=>{let t=e.currentTarget,r={x:e.clientX,y:e.clientY},s=function(e,a){let t=Math.abs(a.top-e.y),r=Math.abs(a.bottom-e.y),s=Math.abs(a.right-e.x),d=Math.abs(a.left-e.x);switch(Math.min(t,r,s,d)){case d:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw Error("unreachable")}}(r,t.getBoundingClientRect());o(function(e){let a=e.slice();return a.sort((e,a)=>e.x<a.x?-1:e.x>a.x?1:e.y<a.y?-1:e.y>a.y?1:0),function(e){if(e.length<=1)return e.slice();let a=[];for(let t=0;t<e.length;t++){let r=e[t];for(;a.length>=2;){let e=a[a.length-1],t=a[a.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))a.pop();else break}a.push(r)}a.pop();let t=[];for(let a=e.length-1;a>=0;a--){let r=e[a];for(;t.length>=2;){let e=t[t.length-1],a=t[t.length-2];if((e.x-a.x)*(r.y-a.y)>=(e.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}return(t.pop(),1===a.length&&1===t.length&&a[0].x===t[0].x&&a[0].y===t[0].y)?a:a.concat(t)}(a)}([...function(e,a,t=5){let r=[];switch(a){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t})}return r}(r,s),...function(e){let{top:a,right:t,bottom:r,left:s}=e;return[{x:s,y:a},{x:t,y:a},{x:t,y:r},{x:s,y:r}]}(a.getBoundingClientRect())])),h(!0)},[h]);return s.useEffect(()=>()=>p(),[p]),s.useEffect(()=>{if(c&&b){let e=e=>m(e,b),a=e=>m(e,c);return c.addEventListener("pointerleave",e),b.addEventListener("pointerleave",a),()=>{c.removeEventListener("pointerleave",e),b.removeEventListener("pointerleave",a)}}},[c,b,m,p]),s.useEffect(()=>{if(l){let e=e=>{let a=e.target,t={x:e.clientX,y:e.clientY},r=c?.contains(a)||b?.contains(a),s=!function(e,a){let{x:t,y:r}=e,s=!1;for(let e=0,d=a.length-1;e<a.length;d=e++){let n=a[e].x,i=a[e].y,l=a[d].x,o=a[d].y;i>r!=o>r&&t<(l-n)*(r-i)/(o-i)+n&&(s=!s)}return s}(t,l);r?p():s&&(p(),f())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,b,l,f,p]),(0,r.jsx)(L,{...e,ref:i})}),[M,$]=w(_,{isInside:!1}),L=s.forwardRef((e,a)=>{let{__scopeTooltip:t,children:d,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,c=E(D,t),u=N(t),{onClose:f}=c;return s.useEffect(()=>(document.addEventListener(P,f),()=>document.removeEventListener(P,f)),[f]),s.useEffect(()=>{if(c.trigger){let e=e=>{let a=e.target;a?.contains(c.trigger)&&f()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,f]),(0,r.jsx)(b.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:f,children:(0,r.jsxs)(p.VY,{"data-state":c.stateAttribute,...u,...o,ref:a,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,r.jsx)(g.A4,{children:d}),(0,r.jsx)(M,{scope:t,isInside:!0,children:(0,r.jsx)(y.f,{id:c.contentId,role:"tooltip",children:n||d})})]})})});O.displayName=D;var z="TooltipArrow";s.forwardRef((e,a)=>{let{__scopeTooltip:t,...s}=e,d=N(t);return $(z,t).isInside?null:(0,r.jsx)(p.Eh,{...d,...s,ref:a})}).displayName=z;var V=t(77863);let W=s.forwardRef(({className:e,sideOffset:a=4,...t},s)=>r.jsx(O,{ref:s,sideOffset:a,className:(0,V.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));W.displayName=O.displayName;var B=t(9162),Q=t(58879),Y=t(8281),K=t(11870),X=t(12260),G=t(46670),H=t(3529),J=t(77109),ee=t(39447),ea=t(47035),et=t(60097),er=t(90772);function es({email:e,userId:a,userName:t,isActivated:s,onDelete:d}){let n=(0,J.useSession)(),i=(0,X.l)();return r.jsx(r.Fragment,{children:(0,r.jsxs)(et.h_,{children:[r.jsx(et.$F,{asChild:!0,children:r.jsx(er.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:r.jsx(ee.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(et.AW,{children:[r.jsx(et.Ju,{children:t}),r.jsx(et.VD,{}),r.jsx(et.Xi,{onClick:()=>i.push({userId:a}),children:"Edit"}),r.jsx(et.Xi,{disabled:s,children:"Send activation code"}),r.jsx(et.VD,{}),(0,r.jsxs)(et.Xi,{onClick:d,className:"text-danger focus:bg-danger focus:text-danger-foreground",disabled:e===n.data?.user?.email,children:[r.jsx(ea.Z,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Delete"})]})]})]})})}var ed=t(90748),en=t(47463),ei=t(74723),el=t(7890),eo=t(34474),ec=t(54432),eu=t(31048),ef=t(96221),eb=t(43059);let eh=/\S+@\S+\.\S+/;function ep({open:e,userId:a,roles:t,getUser:d,onClose:n,updateUsers:i,createUsers:l,onSaveSuccess:c}){let{alert:u}=(0,ef.s)(),{parsed:f,replace:b}=(0,X.l)(),h=a||f.userId,[p,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[,v]=(0,s.useState)(),[y,w]=(0,s.useState)(!h),{formState:{errors:j},watch:N,setValue:C,register:P,handleSubmit:R}=(0,ei.cI)({defaultValues:{userId:h||(0,en.Z)(),email:"",displayName:"",firstName:"",lastName:"",role:"user",avatar:"",avatar_sm:"",avatar_md:""}}),I=(0,s.useCallback)(()=>{h&&(m(!0),d(h).then(e=>{v(e),e&&(C("userId",e.userId||""),C("email",e.email||""),C("displayName",e.displayName||""),C("firstName",e.firstName||""),C("lastName",e.lastName||""),C("role",e.role||"user"),C("avatar",e.avatar||""),C("avatar_sm",e.avatar_sm||""),C("avatar_md",e.avatar_md||""))}).catch(e=>u({title:"",message:"Failed to load user: "+e.message,variant:"error",onClose:()=>b({userId:void 0})})).finally(()=>m(!1)))},[h,b,u,C,d]);(0,eb.q)(I);let k=R(e=>{(async()=>{try{g(!0),h?await o.Z.post("/api/users/update",{data:[{userId:h,data:e}]}):await o.Z.post("/api/users/add",{data:[e]}),c&&await c(),u({variant:"success",message:"User was saved successfully!",onClose:()=>{n?.(),b({userId:void 0})}})}catch(e){u({title:"",message:"Failed to save user: "+e.message,variant:"error"})}finally{g(!1)}})()}),_=N("role"),T=N("email");return p?r.jsx(K.a,{overlay:!0}):(0,r.jsxs)(r.Fragment,{children:[x&&r.jsx(K.a,{overlay:!0}),(0,r.jsxs)(el.yo,{open:e||!!f.userId,onOpenChange:()=>{n?.(),b({userId:void 0})},children:[r.jsx(el.aM,{asChild:!0,children:r.jsx(er.z,{className:"md:hidden",variant:"ghost",children:r.jsx(ed.Z,{className:"h-6 w-6"})})}),(0,r.jsxs)(el.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[r.jsx(el.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,r.jsxs)(el.bC,{children:[h?"Edit":"New"," User"]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:[(0,r.jsxs)("div",{children:[r.jsx(eu._,{htmlFor:"role",children:"Role"}),(0,r.jsxs)(eo.Ph,{value:_,required:!0,name:"role",disabled:x,onValueChange:e=>{C("role",e)},children:[r.jsx(eo.i4,{children:r.jsx(eo.ki,{placeholder:"Filter by status"})}),r.jsx(eo.Bw,{children:(0,r.jsxs)(eo.DI,{children:[r.jsx(eo.n5,{children:"User role"}),t.map(e=>r.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[r.jsx(eu._,{htmlFor:"email",className:(0,V.cn)(y?"":"opacity-50"),children:"Email"}),y?(0,r.jsxs)(r.Fragment,{children:[r.jsx(ec.I,{placeholder:"Email",type:"email",className:(0,V.cn)(j.email?"border-danger ring-danger focus-visible:ring-danger":""),...P("email",{required:!0,disabled:x,pattern:{value:eh,message:"Incorrect email format"}})}),j.email&&r.jsx("span",{role:"alert",className:"text-xs text-danger",children:j.email.message})]}):r.jsx(ec.I,{disabled:!0,value:T,onChange:()=>{},className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]}),(0,r.jsxs)("div",{children:[r.jsx(eu._,{htmlFor:"displayName",children:"Display name"}),r.jsx(ec.I,{...P("displayName",{required:!0,disabled:x}),placeholder:"Display name"})]}),(0,r.jsxs)("div",{children:[r.jsx(eu._,{htmlFor:"firstName",children:"First name"}),r.jsx(ec.I,{...P("firstName",{required:!1,disabled:x}),placeholder:"First name"})]}),(0,r.jsxs)("div",{children:[r.jsx(eu._,{htmlFor:"lastName",children:"Last name"}),r.jsx(ec.I,{...P("lastName",{required:!1,disabled:x}),placeholder:"Last name"})]})]}),(0,r.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[r.jsx(el.sw,{asChild:!0,children:r.jsx(er.z,{variant:"outline",children:"Cancel"})}),r.jsx(er.z,{onClick:k,children:"Save"})]})]})]})]})}var em=t(83855);let ex=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function eg({selected:e,roles:a,getUsers:t,onDelete:d,toggleUserForm:n,searchUsers:i}){let l=(0,X.l)(),[o,c]=(0,s.useState)(l.parsed.role||"all"),[u,f]=(0,s.useState)(l.parsed.status||"all");return(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{children:(0,r.jsxs)(eo.Ph,{value:u,onValueChange:e=>{let a="all"===e?void 0:e;f(e),t({status:a},e=>!e&&l.push({status:a}))},children:[r.jsx(eo.i4,{children:r.jsx(eo.ki,{placeholder:"Filter by status"})}),r.jsx(eo.Bw,{children:(0,r.jsxs)(eo.DI,{children:[r.jsx(eo.n5,{children:"User status"}),r.jsx(eo.Ql,{value:"all",children:"All statuses"}),ex.map(e=>r.jsx(eo.Ql,{value:e.value,children:e.label},e.value))]})})]})}),r.jsx("div",{children:(0,r.jsxs)(eo.Ph,{value:o,onValueChange:e=>{let a="all"===e?[]:[e];c(e),t({roles:a},e=>!e&&l.push({role:a[0]}))},children:[r.jsx(eo.i4,{children:r.jsx(eo.ki,{placeholder:"Filter by role"})}),r.jsx(eo.Bw,{children:(0,r.jsxs)(eo.DI,{children:[r.jsx(eo.n5,{children:"User roles"}),r.jsx(eo.Ql,{value:"all",children:"All roles"}),a.map(e=>r.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})}),r.jsx("div",{children:(0,r.jsxs)(er.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>n(),children:[r.jsx(em.Z,{className:"w-4 h-4 mr-1"}),"New User"]})})]})}function ev({open:e,userIds:a,roles:t,onClose:d,updateUsers:n,onSaveSuccess:i}){let{alert:l}=(0,ef.s)(),{parsed:c,replace:u}=(0,X.l)(),[f,b]=(0,s.useState)(!1),{watch:h,setValue:p,handleSubmit:m}=(0,ei.cI)({defaultValues:{role:""}}),x=(0,s.useCallback)(()=>{d?.(),u({bulkEdit:void 0}),p("role","")},[d,u,p]),g=m(e=>{(async()=>{try{b(!0),a.length&&(await o.Z.post("/api/users/update",{data:a.map(a=>({userId:a,data:e}))}),i&&await i()),l({variant:"success",message:"Users updated",onClose:x})}catch(e){l({title:"",message:"Failed to update users: "+e.message,variant:"error"})}finally{b(!1)}})()}),v=h("role");return r.jsx(r.Fragment,{children:r.jsx(el.yo,{open:"1"===c.bulkEdit,onOpenChange:e=>{e||x()},children:(0,r.jsxs)(el.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[r.jsx(el.Tu,{className:"py-2 px-4 border-b border-b-border",children:r.jsx(el.bC,{children:"Bulk edit users"})}),r.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,r.jsxs)("div",{children:[r.jsx(eu._,{htmlFor:"role",children:"Role"}),(0,r.jsxs)(eo.Ph,{value:v,required:!0,name:"role",disabled:f,onValueChange:e=>{p("role",e)},children:[r.jsx(eo.i4,{children:r.jsx(eo.ki,{placeholder:"-- select role --"})}),r.jsx(eo.Bw,{children:(0,r.jsxs)(eo.DI,{children:[r.jsx(eo.n5,{children:"User role"}),t.map(e=>r.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]})}),(0,r.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[r.jsx(el.sw,{asChild:!0,children:r.jsx(er.z,{variant:"outline",children:"Cancel"})}),r.jsx(er.z,{onClick:g,disabled:!v,children:"Save"})]})]})})})}function ey({users:e,roles:a,getUsers:t,deleteUsers:i,getUser:c,updateUsers:u,createUsers:f,searchUsers:b}){let h=(0,X.l)(),{mode:p}=(0,H.b)(),[m,x]=(0,s.useState)(e),[g,v]=(0,s.useState)(!1),[y,w]=(0,s.useState)([]),[j,N]=(0,s.useState)(!1),{confirm:C}=(0,G.t)(),P=(0,s.useCallback)(async(a,t)=>{v(!0);let r=(await o.Z.get("/api/users?data="+JSON.stringify({...h.parsed,roles:h.parsed.role?[h.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;r.error?d.Am.error(r.error):(x(r),w([])),t?.(r.error,r),v(!1)},[t,h,e]),R=(0,s.useCallback)((e,a)=>{let t=m.data.filter(a=>e.includes(a.userId)).map(e=>e.displayName);C(()=>{(async()=>{try{v(!0),await o.Z.delete("/api/users?data="+JSON.stringify(e)),await P(),a?.()}catch(e){d.Am.error(e.message)}finally{v(!1)}})()},{title:"Delete "+(t.length>1?"users":"user"),message:`<p>Are you sure you want to delete:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,i,P,m]),I=h.parsed.userId||j?r.jsx(ep,{roles:a,open:j,getUser:c,updateUsers:u,createUsers:f,onSaveSuccess:P,onClose:()=>N(!1)}):null,_=r.jsx(ev,{roles:a,open:j,userIds:y.map(e=>m.data[e].userId),updateUsers:u,onSaveSuccess:()=>P({page:m.page})}),T=(0,s.useMemo)(()=>"view"===p,[p]);return(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx(B.DataTable,{title:"Users",selectable:!T,selectedIndexes:y,onSelect:w,search:{inputPlaceholder:"Search users"},headerActions:r.jsx(eg,{users:m,roles:a,selected:y.map(e=>m.data[e].userId),onDelete:R,getUsers:P,searchUsers:b,toggleUserForm:()=>N(e=>!e)}),columns:[{name:"Display name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellRenderer(e){let a=m.data[e.rowIndex];return r.jsx(k,{delayDuration:0,children:(0,r.jsxs)(U,{children:[r.jsx(Z,{asChild:!0,children:r.jsx(n,{className:(0,V.cn)(a.activationDate?"text-green-400":"text-gray-400","w-4 h-4")})}),!!a.activationDate&&r.jsx(W,{children:(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Activation date: ",l()(a.activationDate).format("LLL")]})})]})})}},{name:"Action",align:"right",cellRenderer(e){let a=m.data[e.rowIndex];return r.jsx(es,{email:a.email,userId:a.userId,userName:a.displayName,isActivated:!!a.activationDate,onDelete:()=>R([a.userId])})}}],data:m.data.map(e=>[e.displayName,e.email,a.filter(a=>a.name===e.role)[0]?.description||e.role,e.lastLoginDate?l()(e.lastLoginDate).format("LLL"):"",""])}),r.jsx(Y.Z,{}),r.jsx("div",{className:"p-2",children:r.jsx(Q.t,{currentPage:m.page,totalPages:m.totalPages,disabled:g,limit:m.limit||m.totalRows,totalRows:m.totalRows,collectionName:"users",onPaginate:e=>P({page:e},(e,a)=>!e&&h.push({page:a?.page||m.page})),hideControls:!1,hideSummary:!1})}),I,_,g&&r.jsx(K.a,{overlay:!0})]})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>o});var r=t(10326),s=t(17577),d=t(34478),n=t(28671),i=t(77863);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef(({className:e,secondary:a,error:t,...s},n)=>r.jsx(d.f,{ref:n,className:(0,i.cn)(l(),a&&"text-xs",t?"text-danger":"",e),...s}));o.displayName=d.f.displayName},34474:(e,a,t)=>{"use strict";t.d(a,{Bw:()=>m,DI:()=>u,Ph:()=>c,Ql:()=>g,i4:()=>b,ki:()=>f,n5:()=>x});var r=t(10326),s=t(17577),d=t(18792),n=t(941),i=t(96633),l=t(32933),o=t(77863);let c=d.fC,u=d.ZA,f=d.B4,b=s.forwardRef(({className:e,children:a,error:t,...s},i)=>(0,r.jsxs)(d.xz,{ref:i,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t&&"border-danger",e),...s,children:[a,r.jsx(d.JO,{asChild:!0,children:r.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));b.displayName=d.xz.displayName;let h=s.forwardRef(({className:e,...a},t)=>r.jsx(d.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=d.u_.displayName;let p=s.forwardRef(({className:e,...a},t)=>r.jsx(d.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=d.$G.displayName;let m=s.forwardRef(({className:e,children:a,position:t="popper",...s},n)=>r.jsx(d.h_,{children:(0,r.jsxs)(d.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[r.jsx(h,{}),r.jsx(d.l_,{className:(0,o.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),r.jsx(p,{})]})}));m.displayName=d.VY.displayName;let x=s.forwardRef(({className:e,...a},t)=>r.jsx(d.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));x.displayName=d.__.displayName;let g=s.forwardRef(({className:e,children:a,...t},s)=>(0,r.jsxs)(d.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(d.wU,{children:r.jsx(l.Z,{className:"h-4 w-4"})})}),r.jsx(d.eT,{children:a})]}));g.displayName=d.ck.displayName,s.forwardRef(({className:e,...a},t)=>r.jsx(d.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=d.Z0.displayName},8281:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var r=t(10326),s=t(17577),d=t(90220),n=t(77863);let i=s.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...s},i)=>r.jsx(d.f,{ref:i,decorative:t,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...s}));i.displayName=d.f.displayName},43059:(e,a,t)=>{"use strict";t.d(a,{q:()=>s});var r=t(17577);function s(e){return(0,r.useRef)(0),null}},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},17872:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var r=t(19510),s=t(21113),d=t(24569),n=t(46697);function i(){return r.jsx(d.V,{children:r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-0",children:r.jsx(s.w,{loading:!0,maxRows:25,columns:[{name:"Display Name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellClassName:"w-20"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},13005:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(19510),s=t(73508),d=t(43767),n=t(24569),i=t(85431),l=t(46697),o=t(68570);let c=(0,o.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/users/components/table.tsx`),{__esModule:u,$$typeof:f}=c;c.default;let b=(0,o.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/users/components/table.tsx#UsersTable`);async function h({searchParams:{page:e,role:a,status:t}}){let[o,c]=await Promise.all([(0,s.getUsers)({limit:25,page:e?Number(e):void 0,roles:a?[a]:void 0,status:t}),(0,d.getRoles)()]);return(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.D,{children:"Users"}),r.jsx(n.V,{children:o.error?r.jsx(l.Zb,{className:"border-danger bg-danger/20 text-center",children:r.jsx(l.aY,{children:r.jsx("div",{className:"text-danger",children:o.error})})}):r.jsx(l.Zb,{children:r.jsx(l.aY,{className:"p-0",children:r.jsx(b,{users:o,roles:c,getUsers:s.getUsers,deleteUsers:s.deleteUsers,getUser:s.getUser,updateUsers:s.updateUsers,createUsers:s.createUsers,searchUsers:s.searchUsers})})})})]})}},43767:(e,a,t)=>{"use strict";t.r(a),t.d(a,{getRoles:()=>i});var r=t(24330);t(60166);var s=t(10413);async function d(){return await s.Z.query.userRoles.findMany()}var n=t(57435);async function i(){try{return await d()}catch(e){return n.Z.error("getRoles ERROR:",e),[]}}(0,t(40618).h)([i]),(0,r.j)("87e3fefa3f04c6561e0a6bc48f3614975897d014",i)},73508:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>N,$$ACTION_1:()=>P,$$ACTION_2:()=>k,$$ACTION_3:()=>T,$$ACTION_4:()=>U,createUsers:()=>I,deleteUsers:()=>R,getFullUser:()=>w,getUser:()=>y,getUsers:()=>j,isEmailRegistered:()=>v,searchUsers:()=>C,setPassword:()=>E,updateUsers:()=>_});var r=t(24330);t(60166);var s=t(67096),d=t.n(s),n=t(57745),i=t(9576),l=t(30900),o=t(10413),c=t(43509),u=t(47625);async function f(e){for(let a of e){let e=new Date;await o.Z.update(c.users).set({deletedAt:e,email:a,displayName:"Former user",firstName:null,lastName:null,avatar:null,avatar_md:null,avatar_sm:null}).where((0,n.eq)(c.users.userId,a))}return!0}async function b(e,a){let t=[];for(let a of e){let e=await d().genSalt(10),r=await d().hash(a.password||(0,i.Z)(),e);t.push({...a,password:r,userId:a.userId||(0,i.Z)()})}let r={inserted:[],success:!1};try{if(await o.Z.insert(c.users).values(t),a?.returnInserted){let e=await (0,u.yT)({userIds:t.map(e=>e.userId)});r.inserted=e.data}r.success=!0}catch(e){r.error=e.message}finally{return r}}async function h(e,a){let t=[];for(let{userId:r,data:s}of e)try{let e=(0,l.Z)(r)?(0,n.eq)(c.users.userId,r):(0,n.eq)(c.users.email,r);delete s.id,delete s.createdAt,delete s.updatedAt,delete s.email,delete s.userId,await o.Z.update(c.users).set(s).where(e);let d=a?.returnUpdated?await (0,u.IQ)(r):void 0;t.push({userId:r,user:d})}catch(e){t.push({userId:r,error:e.message})}return t}var p=t(57435),m=t(70733),x=t(66267),g=t(40618);async function v(e){try{let a=await (0,u.IQ)(e);return{yes:!!a,isActive:!!a?.isActive}}catch(e){return p.Z.error("getUser ERROR:",e),{errors:[e.message],yes:!1}}}async function y(e){try{return await (0,x.isAllowed)("get_user"),await (0,u.IQ)(e)||null}catch(e){return p.Z.error("getUser ERROR:",e),null}}async function w(e){try{return await (0,x.isAllowed)("get_user"),await (0,u.C)(e)||null}catch(e){return p.Z.error("getFullUser ERROR:",e),null}}let j=(0,r.j)("7ed58da9bdd1fcaabea1b4a8c01155185ea42d50",N);async function N(...e){try{return await (0,x.isAllowed)("get_users"),await (0,u.yT)(...e)}catch(e){return{...u.Ko,error:e.message}}}let C=(0,r.j)("30776f4c4a368e78980f8117cefaf77df1f67743",P);async function P(...e){try{return await (0,x.isAllowed)("search_users"),await (0,u.yT)(...e)}catch(e){return{...u.Ko,error:e.message}}}async function R(e){if(await (0,x.isAllowed)("delete_users"),e.length){let{data:a}=await (0,u.yT)({userIds:e});await f(e)}return!0}let I=(0,r.j)("46092427241ea6fbfbd33cf01bdd70a14cf92f90",k);async function k(...e){try{await (0,x.isAllowed)("create_users");let a=await b(...e);for(let a of e[0])try{await (0,m.n)({userId:a.userId,hoursValid:1})}catch(e){}return a}catch(e){throw p.Z.error("createUsers ERROR",e),e}}let _=(0,r.j)("e643f22d4242e305446816ef0c71ada1ec53143f",T);async function T(...e){try{return await (0,x.isAllowed)("update_users"),await h(...e)}catch(e){throw p.Z.error("updateUsers ERROR",e),e}}let E=(0,r.j)("2c56cdafc83bcdd180a689448b216edb18936af9",U);async function U(e){try{if(!e.password)throw Error("Missing: password");if(!e.email)throw Error("Missing: email");if(e.password.length<6)throw Error("Password is too short: min 6 characters");if(e.password!==e.passwordConfirm)throw Error("Password confirmation does not match!");let a=await d().genSalt(10),t=await d().hash(e.password,a),r=await h([{userId:e.email,data:{password:t}}]);if(r.filter(e=>e.error).length)throw Error(r.filter(e=>e.error).map(e=>e.error).join(", "));return{success:!0}}catch(e){return p.Z.error("setPassword ERROR",e),{success:!1,errors:[e.message]}}}(0,g.h)([v,y,w,j,C,R,I,_,E]),(0,r.j)("8002a85e229f7939cdcf277a95e859c8310681f6",v),(0,r.j)("15e9024c7a317568a0bfe153647ab40d4a782996",y),(0,r.j)("67f588a162fcecb1a75791f69b6cff347ad9923a",w),(0,r.j)("38db96d8998f5107454ecf82118abd7af347d295",j),(0,r.j)("1977ec2d9d02f9d05c365f2b0c361b6bda56d4b9",C),(0,r.j)("cdb03413b17de7f459a06c1da6dcecd39449a521",R),(0,r.j)("1a887bafa5bdbb80006e55a4af6cb4a8b6c64b5d",I),(0,r.j)("86bb37e35f63659c1e7cf3ba878f97f6925e4521",_),(0,r.j)("1d50295030f25981c6202bf941a3b2576a09a317",E)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>d});var r=t(19510),s=t(50650);function d({className:e,...a}){return r.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>i});var r=t(68570);let s=(0,r.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/components/data-table/index.tsx`),{__esModule:d,$$typeof:n}=s;s.default;let i=(0,r.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>n,aY:()=>i});var r=t(19510),s=t(71159),d=t(50650);let n=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));n.displayName="Card",s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",s.forwardRef(({className:e,...a},t)=>r.jsx("h3",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",s.forwardRef(({className:e,...a},t)=>r.jsx("p",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let i=s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,d.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent",s.forwardRef(({className:e,...a},t)=>r.jsx("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},70733:(e,a,t)=>{"use strict";t.d(a,{n:()=>i});var r=t(51744),s=t.n(r),d=t(10413),n=t(43509);async function i({userId:e,hoursValid:a}){return(await d.Z.insert(n.tokens).values({userId:e,validUntil:s()(new Date).add(a,"hour").toDate(),token:Math.floor(1e5+9e5*Math.random())}).returning())[0]}},20123:(e,a,t)=>{"use strict";t.d(a,{Ng:()=>c,_U:()=>h,QF:()=>o,YF:()=>b});var r=t(57745),s=t(81445),d=t(30900),n=t(10413),i=t(43509),l=t(57435);async function o(e){try{let{sitesIds:a,types:t=[],envs:l=[],links:o=[]}={...e},c=a||[],u=c?.length?(0,r.d3)(i.sites.siteId,c.filter(e=>d.Z(e))):void 0;o.length&&[...o].forEach(e=>{o.push(e.replace("http:","https:")),o.push(e.replace("https","http"))});let f=[(0,r.Ft)(i.sites.deletedAt),u,t.length?(0,r.d3)(i.sites.type,t):void 0,l.length?(0,r.d3)(i.sites.env,l):void 0,o.length?(0,r.d3)(i.sites.link,o):void 0];return{data:(await n.Z.select({site:i.sites}).from(i.sites).where(f.length?(0,r.xD)(...f):void 0).orderBy((0,s.d)(i.sites.id))).map(e=>e.site)}}catch(e){return l.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function c(e){let{siteId:a}={...e};try{if(!a)throw Error("Missing siteId");let e=d.Z(a)?(0,r.eq)(i.sites.siteId,a):void 0;return{data:await n.Z.query.sites.findFirst({where:(0,r.xD)((0,r.Ft)(i.sites.deletedAt),e)})}}catch(e){return l.Z.error("_getSite ERROR",e.message),{errors:[e.message]}}}var u=t(8328);let f=()=>{let e=(0,u.w)();return{webeditor:{name:"Local editor",siteId:"fb76af5a-bf86-4050-821e-44f1bf316bf4",link:e.origin,type:"webeditor",apiKey:"localhost"},nodeapi:{name:"Local editor",siteId:"5cb4aa54-2cfe-49e2-9cdd-392a9b8c124e",link:e.origin,type:"webeditor",apiKey:"localhost"}}};async function b(e){try{let{types:a=[]}={...e},t=[...a.length?[(0,r.d3)(i.sites.type,a)]:[]],s=await n.Z.query.sites.findMany({where:t.length?(0,r.xD)(...t):void 0,columns:{siteId:!0,type:!0,name:!0,link:!0}});return f(),{data:[...s]}}catch(e){return l.Z.error("_getSites ERROR",e.message),{data:[],errors:[e.message]}}}async function h(e){try{let a=await n.Z.query.sites.findFirst({where:(0,r.eq)(i.sites.siteId,e),columns:{apiKey:!0,link:!0}}),t=a||null;if(!a){let a=f();Object.values(a).forEach(a=>{a.siteId===e&&(t={link:a.link,apiKey:a.apiKey})})}return{data:t}}catch(e){return l.Z.error("_getSiteApiKey ERROR",e.message),{data:null,errors:[e.message]}}}},8328:(e,a,t)=>{"use strict";t.d(a,{w:()=>s});var r=t(71615);function s(){let e=(0,r.headers)(),a=e.get("x-api-key"),t=e.get("x-bearer-token"),s=e.get("x-url"),d=e.get("x-next-url-host"),n=e.get("x-next-url-href"),i=e.get("x-next-url-port"),l=e.get("x-next-url-hostname"),o=e.get("x-next-url-pathname"),c=e.get("x-next-url-search"),u=e.get("x-next-url-protocol"),f=e.get("x-next-url-username"),b=e.get("x-next-url-locale"),h=e.get("x-next-url-origin"),p=e.get("x-geo-city"),m=e.get("x-geo-country");return{apiKey:a,bearerToken:t,url:s||"",host:d||"",href:n||"",port:i||"",hostname:l||"",pathname:o||"",search:c||"",protocol:u||"",username:f||"",locale:b||"",origin:h||"",city:p||"",country:m||"",region:e.get("x-geo-region")||"",latitude:e.get("x-geo-latitude")||"",longitude:e.get("x-geo-longitude")||""}}},90220:(e,a,t)=>{"use strict";t.d(a,{f:()=>o});var r=t(17577),s=t(45226),d=t(10326),n="horizontal",i=["horizontal","vertical"],l=r.forwardRef((e,a)=>{let{decorative:t,orientation:r=n,...l}=e,o=i.includes(r)?r:n;return(0,d.jsx)(s.WV.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...l,ref:a})});l.displayName="Separator";var o=l}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[1633,1744,1381,3788,1490,9092,5802,7708,2685,6462,4723,1813,5358,8065,7967,413,6267,600,1966,1271,437,1717,9162],()=>t(83569));module.exports=r})();