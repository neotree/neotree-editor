(()=>{var e={};e.id=7297,e.ids=[7297],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},13592:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(13005),t(84232),t(56367),t(12699),t(77482),t(96560);var s=t(23191),a=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["(dashboard)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13005)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,84232)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,77482)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/not-found.tsx"]}],c=["/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/page.tsx"],u="/(dashboard)/users/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65868:(e,r,t)=>{Promise.resolve().then(t.bind(t,97614)),Promise.resolve().then(t.bind(t,10827))},97614:(e,r,t)=>{"use strict";t.d(r,{UsersTable:()=>eg});var s=t(10326),a=t(17577),n=t(85999);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var i=t(57967),l=t.n(i),d=t(44099),c=t(82561),u=t(48051),p=t(93095),x=t(825),h=t(88957),m=t(84321),g=(t(83078),t(9815)),f=t(45226),v=t(34214),y=t(52067),b=t(6009),[j,w]=(0,p.b)("Tooltip",[m.D7]),E=(0,m.D7)(),C="TooltipProvider",P="tooltip.open",[R,k]=j(C),T=e=>{let{__scopeTooltip:r,delayDuration:t=700,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:i}=e,l=a.useRef(!0),d=a.useRef(!1),c=a.useRef(0);return a.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,s.jsx)(R,{scope:r,isOpenDelayedRef:l,delayDuration:t,onOpen:a.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:d,onPointerInTransitChange:a.useCallback(e=>{d.current=e},[]),disableHoverableContent:o,children:i})};T.displayName=C;var N="Tooltip",[D,q]=j(N),S=e=>{let{__scopeTooltip:r,children:t,open:n,defaultOpen:o,onOpenChange:i,disableHoverableContent:l,delayDuration:d}=e,c=k(N,e.__scopeTooltip),u=E(r),[p,x]=a.useState(null),g=(0,h.M)(),f=a.useRef(0),v=l??c.disableHoverableContent,b=d??c.delayDuration,j=a.useRef(!1),[w,C]=(0,y.T)({prop:n,defaultProp:o??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(P))):c.onClose(),i?.(e)},caller:N}),R=a.useMemo(()=>w?j.current?"delayed-open":"instant-open":"closed",[w]),T=a.useCallback(()=>{window.clearTimeout(f.current),f.current=0,j.current=!1,C(!0)},[C]),q=a.useCallback(()=>{window.clearTimeout(f.current),f.current=0,C(!1)},[C]),S=a.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{j.current=!0,C(!0),f.current=0},b)},[b,C]);return a.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),(0,s.jsx)(m.fC,{...u,children:(0,s.jsx)(D,{scope:r,contentId:g,open:w,stateAttribute:R,trigger:p,onTriggerChange:x,onTriggerEnter:a.useCallback(()=>{c.isOpenDelayedRef.current?S():T()},[c.isOpenDelayedRef,S,T]),onTriggerLeave:a.useCallback(()=>{v?q():(window.clearTimeout(f.current),f.current=0)},[q,v]),onOpen:T,onClose:q,disableHoverableContent:v,children:t})})};S.displayName=N;var O="TooltipTrigger",L=a.forwardRef((e,r)=>{let{__scopeTooltip:t,...n}=e,o=q(O,t),i=k(O,t),l=E(t),d=a.useRef(null),p=(0,u.e)(r,d,o.onTriggerChange),x=a.useRef(!1),h=a.useRef(!1),g=a.useCallback(()=>x.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,s.jsx)(m.ee,{asChild:!0,...l,children:(0,s.jsx)(f.WV.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:p,onPointerMove:(0,c.M)(e.onPointerMove,e=>{"touch"===e.pointerType||h.current||i.isPointerInTransitRef.current||(o.onTriggerEnter(),h.current=!0)}),onPointerLeave:(0,c.M)(e.onPointerLeave,()=>{o.onTriggerLeave(),h.current=!1}),onPointerDown:(0,c.M)(e.onPointerDown,()=>{o.open&&o.onClose(),x.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,c.M)(e.onFocus,()=>{x.current||o.onOpen()}),onBlur:(0,c.M)(e.onBlur,o.onClose),onClick:(0,c.M)(e.onClick,o.onClose)})})});L.displayName=O;var[M,U]=j("TooltipPortal",{forceMount:void 0}),_="TooltipContent",I=a.forwardRef((e,r)=>{let t=U(_,e.__scopeTooltip),{forceMount:a=t.forceMount,side:n="top",...o}=e,i=q(_,e.__scopeTooltip);return(0,s.jsx)(g.z,{present:a||i.open,children:i.disableHoverableContent?(0,s.jsx)(F,{side:n,...o,ref:r}):(0,s.jsx)(A,{side:n,...o,ref:r})})}),A=a.forwardRef((e,r)=>{let t=q(_,e.__scopeTooltip),n=k(_,e.__scopeTooltip),o=a.useRef(null),i=(0,u.e)(r,o),[l,d]=a.useState(null),{trigger:c,onClose:p}=t,x=o.current,{onPointerInTransitChange:h}=n,m=a.useCallback(()=>{d(null),h(!1)},[h]),g=a.useCallback((e,r)=>{let t=e.currentTarget,s={x:e.clientX,y:e.clientY},a=function(e,r){let t=Math.abs(r.top-e.y),s=Math.abs(r.bottom-e.y),a=Math.abs(r.right-e.x),n=Math.abs(r.left-e.x);switch(Math.min(t,s,a,n)){case n:return"left";case a:return"right";case t:return"top";case s:return"bottom";default:throw Error("unreachable")}}(s,t.getBoundingClientRect());d(function(e){let r=e.slice();return r.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),function(e){if(e.length<=1)return e.slice();let r=[];for(let t=0;t<e.length;t++){let s=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(s.y-t.y)>=(e.y-t.y)*(s.x-t.x))r.pop();else break}r.push(s)}r.pop();let t=[];for(let r=e.length-1;r>=0;r--){let s=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x))t.pop();else break}t.push(s)}return(t.pop(),1===r.length&&1===t.length&&r[0].x===t[0].x&&r[0].y===t[0].y)?r:r.concat(t)}(r)}([...function(e,r,t=5){let s=[];switch(r){case"top":s.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":s.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":s.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":s.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t})}return s}(s,a),...function(e){let{top:r,right:t,bottom:s,left:a}=e;return[{x:a,y:r},{x:t,y:r},{x:t,y:s},{x:a,y:s}]}(r.getBoundingClientRect())])),h(!0)},[h]);return a.useEffect(()=>()=>m(),[m]),a.useEffect(()=>{if(c&&x){let e=e=>g(e,x),r=e=>g(e,c);return c.addEventListener("pointerleave",e),x.addEventListener("pointerleave",r),()=>{c.removeEventListener("pointerleave",e),x.removeEventListener("pointerleave",r)}}},[c,x,g,m]),a.useEffect(()=>{if(l){let e=e=>{let r=e.target,t={x:e.clientX,y:e.clientY},s=c?.contains(r)||x?.contains(r),a=!function(e,r){let{x:t,y:s}=e,a=!1;for(let e=0,n=r.length-1;e<r.length;n=e++){let o=r[e],i=r[n],l=o.x,d=o.y,c=i.x,u=i.y;d>s!=u>s&&t<(c-l)*(s-d)/(u-d)+l&&(a=!a)}return a}(t,l);s?m():a&&(m(),p())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,x,l,p,m]),(0,s.jsx)(F,{...e,ref:i})}),[Z,z]=j(N,{isInside:!1}),V=(0,v.sA)("TooltipContent"),F=a.forwardRef((e,r)=>{let{__scopeTooltip:t,children:n,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:l,...d}=e,c=q(_,t),u=E(t),{onClose:p}=c;return a.useEffect(()=>(document.addEventListener(P,p),()=>document.removeEventListener(P,p)),[p]),a.useEffect(()=>{if(c.trigger){let e=e=>{let r=e.target;r?.contains(c.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,p]),(0,s.jsx)(x.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,s.jsxs)(m.VY,{"data-state":c.stateAttribute,...u,...d,ref:r,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,s.jsx)(V,{children:n}),(0,s.jsx)(Z,{scope:t,isInside:!0,children:(0,s.jsx)(b.fC,{id:c.contentId,role:"tooltip",children:o||n})})]})})});I.displayName=_;var B="TooltipArrow";a.forwardRef((e,r)=>{let{__scopeTooltip:t,...a}=e,n=E(t);return z(B,t).isInside?null:(0,s.jsx)(m.Eh,{...n,...a,ref:r})}).displayName=B;var X=t(77863);let $=a.forwardRef(({className:e,sideOffset:r=4,...t},a)=>s.jsx(I,{ref:a,sideOffset:r,className:(0,X.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$.displayName=I.displayName;var Q=t(9162),Y=t(58879),G=t(8281),H=t(11870),J=t(12260),W=t(46670),K=t(3529),ee=t(77109),er=t(39447),et=t(47035),es=t(90434),ea=t(60097),en=t(90772);function eo({email:e,userId:r,userName:t,isActivated:a,onDelete:n,onResetPasswords:o}){let i=(0,ee.useSession)();return(0,J.l)(),s.jsx(s.Fragment,{children:(0,s.jsxs)(ea.h_,{children:[s.jsx(ea.$F,{asChild:!0,children:s.jsx(en.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:s.jsx(er.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(ea.AW,{children:[s.jsx(ea.Ju,{children:t}),s.jsx(ea.VD,{}),s.jsx(ea.Xi,{asChild:!0,children:s.jsx(es.default,{href:`/users/edit/${r}`,children:"Edit"})}),s.jsx(ea.Xi,{disabled:a,children:"Send activation code"}),s.jsx(ea.Xi,{onClick:o,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:"Reset password"}),s.jsx(ea.VD,{}),(0,s.jsxs)(ea.Xi,{onClick:n,className:"text-danger focus:bg-danger focus:text-danger-foreground",disabled:e===i.data?.user?.email,children:[s.jsx(et.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]})})}var ei=t(83855),el=t(34474);let ed=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function ec({selected:e,roles:r,getUsers:t,onDelete:n,searchUsers:o}){let i=(0,J.l)(),[l,d]=(0,a.useState)(i.parsed.role||"all"),[c,u]=(0,a.useState)(i.parsed.status||"all");return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{children:(0,s.jsxs)(el.Ph,{value:c,onValueChange:e=>{let r="all"===e?void 0:e;u(e),t({status:r},e=>!e&&i.push({status:r}))},children:[s.jsx(el.i4,{children:s.jsx(el.ki,{placeholder:"Filter by status"})}),s.jsx(el.Bw,{children:(0,s.jsxs)(el.DI,{children:[s.jsx(el.n5,{children:"User status"}),s.jsx(el.Ql,{value:"all",children:"All statuses"}),ed.map(e=>s.jsx(el.Ql,{value:e.value,children:e.label},e.value))]})})]})}),s.jsx("div",{children:(0,s.jsxs)(el.Ph,{value:l,onValueChange:e=>{let r="all"===e?[]:[e];d(e),t({roles:r},e=>!e&&i.push({role:r[0]}))},children:[s.jsx(el.i4,{children:s.jsx(el.ki,{placeholder:"Filter by role"})}),s.jsx(el.Bw,{children:(0,s.jsxs)(el.DI,{children:[s.jsx(el.n5,{children:"User roles"}),s.jsx(el.Ql,{value:"all",children:"All roles"}),r.map(e=>s.jsx(el.Ql,{value:e.name,children:e.description},e.name))]})})]})}),s.jsx("div",{children:s.jsx(en.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",asChild:!0,children:(0,s.jsxs)(es.default,{href:"/users/add",children:[s.jsx(ei.Z,{className:"w-4 h-4 mr-1"}),"New User"]})})})]})}var eu=t(74723),ep=t(7890),ex=t(31048),eh=t(96221);function em({open:e,userIds:r,roles:t,onOpenChange:n,updateUsers:o,onSaveSuccess:i}){let{alert:l}=(0,eh.s)(),{parsed:c,replace:u}=(0,J.l)(),[p,x]=(0,a.useState)(!1),{watch:h,setValue:m,handleSubmit:g}=(0,eu.cI)({defaultValues:{role:""}}),f=(0,a.useCallback)(()=>{u({bulkEdit:void 0}),m("role","")},[n,u,m]),v=g(e=>{(async()=>{try{x(!0),r.length&&(await d.Z.post("/api/users/update",{data:r.map(r=>({userId:r,data:e}))}),i&&await i()),l({variant:"success",message:"Users updated",onClose:f})}catch(e){l({title:"",message:"Failed to update users: "+e.message,variant:"error"})}finally{x(!1)}})()}),y=h("role");return s.jsx(s.Fragment,{children:s.jsx(ep.yo,{open:e,onOpenChange:e=>{e||f(),n?.(e)},children:(0,s.jsxs)(ep.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[s.jsx(ep.Tu,{className:"py-2 px-4 border-b border-b-border",children:s.jsx(ep.bC,{children:"Bulk edit users"})}),s.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,s.jsxs)("div",{children:[s.jsx(ex._,{htmlFor:"role",children:"Role"}),(0,s.jsxs)(el.Ph,{value:y,required:!0,name:"role",disabled:p,onValueChange:e=>{m("role",e)},children:[s.jsx(el.i4,{children:s.jsx(el.ki,{placeholder:"-- select role --"})}),s.jsx(el.Bw,{children:(0,s.jsxs)(el.DI,{children:[s.jsx(el.n5,{children:"User role"}),t.map(e=>s.jsx(el.Ql,{value:e.name,children:e.description},e.name))]})})]})]})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[s.jsx(ep.sw,{asChild:!0,children:s.jsx(en.z,{variant:"outline",children:"Cancel"})}),s.jsx(en.z,{onClick:v,disabled:!y,children:"Save"})]})]})})})}function eg({users:e,roles:r,user:t,getUsers:i,deleteUsers:c,getUser:u,updateUsers:p,createUsers:x,searchUsers:h,resetUsersPasswords:m}){let g=(0,J.l)(),{mode:f}=(0,K.b)(),[v,y]=(0,a.useState)(e),[b,j]=(0,a.useState)(!1),[w,E]=(0,a.useState)([]),{confirm:C}=(0,W.t)(),P=(0,a.useCallback)(async(r,t)=>{j(!0);let s=(await d.Z.get("/api/users?data="+JSON.stringify({...g.parsed,roles:g.parsed.role?[g.parsed.role]:void 0,page:1,limit:e.limit,...r}))).data;s.error?n.Am.error(s.error):(y(s),E([])),t?.(s.error,s),j(!1)},[i,g,e]),R=(0,a.useCallback)((e,r)=>{let t=v.data.filter(r=>e.includes(r.userId)).map(e=>e.displayName);C(()=>{(async()=>{try{j(!0),await d.Z.delete("/api/users?data="+JSON.stringify(e)),await P(),r?.()}catch(e){n.Am.error(e.message)}finally{j(!1)}})()},{title:"Delete "+(t.length>1?"users":"user"),message:`<p>Are you sure you want to delete:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,c,P,v]),k=(0,a.useCallback)((e,r)=>{let t=v.data.filter(r=>e.includes(r.userId)).map(e=>e.displayName);C(()=>{(async()=>{try{j(!0),await d.Z.post("/api/users/reset-passwords",{usersIds:e}),n.Am.success("Passwords reset successful!"),r?.()}catch(e){n.Am.error(e.message)}finally{j(!1)}})()},{title:"Reset "+(t.length>1?"users passwords":"user password"),message:`<p>Are you sure you want to reset users passwords:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Reset",danger:!0})},[C,m,v]),N=(0,a.useMemo)(()=>"view"===f,[f]),D=s.jsx(em,{roles:r,open:!!w.length,userIds:w.map(e=>v.data[e].userId),updateUsers:p,onSaveSuccess:()=>P({page:v.page}),onOpenChange:e=>!e&&E([])});return(0,s.jsxs)(s.Fragment,{children:[b&&s.jsx(H.a,{overlay:!0}),D,(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx(Q.DataTable,{title:"Users",selectable:!N,selectedIndexes:w,onSelect:E,search:{inputPlaceholder:"Search users"},headerActions:s.jsx(ec,{users:v,roles:r,selected:w.map(e=>v.data[e].userId),onDelete:R,getUsers:P,searchUsers:h}),columns:[{name:"Display name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellRenderer(e){let r=v.data[e.rowIndex];return s.jsx(T,{delayDuration:0,children:(0,s.jsxs)(S,{children:[s.jsx(L,{asChild:!0,children:s.jsx(o,{className:(0,X.cn)(r.activationDate?"text-green-400":"text-gray-400","w-4 h-4")})}),!!r.activationDate&&s.jsx($,{children:(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Activation date: ",l()(r.activationDate).format("LLL")]})})]})})}},{name:"Action",align:"right",cellRenderer(e){let r=v.data[e.rowIndex];return s.jsx(eo,{email:r.email,userId:r.userId,userName:r.displayName,isActivated:!!r.activationDate,onDelete:()=>R([r.userId]),onResetPasswords:()=>k([r.userId])})}}],data:v.data.map(e=>[e.displayName,e.email,r.filter(r=>r.name===e.role)[0]?.description||e.role,e.lastLoginDate?l()(e.lastLoginDate).format("LLL"):"",""])}),s.jsx(G.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(Y.t,{currentPage:v.page,totalPages:v.totalPages,disabled:b,limit:v.limit||v.totalRows,totalRows:v.totalRows,collectionName:"users",onPaginate:e=>P({page:e},(e,r)=>!e&&g.push({page:r?.page||v.page})),hideControls:!1,hideSummary:!1})})]})]})}},8281:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var s=t(10326),a=t(17577),n=t(90220),o=t(77863);let i=a.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...a},i)=>s.jsx(n.f,{ref:i,decorative:t,orientation:r,className:(0,o.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...a}));i.displayName=n.f.displayName},12260:(e,r,t)=>{"use strict";t.d(r,{l:()=>o});var s=t(35047),a=t(15491),n=t(17577);function o(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)(),t=(0,n.useMemo)(()=>r.toString(),[r]),o=(0,n.useMemo)(()=>a.Z.parse(r.toString()),[r]),i=(0,n.useCallback)(e=>a.Z.stringify({...o,...e}),[o]),l=(0,n.useCallback)(r=>{e.push(`?${i(r)}`)},[i,e]);return{parsed:o,stringified:t,replace:(0,n.useCallback)(r=>{e.replace(`?${i(r)}`)},[i,e]),push:l,toSearchParams:i}}},39447:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},13005:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m,dynamic:()=>h});var s=t(19510),a=t(73508),n=t(43767),o=t(24569),i=t(85431),l=t(46697),d=t(68570);let c=(0,d.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/components/table.tsx`),{__esModule:u,$$typeof:p}=c;c.default;let x=(0,d.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/components/table.tsx#UsersTable`),h="force-dynamic";async function m({searchParams:e}){let{page:r,role:t,status:d,userId:c}=await e,[u,p,h]=await Promise.all([(0,a.getUsers)({limit:25,page:r?Number(r):void 0,roles:t?[t]:void 0,status:d}),(0,n.getRoles)(),c?await (0,a.getUser)(c):null]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.D,{children:"Users"}),s.jsx(o.V,{children:u.error?s.jsx(l.Zb,{className:"border-danger bg-danger/20 text-center",children:s.jsx(l.aY,{children:s.jsx("div",{className:"text-danger",children:u.error})})}):s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(x,{user:h,users:u,roles:p,getUsers:a.getUsers,deleteUsers:a.deleteUsers,getUser:a.getUser,updateUsers:a.updateUsers,createUsers:a.createUsers,searchUsers:a.searchUsers,resetUsersPasswords:a.resetUsersPasswords})})})})]})}},90220:(e,r,t)=>{"use strict";t.d(r,{f:()=>d});var s=t(17577),a=t(45226),n=t(10326),o="horizontal",i=["horizontal","vertical"],l=s.forwardRef((e,r)=>{let{decorative:t,orientation:s=o,...l}=e,d=i.includes(s)?s:o;return(0,n.jsx)(a.WV.div,{"data-orientation":d,...t?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:r})});l.displayName="Separator";var d=l}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1633,1744,9234,3788,2758,4901,1121,7938,6462,4723,5358,5514,6318,7967,413,6267,7368,6555,9183,1271,1981,9655,9162,7318],()=>t(13592));module.exports=s})();