(()=>{var e={};e.id=7297,e.ids=[7297],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},13592:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>d.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>o}),r(13005),r(17872),r(56367),r(12699),r(77482),r(96560);var t=r(23191),s=r(88716),n=r(37922),d=r.n(n),l=r(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(a,i);let o=["",{children:["(dashboard)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,13005)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,17872)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,56367)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,12699)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,77482)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/not-found.tsx"]}],c=["/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/page.tsx"],u="/(dashboard)/users/page",b={require:r,loadChunk:()=>Promise.resolve()},f=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47743:(e,a,r)=>{let t={"023c73bed53bbc4b3fe79235d6775c2226f30fc9":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.setPassword),"027eaab5282a2c317a98e2ad292274851b3bcf57":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.isEmailRegistered),"27db4383c25240109bbeafe05b6d3ef382fbec77":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.deleteUsers),"8c1706ef39b14194906fc76d293e4dcba85ae92a":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_0),"8c790f37fa8234c4a8ce301807f4b7a9f034648a":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_1),"8e9d57f452565ab305cc2fbbbba1c8a1f54a0aa5":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getFullUser),"8ea40d757733a9a127e9765a7140bc779ddbb8e7":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_2),"8fd784abb984eeb28ba830dcb1481931d0e358f3":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getUsers),"9888b996d0f87bf4c69743b1c05f964cda523faa":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.updateUsers),b4602a4425d33d11cfc56f383cd38b2d337b616b:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_3),bed5e548eff00631b9e73882213f7b3ee5cab46e:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.searchUsers),c570869931a7120fbb0e8c50ee63e44e06c643c4:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_4),caa73a89410e9b2187b05025023b884b86e92192:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.createUsers),f5824657aa9e6e00d525294593532a71c0710980:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.resetUsersPasswords),fadb7b68fc396819f3b697db7eecbc2c277a98b7:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getUser),"881d8c769217f5a927f51c01aed18d7bcf928157":()=>Promise.resolve().then(r.bind(r,66267)).then(e=>e.isAllowed),d9abd9f686d10aff48fc75f21a1dab5a1cfb9b09:()=>Promise.resolve().then(r.bind(r,66267)).then(e=>e.canAccessPage),a1978c83b209e9f738502cb7918ca21a901a7c96:()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getSession),c8fbf2226d3d8b8bb8824b3e879ec8cb4c4f1e65:()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getAuthenticatedUser),cd73b8090a6539c9726785159f965122a9679666:()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getAuthenticatedUserWithRoles),"8ee1d767b1df353105291b2f2734bcf500349564":()=>Promise.resolve().then(r.bind(r,43767)).then(e=>e.getRoles),"10da6f0b0f4fcdc40659c6e531c05ea585e3d41c":()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.getSys),"5b13081f1177b97292b36e6328c1701391100392":()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.$$ACTION_1),"842e7d872f1567b69de61f77be6f577ca410c5e4":()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.$$ACTION_0),a57a65b62d2591fe1ce847d0caf5c8c91c508892:()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.updateSys),bde73ff79f4781514fc96717f7ceaa9df9dd545c:()=>Promise.resolve().then(r.bind(r,82065)).then(e=>e.saveSites),dd5420619b99956dd11ccbca7279d7a42c665702:()=>Promise.resolve().then(r.bind(r,82065)).then(e=>e.getSites),e8bb0492bc53ca0b5b588864e13ea93167a12f10:()=>Promise.resolve().then(r.bind(r,82065)).then(e=>e.getSite),ebe3a2ba294d038570cb707b428619f03166a9b0:()=>Promise.resolve().then(r.bind(r,82065)).then(e=>e.$$ACTION_0),ffdb8ae8b2dfd69ac00ecfbf467274c24d838b26:()=>Promise.resolve().then(r.bind(r,82065)).then(e=>e.getSitesWithoutConfidentialData),"0e7a946332d8f585e5adf9efd9b7b091f15d22a6":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.discardDrafts),"3ec88125203124f96d5f00d0db96ed5d8fae2fd5":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.revalidatePath),"6cd3911728d7dece584e31782848b35b5c3e19b2":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.$$ACTION_0),"6ce78b3595eb2d1a66f96e48b4935bb19fb9dc56":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.$$ACTION_1),"8012daa6ce07ef2c0190ba4dde6111a58a16243b":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.getEditorDetails),"9833466a19d0fec5deb6b43fd2d0447723ad6b1a":()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.publishData),ff0f6b5ac517fe8b32f8a0b5648b3e37b22cbd42:()=>Promise.resolve().then(r.bind(r,71271)).then(e=>e.countAllDrafts)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"023c73bed53bbc4b3fe79235d6775c2226f30fc9":s.bind(null,"023c73bed53bbc4b3fe79235d6775c2226f30fc9"),"027eaab5282a2c317a98e2ad292274851b3bcf57":s.bind(null,"027eaab5282a2c317a98e2ad292274851b3bcf57"),"27db4383c25240109bbeafe05b6d3ef382fbec77":s.bind(null,"27db4383c25240109bbeafe05b6d3ef382fbec77"),"8c1706ef39b14194906fc76d293e4dcba85ae92a":s.bind(null,"8c1706ef39b14194906fc76d293e4dcba85ae92a"),"8c790f37fa8234c4a8ce301807f4b7a9f034648a":s.bind(null,"8c790f37fa8234c4a8ce301807f4b7a9f034648a"),"8e9d57f452565ab305cc2fbbbba1c8a1f54a0aa5":s.bind(null,"8e9d57f452565ab305cc2fbbbba1c8a1f54a0aa5"),"8ea40d757733a9a127e9765a7140bc779ddbb8e7":s.bind(null,"8ea40d757733a9a127e9765a7140bc779ddbb8e7"),"8fd784abb984eeb28ba830dcb1481931d0e358f3":s.bind(null,"8fd784abb984eeb28ba830dcb1481931d0e358f3"),"9888b996d0f87bf4c69743b1c05f964cda523faa":s.bind(null,"9888b996d0f87bf4c69743b1c05f964cda523faa"),b4602a4425d33d11cfc56f383cd38b2d337b616b:s.bind(null,"b4602a4425d33d11cfc56f383cd38b2d337b616b"),bed5e548eff00631b9e73882213f7b3ee5cab46e:s.bind(null,"bed5e548eff00631b9e73882213f7b3ee5cab46e"),c570869931a7120fbb0e8c50ee63e44e06c643c4:s.bind(null,"c570869931a7120fbb0e8c50ee63e44e06c643c4"),caa73a89410e9b2187b05025023b884b86e92192:s.bind(null,"caa73a89410e9b2187b05025023b884b86e92192"),f5824657aa9e6e00d525294593532a71c0710980:s.bind(null,"f5824657aa9e6e00d525294593532a71c0710980"),fadb7b68fc396819f3b697db7eecbc2c277a98b7:s.bind(null,"fadb7b68fc396819f3b697db7eecbc2c277a98b7"),"881d8c769217f5a927f51c01aed18d7bcf928157":s.bind(null,"881d8c769217f5a927f51c01aed18d7bcf928157"),d9abd9f686d10aff48fc75f21a1dab5a1cfb9b09:s.bind(null,"d9abd9f686d10aff48fc75f21a1dab5a1cfb9b09"),a1978c83b209e9f738502cb7918ca21a901a7c96:s.bind(null,"a1978c83b209e9f738502cb7918ca21a901a7c96"),c8fbf2226d3d8b8bb8824b3e879ec8cb4c4f1e65:s.bind(null,"c8fbf2226d3d8b8bb8824b3e879ec8cb4c4f1e65"),cd73b8090a6539c9726785159f965122a9679666:s.bind(null,"cd73b8090a6539c9726785159f965122a9679666"),"8ee1d767b1df353105291b2f2734bcf500349564":s.bind(null,"8ee1d767b1df353105291b2f2734bcf500349564"),"10da6f0b0f4fcdc40659c6e531c05ea585e3d41c":s.bind(null,"10da6f0b0f4fcdc40659c6e531c05ea585e3d41c"),"5b13081f1177b97292b36e6328c1701391100392":s.bind(null,"5b13081f1177b97292b36e6328c1701391100392"),"842e7d872f1567b69de61f77be6f577ca410c5e4":s.bind(null,"842e7d872f1567b69de61f77be6f577ca410c5e4"),a57a65b62d2591fe1ce847d0caf5c8c91c508892:s.bind(null,"a57a65b62d2591fe1ce847d0caf5c8c91c508892"),bde73ff79f4781514fc96717f7ceaa9df9dd545c:s.bind(null,"bde73ff79f4781514fc96717f7ceaa9df9dd545c"),dd5420619b99956dd11ccbca7279d7a42c665702:s.bind(null,"dd5420619b99956dd11ccbca7279d7a42c665702"),e8bb0492bc53ca0b5b588864e13ea93167a12f10:s.bind(null,"e8bb0492bc53ca0b5b588864e13ea93167a12f10"),ebe3a2ba294d038570cb707b428619f03166a9b0:s.bind(null,"ebe3a2ba294d038570cb707b428619f03166a9b0"),ffdb8ae8b2dfd69ac00ecfbf467274c24d838b26:s.bind(null,"ffdb8ae8b2dfd69ac00ecfbf467274c24d838b26"),"0e7a946332d8f585e5adf9efd9b7b091f15d22a6":s.bind(null,"0e7a946332d8f585e5adf9efd9b7b091f15d22a6"),"3ec88125203124f96d5f00d0db96ed5d8fae2fd5":s.bind(null,"3ec88125203124f96d5f00d0db96ed5d8fae2fd5"),"6cd3911728d7dece584e31782848b35b5c3e19b2":s.bind(null,"6cd3911728d7dece584e31782848b35b5c3e19b2"),"6ce78b3595eb2d1a66f96e48b4935bb19fb9dc56":s.bind(null,"6ce78b3595eb2d1a66f96e48b4935bb19fb9dc56"),"8012daa6ce07ef2c0190ba4dde6111a58a16243b":s.bind(null,"8012daa6ce07ef2c0190ba4dde6111a58a16243b"),"9833466a19d0fec5deb6b43fd2d0447723ad6b1a":s.bind(null,"9833466a19d0fec5deb6b43fd2d0447723ad6b1a"),ff0f6b5ac517fe8b32f8a0b5648b3e37b22cbd42:s.bind(null,"ff0f6b5ac517fe8b32f8a0b5648b3e37b22cbd42")}},65868:(e,a,r)=>{Promise.resolve().then(r.bind(r,69516)),Promise.resolve().then(r.bind(r,10827))},7738:(e,a,r)=>{Promise.resolve().then(r.bind(r,9162))},69516:(e,a,r)=>{"use strict";r.d(a,{UsersTable:()=>ey});var t=r(10326),s=r(17577),n=r(85999);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var l=r(57967),i=r.n(l),o=r(44099),c=r(82561),u=r(48051),b=r(93095),f=r(825),h=r(88957),m=r(17103),p=(r(83078),r(9815)),x=r(45226),g=r(34214),v=r(52067),y=r(6009),[w,j]=(0,b.b)("Tooltip",[m.D7]),N=(0,m.D7)(),P="TooltipProvider",R="tooltip.open",[C,E]=w(P),T=e=>{let{__scopeTooltip:a,delayDuration:r=700,skipDelayDuration:n=300,disableHoverableContent:d=!1,children:l}=e,[i,o]=s.useState(!0),c=s.useRef(!1),u=s.useRef(0);return s.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(C,{scope:a,isOpenDelayed:i,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(u.current),o(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:d,children:l})};T.displayName=P;var I="Tooltip",[_,U]=w(I),k=e=>{let{__scopeTooltip:a,children:r,open:n,defaultOpen:d=!1,onOpenChange:l,disableHoverableContent:i,delayDuration:o}=e,c=E(I,e.__scopeTooltip),u=N(a),[b,f]=s.useState(null),p=(0,h.M)(),x=s.useRef(0),g=i??c.disableHoverableContent,y=o??c.delayDuration,w=s.useRef(!1),[j=!1,P]=(0,v.T)({prop:n,defaultProp:d,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(R))):c.onClose(),l?.(e)}}),C=s.useMemo(()=>j?w.current?"delayed-open":"instant-open":"closed",[j]),T=s.useCallback(()=>{window.clearTimeout(x.current),w.current=!1,P(!0)},[P]),U=s.useCallback(()=>{window.clearTimeout(x.current),P(!1)},[P]),k=s.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{w.current=!0,P(!0)},y)},[y,P]);return s.useEffect(()=>()=>window.clearTimeout(x.current),[]),(0,t.jsx)(m.fC,{...u,children:(0,t.jsx)(_,{scope:a,contentId:p,open:j,stateAttribute:C,trigger:b,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{c.isOpenDelayed?k():T()},[c.isOpenDelayed,k,T]),onTriggerLeave:s.useCallback(()=>{g?U():window.clearTimeout(x.current)},[U,g]),onOpen:T,onClose:U,disableHoverableContent:g,children:r})})};k.displayName=I;var O="TooltipTrigger",A=s.forwardRef((e,a)=>{let{__scopeTooltip:r,...n}=e,d=U(O,r),l=E(O,r),i=N(r),o=s.useRef(null),b=(0,u.e)(a,o,d.onTriggerChange),f=s.useRef(!1),h=s.useRef(!1),p=s.useCallback(()=>f.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),(0,t.jsx)(m.ee,{asChild:!0,...i,children:(0,t.jsx)(x.WV.button,{"aria-describedby":d.open?d.contentId:void 0,"data-state":d.stateAttribute,...n,ref:b,onPointerMove:(0,c.M)(e.onPointerMove,e=>{"touch"===e.pointerType||h.current||l.isPointerInTransitRef.current||(d.onTriggerEnter(),h.current=!0)}),onPointerLeave:(0,c.M)(e.onPointerLeave,()=>{d.onTriggerLeave(),h.current=!1}),onPointerDown:(0,c.M)(e.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:(0,c.M)(e.onFocus,()=>{f.current||d.onOpen()}),onBlur:(0,c.M)(e.onBlur,d.onClose),onClick:(0,c.M)(e.onClick,d.onClose)})})});A.displayName=O;var[D,S]=w("TooltipPortal",{forceMount:void 0}),q="TooltipContent",Z=s.forwardRef((e,a)=>{let r=S(q,e.__scopeTooltip),{forceMount:s=r.forceMount,side:n="top",...d}=e,l=U(q,e.__scopeTooltip);return(0,t.jsx)(p.z,{present:s||l.open,children:l.disableHoverableContent?(0,t.jsx)(F,{side:n,...d,ref:a}):(0,t.jsx)($,{side:n,...d,ref:a})})}),$=s.forwardRef((e,a)=>{let r=U(q,e.__scopeTooltip),n=E(q,e.__scopeTooltip),d=s.useRef(null),l=(0,u.e)(a,d),[i,o]=s.useState(null),{trigger:c,onClose:b}=r,f=d.current,{onPointerInTransitChange:h}=n,m=s.useCallback(()=>{o(null),h(!1)},[h]),p=s.useCallback((e,a)=>{let r=e.currentTarget,t={x:e.clientX,y:e.clientY},s=function(e,a){let r=Math.abs(a.top-e.y),t=Math.abs(a.bottom-e.y),s=Math.abs(a.right-e.x),n=Math.abs(a.left-e.x);switch(Math.min(r,t,s,n)){case n:return"left";case s:return"right";case r:return"top";case t:return"bottom";default:throw Error("unreachable")}}(t,r.getBoundingClientRect());o(function(e){let a=e.slice();return a.sort((e,a)=>e.x<a.x?-1:e.x>a.x?1:e.y<a.y?-1:e.y>a.y?1:0),function(e){if(e.length<=1)return e.slice();let a=[];for(let r=0;r<e.length;r++){let t=e[r];for(;a.length>=2;){let e=a[a.length-1],r=a[a.length-2];if((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x))a.pop();else break}a.push(t)}a.pop();let r=[];for(let a=e.length-1;a>=0;a--){let t=e[a];for(;r.length>=2;){let e=r[r.length-1],a=r[r.length-2];if((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x))r.pop();else break}r.push(t)}return(r.pop(),1===a.length&&1===r.length&&a[0].x===r[0].x&&a[0].y===r[0].y)?a:a.concat(r)}(a)}([...function(e,a,r=5){let t=[];switch(a){case"top":t.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":t.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":t.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":t.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return t}(t,s),...function(e){let{top:a,right:r,bottom:t,left:s}=e;return[{x:s,y:a},{x:r,y:a},{x:r,y:t},{x:s,y:t}]}(a.getBoundingClientRect())])),h(!0)},[h]);return s.useEffect(()=>()=>m(),[m]),s.useEffect(()=>{if(c&&f){let e=e=>p(e,f),a=e=>p(e,c);return c.addEventListener("pointerleave",e),f.addEventListener("pointerleave",a),()=>{c.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",a)}}},[c,f,p,m]),s.useEffect(()=>{if(i){let e=e=>{let a=e.target,r={x:e.clientX,y:e.clientY},t=c?.contains(a)||f?.contains(a),s=!function(e,a){let{x:r,y:t}=e,s=!1;for(let e=0,n=a.length-1;e<a.length;n=e++){let d=a[e].x,l=a[e].y,i=a[n].x,o=a[n].y;l>t!=o>t&&r<(i-d)*(t-l)/(o-l)+d&&(s=!s)}return s}(r,i);t?m():s&&(m(),b())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,f,i,b,m]),(0,t.jsx)(F,{...e,ref:l})}),[L,M]=w(I,{isInside:!1}),F=s.forwardRef((e,a)=>{let{__scopeTooltip:r,children:n,"aria-label":d,onEscapeKeyDown:l,onPointerDownOutside:i,...o}=e,c=U(q,r),u=N(r),{onClose:b}=c;return s.useEffect(()=>(document.addEventListener(R,b),()=>document.removeEventListener(R,b)),[b]),s.useEffect(()=>{if(c.trigger){let e=e=>{let a=e.target;a?.contains(c.trigger)&&b()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,b]),(0,t.jsx)(f.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:b,children:(0,t.jsxs)(m.VY,{"data-state":c.stateAttribute,...u,...o,ref:a,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(g.A4,{children:n}),(0,t.jsx)(L,{scope:r,isInside:!0,children:(0,t.jsx)(y.f,{id:c.contentId,role:"tooltip",children:d||n})})]})})});Z.displayName=q;var z="TooltipArrow";s.forwardRef((e,a)=>{let{__scopeTooltip:r,...s}=e,n=N(r);return M(z,r).isInside?null:(0,t.jsx)(m.Eh,{...n,...s,ref:a})}).displayName=z;var V=r(77863);let B=s.forwardRef(({className:e,sideOffset:a=4,...r},s)=>t.jsx(Z,{ref:s,sideOffset:a,className:(0,V.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));B.displayName=Z.displayName;var Q=r(9162),Y=r(58879),X=r(68483),G=r(11870),H=r(12260),W=r(46670),J=r(3529),K=r(77109),ee=r(39447),ea=r(47035),er=r(60097),et=r(90772);function es({email:e,userId:a,userName:r,isActivated:s,onDelete:n,onResetPasswords:d}){let l=(0,K.useSession)(),i=(0,H.l)();return t.jsx(t.Fragment,{children:(0,t.jsxs)(er.h_,{children:[t.jsx(er.$F,{asChild:!0,children:t.jsx(et.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:t.jsx(ee.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(er.AW,{children:[t.jsx(er.Ju,{children:r}),t.jsx(er.VD,{}),t.jsx(er.Xi,{onClick:()=>i.push({userId:a}),children:"Edit"}),t.jsx(er.Xi,{disabled:s,children:"Send activation code"}),t.jsx(er.Xi,{onClick:d,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:"Reset password"}),t.jsx(er.VD,{}),(0,t.jsxs)(er.Xi,{onClick:n,className:"text-danger focus:bg-danger focus:text-danger-foreground",disabled:e===l.data?.user?.email,children:[t.jsx(ea.Z,{className:"mr-2 h-4 w-4"}),t.jsx("span",{children:"Delete"})]})]})]})})}var en=r(90748),ed=r(47463),el=r(74723),ei=r(7890),eo=r(34474),ec=r(54432),eu=r(31048),eb=r(96221),ef=r(43059);let eh=/\S+@\S+\.\S+/;function em({open:e,userId:a,roles:r,getUser:n,onClose:d,updateUsers:l,createUsers:i,onSaveSuccess:c}){let{alert:u}=(0,eb.s)(),{parsed:b,replace:f}=(0,H.l)(),h=a||b.userId,[m,p]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[,v]=(0,s.useState)(),[y,w]=(0,s.useState)(!h),{formState:{errors:j},watch:N,setValue:P,register:R,handleSubmit:C}=(0,el.cI)({defaultValues:{userId:h||(0,ed.Z)(),email:"",displayName:"",firstName:"",lastName:"",role:"user",avatar:"",avatar_sm:"",avatar_md:""}}),E=(0,s.useCallback)(()=>{h&&(p(!0),n(h).then(e=>{v(e),e&&(P("userId",e.userId||""),P("email",e.email||""),P("displayName",e.displayName||""),P("firstName",e.firstName||""),P("lastName",e.lastName||""),P("role",e.role||"user"),P("avatar",e.avatar||""),P("avatar_sm",e.avatar_sm||""),P("avatar_md",e.avatar_md||""))}).catch(e=>u({title:"",message:"Failed to load user: "+e.message,variant:"error",onClose:()=>f({userId:void 0})})).finally(()=>p(!1)))},[h,f,u,P,n]);(0,ef.q)(E);let T=C(e=>{(async()=>{try{g(!0),h?await o.Z.post("/api/users/update",{data:[{userId:h,data:e}]}):await o.Z.post("/api/users/add",{data:[e]}),c&&await c(),u({variant:"success",message:"User was saved successfully!",onClose:()=>{d?.(),f({userId:void 0})}})}catch(e){u({title:"",message:"Failed to save user: "+e.message,variant:"error"})}finally{g(!1)}})()}),I=N("role"),_=N("email");return m?t.jsx(G.a,{overlay:!0}):(0,t.jsxs)(t.Fragment,{children:[x&&t.jsx(G.a,{overlay:!0}),(0,t.jsxs)(ei.yo,{open:e||!!b.userId,onOpenChange:()=>{d?.(),f({userId:void 0})},children:[t.jsx(ei.aM,{asChild:!0,children:t.jsx(et.z,{className:"md:hidden",variant:"ghost",children:t.jsx(en.Z,{className:"h-6 w-6"})})}),(0,t.jsxs)(ei.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[t.jsx(ei.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,t.jsxs)(ei.bC,{children:[h?"Edit":"New"," User"]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:[(0,t.jsxs)("div",{children:[t.jsx(eu._,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(eo.Ph,{value:I,required:!0,name:"role",disabled:x,onValueChange:e=>{P("role",e)},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by status"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User role"}),r.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t.jsx(eu._,{htmlFor:"email",className:(0,V.cn)(y?"":"opacity-50"),children:"Email"}),y?(0,t.jsxs)(t.Fragment,{children:[t.jsx(ec.I,{placeholder:"Email",type:"email",className:(0,V.cn)(j.email?"border-danger ring-danger focus-visible:ring-danger":""),...R("email",{required:!0,disabled:x,pattern:{value:eh,message:"Incorrect email format"}})}),j.email&&t.jsx("span",{role:"alert",className:"text-xs text-danger",children:j.email.message})]}):t.jsx(ec.I,{disabled:!0,value:_,onChange:()=>{},className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]}),(0,t.jsxs)("div",{children:[t.jsx(eu._,{htmlFor:"displayName",children:"Display name"}),t.jsx(ec.I,{...R("displayName",{required:!0,disabled:x}),placeholder:"Display name"})]}),(0,t.jsxs)("div",{children:[t.jsx(eu._,{htmlFor:"firstName",children:"First name"}),t.jsx(ec.I,{...R("firstName",{required:!1,disabled:x}),placeholder:"First name"})]}),(0,t.jsxs)("div",{children:[t.jsx(eu._,{htmlFor:"lastName",children:"Last name"}),t.jsx(ec.I,{...R("lastName",{required:!1,disabled:x}),placeholder:"Last name"})]})]}),(0,t.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[t.jsx(ei.sw,{asChild:!0,children:t.jsx(et.z,{variant:"outline",children:"Cancel"})}),t.jsx(et.z,{onClick:T,children:"Save"})]})]})]})]})}var ep=r(83855);let ex=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function eg({selected:e,roles:a,getUsers:r,onDelete:n,toggleUserForm:d,searchUsers:l}){let i=(0,H.l)(),[o,c]=(0,s.useState)(i.parsed.role||"all"),[u,b]=(0,s.useState)(i.parsed.status||"all");return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{children:(0,t.jsxs)(eo.Ph,{value:u,onValueChange:e=>{let a="all"===e?void 0:e;b(e),r({status:a},e=>!e&&i.push({status:a}))},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by status"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User status"}),t.jsx(eo.Ql,{value:"all",children:"All statuses"}),ex.map(e=>t.jsx(eo.Ql,{value:e.value,children:e.label},e.value))]})})]})}),t.jsx("div",{children:(0,t.jsxs)(eo.Ph,{value:o,onValueChange:e=>{let a="all"===e?[]:[e];c(e),r({roles:a},e=>!e&&i.push({role:a[0]}))},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by role"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User roles"}),t.jsx(eo.Ql,{value:"all",children:"All roles"}),a.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})}),t.jsx("div",{children:(0,t.jsxs)(et.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>d(),children:[t.jsx(ep.Z,{className:"w-4 h-4 mr-1"}),"New User"]})})]})}function ev({open:e,userIds:a,roles:r,onClose:n,updateUsers:d,onSaveSuccess:l}){let{alert:i}=(0,eb.s)(),{parsed:c,replace:u}=(0,H.l)(),[b,f]=(0,s.useState)(!1),{watch:h,setValue:m,handleSubmit:p}=(0,el.cI)({defaultValues:{role:""}}),x=(0,s.useCallback)(()=>{n?.(),u({bulkEdit:void 0}),m("role","")},[n,u,m]),g=p(e=>{(async()=>{try{f(!0),a.length&&(await o.Z.post("/api/users/update",{data:a.map(a=>({userId:a,data:e}))}),l&&await l()),i({variant:"success",message:"Users updated",onClose:x})}catch(e){i({title:"",message:"Failed to update users: "+e.message,variant:"error"})}finally{f(!1)}})()}),v=h("role");return t.jsx(t.Fragment,{children:t.jsx(ei.yo,{open:"1"===c.bulkEdit,onOpenChange:e=>{e||x()},children:(0,t.jsxs)(ei.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[t.jsx(ei.Tu,{className:"py-2 px-4 border-b border-b-border",children:t.jsx(ei.bC,{children:"Bulk edit users"})}),t.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,t.jsxs)("div",{children:[t.jsx(eu._,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(eo.Ph,{value:v,required:!0,name:"role",disabled:b,onValueChange:e=>{m("role",e)},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"-- select role --"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User role"}),r.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]})}),(0,t.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[t.jsx(ei.sw,{asChild:!0,children:t.jsx(et.z,{variant:"outline",children:"Cancel"})}),t.jsx(et.z,{onClick:g,disabled:!v,children:"Save"})]})]})})})}function ey({users:e,roles:a,getUsers:r,deleteUsers:l,getUser:c,updateUsers:u,createUsers:b,searchUsers:f,resetUsersPasswords:h}){let m=(0,H.l)(),{mode:p}=(0,J.b)(),[x,g]=(0,s.useState)(e),[v,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)([]),[N,P]=(0,s.useState)(!1),{confirm:R}=(0,W.t)(),C=(0,s.useCallback)(async(a,r)=>{y(!0);let t=(await o.Z.get("/api/users?data="+JSON.stringify({...m.parsed,roles:m.parsed.role?[m.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;t.error?n.Am.error(t.error):(g(t),j([])),r?.(t.error,t),y(!1)},[r,m,e]),E=(0,s.useCallback)((e,a)=>{let r=x.data.filter(a=>e.includes(a.userId)).map(e=>e.displayName);R(()=>{(async()=>{try{y(!0),await o.Z.delete("/api/users?data="+JSON.stringify(e)),await C(),a?.()}catch(e){n.Am.error(e.message)}finally{y(!1)}})()},{title:"Delete "+(r.length>1?"users":"user"),message:`<p>Are you sure you want to delete:</p> ${r.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[R,l,C,x]),I=(0,s.useCallback)((e,a)=>{let r=x.data.filter(a=>e.includes(a.userId)).map(e=>e.displayName);R(()=>{(async()=>{try{y(!0),await o.Z.post("/api/users/reset-passwords",{usersIds:e}),n.Am.success("Passwords reset successful!"),a?.()}catch(e){n.Am.error(e.message)}finally{y(!1)}})()},{title:"Reset "+(r.length>1?"users passwords":"user password"),message:`<p>Are you sure you want to reset users passwords:</p> ${r.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Reset",danger:!0})},[R,h,x]),_=m.parsed.userId||N?t.jsx(em,{roles:a,open:N,getUser:c,updateUsers:u,createUsers:b,onSaveSuccess:C,onClose:()=>P(!1)}):null,U=t.jsx(ev,{roles:a,open:N,userIds:w.map(e=>x.data[e].userId),updateUsers:u,onSaveSuccess:()=>C({page:x.page})}),O=(0,s.useMemo)(()=>"view"===p,[p]);return(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx(Q.DataTable,{title:"Users",selectable:!O,selectedIndexes:w,onSelect:j,search:{inputPlaceholder:"Search users"},headerActions:t.jsx(eg,{users:x,roles:a,selected:w.map(e=>x.data[e].userId),onDelete:E,getUsers:C,searchUsers:f,toggleUserForm:()=>P(e=>!e)}),columns:[{name:"Display name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellRenderer(e){let a=x.data[e.rowIndex];return t.jsx(T,{delayDuration:0,children:(0,t.jsxs)(k,{children:[t.jsx(A,{asChild:!0,children:t.jsx(d,{className:(0,V.cn)(a.activationDate?"text-green-400":"text-gray-400","w-4 h-4")})}),!!a.activationDate&&t.jsx(B,{children:(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Activation date: ",i()(a.activationDate).format("LLL")]})})]})})}},{name:"Action",align:"right",cellRenderer(e){let a=x.data[e.rowIndex];return t.jsx(es,{email:a.email,userId:a.userId,userName:a.displayName,isActivated:!!a.activationDate,onDelete:()=>E([a.userId]),onResetPasswords:()=>I([a.userId])})}}],data:x.data.map(e=>[e.displayName,e.email,a.filter(a=>a.name===e.role)[0]?.description||e.role,e.lastLoginDate?i()(e.lastLoginDate).format("LLL"):"",""])}),t.jsx(X.Z,{}),t.jsx("div",{className:"p-2",children:t.jsx(Y.t,{currentPage:x.page,totalPages:x.totalPages,disabled:v,limit:x.limit||x.totalRows,totalRows:x.totalRows,collectionName:"users",onPaginate:e=>C({page:e},(e,a)=>!e&&m.push({page:a?.page||x.page})),hideControls:!1,hideSummary:!1})}),_,U,v&&t.jsx(G.a,{overlay:!0})]})}},31048:(e,a,r)=>{"use strict";r.d(a,{_:()=>o});var t=r(10326),s=r(17577),n=r(34478),d=r(28671),l=r(77863);let i=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef(({className:e,secondary:a,error:r,...s},d)=>t.jsx(n.f,{ref:d,className:(0,l.cn)(i(),a&&"text-xs",r?"text-danger":"",e),...s}));o.displayName=n.f.displayName},34474:(e,a,r)=>{"use strict";r.d(a,{Bw:()=>p,DI:()=>u,Ph:()=>c,Ql:()=>g,i4:()=>f,ki:()=>b,n5:()=>x});var t=r(10326),s=r(17577),n=r(18792),d=r(941),l=r(96633),i=r(32933),o=r(77863);let c=n.fC,u=n.ZA,b=n.B4,f=s.forwardRef(({className:e,children:a,error:r,...s},l)=>(0,t.jsxs)(n.xz,{ref:l,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r&&"border-danger",e),...s,children:[a,t.jsx(n.JO,{asChild:!0,children:t.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));f.displayName=n.xz.displayName;let h=s.forwardRef(({className:e,...a},r)=>t.jsx(n.u_,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(l.Z,{className:"h-4 w-4"})}));h.displayName=n.u_.displayName;let m=s.forwardRef(({className:e,...a},r)=>t.jsx(n.$G,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(d.Z,{className:"h-4 w-4"})}));m.displayName=n.$G.displayName;let p=s.forwardRef(({className:e,children:a,position:r="popper",...s},d)=>t.jsx(n.h_,{children:(0,t.jsxs)(n.VY,{ref:d,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[t.jsx(h,{}),t.jsx(n.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(m,{})]})}));p.displayName=n.VY.displayName;let x=s.forwardRef(({className:e,...a},r)=>t.jsx(n.__,{ref:r,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));x.displayName=n.__.displayName;let g=s.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(n.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(n.wU,{children:t.jsx(i.Z,{className:"h-4 w-4"})})}),t.jsx(n.eT,{children:a})]}));g.displayName=n.ck.displayName,s.forwardRef(({className:e,...a},r)=>t.jsx(n.Z0,{ref:r,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=n.Z0.displayName},68483:(e,a,r)=>{"use strict";r.d(a,{Z:()=>c});var t=r(10326),s=r(17577),n=r(45226),d="horizontal",l=["horizontal","vertical"],i=s.forwardRef((e,a)=>{let{decorative:r,orientation:s=d,...i}=e,o=l.includes(s)?s:d;return(0,t.jsx)(n.WV.div,{"data-orientation":o,...r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...i,ref:a})});i.displayName="Separator";var o=r(77863);let c=s.forwardRef(({className:e,orientation:a="horizontal",decorative:r=!0,...s},n)=>t.jsx(i,{ref:n,decorative:r,orientation:a,className:(0,o.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...s}));c.displayName=i.displayName},43059:(e,a,r)=>{"use strict";r.d(a,{q:()=>s});var t=r(17577);function s(e){return(0,t.useRef)(0),null}},39447:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},17872:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});var t=r(19510),s=r(21113),n=r(24569),d=r(46697);function l(){return t.jsx(n.V,{children:t.jsx(d.Zb,{children:t.jsx(d.aY,{className:"p-0",children:t.jsx(s.w,{loading:!0,maxRows:25,columns:[{name:"Display Name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellClassName:"w-20"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},13005:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(19510),s=r(73508),n=r(43767),d=r(24569),l=r(85431),i=r(46697),o=r(68570);let c=(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/components/table.tsx`),{__esModule:u,$$typeof:b}=c;c.default;let f=(0,o.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/app/(dashboard)/users/components/table.tsx#UsersTable`);async function h({searchParams:{page:e,role:a,status:r}}){let[o,c]=await Promise.all([(0,s.getUsers)({limit:25,page:e?Number(e):void 0,roles:a?[a]:void 0,status:r}),(0,n.getRoles)()]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(l.D,{children:"Users"}),t.jsx(d.V,{children:o.error?t.jsx(i.Zb,{className:"border-danger bg-danger/20 text-center",children:t.jsx(i.aY,{children:t.jsx("div",{className:"text-danger",children:o.error})})}):t.jsx(i.Zb,{children:t.jsx(i.aY,{className:"p-0",children:t.jsx(f,{users:o,roles:c,getUsers:s.getUsers,deleteUsers:s.deleteUsers,getUser:s.getUser,updateUsers:s.updateUsers,createUsers:s.createUsers,searchUsers:s.searchUsers,resetUsersPasswords:s.resetUsersPasswords})})})})]})}},43767:(e,a,r)=>{"use strict";r.r(a),r.d(a,{getRoles:()=>l});var t=r(24330);r(60166);var s=r(10413);async function n(){return await s.Z.query.userRoles.findMany()}var d=r(57435);async function l(){try{return await n()}catch(e){return d.Z.error("getRoles ERROR:",e),[]}}(0,r(40618).h)([l]),(0,t.j)("8ee1d767b1df353105291b2f2734bcf500349564",l)},73508:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>R,$$ACTION_1:()=>E,$$ACTION_2:()=>_,$$ACTION_3:()=>k,$$ACTION_4:()=>A,createUsers:()=>I,deleteUsers:()=>T,getFullUser:()=>N,getUser:()=>j,getUsers:()=>P,isEmailRegistered:()=>w,resetUsersPasswords:()=>y,searchUsers:()=>C,setPassword:()=>O,updateUsers:()=>U});var t=r(24330);r(60166);var s=r(67096),n=r.n(s),d=r(57745),l=r(9576),i=r(30900),o=r(10413),c=r(88182),u=r(47625);async function b(e){for(let a of e)await o.Z.update(c.users).set({password:""}).where((0,d.eq)(c.users.userId,a));return!0}async function f(e){for(let a of e){let e=new Date;await o.Z.update(c.users).set({deletedAt:e,email:a,displayName:"Former user",firstName:null,lastName:null,avatar:null,avatar_md:null,avatar_sm:null}).where((0,d.eq)(c.users.userId,a))}return!0}async function h(e,a){let r=[];for(let a of e){let e=await n().genSalt(10),t=await n().hash(a.password||(0,l.Z)(),e);r.push({...a,password:t,userId:a.userId||(0,l.Z)()})}let t={inserted:[],success:!1};try{if(await o.Z.insert(c.users).values(r),a?.returnInserted){let e=await (0,u.yT)({userIds:r.map(e=>e.userId)});t.inserted=e.data}t.success=!0}catch(e){t.error=e.message}finally{return t}}async function m(e,a){let r=[];for(let{userId:t,data:s}of e)try{let e=(0,i.Z)(t)?(0,d.eq)(c.users.userId,t):(0,d.eq)(c.users.email,t);delete s.id,delete s.createdAt,delete s.updatedAt,delete s.email,delete s.userId,await o.Z.update(c.users).set(s).where(e);let n=a?.returnUpdated?await (0,u.IQ)(t):void 0;r.push({userId:t,user:n})}catch(e){r.push({userId:t,error:e.message})}return r}var p=r(57435),x=r(70733),g=r(66267),v=r(40618);let y=b;async function w(e){try{let a=await (0,u.IQ)(e);return{yes:!!a,isActive:!!a?.isActive}}catch(e){return p.Z.error("getUser ERROR:",e),{errors:[e.message],yes:!1}}}async function j(e){try{return await (0,g.isAllowed)("get_user"),await (0,u.IQ)(e)||null}catch(e){return p.Z.error("getUser ERROR:",e),null}}async function N(e){try{return await (0,g.isAllowed)("get_user"),await (0,u.C)(e)||null}catch(e){return p.Z.error("getFullUser ERROR:",e),null}}let P=(0,t.j)("8c1706ef39b14194906fc76d293e4dcba85ae92a",R);async function R(...e){try{return await (0,g.isAllowed)("get_users"),await (0,u.yT)(...e)}catch(e){return{...u.Ko,error:e.message}}}let C=(0,t.j)("8c790f37fa8234c4a8ce301807f4b7a9f034648a",E);async function E(...e){try{return await (0,g.isAllowed)("search_users"),await (0,u.yT)(...e)}catch(e){return{...u.Ko,error:e.message}}}async function T(e){if(await (0,g.isAllowed)("delete_users"),e.length){let{data:a}=await (0,u.yT)({userIds:e});await f(e)}return!0}let I=(0,t.j)("8ea40d757733a9a127e9765a7140bc779ddbb8e7",_);async function _(...e){try{await (0,g.isAllowed)("create_users");let a=await h(...e);for(let a of e[0])try{await (0,x.n)({userId:a.userId,hoursValid:1})}catch(e){}return a}catch(e){throw p.Z.error("createUsers ERROR",e),e}}let U=(0,t.j)("b4602a4425d33d11cfc56f383cd38b2d337b616b",k);async function k(...e){try{return await (0,g.isAllowed)("update_users"),await m(...e)}catch(e){throw p.Z.error("updateUsers ERROR",e),e}}let O=(0,t.j)("c570869931a7120fbb0e8c50ee63e44e06c643c4",A);async function A(e){try{if(!e.password)throw Error("Missing: password");if(!e.email)throw Error("Missing: email");if(e.password.length<6)throw Error("Password is too short: min 6 characters");if(e.password!==e.passwordConfirm)throw Error("Password confirmation does not match!");let a=await n().genSalt(10),r=await n().hash(e.password,a),t=await m([{userId:e.email,data:{password:r}}]);if(t.filter(e=>e.error).length)throw Error(t.filter(e=>e.error).map(e=>e.error).join(", "));return{success:!0}}catch(e){return p.Z.error("setPassword ERROR",e),{success:!1,errors:[e.message]}}}(0,v.h)([y,w,j,N,P,C,T,I,U,O]),(0,t.j)("f5824657aa9e6e00d525294593532a71c0710980",y),(0,t.j)("027eaab5282a2c317a98e2ad292274851b3bcf57",w),(0,t.j)("fadb7b68fc396819f3b697db7eecbc2c277a98b7",j),(0,t.j)("8e9d57f452565ab305cc2fbbbba1c8a1f54a0aa5",N),(0,t.j)("8fd784abb984eeb28ba830dcb1481931d0e358f3",P),(0,t.j)("bed5e548eff00631b9e73882213f7b3ee5cab46e",C),(0,t.j)("27db4383c25240109bbeafe05b6d3ef382fbec77",T),(0,t.j)("caa73a89410e9b2187b05025023b884b86e92192",I),(0,t.j)("9888b996d0f87bf4c69743b1c05f964cda523faa",U),(0,t.j)("023c73bed53bbc4b3fe79235d6775c2226f30fc9",O)},24569:(e,a,r)=>{"use strict";r.d(a,{V:()=>n});var t=r(19510),s=r(50650);function n({className:e,...a}){return t.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,r)=>{"use strict";r.d(a,{w:()=>l});var t=r(68570);let s=(0,t.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx`),{__esModule:n,$$typeof:d}=s;s.default;let l=(0,t.createProxy)(String.raw`/home/morris/Documents/NEOTREE/REPOS/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,r)=>{"use strict";r.d(a,{Zb:()=>d,aY:()=>l});var t=r(19510),s=r(71159),n=r(50650);let d=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));d.displayName="Card",s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",s.forwardRef(({className:e,...a},r)=>t.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",s.forwardRef(({className:e,...a},r)=>t.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let l=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...a}));l.displayName="CardContent",s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},70733:(e,a,r)=>{"use strict";r.d(a,{n:()=>l});var t=r(51744),s=r.n(t),n=r(10413),d=r(88182);async function l({userId:e,hoursValid:a}){return(await n.Z.insert(d.tokens).values({userId:e,validUntil:s()(new Date).add(a,"hour").toDate(),token:Math.floor(1e5+9e5*Math.random())}).returning())[0]}}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[1633,1744,9937,3788,1490,9092,5802,7708,2685,6462,4723,4228,8065,7967,413,6267,7368,6555,1271,1344,9655,9162],()=>r(13592));module.exports=t})();