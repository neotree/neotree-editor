(()=>{var e={};e.id=7297,e.ids=[7297],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},18345:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>f,pages:()=>c,routeModule:()=>b,tree:()=>o}),r(13005),r(17872),r(56367),r(12699),r(69684),r(96560);var t=r(23191),s=r(88716),i=r(37922),n=r.n(i),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(a,l);let o=["",{children:["(dashboard)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,13005)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/users/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,17872)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/users/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,56367)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,12699)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,69684)),"/home/farai/Workbench/Neotree/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/home/farai/Workbench/Neotree/neotree-editor/app/not-found.tsx"]}],c=["/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/users/page.tsx"],f="/(dashboard)/users/page",u={require:r,loadChunk:()=>Promise.resolve()},b=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},15593:(e,a,r)=>{let t={"10b38722e0b558338e7c60a6793b40069bd09a9a":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_1),"306ae325ae902ce3918cdc966cf724751d663da6":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.searchUsers),"321749afb33e42d61bb9a059f061397c54d56b94":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getFullUser),"532291ef3a85133f90dc76ebcd097d6b54d6560b":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_2),"59400fdc36a14125fac6f026d96857f409b7faf3":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.createUsers),"6d3917e66baf6eb473f54ad34bcb53ed5bafb5d7":()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.deleteUsers),c464d9555417870f08c6d6f80d86fd0e7889d1be:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_4),c73d110f067e0290845f4cbf431eb3921327e0ee:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getUsers),cc9308b01cb91d27ae2a2637effbfbfa43a8a7ab:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.isEmailRegistered),d7fe7a712e075e52a486042abf570c07ad6d5147:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_3),ddf1c556c48ef3f16eeb72ff89554f731266d5ae:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.setPassword),e108da343bf6d6905ab22c73b3da576908ae7f90:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.$$ACTION_0),f7fa4b194758cbf00b3a7cabd082254b9aef5877:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.getUser),fbeba7c767d640e5de897f4b9e6e274a6ec73d2d:()=>Promise.resolve().then(r.bind(r,73508)).then(e=>e.updateUsers),"0f298125b479af528a1665109806dd8c7cbf485f":()=>Promise.resolve().then(r.bind(r,66267)).then(e=>e.canAccessPage),e7ff353478ea7638eb62d92b3a19672b1cefa03f:()=>Promise.resolve().then(r.bind(r,66267)).then(e=>e.isAllowed),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3687a5d3a69097dd7418edaf538e63f38f229ea5":()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getSession),ff4d8db268db4669375c09f8725893bf00f6ae28:()=>Promise.resolve().then(r.bind(r,40801)).then(e=>e.getAuthenticatedUser),"50a20a3f0c68b90dbbde388e557668dd37ce6019":()=>Promise.resolve().then(r.bind(r,43767)).then(e=>e.getRoles),"559815287213d06ead0c877c60e184e5031ac06e":()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.updateSys),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.$$ACTION_1),b5d1e928850507f1eade38e5d8700567fd19649e:()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.$$ACTION_0),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:()=>Promise.resolve().then(r.bind(r,60563)).then(e=>e.getSys),"4bccbc621808e65939704fa615db3606c6862204":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.$$ACTION_0),"50f9349ef19cfd3c0ac7777709536f6f53cfa025":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.importRemoteScripts),"522709ab77b10b961291141716509b467eed511d":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.$$ACTION_1),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.getSites),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.getSitesWithoutConfidentialData),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.getSite),ea276d8b8dc674a1b891605b84c4b6addb452962:()=>Promise.resolve().then(r.bind(r,1750)).then(e=>e.saveSites),"3628525f9968b3410608c9eeaf253358ba48d9fe":()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.publishData),"49172b38c10122728aa1b2fc14d20f7760f2abd3":()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.getEditorDetails),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.$$ACTION_1),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.countAllDrafts),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.revalidatePath),e584eea53fe697cdba6835e3a5f23e256760fd14:()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.$$ACTION_0),f28667e6446bdcb1da1b47a90e98f363919ccac6:()=>Promise.resolve().then(r.bind(r,53911)).then(e=>e.discardDrafts)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"10b38722e0b558338e7c60a6793b40069bd09a9a":s.bind(null,"10b38722e0b558338e7c60a6793b40069bd09a9a"),"306ae325ae902ce3918cdc966cf724751d663da6":s.bind(null,"306ae325ae902ce3918cdc966cf724751d663da6"),"321749afb33e42d61bb9a059f061397c54d56b94":s.bind(null,"321749afb33e42d61bb9a059f061397c54d56b94"),"532291ef3a85133f90dc76ebcd097d6b54d6560b":s.bind(null,"532291ef3a85133f90dc76ebcd097d6b54d6560b"),"59400fdc36a14125fac6f026d96857f409b7faf3":s.bind(null,"59400fdc36a14125fac6f026d96857f409b7faf3"),"6d3917e66baf6eb473f54ad34bcb53ed5bafb5d7":s.bind(null,"6d3917e66baf6eb473f54ad34bcb53ed5bafb5d7"),c464d9555417870f08c6d6f80d86fd0e7889d1be:s.bind(null,"c464d9555417870f08c6d6f80d86fd0e7889d1be"),c73d110f067e0290845f4cbf431eb3921327e0ee:s.bind(null,"c73d110f067e0290845f4cbf431eb3921327e0ee"),cc9308b01cb91d27ae2a2637effbfbfa43a8a7ab:s.bind(null,"cc9308b01cb91d27ae2a2637effbfbfa43a8a7ab"),d7fe7a712e075e52a486042abf570c07ad6d5147:s.bind(null,"d7fe7a712e075e52a486042abf570c07ad6d5147"),ddf1c556c48ef3f16eeb72ff89554f731266d5ae:s.bind(null,"ddf1c556c48ef3f16eeb72ff89554f731266d5ae"),e108da343bf6d6905ab22c73b3da576908ae7f90:s.bind(null,"e108da343bf6d6905ab22c73b3da576908ae7f90"),f7fa4b194758cbf00b3a7cabd082254b9aef5877:s.bind(null,"f7fa4b194758cbf00b3a7cabd082254b9aef5877"),fbeba7c767d640e5de897f4b9e6e274a6ec73d2d:s.bind(null,"fbeba7c767d640e5de897f4b9e6e274a6ec73d2d"),"0f298125b479af528a1665109806dd8c7cbf485f":s.bind(null,"0f298125b479af528a1665109806dd8c7cbf485f"),e7ff353478ea7638eb62d92b3a19672b1cefa03f:s.bind(null,"e7ff353478ea7638eb62d92b3a19672b1cefa03f"),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":s.bind(null,"31571c1d1cec06f4e312c633fd04f0420aecf3f0"),"3687a5d3a69097dd7418edaf538e63f38f229ea5":s.bind(null,"3687a5d3a69097dd7418edaf538e63f38f229ea5"),ff4d8db268db4669375c09f8725893bf00f6ae28:s.bind(null,"ff4d8db268db4669375c09f8725893bf00f6ae28"),"50a20a3f0c68b90dbbde388e557668dd37ce6019":s.bind(null,"50a20a3f0c68b90dbbde388e557668dd37ce6019"),"559815287213d06ead0c877c60e184e5031ac06e":s.bind(null,"559815287213d06ead0c877c60e184e5031ac06e"),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":s.bind(null,"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1"),b5d1e928850507f1eade38e5d8700567fd19649e:s.bind(null,"b5d1e928850507f1eade38e5d8700567fd19649e"),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:s.bind(null,"bb5715444ca1fc8c6b68cca354c0a3615e5615e2"),"4bccbc621808e65939704fa615db3606c6862204":s.bind(null,"4bccbc621808e65939704fa615db3606c6862204"),"50f9349ef19cfd3c0ac7777709536f6f53cfa025":s.bind(null,"50f9349ef19cfd3c0ac7777709536f6f53cfa025"),"522709ab77b10b961291141716509b467eed511d":s.bind(null,"522709ab77b10b961291141716509b467eed511d"),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":s.bind(null,"60d4bc4dbf8a7e1570162873f97e0d36be03fa83"),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":s.bind(null,"65af2414f4ea72aa53dd5bd16d03045d9ac81d36"),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":s.bind(null,"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc"),ea276d8b8dc674a1b891605b84c4b6addb452962:s.bind(null,"ea276d8b8dc674a1b891605b84c4b6addb452962"),"3628525f9968b3410608c9eeaf253358ba48d9fe":s.bind(null,"3628525f9968b3410608c9eeaf253358ba48d9fe"),"49172b38c10122728aa1b2fc14d20f7760f2abd3":s.bind(null,"49172b38c10122728aa1b2fc14d20f7760f2abd3"),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":s.bind(null,"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3"),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":s.bind(null,"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828"),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:s.bind(null,"bc2ee616f8ba694d4ae301d1c34ff957771a7cfb"),e584eea53fe697cdba6835e3a5f23e256760fd14:s.bind(null,"e584eea53fe697cdba6835e3a5f23e256760fd14"),f28667e6446bdcb1da1b47a90e98f363919ccac6:s.bind(null,"f28667e6446bdcb1da1b47a90e98f363919ccac6")}},8532:(e,a,r)=>{Promise.resolve().then(r.bind(r,69516)),Promise.resolve().then(r.bind(r,10827))},74393:(e,a,r)=>{Promise.resolve().then(r.bind(r,77228))},69516:(e,a,r)=>{"use strict";r.d(a,{UsersTable:()=>ey});var t=r(10326),s=r(17577),i=r(85999);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var d=r(57967),l=r.n(d),o=r(44099),c=r(82561),f=r(48051),u=r(93095),b=r(825),h=r(88957),p=r(17103),m=(r(83078),r(9815)),x=r(45226),g=r(34214),v=r(52067),y=r(6009),[j,w]=(0,u.b)("Tooltip",[p.D7]),N=(0,p.D7)(),P="TooltipProvider",C="tooltip.open",[k,R]=j(P),_=e=>{let{__scopeTooltip:a,delayDuration:r=700,skipDelayDuration:i=300,disableHoverableContent:n=!1,children:d}=e,[l,o]=s.useState(!0),c=s.useRef(!1),f=s.useRef(0);return s.useEffect(()=>{let e=f.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(k,{scope:a,isOpenDelayed:l,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(f.current),o(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>o(!0),i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:n,children:d})};_.displayName=P;var I="Tooltip",[T,E]=j(I),U=e=>{let{__scopeTooltip:a,children:r,open:i,defaultOpen:n=!1,onOpenChange:d,disableHoverableContent:l,delayDuration:o}=e,c=R(I,e.__scopeTooltip),f=N(a),[u,b]=s.useState(null),m=(0,h.M)(),x=s.useRef(0),g=l??c.disableHoverableContent,y=o??c.delayDuration,j=s.useRef(!1),[w=!1,P]=(0,v.T)({prop:i,defaultProp:n,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(C))):c.onClose(),d?.(e)}}),k=s.useMemo(()=>w?j.current?"delayed-open":"instant-open":"closed",[w]),_=s.useCallback(()=>{window.clearTimeout(x.current),j.current=!1,P(!0)},[P]),E=s.useCallback(()=>{window.clearTimeout(x.current),P(!1)},[P]),U=s.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{j.current=!0,P(!0)},y)},[y,P]);return s.useEffect(()=>()=>window.clearTimeout(x.current),[]),(0,t.jsx)(p.fC,{...f,children:(0,t.jsx)(T,{scope:a,contentId:m,open:w,stateAttribute:k,trigger:u,onTriggerChange:b,onTriggerEnter:s.useCallback(()=>{c.isOpenDelayed?U():_()},[c.isOpenDelayed,U,_]),onTriggerLeave:s.useCallback(()=>{g?E():window.clearTimeout(x.current)},[E,g]),onOpen:_,onClose:E,disableHoverableContent:g,children:r})})};U.displayName=I;var A="TooltipTrigger",Z=s.forwardRef((e,a)=>{let{__scopeTooltip:r,...i}=e,n=E(A,r),d=R(A,r),l=N(r),o=s.useRef(null),u=(0,f.e)(a,o,n.onTriggerChange),b=s.useRef(!1),h=s.useRef(!1),m=s.useCallback(()=>b.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,t.jsx)(p.ee,{asChild:!0,...l,children:(0,t.jsx)(x.WV.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...i,ref:u,onPointerMove:(0,c.M)(e.onPointerMove,e=>{"touch"===e.pointerType||h.current||d.isPointerInTransitRef.current||(n.onTriggerEnter(),h.current=!0)}),onPointerLeave:(0,c.M)(e.onPointerLeave,()=>{n.onTriggerLeave(),h.current=!1}),onPointerDown:(0,c.M)(e.onPointerDown,()=>{b.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:(0,c.M)(e.onFocus,()=>{b.current||n.onOpen()}),onBlur:(0,c.M)(e.onBlur,n.onClose),onClick:(0,c.M)(e.onClick,n.onClose)})})});Z.displayName=A;var[q,D]=j("TooltipPortal",{forceMount:void 0}),S="TooltipContent",$=s.forwardRef((e,a)=>{let r=D(S,e.__scopeTooltip),{forceMount:s=r.forceMount,side:i="top",...n}=e,d=E(S,e.__scopeTooltip);return(0,t.jsx)(m.z,{present:s||d.open,children:d.disableHoverableContent?(0,t.jsx)(F,{side:i,...n,ref:a}):(0,t.jsx)(O,{side:i,...n,ref:a})})}),O=s.forwardRef((e,a)=>{let r=E(S,e.__scopeTooltip),i=R(S,e.__scopeTooltip),n=s.useRef(null),d=(0,f.e)(a,n),[l,o]=s.useState(null),{trigger:c,onClose:u}=r,b=n.current,{onPointerInTransitChange:h}=i,p=s.useCallback(()=>{o(null),h(!1)},[h]),m=s.useCallback((e,a)=>{let r=e.currentTarget,t={x:e.clientX,y:e.clientY},s=function(e,a){let r=Math.abs(a.top-e.y),t=Math.abs(a.bottom-e.y),s=Math.abs(a.right-e.x),i=Math.abs(a.left-e.x);switch(Math.min(r,t,s,i)){case i:return"left";case s:return"right";case r:return"top";case t:return"bottom";default:throw Error("unreachable")}}(t,r.getBoundingClientRect());o(function(e){let a=e.slice();return a.sort((e,a)=>e.x<a.x?-1:e.x>a.x?1:e.y<a.y?-1:e.y>a.y?1:0),function(e){if(e.length<=1)return e.slice();let a=[];for(let r=0;r<e.length;r++){let t=e[r];for(;a.length>=2;){let e=a[a.length-1],r=a[a.length-2];if((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x))a.pop();else break}a.push(t)}a.pop();let r=[];for(let a=e.length-1;a>=0;a--){let t=e[a];for(;r.length>=2;){let e=r[r.length-1],a=r[r.length-2];if((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x))r.pop();else break}r.push(t)}return(r.pop(),1===a.length&&1===r.length&&a[0].x===r[0].x&&a[0].y===r[0].y)?a:a.concat(r)}(a)}([...function(e,a,r=5){let t=[];switch(a){case"top":t.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":t.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":t.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":t.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return t}(t,s),...function(e){let{top:a,right:r,bottom:t,left:s}=e;return[{x:s,y:a},{x:r,y:a},{x:r,y:t},{x:s,y:t}]}(a.getBoundingClientRect())])),h(!0)},[h]);return s.useEffect(()=>()=>p(),[p]),s.useEffect(()=>{if(c&&b){let e=e=>m(e,b),a=e=>m(e,c);return c.addEventListener("pointerleave",e),b.addEventListener("pointerleave",a),()=>{c.removeEventListener("pointerleave",e),b.removeEventListener("pointerleave",a)}}},[c,b,m,p]),s.useEffect(()=>{if(l){let e=e=>{let a=e.target,r={x:e.clientX,y:e.clientY},t=c?.contains(a)||b?.contains(a),s=!function(e,a){let{x:r,y:t}=e,s=!1;for(let e=0,i=a.length-1;e<a.length;i=e++){let n=a[e].x,d=a[e].y,l=a[i].x,o=a[i].y;d>t!=o>t&&r<(l-n)*(t-d)/(o-d)+n&&(s=!s)}return s}(r,l);t?p():s&&(p(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,b,l,u,p]),(0,t.jsx)(F,{...e,ref:d})}),[M,L]=j(I,{isInside:!1}),F=s.forwardRef((e,a)=>{let{__scopeTooltip:r,children:i,"aria-label":n,onEscapeKeyDown:d,onPointerDownOutside:l,...o}=e,c=E(S,r),f=N(r),{onClose:u}=c;return s.useEffect(()=>(document.addEventListener(C,u),()=>document.removeEventListener(C,u)),[u]),s.useEffect(()=>{if(c.trigger){let e=e=>{let a=e.target;a?.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),(0,t.jsx)(b.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:(0,t.jsxs)(p.VY,{"data-state":c.stateAttribute,...f,...o,ref:a,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(g.A4,{children:i}),(0,t.jsx)(M,{scope:r,isInside:!0,children:(0,t.jsx)(y.f,{id:c.contentId,role:"tooltip",children:n||i})})]})})});$.displayName=S;var z="TooltipArrow";s.forwardRef((e,a)=>{let{__scopeTooltip:r,...s}=e,i=N(r);return L(z,r).isInside?null:(0,t.jsx)(p.Eh,{...i,...s,ref:a})}).displayName=z;var V=r(77863);let W=s.forwardRef(({className:e,sideOffset:a=4,...r},s)=>t.jsx($,{ref:s,sideOffset:a,className:(0,V.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));W.displayName=$.displayName;var B=r(77228),Q=r(58879),G=r(8281),Y=r(11870),X=r(12260),H=r(46670),J=r(3529),K=r(77109),ee=r(39447),ea=r(47035),er=r(60097),et=r(90772);function es({email:e,userId:a,userName:r,isActivated:s,onDelete:i}){let n=(0,K.useSession)(),d=(0,X.l)();return t.jsx(t.Fragment,{children:(0,t.jsxs)(er.h_,{children:[t.jsx(er.$F,{asChild:!0,children:t.jsx(et.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:t.jsx(ee.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(er.AW,{children:[t.jsx(er.Ju,{children:r}),t.jsx(er.VD,{}),t.jsx(er.Xi,{onClick:()=>d.push({userId:a}),children:"Edit"}),t.jsx(er.Xi,{disabled:s,children:"Send activation code"}),t.jsx(er.VD,{}),(0,t.jsxs)(er.Xi,{onClick:i,className:"text-danger focus:bg-danger focus:text-danger-foreground",disabled:e===n.data?.user?.email,children:[t.jsx(ea.Z,{className:"mr-2 h-4 w-4"}),t.jsx("span",{children:"Delete"})]})]})]})})}var ei=r(90748),en=r(47463),ed=r(74723),el=r(7890),eo=r(34474),ec=r(54432),ef=r(31048),eu=r(96221),eb=r(43059);let eh=/\S+@\S+\.\S+/;function ep({open:e,userId:a,roles:r,getUser:i,onClose:n,updateUsers:d,createUsers:l,onSaveSuccess:c}){let{alert:f}=(0,eu.s)(),{parsed:u,replace:b}=(0,X.l)(),h=a||u.userId,[p,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[,v]=(0,s.useState)(),[y,j]=(0,s.useState)(!h),{formState:{errors:w},watch:N,setValue:P,register:C,handleSubmit:k}=(0,ed.cI)({defaultValues:{userId:h||(0,en.Z)(),email:"",displayName:"",firstName:"",lastName:"",role:"user",avatar:"",avatar_sm:"",avatar_md:""}}),R=(0,s.useCallback)(()=>{h&&(m(!0),i(h).then(e=>{v(e),e&&(P("userId",e.userId||""),P("email",e.email||""),P("displayName",e.displayName||""),P("firstName",e.firstName||""),P("lastName",e.lastName||""),P("role",e.role||"user"),P("avatar",e.avatar||""),P("avatar_sm",e.avatar_sm||""),P("avatar_md",e.avatar_md||""))}).catch(e=>f({title:"",message:"Failed to load user: "+e.message,variant:"error",onClose:()=>b({userId:void 0})})).finally(()=>m(!1)))},[h,b,f,P,i]);(0,eb.q)(R);let _=k(e=>{(async()=>{try{g(!0),h?await o.Z.post("/api/users/update",{data:[{userId:h,data:e}]}):await o.Z.post("/api/users/add",{data:[e]}),c&&await c(),f({variant:"success",message:"User was saved successfully!",onClose:()=>{n?.(),b({userId:void 0})}})}catch(e){f({title:"",message:"Failed to save user: "+e.message,variant:"error"})}finally{g(!1)}})()}),I=N("role"),T=N("email");return p?t.jsx(Y.a,{overlay:!0}):(0,t.jsxs)(t.Fragment,{children:[x&&t.jsx(Y.a,{overlay:!0}),(0,t.jsxs)(el.yo,{open:e||!!u.userId,onOpenChange:()=>{n?.(),b({userId:void 0})},children:[t.jsx(el.aM,{asChild:!0,children:t.jsx(et.z,{className:"md:hidden",variant:"ghost",children:t.jsx(ei.Z,{className:"h-6 w-6"})})}),(0,t.jsxs)(el.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[t.jsx(el.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,t.jsxs)(el.bC,{children:[h?"Edit":"New"," User"]})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:[(0,t.jsxs)("div",{children:[t.jsx(ef._,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(eo.Ph,{value:I,required:!0,name:"role",disabled:x,onValueChange:e=>{P("role",e)},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by status"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User role"}),r.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t.jsx(ef._,{htmlFor:"email",className:(0,V.cn)(y?"":"opacity-50"),children:"Email"}),y?(0,t.jsxs)(t.Fragment,{children:[t.jsx(ec.I,{placeholder:"Email",type:"email",className:(0,V.cn)(w.email?"border-danger ring-danger focus-visible:ring-danger":""),...C("email",{required:!0,disabled:x,pattern:{value:eh,message:"Incorrect email format"}})}),w.email&&t.jsx("span",{role:"alert",className:"text-xs text-danger",children:w.email.message})]}):t.jsx(ec.I,{disabled:!0,value:T,onChange:()=>{},className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]}),(0,t.jsxs)("div",{children:[t.jsx(ef._,{htmlFor:"displayName",children:"Display name"}),t.jsx(ec.I,{...C("displayName",{required:!0,disabled:x}),placeholder:"Display name"})]}),(0,t.jsxs)("div",{children:[t.jsx(ef._,{htmlFor:"firstName",children:"First name"}),t.jsx(ec.I,{...C("firstName",{required:!1,disabled:x}),placeholder:"First name"})]}),(0,t.jsxs)("div",{children:[t.jsx(ef._,{htmlFor:"lastName",children:"Last name"}),t.jsx(ec.I,{...C("lastName",{required:!1,disabled:x}),placeholder:"Last name"})]})]}),(0,t.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[t.jsx(el.sw,{asChild:!0,children:t.jsx(et.z,{variant:"outline",children:"Cancel"})}),t.jsx(et.z,{onClick:_,children:"Save"})]})]})]})]})}var em=r(83855);let ex=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function eg({selected:e,roles:a,getUsers:r,onDelete:i,toggleUserForm:n,searchUsers:d}){let l=(0,X.l)(),[o,c]=(0,s.useState)(l.parsed.role||"all"),[f,u]=(0,s.useState)(l.parsed.status||"all");return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{children:(0,t.jsxs)(eo.Ph,{value:f,onValueChange:e=>{let a="all"===e?void 0:e;u(e),r({status:a},e=>!e&&l.push({status:a}))},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by status"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User status"}),t.jsx(eo.Ql,{value:"all",children:"All statuses"}),ex.map(e=>t.jsx(eo.Ql,{value:e.value,children:e.label},e.value))]})})]})}),t.jsx("div",{children:(0,t.jsxs)(eo.Ph,{value:o,onValueChange:e=>{let a="all"===e?[]:[e];c(e),r({roles:a},e=>!e&&l.push({role:a[0]}))},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"Filter by role"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User roles"}),t.jsx(eo.Ql,{value:"all",children:"All roles"}),a.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})}),t.jsx("div",{children:(0,t.jsxs)(et.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>n(),children:[t.jsx(em.Z,{className:"w-4 h-4 mr-1"}),"New User"]})})]})}function ev({open:e,userIds:a,roles:r,onClose:i,updateUsers:n,onSaveSuccess:d}){let{alert:l}=(0,eu.s)(),{parsed:c,replace:f}=(0,X.l)(),[u,b]=(0,s.useState)(!1),{watch:h,setValue:p,handleSubmit:m}=(0,ed.cI)({defaultValues:{role:""}}),x=(0,s.useCallback)(()=>{i?.(),f({bulkEdit:void 0}),p("role","")},[i,f,p]),g=m(e=>{(async()=>{try{b(!0),a.length&&(await o.Z.post("/api/users/update",{data:a.map(a=>({userId:a,data:e}))}),d&&await d()),l({variant:"success",message:"Users updated",onClose:x})}catch(e){l({title:"",message:"Failed to update users: "+e.message,variant:"error"})}finally{b(!1)}})()}),v=h("role");return t.jsx(t.Fragment,{children:t.jsx(el.yo,{open:"1"===c.bulkEdit,onOpenChange:e=>{e||x()},children:(0,t.jsxs)(el.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[t.jsx(el.Tu,{className:"py-2 px-4 border-b border-b-border",children:t.jsx(el.bC,{children:"Bulk edit users"})}),t.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,t.jsxs)("div",{children:[t.jsx(ef._,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(eo.Ph,{value:v,required:!0,name:"role",disabled:u,onValueChange:e=>{p("role",e)},children:[t.jsx(eo.i4,{children:t.jsx(eo.ki,{placeholder:"-- select role --"})}),t.jsx(eo.Bw,{children:(0,t.jsxs)(eo.DI,{children:[t.jsx(eo.n5,{children:"User role"}),r.map(e=>t.jsx(eo.Ql,{value:e.name,children:e.description},e.name))]})})]})]})}),(0,t.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[t.jsx(el.sw,{asChild:!0,children:t.jsx(et.z,{variant:"outline",children:"Cancel"})}),t.jsx(et.z,{onClick:g,disabled:!v,children:"Save"})]})]})})})}function ey({users:e,roles:a,getUsers:r,deleteUsers:d,getUser:c,updateUsers:f,createUsers:u,searchUsers:b}){let h=(0,X.l)(),{mode:p}=(0,J.b)(),[m,x]=(0,s.useState)(e),[g,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)([]),[w,N]=(0,s.useState)(!1),{confirm:P}=(0,H.t)(),C=(0,s.useCallback)(async(a,r)=>{v(!0);let t=(await o.Z.get("/api/users?data="+JSON.stringify({...h.parsed,roles:h.parsed.role?[h.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;t.error?i.Am.error(t.error):(x(t),j([])),r?.(t.error,t),v(!1)},[r,h,e]),k=(0,s.useCallback)((e,a)=>{let r=m.data.filter(a=>e.includes(a.userId)).map(e=>e.displayName);P(()=>{(async()=>{try{v(!0),await o.Z.delete("/api/users?data="+JSON.stringify(e)),await C(),a?.()}catch(e){i.Am.error(e.message)}finally{v(!1)}})()},{title:"Delete "+(r.length>1?"users":"user"),message:`<p>Are you sure you want to delete:</p> ${r.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[P,d,C,m]),R=h.parsed.userId||w?t.jsx(ep,{roles:a,open:w,getUser:c,updateUsers:f,createUsers:u,onSaveSuccess:C,onClose:()=>N(!1)}):null,I=t.jsx(ev,{roles:a,open:w,userIds:y.map(e=>m.data[e].userId),updateUsers:f,onSaveSuccess:()=>C({page:m.page})}),T=(0,s.useMemo)(()=>"view"===p,[p]);return(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx(B.DataTable,{title:"Users",selectable:!T,selectedIndexes:y,onSelect:j,search:{inputPlaceholder:"Search users"},headerActions:t.jsx(eg,{users:m,roles:a,selected:y.map(e=>m.data[e].userId),onDelete:k,getUsers:C,searchUsers:b,toggleUserForm:()=>N(e=>!e)}),columns:[{name:"Display name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellRenderer(e){let a=m.data[e.rowIndex];return t.jsx(_,{delayDuration:0,children:(0,t.jsxs)(U,{children:[t.jsx(Z,{asChild:!0,children:t.jsx(n,{className:(0,V.cn)(a.activationDate?"text-green-400":"text-gray-400","w-4 h-4")})}),!!a.activationDate&&t.jsx(W,{children:(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Activation date: ",l()(a.activationDate).format("LLL")]})})]})})}},{name:"Action",align:"right",cellRenderer(e){let a=m.data[e.rowIndex];return t.jsx(es,{email:a.email,userId:a.userId,userName:a.displayName,isActivated:!!a.activationDate,onDelete:()=>k([a.userId])})}}],data:m.data.map(e=>[e.displayName,e.email,a.filter(a=>a.name===e.role)[0]?.description||e.role,e.lastLoginDate?l()(e.lastLoginDate).format("LLL"):"",""])}),t.jsx(G.Z,{}),t.jsx("div",{className:"p-2",children:t.jsx(Q.t,{currentPage:m.page,totalPages:m.totalPages,disabled:g,limit:m.limit||m.totalRows,totalRows:m.totalRows,collectionName:"users",onPaginate:e=>C({page:e},(e,a)=>!e&&h.push({page:a?.page||m.page})),hideControls:!1,hideSummary:!1})}),R,I,g&&t.jsx(Y.a,{overlay:!0})]})}},58879:(e,a,r)=>{"use strict";r.d(a,{t:()=>j});var t=r(10326),s=r(17577),i=r(11890),n=r(39183),d=r(15919),l=r(77863),o=r(90772);let c=({className:e,...a})=>t.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",e),...a});c.displayName="Pagination";let f=s.forwardRef(({className:e,...a},r)=>t.jsx("ul",{ref:r,className:(0,l.cn)("flex flex-row items-center gap-1",e),...a}));f.displayName="PaginationContent";let u=s.forwardRef(({className:e,...a},r)=>t.jsx("li",{ref:r,className:(0,l.cn)("",e),...a}));u.displayName="PaginationItem";let b=({className:e,isActive:a,size:r="icon",...s})=>t.jsx("a",{"aria-current":a?"page":void 0,className:(0,l.cn)((0,o.d)({variant:a?"outline":"ghost",size:r}),e),...s});b.displayName="PaginationLink";let h=({className:e,...a})=>(0,t.jsxs)(b,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 pl-2.5",e),...a,children:[t.jsx(i.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Previous"})]});h.displayName="PaginationPrevious";let p=({className:e,...a})=>(0,t.jsxs)(b,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 pr-2.5",e),...a,children:[t.jsx("span",{children:"Next"}),t.jsx(n.Z,{className:"h-4 w-4"})]});p.displayName="PaginationNext";let m=({className:e,...a})=>(0,t.jsxs)("span",{"aria-hidden":!0,className:(0,l.cn)("flex h-9 w-9 items-center justify-center",e),...a,children:[t.jsx(d.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"More pages"})]});m.displayName="PaginationEllipsis";var x=r(24082);let g="LEFT",v="RIGHT";function y(e,a,r=1){let t=e,s=[];for(;t<=a;)s.push(t),t+=r;return s}function j(e){let{currentPage:a,totalPages:r,disabled:s,limit:i=1,totalRows:n,collectionName:d="results",hideControls:o,hideSummary:j,classes:w}=e,N=function(e){let{currentPage:a=1,totalPages:r=0,onPaginate:t}=e,s=[{id:"first",label:"Previous",disabled:a<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>t(a-1)}];return(function({totalPages:e=0,currentPage:a=1}){if(e>9){let r=[],t=a-2,s=a+2,i=e-1,n=t>2?t:2,d=s<i?s:i,l=7-(r=y(n,d)).length-1,o=n>2,c=d<i;return o&&!c?r=[g,...y(n-l,n-1),...r]:!o&&c?r=[...r,...y(d+1,d+l),v]:o&&c&&(r=[g,...r,v]),[1,...r,e]}return y(1,e)})(e).forEach(e=>{[g,v].includes(e)?s.push({label:"...",id:`${e}`,disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):s.push({id:`${e}`,label:`${e}`,disabled:a===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>t(Number(e))})}),s.push({id:"last",label:"Next",disabled:r===a,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>t(a+1)}),s}(e);return o&&j?null:(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!j&&(0,t.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",n?(0,x.c)((a-1)*i+1):0,"\xa0-\xa0",(0,x.c)(Math.min(n,a*i)),"\xa0of\xa0",(0,x.c)(n,{separator:" "})," ",d]}),!o&&t.jsx(c,{children:t.jsx(f,{children:N.map(e=>t.jsx(u,{children:(()=>{let i=`${a}`==`${e.label}`,n=e.disabled||s,d="opacity-50",o=()=>!n&&e.onClick();return e.isPrev?(n=n||1===a,t.jsx(h,{href:"#",className:(0,l.cn)(1===a?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),o()}})):e.isEllipsis?t.jsx(m,{className:(0,l.cn)(n?d:"","hidden md:flex",w?.pageNumber)}):e.isNext?(n=n||a===r,t.jsx(p,{href:"#",className:(0,l.cn)(n?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),o()}})):t.jsx(b,{href:"#",className:(0,l.cn)(n?d:"","hidden md:flex",w?.pageNumber),isActive:i,onClick:e=>{e.stopPropagation(),e.preventDefault(),o()},children:e.label})})()},e.id))})})]})}},31048:(e,a,r)=>{"use strict";r.d(a,{_:()=>o});var t=r(10326),s=r(17577),i=r(34478),n=r(28671),d=r(77863);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef(({className:e,secondary:a,error:r,...s},n)=>t.jsx(i.f,{ref:n,className:(0,d.cn)(l(),a&&"text-xs",r?"text-danger":"",e),...s}));o.displayName=i.f.displayName},34474:(e,a,r)=>{"use strict";r.d(a,{Bw:()=>m,DI:()=>f,Ph:()=>c,Ql:()=>g,i4:()=>b,ki:()=>u,n5:()=>x});var t=r(10326),s=r(17577),i=r(18792),n=r(941),d=r(96633),l=r(32933),o=r(77863);let c=i.fC,f=i.ZA,u=i.B4,b=s.forwardRef(({className:e,children:a,error:r,...s},d)=>(0,t.jsxs)(i.xz,{ref:d,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r&&"border-danger",e),...s,children:[a,t.jsx(i.JO,{asChild:!0,children:t.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));b.displayName=i.xz.displayName;let h=s.forwardRef(({className:e,...a},r)=>t.jsx(i.u_,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(d.Z,{className:"h-4 w-4"})}));h.displayName=i.u_.displayName;let p=s.forwardRef(({className:e,...a},r)=>t.jsx(i.$G,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=i.$G.displayName;let m=s.forwardRef(({className:e,children:a,position:r="popper",...s},n)=>t.jsx(i.h_,{children:(0,t.jsxs)(i.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[t.jsx(h,{}),t.jsx(i.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(p,{})]})}));m.displayName=i.VY.displayName;let x=s.forwardRef(({className:e,...a},r)=>t.jsx(i.__,{ref:r,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));x.displayName=i.__.displayName;let g=s.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(i.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(i.wU,{children:t.jsx(l.Z,{className:"h-4 w-4"})})}),t.jsx(i.eT,{children:a})]}));g.displayName=i.ck.displayName,s.forwardRef(({className:e,...a},r)=>t.jsx(i.Z0,{ref:r,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=i.Z0.displayName},8281:(e,a,r)=>{"use strict";r.d(a,{Z:()=>d});var t=r(10326),s=r(17577),i=r(90220),n=r(77863);let d=s.forwardRef(({className:e,orientation:a="horizontal",decorative:r=!0,...s},d)=>t.jsx(i.f,{ref:d,decorative:r,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...s}));d.displayName=i.f.displayName},43059:(e,a,r)=>{"use strict";r.d(a,{q:()=>s});var t=r(17577);function s(e){return(0,t.useRef)(0),null}},24082:(e,a,r)=>{"use strict";function t(e,a){let{decimals:r=0,separator:t=" "}={...a};isNaN(e=Number(`${e}`.replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let s=(e=`${Number(e).toFixed(r>=0?r:2)}`).toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),s.join(".")}r.d(a,{c:()=>t})},39447:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},15919:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},83855:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},17872:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(19510),s=r(21113),i=r(24569),n=r(46697);function d(){return t.jsx(i.V,{children:t.jsx(n.Zb,{children:t.jsx(n.aY,{className:"p-0",children:t.jsx(s.w,{loading:!0,maxRows:25,columns:[{name:"Display Name"},{name:"Email"},{name:"Role"},{name:"Last login date"},{name:"Active",align:"right",cellClassName:"w-20"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},13005:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(19510),s=r(73508),i=r(43767),n=r(24569),d=r(85431),l=r(46697),o=r(68570);let c=(0,o.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/users/components/table.tsx`),{__esModule:f,$$typeof:u}=c;c.default;let b=(0,o.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/users/components/table.tsx#UsersTable`);async function h({searchParams:{page:e,role:a,status:r}}){let[o,c]=await Promise.all([(0,s.getUsers)({limit:25,page:e?Number(e):void 0,roles:a?[a]:void 0,status:r}),(0,i.getRoles)()]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.D,{children:"Users"}),t.jsx(n.V,{children:o.error?t.jsx(l.Zb,{className:"border-danger bg-danger/20 text-center",children:t.jsx(l.aY,{children:t.jsx("div",{className:"text-danger",children:o.error})})}):t.jsx(l.Zb,{children:t.jsx(l.aY,{className:"p-0",children:t.jsx(b,{users:o,roles:c,getUsers:s.getUsers,deleteUsers:s.deleteUsers,getUser:s.getUser,updateUsers:s.updateUsers,createUsers:s.createUsers,searchUsers:s.searchUsers})})})})]})}},43767:(e,a,r)=>{"use strict";r.r(a),r.d(a,{getRoles:()=>d});var t=r(24330);r(60166);var s=r(10413);async function i(){return await s.Z.query.userRoles.findMany()}var n=r(57435);async function d(){try{return await i()}catch(e){return n.Z.error("getRoles ERROR:",e),[]}}(0,r(40618).h)([d]),(0,t.j)("50a20a3f0c68b90dbbde388e557668dd37ce6019",d)},73508:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>N,$$ACTION_1:()=>C,$$ACTION_2:()=>_,$$ACTION_3:()=>T,$$ACTION_4:()=>U,createUsers:()=>R,deleteUsers:()=>k,getFullUser:()=>j,getUser:()=>y,getUsers:()=>w,isEmailRegistered:()=>v,searchUsers:()=>P,setPassword:()=>E,updateUsers:()=>I});var t=r(24330);r(60166);var s=r(67096),i=r.n(s),n=r(57745),d=r(9576),l=r(30900),o=r(10413),c=r(57418),f=r(47625);async function u(e){for(let a of e){let e=new Date;await o.Z.update(c.users).set({deletedAt:e,email:a,displayName:"Former user",firstName:null,lastName:null,avatar:null,avatar_md:null,avatar_sm:null}).where((0,n.eq)(c.users.userId,a))}return!0}async function b(e,a){let r=[];for(let a of e){let e=await i().genSalt(10),t=await i().hash(a.password||(0,d.Z)(),e);r.push({...a,password:t,userId:a.userId||(0,d.Z)()})}let t={inserted:[],success:!1};try{if(await o.Z.insert(c.users).values(r),a?.returnInserted){let e=await (0,f.yT)({userIds:r.map(e=>e.userId)});t.inserted=e.data}t.success=!0}catch(e){t.error=e.message}finally{return t}}async function h(e,a){let r=[];for(let{userId:t,data:s}of e)try{let e=(0,l.Z)(t)?(0,n.eq)(c.users.userId,t):(0,n.eq)(c.users.email,t);delete s.id,delete s.createdAt,delete s.updatedAt,delete s.email,delete s.userId,await o.Z.update(c.users).set(s).where(e);let i=a?.returnUpdated?await (0,f.IQ)(t):void 0;r.push({userId:t,user:i})}catch(e){r.push({userId:t,error:e.message})}return r}var p=r(57435),m=r(70733),x=r(66267),g=r(40618);async function v(e){try{let a=await (0,f.IQ)(e);return{yes:!!a,isActive:!!a?.isActive}}catch(e){return p.Z.error("getUser ERROR:",e),{errors:[e.message],yes:!1}}}async function y(e){try{return await (0,x.isAllowed)("get_user"),await (0,f.IQ)(e)||null}catch(e){return p.Z.error("getUser ERROR:",e),null}}async function j(e){try{return await (0,x.isAllowed)("get_user"),await (0,f.C)(e)||null}catch(e){return p.Z.error("getFullUser ERROR:",e),null}}let w=(0,t.j)("e108da343bf6d6905ab22c73b3da576908ae7f90",N);async function N(...e){try{return await (0,x.isAllowed)("get_users"),await (0,f.yT)(...e)}catch(e){return{...f.Ko,error:e.message}}}let P=(0,t.j)("10b38722e0b558338e7c60a6793b40069bd09a9a",C);async function C(...e){try{return await (0,x.isAllowed)("search_users"),await (0,f.yT)(...e)}catch(e){return{...f.Ko,error:e.message}}}async function k(e){if(await (0,x.isAllowed)("delete_users"),e.length){let{data:a}=await (0,f.yT)({userIds:e});await u(e)}return!0}let R=(0,t.j)("532291ef3a85133f90dc76ebcd097d6b54d6560b",_);async function _(...e){try{await (0,x.isAllowed)("create_users");let a=await b(...e);for(let a of e[0])try{await (0,m.n)({userId:a.userId,hoursValid:1})}catch(e){}return a}catch(e){throw p.Z.error("createUsers ERROR",e),e}}let I=(0,t.j)("d7fe7a712e075e52a486042abf570c07ad6d5147",T);async function T(...e){try{return await (0,x.isAllowed)("update_users"),await h(...e)}catch(e){throw p.Z.error("updateUsers ERROR",e),e}}let E=(0,t.j)("c464d9555417870f08c6d6f80d86fd0e7889d1be",U);async function U(e){try{if(!e.password)throw Error("Missing: password");if(!e.email)throw Error("Missing: email");if(e.password.length<6)throw Error("Password is too short: min 6 characters");if(e.password!==e.passwordConfirm)throw Error("Password confirmation does not match!");let a=await i().genSalt(10),r=await i().hash(e.password,a),t=await h([{userId:e.email,data:{password:r}}]);if(t.filter(e=>e.error).length)throw Error(t.filter(e=>e.error).map(e=>e.error).join(", "));return{success:!0}}catch(e){return p.Z.error("setPassword ERROR",e),{success:!1,errors:[e.message]}}}(0,g.h)([v,y,j,w,P,k,R,I,E]),(0,t.j)("cc9308b01cb91d27ae2a2637effbfbfa43a8a7ab",v),(0,t.j)("f7fa4b194758cbf00b3a7cabd082254b9aef5877",y),(0,t.j)("321749afb33e42d61bb9a059f061397c54d56b94",j),(0,t.j)("c73d110f067e0290845f4cbf431eb3921327e0ee",w),(0,t.j)("306ae325ae902ce3918cdc966cf724751d663da6",P),(0,t.j)("6d3917e66baf6eb473f54ad34bcb53ed5bafb5d7",k),(0,t.j)("59400fdc36a14125fac6f026d96857f409b7faf3",R),(0,t.j)("fbeba7c767d640e5de897f4b9e6e274a6ec73d2d",I),(0,t.j)("ddf1c556c48ef3f16eeb72ff89554f731266d5ae",E)},24569:(e,a,r)=>{"use strict";r.d(a,{V:()=>i});var t=r(19510),s=r(50650);function i({className:e,...a}){return t.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,r)=>{"use strict";r.d(a,{w:()=>d});var t=r(68570);let s=(0,t.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/components/data-table/index.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let d=(0,t.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,r)=>{"use strict";r.d(a,{Zb:()=>n,aY:()=>d});var t=r(19510),s=r(71159),i=r(50650);let n=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));n.displayName="Card",s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",s.forwardRef(({className:e,...a},r)=>t.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",s.forwardRef(({className:e,...a},r)=>t.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let d=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},70733:(e,a,r)=>{"use strict";r.d(a,{n:()=>d});var t=r(51744),s=r.n(t),i=r(10413),n=r(57418);async function d({userId:e,hoursValid:a}){return(await i.Z.insert(n.tokens).values({userId:e,validUntil:s()(new Date).add(a,"hour").toDate(),token:Math.floor(1e5+9e5*Math.random())}).returning())[0]}},90220:(e,a,r)=>{"use strict";r.d(a,{f:()=>o});var t=r(17577),s=r(45226),i=r(10326),n="horizontal",d=["horizontal","vertical"],l=t.forwardRef((e,a)=>{let{decorative:r,orientation:t=n,...l}=e,o=d.includes(t)?t:n;return(0,i.jsx)(s.WV.div,{"data-orientation":o,...r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...l,ref:a})});l.displayName="Separator";var o=l}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[1633,1381,1744,3788,1490,5802,4084,7708,6620,9387,7938,4723,1813,6943,6318,8214,413,6267,8151,3911,9252,9087,7228],()=>r(18345));module.exports=t})();