(()=>{var e={};e.id=1417,e.ids=[1417],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},55078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(48339),r(49246),r(57890),r(95602),r(17162),r(56367),r(12699),r(77482),r(96560);var a=r(23191),s=r(88716),i=r(37922),o=r.n(i),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["(dashboard)",{children:["(scripts)",{children:["script",{children:["[scriptId]",{children:["data-keys",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,48339)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/[scriptId]/data-keys/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,49246)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/[scriptId]/loading.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,57890)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,95602)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,17162)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,56367)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,12699)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,77482)),"/home/watkay/ReactProjects/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/home/watkay/ReactProjects/neotree-editor/app/not-found.tsx"]}],d=["/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/[scriptId]/data-keys/page.tsx"],u="/(dashboard)/(scripts)/script/[scriptId]/data-keys/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/(scripts)/script/[scriptId]/data-keys/page",pathname:"/script/[scriptId]/data-keys",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19090:(e,t,r)=>{Promise.resolve().then(r.bind(r,2067)),Promise.resolve().then(r.bind(r,96948))},42782:(e,t,r)=>{Promise.resolve().then(r.bind(r,7636))},55685:(e,t,r)=>{Promise.resolve().then(r.bind(r,10827)),Promise.resolve().then(r.bind(r,49596)),Promise.resolve().then(r.bind(r,82617))},2067:(e,t,r)=>{"use strict";r.d(t,{ScriptDataKeysTable:()=>h});var a=r(10326),s=r(7027),i=r(90434),o=r(77863),n=r(7636),l=r(10827);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=r(38178),u=r(33071);function p({title:e,backLink:t,children:r}){return a.jsx("div",{className:"pb-20",children:a.jsx(d.V,{className:"flex flex-col gap-y-4",children:a.jsx(u.Zb,{children:(0,a.jsxs)(u.aY,{className:"p-0",children:[!!e&&(0,a.jsxs)("div",{className:"text-xl flex items-center gap-x-4 mb-4 p-4",children:[!!t&&a.jsx(i.default,{href:t,children:a.jsx(c,{className:"h-5 w-5"})}),a.jsx("span",{children:e})]}),r]})})})})}function h({data:{title:e,dataKeys:t}}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Title,{children:e+" - data keys"}),(0,a.jsxs)(p,{children:[a.jsx("div",{className:"p-4 text-2xl",children:e}),a.jsx(n.DataTable,{search:{inputPlaceholder:"Search"},getRowOptions:({rowIndex:e})=>{let r=t[e];return{className:(0,o.cn)(!r?.uniqueKey&&"bg-red-400/20 hover:bg-red-400/30")}},columns:[{name:"Key"},{name:"Label"},{name:"Type"},{name:"",cellRenderer({rowIndex:e}){let r=t[e];return r?.uniqueKey?a.jsx("div",{className:"flex items-center gap-x-2",children:a.jsx(i.default,{href:`/data-keys/edit/${r.uniqueKey}`,children:a.jsx(s.Z,{className:"text-primary w-4 h-4"})})}):null}}],data:t.map(e=>[e.name,e.label,e.dataType,""])})]})]})}},82617:(e,t,r)=>{"use strict";r.d(t,{ScriptsContextProvider:()=>u,h:()=>d});var a=r(10326),s=r(17577),i=r(35047),o=r(15491),n=r(44099),l=r(12260);let c=(0,s.createContext)(null),d=()=>(0,s.useContext)(c);function u({children:e,...t}){let r=function({}){let e=(0,i.useRouter)(),{scriptId:t}=(0,i.useParams)(),{parsed:r}=(0,l.l)(),[a,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)({data:[]}),[p,h]=(0,s.useState)(!1),[f,y]=(0,s.useState)([]),m=(0,s.useCallback)(()=>{e.push("/")},[e]),x=(0,s.useCallback)(()=>{e.push(`/script/${t}?${o.Z.stringify({...r,section:"screens"})}`)},[e,r,t]),g=(0,s.useCallback)(()=>{e.push(`/script/${t}?${o.Z.stringify({...r,section:"diagnoses"})}`)},[e,r,t]),w=(0,s.useCallback)(async()=>{try{c(!0);let e=await n.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(e.data?.errors?.length)throw Error(e.data.errors.join(", "));u(e.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{c(!1)}},[t,open,alert]);return{screens:d,screensLoading:a,keys:f,keysLoading:p,loadKeys:(0,s.useCallback)(async()=>{try{h(!0);let{data:e}=await n.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(e?.errors?.length)throw Error(e.errors.join(", "));let r=e.data.reduce((e,t)=>[...e,...t.dataKeys],[]);y(r)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{h(!1)}},[t,open,alert]),loadScreens:w,onCancelDiagnosisForm:g,onCancelScreenForm:x,onCancelScriptForm:m}}(t);return a.jsx(c.Provider,{value:{...t,...r},children:e})}},12260:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var a=r(35047),s=r(15491),i=r(17577);function o(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),r=(0,i.useMemo)(()=>t.toString(),[t]),o=(0,i.useMemo)(()=>s.Z.parse(t.toString()),[t]),n=(0,i.useCallback)(e=>s.Z.stringify({...o,...e}),[o]),l=(0,i.useCallback)(t=>{e.push(`?${n(t)}`)},[n,e]);return{parsed:o,stringified:r,replace:(0,i.useCallback)(t=>{e.replace(`?${n(t)}`)},[n,e]),push:l,toSearchParams:n}}},7027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},71810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},90748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},72607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},60850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},79635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(19510),s=r(58585),i=r(85576),o=r(47080),n=r(2111),l=r(68570);let c=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx`),{__esModule:d,$$typeof:u}=c;c.default,(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#ScriptsContext`),(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#useScriptsContext`);let p=(0,l.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/contexts/scripts/index.tsx#ScriptsContextProvider`);var h=r(85431),f=r(66267),y=r(24569),m=r(46697),x=r(75644);async function g({children:e}){let{user:t,yes:r}=await (0,f.canAccessPage)();if(t||(0,s.redirect)("/login"),!r)return a.jsx(y.V,{children:a.jsx(m.Zb,{children:a.jsx(m.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[l]=await Promise.all([(0,n.getHospitals)()]);return(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.D,{children:"Scripts"}),a.jsx(x.g2,{children:a.jsx(p,{...i,...o,hospitals:l,getHospitals:n.getHospitals,children:e})})]})}},17162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(19510),s=r(21113),i=r(24569),o=r(46697);function n(){return a.jsx(i.V,{children:a.jsx(o.Zb,{children:a.jsx(o.aY,{className:"p-0",children:a.jsx(s.w,{loading:!0,maxRows:25,columns:[{name:"Key"},{name:"Label"},{name:"Description"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},48339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(19510),s=r(85576),i=r(68570);let o=(0,i.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/[scriptId]/data-keys/table.tsx`),{__esModule:n,$$typeof:l}=o;o.default;let c=(0,i.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/(scripts)/script/[scriptId]/data-keys/table.tsx#ScriptDataKeysTable`);var d=r(86098);async function u({params:e}){let{scriptId:t}=await e,[{data:r}]=await Promise.all([(0,s.getScriptsWithItems)({scriptsIds:[t]})]);return r[0]?a.jsx(a.Fragment,{children:a.jsx(c,{data:r[0]})}):a.jsx(d.b,{title:"Error",message:"Script not found",variant:"error"})}},49246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(19510),s=r(62553);function i(){return a.jsx(s.a,{overlay:!0})}},57890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(19510),s=r(62553);function i(){return a.jsx(s.a,{overlay:!0})}},47080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getFiles:()=>f,uploadFile:()=>y,uploadFileFromSite:()=>m});var a=r(24330);r(60166);var s=r(9576),i=r(61460),o=r(89114),n=r(57435),l=r(44652),c=r(66267),d=r(59271),u=r(49530),p=r(20123),h=r(40618);let f=o.Re;async function y(e,t){let r={success:!1,data:null};try{for(let a of(await (0,c.isAllowed)(["upload_files"]),Array.from(e.entries()))){let[o,n]=a;if("object"==typeof n){let a=Buffer.from(await n.arrayBuffer()),o=e.get("fileId")?.toString()||(0,s.Z)(),c={...(0,l.R)(e.get("metadata")?.toString()||"{}")},d=(e.get("size")?function(e,t){if("0"==`${e}`)return 0;let r=`${e||""}`.replaceAll(" ",""),[a,s]=(r=r.includes(".")?r.replaceAll(",",""):r.split(",").length>2?r.replaceAll(",",""):r.replaceAll(",",".")).split("."),i=!a||isNaN(Number(a))?"":a;return""==(i+=!s||isNaN(Number(s))?"":`.${s}`)||void 0===i||isNaN(Number(i))?t?.notNull?0:null:Number(i)}((0,l.R)(e.get("size")?.toString())):0)||n.size,u=e.get("filename")?.toString()||n.name,p=[o,u].filter(e=>e).join("__");(c.width||c.height)&&(p=`${p}?w=${c.width}&h=${c.height}`),r=await (0,i.G)({fileId:o,data:a,filename:p,size:d,contentType:e.get("contentType")?.toString()||n.type,metadata:c},t)}}}catch(e){r.success=!1,r.errors=[e.message],n.Z.error("uploadFile ERROR",e.message)}finally{return r}}async function m({fileId:e,siteURL:t}){try{let r=await (0,p.QF)({links:[t]});if(r.errors)throw Error(r.errors.join(", "));let{data:[a]}=r;if(!a)throw Error(`Site (${t}) was not found!`);let s=await (0,d.U)({baseURL:a.link,apiKey:a.apiKey}),n=await (0,o._I)(e);if(n.errors)throw Error(n.errors.join(", "));if(n?.data){let t=u.Z.stringify({...n.data.metadata});return t=t?`?${t}`:"",{data:{fileId:e,fileURL:[process.env.NEXT_PUBLIC_APP_URL,`/files/${e}${t}`].join("")}}}let l=(await s.get(`/api/files/${e}/download`)).data;if(l.errors)throw Error(l.errors.join(", "));if(!l.data)return{errors:["File not found"],data:null};await (0,i.G)({fileId:e,data:l.data.data,filename:l.data.filename,size:l.data.size,contentType:l.data.contentType,metadata:{...l.data.metadata}});let c=u.Z.stringify({...l.data.metadata});return c=c?`?${c}`:"",{data:{fileId:e,fileURL:[a.link,`/files/${e}${c}`].join("")}}}catch(e){return n.Z.error("downloadFileFromSite ERROR",e.message),{data:null,errors:[e.message]}}}(0,h.h)([f,y,m]),(0,a.j)("07831c4bb9517b44960f2000801bac3ebfc8ab58",f),(0,a.j)("fc90fab3cf6d83b3212118dca7b824d52efe8930",y),(0,a.j)("ee7a403b0138a1e79c1602ce2fc6dab1e92d398b",m)},2111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$ACTION_0:()=>y,$$ACTION_1:()=>x,$$ACTION_2:()=>w,$$ACTION_3:()=>v,$$ACTION_4:()=>k,countHospitals:()=>m,deleteHospitals:()=>f,getHospital:()=>b,getHospitals:()=>g,saveHospitals:()=>j});var a=r(24330);r(60166);var s=r(57745),i=r(57435),o=r(10413),n=r(93567),l=r(88317);async function c(e){let t={success:!1};try{let r=e.filter(e=>e.id),a=e.filter(e=>!e.id),i=[];for(let e of r)try{await o.Z.update(n.hospitals).set(e).where((0,s.eq)(n.hospitals.id,e.id))}catch(e){i.push(e.message)}a.length&&await o.Z.insert(n.hospitals).values(a),i.length?t.errors=i:t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_saveHospitals ERROR",e.message)}finally{return t?.errors?.length||l.Z.emit("data_changed","save_hospitals"),t}}async function d(e){let t={success:!1},{ids:r,hospitalsIds:a,confirmDeleteAll:c}={...e};try{let e=[r?.length?(0,s.d3)(n.hospitals.id,r):void 0,a?.length?(0,s.d3)(n.hospitals.hospitalId,a):void 0].filter(e=>e);if(!e.length&&!c)throw Error("Please confirm that you want to delete all the hospitals!");await o.Z.delete(n.hospitals).where((0,s.xD)(...e)),t.success=!0}catch(e){t.success=!1,t.errors=[e.message],i.Z.error("_deleteHospitals ERROR",e.message)}finally{return t?.errors?.length||l.Z.emit("data_changed","delete_hospitals"),t}}var u=r(88453),p=r(66267),h=r(40618);let f=(0,a.j)("b06193ff0e4128f45c3f976e3ad26d6214806533",y);async function y(...e){try{return await (0,p.isAllowed)(),await d(...e)}catch(e){return i.Z.error("deleteHospitals ERROR",e.message),{errors:[e.message],success:!1}}}let m=(0,a.j)("1d64387034edf7a0645a7711866443dbfb275bab",x);async function x(...e){try{return await (0,p.isAllowed)(),await (0,u.Py)(...e)}catch(e){return i.Z.error("countHospitals ERROR",e.message),{errors:[e.message],data:0}}}let g=(0,a.j)("ec70ac92449a53ad035f906fb539489bd9cbaf6d",w);async function w(...e){try{return await (0,p.isAllowed)(),await (0,u.O8)(...e)}catch(e){return i.Z.error("getHospitals ERROR",e.message),{errors:[e.message],data:[]}}}let b=(0,a.j)("a8b2714789802ad9f5d800fc600d0f40ebb6146d",v);async function v(...e){return await (0,p.isAllowed)(),await (0,u.C9)(...e)}let j=(0,a.j)("c3c4f6894379fcfcd48f96588fac9d4081c2bb05",k);async function k(...e){try{return await (0,p.isAllowed)(),await c(...e)}catch(e){return i.Z.error("getSys ERROR",e.message),{errors:[e.message],data:void 0,success:!1}}}(0,h.h)([f,m,g,b,j]),(0,a.j)("37529abc9900cbfcb6ae3db1b137052aa4af2b07",f),(0,a.j)("fc0e6a68387ba954748405f993291f3833545380",m),(0,a.j)("ac6cc9ac17f6de48bfd6821622584fe0f17f00e2",g),(0,a.j)("3ad1cad9a8631e65599fe0e955c39ac951698197",b),(0,a.j)("1d5bdcd911ef6dd33f0b5d10944a568f4f68c55a",j)},86098:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var a=r(68570);let s=(0,a.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/alert.tsx`),{__esModule:i,$$typeof:o}=s;s.default;let n=(0,a.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/alert.tsx#Alert`)},21113:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var a=r(68570);let s=(0,a.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/data-table/index.tsx`),{__esModule:i,$$typeof:o}=s;s.default;let n=(0,a.createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/components/data-table/index.tsx#DataTable`)},61460:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var a=r(88317),s=r(57435),i=r(10413),o=r(93567),n=r(89114);async function l(e,t){let r={success:!1,data:null};try{if(!e.fileId)throw Error("Missing fileId");if(!e.data)throw Error("No file uploaded");await i.Z.insert(o.files).values(e);let s=await (0,n._I)(e.fileId);if(!s)throw Error("Failed to upload file");r.success=!0,r.data=s.data,s.data&&t?.broadcastAction!==!1&&a.Z.emit("file_uploaded")}catch(e){r.success=!1,r.errors=[e.message],s.Z.error("_uploadFile ERROR",e.message)}finally{return r}}},89114:(e,t,r)=>{"use strict";r.d(t,{_I:()=>c,Re:()=>f,KU:()=>l});var a=r(57745),s=r(10413),i=r(93567),o=r(57435),n=r(44380);async function l(e){try{let t=await s.Z.query.files.findFirst({where:(0,a.eq)(i.files.fileId,e)});return{data:t?{...t,url:(0,n.TI)(`/files/${t.fileId}`)}:null}}catch(e){return o.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}async function c(e){try{let t=await s.Z.query.files.findFirst({where:(0,a.eq)(i.files.fileId,e),columns:{contentType:!0,fileId:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}});return{data:t?{...t,url:(0,n.TI)(`/files/${t.fileId}`)}:null}}catch(e){return o.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:null}}}var d=r(34149),u=r(60938),p=r(81445),h=r(41502);async function f(e){try{let{filesIds:t,archived:r,searchValue:o,limit:l,page:c=1,uploadDateGTE:f,uploadDateLTE:y}={...e},m=Math.max(0,c),x=o?["%",o,"%"].join(""):"",g=[r?(0,a.K0)(i.files.deletedAt):(0,a.Ft)(i.files.deletedAt),...t?.length?[(0,a.d3)(i.files.fileId,t)]:[],...x?[(0,d.i6)`LOWER(screens.name) like LOWER(${x})`]:[],f?(0,a.eg)(i.files.createdAt,"string"==typeof f?new Date(f):f):void 0,y?(0,a.G)(i.files.createdAt,"string"==typeof y?new Date(y):y):void 0],w=s.Z.select({count:(0,u.QX)()}).from(i.files);g.length&&w.where((0,a.xD)(...g));let[{count:b}]=await w.execute(),v=1;b&&(v=(0,h.x)(l)?1:Math.ceil(b/l),m=Math.min(m,v));let j=(0,h.x)(l)?void 0:Math.max(0,(m-1)*l);return{data:(await s.Z.query.files.findMany({where:g.length?(0,a.xD)(...g):void 0,limit:l,offset:j,orderBy:(0,p.C)(i.files.createdAt),columns:{fileId:!0,contentType:!0,filename:!0,size:!0,metadata:!0,createdAt:!0}})).map(e=>({...e,url:(0,n.TI)(`/files/${e.fileId}`)})),searchValue:o,totalPages:v,totalRows:b,page:m,limit:l}}catch(e){return o.Z.error("_getFiles ERROR",e.message),{errors:[e.message],data:[],totalPages:0,totalRows:0,page:1}}}},88453:(e,t,r)=>{"use strict";r.d(t,{Py:()=>u,C9:()=>c,O8:()=>l});var a=r(57745),s=r(30900),i=r(10413),o=r(93567),n=r(57435);async function l(e){try{let{hospitalsIds:t}={...e},r=t||[],n=r?.length?(0,a.d3)(o.hospitals.hospitalId,r.filter(e=>s.Z(e))):void 0,l=r?.length?(0,a.d3)(o.hospitals.oldHospitalId,r.filter(e=>!s.Z(e))):void 0,c=[(0,a.Ft)(o.hospitals.deletedAt),...n&&l?[(0,a.or)(n,l)]:[]];return{data:(await i.Z.select({hospital:o.hospitals}).from(o.hospitals).where(c.length?(0,a.xD)(...c):void 0)).map(e=>e.hospital)}}catch(e){return n.Z.error("_getHospitals ERROR",e.message),{data:[],errors:[e.message]}}}async function c(e){let{hospitalId:t}={...e};try{if(!t)throw Error("Missing hospitalId");let e=s.Z(t)?(0,a.eq)(o.hospitals.hospitalId,t):void 0,r=s.Z(t)?void 0:(0,a.eq)(o.hospitals.oldHospitalId,t);return{data:await i.Z.query.hospitals.findFirst({where:(0,a.xD)((0,a.Ft)(o.hospitals.deletedAt),e||r)})}}catch(e){return n.Z.error("_getHospital ERROR",e.message),{errors:[e.message]}}}var d=r(60938);async function u(){try{let[{count:e}]=await i.Z.select({count:(0,d.QX)()}).from(o.hospitals);return{data:e}}catch(e){return n.Z.error("_getHospitals ERROR",e.message),{data:0,errors:[e.message]}}}},44652:(e,t,r)=>{"use strict";function a(e){try{return JSON.parse(e)}catch(e){return null}}r.d(t,{R:()=>a})},79560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(27162).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1633,1744,1337,3788,2758,4901,9712,1121,7938,6462,5358,3173,9698,413,6267,927,569,2418,8778,1271,861,5576,7645,7636,1943,3365],()=>r(55078));module.exports=a})();