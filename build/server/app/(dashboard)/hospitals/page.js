(()=>{var e={};e.id=4075,e.ids=[4075],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},27791:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>o,routeModule:()=>u,tree:()=>n}),t(17357),t(81928),t(56367),t(12699),t(69684),t(96560);var s=t(23191),r=t(88716),l=t(37922),i=t.n(l),d=t(95231),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(a,c);let n=["",{children:["(dashboard)",{children:["hospitals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17357)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,81928)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,69684)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/not-found.tsx"]}],o=["/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/page.tsx"],f="/(dashboard)/hospitals/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/hospitals/page",pathname:"/hospitals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},7930:(e,a,t)=>{let s={"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_2),"0fdec2a36177cba16f69e460c423861bbf404e5b":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.searchHospitals),"4e8ea467f6e3c24a6d19367ff4f150839963fa5c":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.deleteHospitals),"58d233f62675141721c552c27bec89c6ba4be640":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.updateHospitals),"6cb2303157c9ed693f7ae3c03b0c029c027238e6":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospital),"722df2eb81d6901644ad9eadd578284b693e02df":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_0),"7badc5813153ab449d43a950ee717949bee4b73f":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_1),"7ddbd6d73a428b212e13712785bbe2a47dba0f7e":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospitals),"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.createHospitals),ad451422ee0e8d7be85f07dd8f65cc186afee186:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_3),cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getFullHospital),"1d060a829ac08f6adb4ed6f259c6c0d117feea4b":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),c474998fd6b8a9785a09ad9fa5995661f28c6c5b:()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),"44218771357d06d79311b6d6641a20c018bafd37":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),"33d8b15ec8dd98c91eac63d85211264cf0a630b8":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),"458e0bb776cc3d544fd3487595ecc0d4d43114fc":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),"62ecd67a03f8f29d7d9a14399a69f12cd0186bad":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),b0d634be4cc158e4043dd09673ee30e8e18999af:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),"0c0d3a976a0d3670bfcd783a4eda74ef47d08486":()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.$$ACTION_0),eb767362e2857509ccd48c4eb7968f5169ef228f:()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.importRemoteScripts),fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d:()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.getSites),"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.publishData),"3b2ac91bc81489809370d893a7d7c83a162e1a96":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.countAllDrafts),"64f3a633dace3ede963f725b16dc2b5f210bdd56":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.$$ACTION_1),"6631df3cf85446a0818ac2dde947f63d2fad6c89":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.$$ACTION_0),"7b75f487e334a946b63829017d9aa902b59378e0":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.getEditorDetails),"893d510641fbd37b4cbe2a75916de7869dd43ca6":()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.revalidatePath),e8515d84060942f8f3866c65cc44204f02ef54e2:()=>Promise.resolve().then(t.bind(t,90092)).then(e=>e.discardDrafts)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7":r.bind(null,"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7"),"0fdec2a36177cba16f69e460c423861bbf404e5b":r.bind(null,"0fdec2a36177cba16f69e460c423861bbf404e5b"),"4e8ea467f6e3c24a6d19367ff4f150839963fa5c":r.bind(null,"4e8ea467f6e3c24a6d19367ff4f150839963fa5c"),"58d233f62675141721c552c27bec89c6ba4be640":r.bind(null,"58d233f62675141721c552c27bec89c6ba4be640"),"6cb2303157c9ed693f7ae3c03b0c029c027238e6":r.bind(null,"6cb2303157c9ed693f7ae3c03b0c029c027238e6"),"722df2eb81d6901644ad9eadd578284b693e02df":r.bind(null,"722df2eb81d6901644ad9eadd578284b693e02df"),"7badc5813153ab449d43a950ee717949bee4b73f":r.bind(null,"7badc5813153ab449d43a950ee717949bee4b73f"),"7ddbd6d73a428b212e13712785bbe2a47dba0f7e":r.bind(null,"7ddbd6d73a428b212e13712785bbe2a47dba0f7e"),"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c":r.bind(null,"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c"),ad451422ee0e8d7be85f07dd8f65cc186afee186:r.bind(null,"ad451422ee0e8d7be85f07dd8f65cc186afee186"),cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50:r.bind(null,"cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50"),"1d060a829ac08f6adb4ed6f259c6c0d117feea4b":r.bind(null,"1d060a829ac08f6adb4ed6f259c6c0d117feea4b"),c474998fd6b8a9785a09ad9fa5995661f28c6c5b:r.bind(null,"c474998fd6b8a9785a09ad9fa5995661f28c6c5b"),"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf":r.bind(null,"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf"),"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350":r.bind(null,"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350"),"44218771357d06d79311b6d6641a20c018bafd37":r.bind(null,"44218771357d06d79311b6d6641a20c018bafd37"),"33d8b15ec8dd98c91eac63d85211264cf0a630b8":r.bind(null,"33d8b15ec8dd98c91eac63d85211264cf0a630b8"),"458e0bb776cc3d544fd3487595ecc0d4d43114fc":r.bind(null,"458e0bb776cc3d544fd3487595ecc0d4d43114fc"),"62ecd67a03f8f29d7d9a14399a69f12cd0186bad":r.bind(null,"62ecd67a03f8f29d7d9a14399a69f12cd0186bad"),b0d634be4cc158e4043dd09673ee30e8e18999af:r.bind(null,"b0d634be4cc158e4043dd09673ee30e8e18999af"),"0c0d3a976a0d3670bfcd783a4eda74ef47d08486":r.bind(null,"0c0d3a976a0d3670bfcd783a4eda74ef47d08486"),eb767362e2857509ccd48c4eb7968f5169ef228f:r.bind(null,"eb767362e2857509ccd48c4eb7968f5169ef228f"),fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d:r.bind(null,"fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d"),"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9":r.bind(null,"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9"),"3b2ac91bc81489809370d893a7d7c83a162e1a96":r.bind(null,"3b2ac91bc81489809370d893a7d7c83a162e1a96"),"64f3a633dace3ede963f725b16dc2b5f210bdd56":r.bind(null,"64f3a633dace3ede963f725b16dc2b5f210bdd56"),"6631df3cf85446a0818ac2dde947f63d2fad6c89":r.bind(null,"6631df3cf85446a0818ac2dde947f63d2fad6c89"),"7b75f487e334a946b63829017d9aa902b59378e0":r.bind(null,"7b75f487e334a946b63829017d9aa902b59378e0"),"893d510641fbd37b4cbe2a75916de7869dd43ca6":r.bind(null,"893d510641fbd37b4cbe2a75916de7869dd43ca6"),e8515d84060942f8f3866c65cc44204f02ef54e2:r.bind(null,"e8515d84060942f8f3866c65cc44204f02ef54e2")}},70746:(e,a,t)=>{Promise.resolve().then(t.bind(t,27145)),Promise.resolve().then(t.bind(t,10827))},50064:(e,a,t)=>{Promise.resolve().then(t.bind(t,77228))},27145:(e,a,t)=>{"use strict";t.d(a,{HospitalsTable:()=>S});var s=t(10326),r=t(17577),l=t(85999),i=t(77228),d=t(58879),c=t(8281),n=t(11870),o=t(12260),f=t(46670),p=t(39447),u=t(47035),b=t(60097),h=t(90772);function m({hospitalId:e,hospitalName:a,onDelete:t}){let r=(0,o.l)();return s.jsx(s.Fragment,{children:(0,s.jsxs)(b.h_,{children:[s.jsx(b.$F,{asChild:!0,children:s.jsx(h.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:s.jsx(p.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(b.AW,{children:[s.jsx(b.Ju,{children:a}),s.jsx(b.VD,{}),s.jsx(b.Xi,{onClick:()=>r.push({hospitalId:e}),children:"Edit"}),s.jsx(b.VD,{}),(0,s.jsxs)(b.Xi,{onClick:t,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[s.jsx(u.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]})})}var x=t(90748),g=t(47463),v=t(74723),y=t(7890),j=t(54432),w=t(31048),N=t(96221),P=t(43059);function I({open:e,hospitalId:a,getHospital:t,onClose:l,updateHospitals:i,createHospitals:d,onSaveSuccess:c}){let{alert:f}=(0,N.s)(),{parsed:p,replace:u}=(0,o.l)(),b=a||p.hospitalId,[m,I]=(0,r.useState)(!1),[q,H]=(0,r.useState)(!1),[,C]=(0,r.useState)(),{setValue:A,register:R,handleSubmit:S}=(0,v.cI)({defaultValues:{hospitalId:b||(0,g.Z)(),name:""}}),Z=(0,r.useCallback)(()=>{b&&(I(!0),t(b).then(e=>{C(e),e&&(A("hospitalId",e.hospitalId),A("name",e.name))}).catch(e=>f({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>u({hospitalId:void 0})})).finally(()=>I(!1)))},[b,u,f,A,t]);(0,P.q)(Z);let _=S(e=>{(async()=>{try{H(!0),b?await i([{hospitalId:b,data:e}]):await d([e]),c&&await c(),f({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{l?.(),u({hospitalId:void 0})}})}catch(e){f({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{H(!1)}})()});return m?s.jsx(n.a,{overlay:!0}):s.jsx(s.Fragment,{children:(0,s.jsxs)(y.yo,{open:e||!!p.hospitalId,onOpenChange:()=>{l?.(),u({hospitalId:void 0})},children:[s.jsx(y.aM,{asChild:!0,children:s.jsx(h.z,{className:"md:hidden",variant:"ghost",children:s.jsx(x.Z,{className:"h-6 w-6"})})}),(0,s.jsxs)(y.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[s.jsx(y.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,s.jsxs)(y.bC,{children:[b?"Edit":"New"," Hospital"]})}),s.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,s.jsxs)("div",{children:[s.jsx(w._,{htmlFor:"name",children:"Hospital Name"}),s.jsx(j.I,{...R("name",{required:!0,disabled:q}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[s.jsx(y.sw,{asChild:!0,children:s.jsx(h.z,{variant:"outline",children:"Cancel"})}),s.jsx(h.z,{onClick:_,children:"Save"})]})]})]})})}var q=t(83855),H=t(2165),C=t(30811);function A({searchHospitals:e,onDelete:a}){let t=(0,r.useRef)(),[n,{width:f}]=(0,H.Z)(),p=(0,o.l)(),[u,b]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(),[P,I]=(0,r.useState)(),{watch:q,register:A,handleSubmit:R}=(0,v.cI)({defaultValues:{searchValue:""}}),S=q("searchValue");(0,r.useMemo)(()=>w?.page||1,[w?.page]),(0,r.useMemo)(()=>p.parsed.hospitalId,[p.parsed.hospitalId]);let Z=(0,r.useCallback)(async a=>{try{if(S||w?.searchValue!==S){y(!0);let t=await e({searchValue:S,limit:5,...a});t.error?l.Am.error(t.error):N(t)}}catch(e){l.Am.error(e.message)}finally{y(!1)}},[S,w,e]),_=R(({searchValue:e})=>{(async()=>{try{if(e){t.current&&clearTimeout(t.current),x(!0),b(!0);let a=document.querySelector("[data-search-input]");setTimeout(()=>a?.focus(),10),await Z({searchValue:e})}else N(void 0),b(!1)}catch(e){l.Am.error(e.message)}finally{x(!1)}})()});return(0,s.jsxs)(C.J2,{open:u,onOpenChange:e=>{b(e)},children:[s.jsx(C.xo,{disabled:!0,className:"w-full",children:s.jsx("form",{onSubmit:_,className:"",ref:n,children:s.jsx(j.I,{...A("searchValue",{required:!0}),type:"search",placeholder:"Search hospitals","data-search-input":"true",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",onFocus:e=>{b(!!S),setTimeout(()=>e.target.focus(),0)},onKeyUp:()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(_,1e3)}})})}),s.jsx(C.yk,{style:{width:f},className:"flex flex-col gap-y-2 p-0",children:!!w&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.DataTable,{loading:g,maxRows:5,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=w.data[e.rowIndex];return s.jsx(m,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>a([t.hospitalId],()=>Z({page:w.page}))})}}],data:w.data.map(e=>[e.name||"",""])}),s.jsx(c.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(d.t,{currentPage:w.page,totalPages:w.totalPages,disabled:g,limit:w.limit||w.totalRows,totalRows:w.totalRows,collectionName:"hospitals",onPaginate:e=>Z({page:e}),hideControls:!1,hideSummary:!1})})]})})]})}function R({selected:e,onDelete:a,toggleHospitalForm:t,searchHospitals:l}){let i=(0,o.l)(),[d,n]=(0,r.useState)(i.parsed.role||"all"),[f,p]=(0,r.useState)(i.parsed.status||"all");return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"py-4 flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"px-4 flex flex-col gap-y-2 md:flex-row md:gap-y-0 md:gap-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[s.jsx("span",{className:"text-2xl md:mr-auto",children:"Hospitals"}),s.jsx("div",{className:"ml-auto"}),(0,s.jsxs)(h.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>t(),children:[s.jsx(q.Z,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"New Hospital"})]})]}),s.jsx("div",{className:"flex-1",children:s.jsx(A,{searchHospitals:l,onDelete:a})})]}),!!e.length&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{}),(0,s.jsxs)("div",{className:"px-4 flex flex-wrap gap-x-2 gap-y-1",children:[s.jsx("div",{className:"md:ml-auto"}),s.jsx("div",{children:(0,s.jsxs)(h.z,{variant:"destructive",className:"h-auto w-auto",onClick:()=>a(e),children:[s.jsx(u.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:e.length>1?`Delete ${e.length} selected hospitals`:"Delete selected hospital"})]})})]})]})]})})}function S({hospitals:e,getHospitals:a,deleteHospitals:t,getHospital:p,updateHospitals:u,createHospitals:b,searchHospitals:h}){let x=(0,o.l)(),[g,v]=(0,r.useState)(e),[y,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)([]),[P,q]=(0,r.useState)(!1),{confirm:H}=(0,f.t)(),C=(0,r.useCallback)(async(t,s)=>{j(!0);let r=await a({...x.parsed,roles:x.parsed.role?[x.parsed.role]:void 0,page:1,limit:e.limit,...t});r.error?l.Am.error(r.error):(v(r),N([])),s?.(r.error,r),j(!1)},[a,x,e]),A=(0,r.useCallback)((e,a)=>{let s=g.data.filter(a=>e.includes(a.hospitalId)).map(e=>e.name);H(()=>{(async()=>{try{j(!0),await t(e),await C(),a?.()}catch(e){l.Am.error(e.message)}finally{j(!1)}})()},{title:"Delete "+(s.length>1?"hospitals":"hospital"),message:`<p>Are you sure you want to delete:</p> ${s.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[H,t,C,g]),S=x.parsed.hospitalId||P?s.jsx(I,{open:P,getHospital:p,updateHospitals:u,createHospitals:b,onSaveSuccess:C,onClose:()=>q(!1)}):null;return(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx(R,{hospitals:g,selected:w.map(e=>g.data[e].hospitalId),onDelete:A,getHospitals:C,searchHospitals:h,toggleHospitalForm:()=>q(e=>!e)}),s.jsx(c.Z,{}),s.jsx(i.DataTable,{selectable:!0,selectedIndexes:w,onSelect:N,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let a=g.data[e.rowIndex];return s.jsx(m,{hospitalId:a.hospitalId,hospitalName:a.name,onDelete:()=>A([a.hospitalId])})}}],data:g.data.map(e=>[e.name,""])}),s.jsx(c.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(d.t,{currentPage:g.page,totalPages:g.totalPages,disabled:y,limit:g.limit||g.totalRows,totalRows:g.totalRows,collectionName:"hospitals",onPaginate:e=>C({page:e},(e,a)=>!e&&x.push({page:a?.page||g.page})),hideControls:!1,hideSummary:!1})}),S,y&&s.jsx(n.a,{overlay:!0})]})}},58879:(e,a,t)=>{"use strict";t.d(a,{t:()=>j});var s=t(10326),r=t(17577),l=t(11890),i=t(39183),d=t(15919),c=t(77863),n=t(90772);let o=({className:e,...a})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",e),...a});o.displayName="Pagination";let f=r.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",e),...a}));f.displayName="PaginationContent";let p=r.forwardRef(({className:e,...a},t)=>s.jsx("li",{ref:t,className:(0,c.cn)("",e),...a}));p.displayName="PaginationItem";let u=({className:e,isActive:a,size:t="icon",...r})=>s.jsx("a",{"aria-current":a?"page":void 0,className:(0,c.cn)((0,n.d)({variant:a?"outline":"ghost",size:t}),e),...r});u.displayName="PaginationLink";let b=({className:e,...a})=>(0,s.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",e),...a,children:[s.jsx(l.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});b.displayName="PaginationPrevious";let h=({className:e,...a})=>(0,s.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",e),...a,children:[s.jsx("span",{children:"Next"}),s.jsx(i.Z,{className:"h-4 w-4"})]});h.displayName="PaginationNext";let m=({className:e,...a})=>(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",e),...a,children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"More pages"})]});m.displayName="PaginationEllipsis";var x=t(24082);let g="LEFT",v="RIGHT";function y(e,a,t=1){let s=e,r=[];for(;s<=a;)r.push(s),s+=t;return r}function j(e){let{currentPage:a,totalPages:t,disabled:r,limit:l=1,totalRows:i,collectionName:d="results",hideControls:n,hideSummary:j,classes:w}=e,N=function(e){let{currentPage:a=1,totalPages:t=0,onPaginate:s}=e,r=[{id:"first",label:"Previous",disabled:a<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>s(a-1)}];return(function({totalPages:e=0,currentPage:a=1}){if(e>9){let t=[],s=a-2,r=a+2,l=e-1,i=s>2?s:2,d=r<l?r:l,c=7-(t=y(i,d)).length-1,n=i>2,o=d<l;return n&&!o?t=[g,...y(i-c,i-1),...t]:!n&&o?t=[...t,...y(d+1,d+c),v]:n&&o&&(t=[g,...t,v]),[1,...t,e]}return y(1,e)})(e).forEach(e=>{[g,v].includes(e)?r.push({label:"...",id:`${e}`,disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):r.push({id:`${e}`,label:`${e}`,disabled:a===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>s(Number(e))})}),r.push({id:"last",label:"Next",disabled:t===a,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>s(a+1)}),r}(e);return n&&j?null:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!j&&(0,s.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",i?(0,x.c)((a-1)*l+1):0,"\xa0-\xa0",(0,x.c)(Math.min(i,a*l)),"\xa0of\xa0",(0,x.c)(i,{separator:" "})," ",d]}),!n&&s.jsx(o,{children:s.jsx(f,{children:N.map(e=>s.jsx(p,{children:(()=>{let l=`${a}`==`${e.label}`,i=e.disabled||r,d="opacity-50",n=()=>!i&&e.onClick();return e.isPrev?(i=i||1===a,s.jsx(b,{href:"#",className:(0,c.cn)(1===a?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),n()}})):e.isEllipsis?s.jsx(m,{className:(0,c.cn)(i?d:"","hidden md:flex",w?.pageNumber)}):e.isNext?(i=i||a===t,s.jsx(h,{href:"#",className:(0,c.cn)(i?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),n()}})):s.jsx(u,{href:"#",className:(0,c.cn)(i?d:"","hidden md:flex",w?.pageNumber),isActive:l,onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},children:e.label})})()},e.id))})})]})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>n});var s=t(10326),r=t(17577),l=t(34478),i=t(28671),d=t(77863);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef(({className:e,secondary:a,error:t,...r},i)=>s.jsx(l.f,{ref:i,className:(0,d.cn)(c(),a&&"text-xs",t?"text-danger":"",e),...r}));n.displayName=l.f.displayName},8281:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var s=t(10326),r=t(17577),l=t(90220),i=t(77863);let d=r.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},d)=>s.jsx(l.f,{ref:d,decorative:t,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));d.displayName=l.f.displayName},43059:(e,a,t)=>{"use strict";t.d(a,{q:()=>r});var s=t(17577);function r(e){return(0,s.useRef)(0),null}},24082:(e,a,t)=>{"use strict";function s(e,a){let{decimals:t=0,separator:s=" "}={...a};isNaN(e=Number(`${e}`.replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let r=(e=`${Number(e).toFixed(t>=0?t:2)}`).toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),r.join(".")}t.d(a,{c:()=>s})},11890:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},15919:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},81928:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(19510),r=t(21113),l=t(24569),i=t(46697);function d(){return s.jsx(l.V,{children:s.jsx(i.Zb,{children:s.jsx(i.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Name"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},17357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(19510),r=t(5973),l=t(24569),i=t(85431),d=t(46697),c=t(68570);let n=(0,c.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/components/table.tsx`),{__esModule:o,$$typeof:f}=n;n.default;let p=(0,c.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/components/table.tsx#HospitalsTable`);async function u({searchParams:{page:e}}){let[a]=await Promise.all([(0,r.getHospitals)({limit:25,page:e?Number(e):void 0})]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.D,{children:"Hospitals"}),s.jsx(l.V,{children:a.error?s.jsx(d.Zb,{className:"border-danger bg-danger/20 text-center",children:s.jsx(d.aY,{children:s.jsx("div",{className:"text-danger",children:a.error})})}):s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"p-0",children:s.jsx(p,{hospitals:a,getHospitals:r.getHospitals,deleteHospitals:r.deleteHospitals,getHospital:r.getHospital,updateHospitals:r.updateHospitals,createHospitals:r.createHospitals,searchHospitals:r.searchHospitals})})})})]})}},5973:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>H,$$ACTION_1:()=>A,$$ACTION_2:()=>Z,$$ACTION_3:()=>T,createHospitals:()=>S,deleteHospitals:()=>R,getFullHospital:()=>I,getHospital:()=>P,getHospitals:()=>q,searchHospitals:()=>C,updateHospitals:()=>_});var s=t(24330);t(60166);var r=t(57745),l=t(9576),i=t(10413),d=t(57418),c=t(34149),n=t(60938),o=t(81445),f=t(30900),p=t(41502),u=t(57435);async function b(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await i.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt)),columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}})}async function h(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await i.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt))})}async function m({limit:e,archived:a,page:t=1,hospitalIds:s,searchValue:l}){t=Math.max(0,t);let f=[];if(a?f.push((0,r.K0)(d.hospitals.deletedAt)):f.push((0,r.Ft)(d.hospitals.deletedAt)),s?.length&&f.push((0,r.d3)(d.hospitals.hospitalId,s)),l=`${l||""}`.trim()){let e=["%",l,"%"].join("");f.push((0,c.i6)`LOWER(hospitals.name) like LOWER(${e})`)}let u=i.Z.select({count:(0,n.QX)()}).from(d.hospitals);f.length&&u.where((0,r.xD)(...f));let[{count:b}]=await u.execute(),h=1;b&&(t=Math.min(t,h=(0,p.x)(e)?1:Math.ceil(b/e)));let m=(0,p.x)(e)?void 0:Math.max(0,(t-1)*e),x=await i.Z.query.hospitals.findMany({where:f.length?(0,r.xD)(...f):void 0,limit:(0,p.x)(e)?void 0:e,orderBy:(0,o.C)(d.hospitals.id),offset:m,columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}});return{page:t,limit:e,data:x,totalRows:b,totalPages:h,searchValue:l,error:void 0}}let x={page:1,limit:void 0,totalRows:0,totalPages:1,data:[],searchValue:void 0,error:void 0};async function g(e){let a=x;try{a=await m(e)}catch(e){u.Z.error("_getHospitals ERROR",e),a.error=e.message}finally{return a}}async function v(e){if(e.length){let a=(0,r.d3)(d.hospitals.hospitalId,e),t=new Date;await i.Z.update(d.hospitals).set({deletedAt:t}).where(a)}return!0}async function y(e,a){let t=[];for(let a of e)t.push({...a,hospitalId:a.hospitalId||(0,l.Z)()});let s={inserted:[],success:!1};try{if(await i.Z.insert(d.hospitals).values(t),a?.returnInserted){let e=await g({hospitalIds:t.map(e=>e.hospitalId)});s.inserted=e.data}s.success=!0}catch(e){s.error=e.message}finally{return s}}async function j(e,a){let t=[];for(let{hospitalId:s,data:l}of e)try{delete l.id,delete l.createdAt,delete l.updatedAt,delete l.oldHospitalId,delete l.hospitalId,await i.Z.update(d.hospitals).set(l).where((0,r.eq)(d.hospitals.hospitalId,s));let e=a?.returnUpdated?await b(s):void 0;t.push({hospitalId:s,hospital:e})}catch(e){t.push({hospitalId:s,error:e.message})}return t}var w=t(66267),N=t(40618);async function P(e){try{return await (0,w.isAllowed)("get_hospital"),await b(e)||null}catch(e){return u.Z.error("getHospital ERROR:",e),null}}async function I(e){try{return await (0,w.isAllowed)("get_hospital"),await h(e)||null}catch(e){return u.Z.error("getFullHospital ERROR:",e),null}}let q=(0,s.j)("722df2eb81d6901644ad9eadd578284b693e02df",H);async function H(...e){try{return await (0,w.isAllowed)("get_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}let C=(0,s.j)("7badc5813153ab449d43a950ee717949bee4b73f",A);async function A(...e){try{return await (0,w.isAllowed)("search_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}async function R(e){return await (0,w.isAllowed)("delete_hospitals"),e.length&&await v(e),!0}let S=(0,s.j)("0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7",Z);async function Z(...e){try{return await (0,w.isAllowed)("create_hospitals"),await y(...e)}catch(e){throw u.Z.error("createHospitals ERROR",e),e}}let _=(0,s.j)("ad451422ee0e8d7be85f07dd8f65cc186afee186",T);async function T(...e){try{return await (0,w.isAllowed)("update_hospitals"),await j(...e)}catch(e){throw u.Z.error("updateHospitals ERROR",e),e}}(0,N.h)([P,I,q,C,R,S,_]),(0,s.j)("6cb2303157c9ed693f7ae3c03b0c029c027238e6",P),(0,s.j)("cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50",I),(0,s.j)("7ddbd6d73a428b212e13712785bbe2a47dba0f7e",q),(0,s.j)("0fdec2a36177cba16f69e460c423861bbf404e5b",C),(0,s.j)("4e8ea467f6e3c24a6d19367ff4f150839963fa5c",R),(0,s.j)("8d0e8853fd9e4c89d36268a7f266efbb50bdf11c",S),(0,s.j)("58d233f62675141721c552c27bec89c6ba4be640",_)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>l});var s=t(19510),r=t(50650);function l({className:e,...a}){return s.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>d});var s=t(68570);let r=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let d=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>i,aY:()=>d});var s=t(19510),r=t(71159),l=t(50650);let i=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},34478:(e,a,t)=>{"use strict";t.d(a,{f:()=>d});var s=t(17577),r=t(45226),l=t(10326),i=s.forwardRef((e,a)=>(0,l.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var d=i},90220:(e,a,t)=>{"use strict";t.d(a,{f:()=>n});var s=t(17577),r=t(45226),l=t(10326),i="horizontal",d=["horizontal","vertical"],c=s.forwardRef((e,a)=>{let{decorative:t,orientation:s=i,...c}=e,n=d.includes(s)?s:i;return(0,l.jsx)(r.WV.div,{"data-orientation":n,...t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...c,ref:a})});c.displayName="Separator";var n=c}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[5822,1744,3788,1490,5802,4084,2619,231,4723,1813,6943,413,6267,7529,3856,565,7228],()=>t(27791));module.exports=s})();