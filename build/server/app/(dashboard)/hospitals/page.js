(()=>{var e={};e.id=4075,e.ids=[4075],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},27791:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>o,routeModule:()=>u,tree:()=>n}),t(17357),t(81928),t(56367),t(12699),t(69684),t(96560);var s=t(23191),r=t(88716),i=t(37922),l=t.n(i),d=t(95231),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(a,c);let n=["",{children:["(dashboard)",{children:["hospitals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17357)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,81928)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,69684)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/not-found.tsx"]}],o=["/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/page.tsx"],f="/(dashboard)/hospitals/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/hospitals/page",pathname:"/hospitals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},7930:(e,a,t)=>{let s={"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_2),"0fdec2a36177cba16f69e460c423861bbf404e5b":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.searchHospitals),"4e8ea467f6e3c24a6d19367ff4f150839963fa5c":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.deleteHospitals),"58d233f62675141721c552c27bec89c6ba4be640":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.updateHospitals),"6cb2303157c9ed693f7ae3c03b0c029c027238e6":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospital),"722df2eb81d6901644ad9eadd578284b693e02df":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_0),"7badc5813153ab449d43a950ee717949bee4b73f":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_1),"7ddbd6d73a428b212e13712785bbe2a47dba0f7e":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospitals),"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.createHospitals),ad451422ee0e8d7be85f07dd8f65cc186afee186:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_3),cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getFullHospital),"1d060a829ac08f6adb4ed6f259c6c0d117feea4b":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),c474998fd6b8a9785a09ad9fa5995661f28c6c5b:()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),"44218771357d06d79311b6d6641a20c018bafd37":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),"33d8b15ec8dd98c91eac63d85211264cf0a630b8":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),"458e0bb776cc3d544fd3487595ecc0d4d43114fc":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),"62ecd67a03f8f29d7d9a14399a69f12cd0186bad":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),b0d634be4cc158e4043dd09673ee30e8e18999af:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),"0c0d3a976a0d3670bfcd783a4eda74ef47d08486":()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.$$ACTION_0),eb767362e2857509ccd48c4eb7968f5169ef228f:()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.importRemoteScripts),fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d:()=>Promise.resolve().then(t.bind(t,65376)).then(e=>e.getSites),"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.publishData),"3b2ac91bc81489809370d893a7d7c83a162e1a96":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.countAllDrafts),"64f3a633dace3ede963f725b16dc2b5f210bdd56":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_1),"6631df3cf85446a0818ac2dde947f63d2fad6c89":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_0),"7b75f487e334a946b63829017d9aa902b59378e0":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.getEditorDetails),"893d510641fbd37b4cbe2a75916de7869dd43ca6":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.revalidatePath),e8515d84060942f8f3866c65cc44204f02ef54e2:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.discardDrafts)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7":r.bind(null,"0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7"),"0fdec2a36177cba16f69e460c423861bbf404e5b":r.bind(null,"0fdec2a36177cba16f69e460c423861bbf404e5b"),"4e8ea467f6e3c24a6d19367ff4f150839963fa5c":r.bind(null,"4e8ea467f6e3c24a6d19367ff4f150839963fa5c"),"58d233f62675141721c552c27bec89c6ba4be640":r.bind(null,"58d233f62675141721c552c27bec89c6ba4be640"),"6cb2303157c9ed693f7ae3c03b0c029c027238e6":r.bind(null,"6cb2303157c9ed693f7ae3c03b0c029c027238e6"),"722df2eb81d6901644ad9eadd578284b693e02df":r.bind(null,"722df2eb81d6901644ad9eadd578284b693e02df"),"7badc5813153ab449d43a950ee717949bee4b73f":r.bind(null,"7badc5813153ab449d43a950ee717949bee4b73f"),"7ddbd6d73a428b212e13712785bbe2a47dba0f7e":r.bind(null,"7ddbd6d73a428b212e13712785bbe2a47dba0f7e"),"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c":r.bind(null,"8d0e8853fd9e4c89d36268a7f266efbb50bdf11c"),ad451422ee0e8d7be85f07dd8f65cc186afee186:r.bind(null,"ad451422ee0e8d7be85f07dd8f65cc186afee186"),cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50:r.bind(null,"cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50"),"1d060a829ac08f6adb4ed6f259c6c0d117feea4b":r.bind(null,"1d060a829ac08f6adb4ed6f259c6c0d117feea4b"),c474998fd6b8a9785a09ad9fa5995661f28c6c5b:r.bind(null,"c474998fd6b8a9785a09ad9fa5995661f28c6c5b"),"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf":r.bind(null,"0b2fbd1c3a054fb1b76c33cf025c25b5d80cbadf"),"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350":r.bind(null,"25ea7ea3dd7527b3c13d4af3d456f9d5e4cff350"),"44218771357d06d79311b6d6641a20c018bafd37":r.bind(null,"44218771357d06d79311b6d6641a20c018bafd37"),"33d8b15ec8dd98c91eac63d85211264cf0a630b8":r.bind(null,"33d8b15ec8dd98c91eac63d85211264cf0a630b8"),"458e0bb776cc3d544fd3487595ecc0d4d43114fc":r.bind(null,"458e0bb776cc3d544fd3487595ecc0d4d43114fc"),"62ecd67a03f8f29d7d9a14399a69f12cd0186bad":r.bind(null,"62ecd67a03f8f29d7d9a14399a69f12cd0186bad"),b0d634be4cc158e4043dd09673ee30e8e18999af:r.bind(null,"b0d634be4cc158e4043dd09673ee30e8e18999af"),"0c0d3a976a0d3670bfcd783a4eda74ef47d08486":r.bind(null,"0c0d3a976a0d3670bfcd783a4eda74ef47d08486"),eb767362e2857509ccd48c4eb7968f5169ef228f:r.bind(null,"eb767362e2857509ccd48c4eb7968f5169ef228f"),fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d:r.bind(null,"fb88c3f5187f1ae67c65c11fdc8ca29dc4350c9d"),"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9":r.bind(null,"1deaec5322a5d4e3e3d426178bd61a39c0c28ae9"),"3b2ac91bc81489809370d893a7d7c83a162e1a96":r.bind(null,"3b2ac91bc81489809370d893a7d7c83a162e1a96"),"64f3a633dace3ede963f725b16dc2b5f210bdd56":r.bind(null,"64f3a633dace3ede963f725b16dc2b5f210bdd56"),"6631df3cf85446a0818ac2dde947f63d2fad6c89":r.bind(null,"6631df3cf85446a0818ac2dde947f63d2fad6c89"),"7b75f487e334a946b63829017d9aa902b59378e0":r.bind(null,"7b75f487e334a946b63829017d9aa902b59378e0"),"893d510641fbd37b4cbe2a75916de7869dd43ca6":r.bind(null,"893d510641fbd37b4cbe2a75916de7869dd43ca6"),e8515d84060942f8f3866c65cc44204f02ef54e2:r.bind(null,"e8515d84060942f8f3866c65cc44204f02ef54e2")}},70746:(e,a,t)=>{Promise.resolve().then(t.bind(t,27145)),Promise.resolve().then(t.bind(t,10827))},50064:(e,a,t)=>{Promise.resolve().then(t.bind(t,77228))},27145:(e,a,t)=>{"use strict";t.d(a,{HospitalsTable:()=>R});var s=t(10326),r=t(17577),i=t(85999),l=t(44099),d=t(77228),c=t(58879),n=t(8281),o=t(11870),f=t(12260),p=t(46670),u=t(39447),b=t(47035),h=t(60097),m=t(90772);function x({hospitalId:e,hospitalName:a,onDelete:t}){let r=(0,f.l)();return s.jsx(s.Fragment,{children:(0,s.jsxs)(h.h_,{children:[s.jsx(h.$F,{asChild:!0,children:s.jsx(m.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:s.jsx(u.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(h.AW,{children:[s.jsx(h.Ju,{children:a}),s.jsx(h.VD,{}),s.jsx(h.Xi,{onClick:()=>r.push({hospitalId:e}),children:"Edit"}),s.jsx(h.VD,{}),(0,s.jsxs)(h.Xi,{onClick:t,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[s.jsx(b.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]})})}var g=t(90748),v=t(47463),y=t(74723),j=t(7890),N=t(54432),w=t(31048),P=t(96221),I=t(43059);function q({open:e,hospitalId:a,getHospital:t,onClose:i,updateHospitals:d,createHospitals:c,onSaveSuccess:n}){let{alert:p}=(0,P.s)(),{parsed:u,replace:b}=(0,f.l)(),h=a||u.hospitalId,[x,q]=(0,r.useState)(!1),[H,C]=(0,r.useState)(!1),[,S]=(0,r.useState)(),{setValue:Z,register:A,handleSubmit:R}=(0,y.cI)({defaultValues:{hospitalId:h||(0,v.Z)(),name:""}}),_=(0,r.useCallback)(()=>{h&&(q(!0),t(h).then(e=>{S(e),e&&(Z("hospitalId",e.hospitalId),Z("name",e.name))}).catch(e=>p({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>b({hospitalId:void 0})})).finally(()=>q(!1)))},[h,b,p,Z,t]);(0,I.q)(_);let T=R(e=>{(async()=>{try{C(!0),h?await l.Z.post("/api/hospitals/update",{data:[{hospitalId:h,data:e}]}):await l.Z.post("/api/hospitals/add",{data:[e]}),n&&await n(),p({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{i?.(),b({hospitalId:void 0})}})}catch(e){p({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{C(!1)}})()});return x?s.jsx(o.a,{overlay:!0}):(0,s.jsxs)(s.Fragment,{children:[H&&s.jsx(o.a,{overlay:!0}),(0,s.jsxs)(j.yo,{open:e||!!u.hospitalId,onOpenChange:()=>{i?.(),b({hospitalId:void 0})},children:[s.jsx(j.aM,{asChild:!0,children:s.jsx(m.z,{className:"md:hidden",variant:"ghost",children:s.jsx(g.Z,{className:"h-6 w-6"})})}),(0,s.jsxs)(j.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[s.jsx(j.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,s.jsxs)(j.bC,{children:[h?"Edit":"New"," Hospital"]})}),s.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,s.jsxs)("div",{children:[s.jsx(w._,{htmlFor:"name",children:"Hospital Name"}),s.jsx(N.I,{...A("name",{required:!0,disabled:H}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[s.jsx(j.sw,{asChild:!0,children:s.jsx(m.z,{variant:"outline",children:"Cancel"})}),s.jsx(m.z,{onClick:T,children:"Save"})]})]})]})]})}var H=t(83855),C=t(2165),S=t(30811);function Z({searchHospitals:e,onDelete:a}){let t=(0,r.useRef)(),[o,{width:p}]=(0,C.Z)(),u=(0,f.l)(),[b,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,P]=(0,r.useState)(),[I,q]=(0,r.useState)(),{watch:H,register:Z,handleSubmit:A}=(0,y.cI)({defaultValues:{searchValue:""}}),R=H("searchValue");(0,r.useMemo)(()=>w?.page||1,[w?.page]),(0,r.useMemo)(()=>u.parsed.hospitalId,[u.parsed.hospitalId]);let _=(0,r.useCallback)(async e=>{try{if(R||w?.searchValue!==R){j(!0);let a=(await l.Z.get("/api/hospitals?data="+JSON.stringify({searchValue:R,limit:5,...e}))).data;a.error?i.Am.error(a.error):P(a)}}catch(e){i.Am.error(e.message)}finally{j(!1)}},[R,w,e]),T=A(({searchValue:e})=>{(async()=>{try{if(e){t.current&&clearTimeout(t.current),g(!0),h(!0);let a=document.querySelector("[data-search-input]");setTimeout(()=>a?.focus(),10),await _({searchValue:e})}else P(void 0),h(!1)}catch(e){i.Am.error(e.message)}finally{g(!1)}})()});return(0,s.jsxs)(S.J2,{open:b,onOpenChange:e=>{h(e)},children:[s.jsx(S.xo,{disabled:!0,className:"w-full",children:s.jsx("form",{onSubmit:T,className:"",ref:o,children:s.jsx(N.I,{...Z("searchValue",{required:!0}),type:"search",placeholder:"Search hospitals","data-search-input":"true",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",onFocus:e=>{h(!!R),setTimeout(()=>e.target.focus(),0)},onKeyUp:()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(T,1e3)}})})}),s.jsx(S.yk,{style:{width:p},className:"flex flex-col gap-y-2 p-0",children:!!w&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.DataTable,{loading:v,maxRows:5,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=w.data[e.rowIndex];return s.jsx(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>a([t.hospitalId],()=>_({page:w.page}))})}}],data:w.data.map(e=>[e.name||"",""])}),s.jsx(n.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(c.t,{currentPage:w.page,totalPages:w.totalPages,disabled:v,limit:w.limit||w.totalRows,totalRows:w.totalRows,collectionName:"hospitals",onPaginate:e=>_({page:e}),hideControls:!1,hideSummary:!1})})]})})]})}function A({selected:e,onDelete:a,toggleHospitalForm:t,searchHospitals:i}){let l=(0,f.l)(),[d,c]=(0,r.useState)(l.parsed.role||"all"),[o,p]=(0,r.useState)(l.parsed.status||"all");return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"py-4 flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"px-4 flex flex-col gap-y-2 md:flex-row md:gap-y-0 md:gap-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[s.jsx("span",{className:"text-2xl md:mr-auto",children:"Hospitals"}),s.jsx("div",{className:"ml-auto"}),(0,s.jsxs)(m.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>t(),children:[s.jsx(H.Z,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"New Hospital"})]})]}),s.jsx("div",{className:"flex-1",children:s.jsx(Z,{searchHospitals:i,onDelete:a})})]}),!!e.length&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{}),(0,s.jsxs)("div",{className:"px-4 flex flex-wrap gap-x-2 gap-y-1",children:[s.jsx("div",{className:"md:ml-auto"}),s.jsx("div",{children:(0,s.jsxs)(m.z,{variant:"destructive",className:"h-auto w-auto",onClick:()=>a(e),children:[s.jsx(b.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:e.length>1?`Delete ${e.length} selected hospitals`:"Delete selected hospital"})]})})]})]})]})})}function R({hospitals:e,getHospitals:a,deleteHospitals:t,getHospital:u,updateHospitals:b,createHospitals:h,searchHospitals:m}){let g=(0,f.l)(),[v,y]=(0,r.useState)(e),[j,N]=(0,r.useState)(!1),[w,P]=(0,r.useState)([]),[I,H]=(0,r.useState)(!1),{confirm:C}=(0,p.t)(),S=(0,r.useCallback)(async(a,t)=>{N(!0);let s=(await l.Z.get("/api/hospitals?data="+JSON.stringify({...g.parsed,roles:g.parsed.role?[g.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;s.error?i.Am.error(s.error):(y(s),P([])),t?.(s.error,s),N(!1)},[a,g,e]),Z=(0,r.useCallback)((e,a)=>{let t=v.data.filter(a=>e.includes(a.hospitalId)).map(e=>e.name);C(()=>{(async()=>{try{N(!0),await l.Z.delete("/api/hospitals?data="+JSON.stringify(e)),await S(),a?.()}catch(e){i.Am.error(e.message)}finally{N(!1)}})()},{title:"Delete "+(t.length>1?"hospitals":"hospital"),message:`<p>Are you sure you want to delete:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,t,S,v]),R=g.parsed.hospitalId||I?s.jsx(q,{open:I,getHospital:u,updateHospitals:b,createHospitals:h,onSaveSuccess:S,onClose:()=>H(!1)}):null;return(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx(A,{hospitals:v,selected:w.map(e=>v.data[e].hospitalId),onDelete:Z,getHospitals:S,searchHospitals:m,toggleHospitalForm:()=>H(e=>!e)}),s.jsx(n.Z,{}),s.jsx(d.DataTable,{selectable:!0,selectedIndexes:w,onSelect:P,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let a=v.data[e.rowIndex];return s.jsx(x,{hospitalId:a.hospitalId,hospitalName:a.name,onDelete:()=>Z([a.hospitalId])})}}],data:v.data.map(e=>[e.name,""])}),s.jsx(n.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(c.t,{currentPage:v.page,totalPages:v.totalPages,disabled:j,limit:v.limit||v.totalRows,totalRows:v.totalRows,collectionName:"hospitals",onPaginate:e=>S({page:e},(e,a)=>!e&&g.push({page:a?.page||v.page})),hideControls:!1,hideSummary:!1})}),R,j&&s.jsx(o.a,{overlay:!0})]})}},58879:(e,a,t)=>{"use strict";t.d(a,{t:()=>j});var s=t(10326),r=t(17577),i=t(11890),l=t(39183),d=t(15919),c=t(77863),n=t(90772);let o=({className:e,...a})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",e),...a});o.displayName="Pagination";let f=r.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",e),...a}));f.displayName="PaginationContent";let p=r.forwardRef(({className:e,...a},t)=>s.jsx("li",{ref:t,className:(0,c.cn)("",e),...a}));p.displayName="PaginationItem";let u=({className:e,isActive:a,size:t="icon",...r})=>s.jsx("a",{"aria-current":a?"page":void 0,className:(0,c.cn)((0,n.d)({variant:a?"outline":"ghost",size:t}),e),...r});u.displayName="PaginationLink";let b=({className:e,...a})=>(0,s.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",e),...a,children:[s.jsx(i.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});b.displayName="PaginationPrevious";let h=({className:e,...a})=>(0,s.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",e),...a,children:[s.jsx("span",{children:"Next"}),s.jsx(l.Z,{className:"h-4 w-4"})]});h.displayName="PaginationNext";let m=({className:e,...a})=>(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",e),...a,children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"More pages"})]});m.displayName="PaginationEllipsis";var x=t(24082);let g="LEFT",v="RIGHT";function y(e,a,t=1){let s=e,r=[];for(;s<=a;)r.push(s),s+=t;return r}function j(e){let{currentPage:a,totalPages:t,disabled:r,limit:i=1,totalRows:l,collectionName:d="results",hideControls:n,hideSummary:j,classes:N}=e,w=function(e){let{currentPage:a=1,totalPages:t=0,onPaginate:s}=e,r=[{id:"first",label:"Previous",disabled:a<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>s(a-1)}];return(function({totalPages:e=0,currentPage:a=1}){if(e>9){let t=[],s=a-2,r=a+2,i=e-1,l=s>2?s:2,d=r<i?r:i,c=7-(t=y(l,d)).length-1,n=l>2,o=d<i;return n&&!o?t=[g,...y(l-c,l-1),...t]:!n&&o?t=[...t,...y(d+1,d+c),v]:n&&o&&(t=[g,...t,v]),[1,...t,e]}return y(1,e)})(e).forEach(e=>{[g,v].includes(e)?r.push({label:"...",id:`${e}`,disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):r.push({id:`${e}`,label:`${e}`,disabled:a===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>s(Number(e))})}),r.push({id:"last",label:"Next",disabled:t===a,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>s(a+1)}),r}(e);return n&&j?null:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!j&&(0,s.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",l?(0,x.c)((a-1)*i+1):0,"\xa0-\xa0",(0,x.c)(Math.min(l,a*i)),"\xa0of\xa0",(0,x.c)(l,{separator:" "})," ",d]}),!n&&s.jsx(o,{children:s.jsx(f,{children:w.map(e=>s.jsx(p,{children:(()=>{let i=`${a}`==`${e.label}`,l=e.disabled||r,d="opacity-50",n=()=>!l&&e.onClick();return e.isPrev?(l=l||1===a,s.jsx(b,{href:"#",className:(0,c.cn)(1===a?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),n()}})):e.isEllipsis?s.jsx(m,{className:(0,c.cn)(l?d:"","hidden md:flex",N?.pageNumber)}):e.isNext?(l=l||a===t,s.jsx(h,{href:"#",className:(0,c.cn)(l?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),n()}})):s.jsx(u,{href:"#",className:(0,c.cn)(l?d:"","hidden md:flex",N?.pageNumber),isActive:i,onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},children:e.label})})()},e.id))})})]})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>n});var s=t(10326),r=t(17577),i=t(34478),l=t(28671),d=t(77863);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef(({className:e,secondary:a,error:t,...r},l)=>s.jsx(i.f,{ref:l,className:(0,d.cn)(c(),a&&"text-xs",t?"text-danger":"",e),...r}));n.displayName=i.f.displayName},8281:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var s=t(10326),r=t(17577),i=t(90220),l=t(77863);let d=r.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},d)=>s.jsx(i.f,{ref:d,decorative:t,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));d.displayName=i.f.displayName},43059:(e,a,t)=>{"use strict";t.d(a,{q:()=>r});var s=t(17577);function r(e){return(0,s.useRef)(0),null}},24082:(e,a,t)=>{"use strict";function s(e,a){let{decimals:t=0,separator:s=" "}={...a};isNaN(e=Number(`${e}`.replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let r=(e=`${Number(e).toFixed(t>=0?t:2)}`).toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),r.join(".")}t.d(a,{c:()=>s})},11890:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},15919:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},81928:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(19510),r=t(21113),i=t(24569),l=t(46697);function d(){return s.jsx(i.V,{children:s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Name"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},17357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(19510),r=t(5973),i=t(24569),l=t(85431),d=t(46697),c=t(68570);let n=(0,c.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/components/table.tsx`),{__esModule:o,$$typeof:f}=n;n.default;let p=(0,c.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/app/(dashboard)/hospitals/components/table.tsx#HospitalsTable`);async function u({searchParams:{page:e}}){let[a]=await Promise.all([(0,r.getHospitals)({limit:25,page:e?Number(e):void 0})]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.D,{children:"Hospitals"}),s.jsx(i.V,{children:a.error?s.jsx(d.Zb,{className:"border-danger bg-danger/20 text-center",children:s.jsx(d.aY,{children:s.jsx("div",{className:"text-danger",children:a.error})})}):s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"p-0",children:s.jsx(p,{hospitals:a,getHospitals:r.getHospitals,deleteHospitals:r.deleteHospitals,getHospital:r.getHospital,updateHospitals:r.updateHospitals,createHospitals:r.createHospitals,searchHospitals:r.searchHospitals})})})})]})}},5973:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>H,$$ACTION_1:()=>S,$$ACTION_2:()=>R,$$ACTION_3:()=>T,createHospitals:()=>A,deleteHospitals:()=>Z,getFullHospital:()=>I,getHospital:()=>P,getHospitals:()=>q,searchHospitals:()=>C,updateHospitals:()=>_});var s=t(24330);t(60166);var r=t(57745),i=t(9576),l=t(10413),d=t(57418),c=t(34149),n=t(60938),o=t(81445),f=t(30900),p=t(41502),u=t(57435);async function b(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt)),columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}})}async function h(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt))})}async function m({limit:e,archived:a,page:t=1,hospitalIds:s,searchValue:i}){t=Math.max(0,t);let f=[];if(a?f.push((0,r.K0)(d.hospitals.deletedAt)):f.push((0,r.Ft)(d.hospitals.deletedAt)),s?.length&&f.push((0,r.d3)(d.hospitals.hospitalId,s)),i=`${i||""}`.trim()){let e=["%",i,"%"].join("");f.push((0,c.i6)`LOWER(hospitals.name) like LOWER(${e})`)}let u=l.Z.select({count:(0,n.QX)()}).from(d.hospitals);f.length&&u.where((0,r.xD)(...f));let[{count:b}]=await u.execute(),h=1;b&&(t=Math.min(t,h=(0,p.x)(e)?1:Math.ceil(b/e)));let m=(0,p.x)(e)?void 0:Math.max(0,(t-1)*e),x=await l.Z.query.hospitals.findMany({where:f.length?(0,r.xD)(...f):void 0,limit:(0,p.x)(e)?void 0:e,orderBy:(0,o.C)(d.hospitals.id),offset:m,columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}});return{page:t,limit:e,data:x,totalRows:b,totalPages:h,searchValue:i,error:void 0}}let x={page:1,limit:void 0,totalRows:0,totalPages:1,data:[],searchValue:void 0,error:void 0};async function g(e){let a=x;try{a=await m(e)}catch(e){u.Z.error("_getHospitals ERROR",e),a.error=e.message}finally{return a}}async function v(e){if(e.length){let a=(0,r.d3)(d.hospitals.hospitalId,e),t=new Date;await l.Z.update(d.hospitals).set({deletedAt:t}).where(a)}return!0}async function y(e,a){let t=[];for(let a of e)t.push({...a,hospitalId:a.hospitalId||(0,i.Z)()});let s={inserted:[],success:!1};try{if(await l.Z.insert(d.hospitals).values(t),a?.returnInserted){let e=await g({hospitalIds:t.map(e=>e.hospitalId)});s.inserted=e.data}s.success=!0}catch(e){s.error=e.message}finally{return s}}async function j(e,a){let t=[];for(let{hospitalId:s,data:i}of e)try{delete i.id,delete i.createdAt,delete i.updatedAt,delete i.oldHospitalId,delete i.hospitalId,await l.Z.update(d.hospitals).set(i).where((0,r.eq)(d.hospitals.hospitalId,s));let e=a?.returnUpdated?await b(s):void 0;t.push({hospitalId:s,hospital:e})}catch(e){t.push({hospitalId:s,error:e.message})}return t}var N=t(66267),w=t(40618);async function P(e){try{return await (0,N.isAllowed)("get_hospital"),await b(e)||null}catch(e){return u.Z.error("getHospital ERROR:",e),null}}async function I(e){try{return await (0,N.isAllowed)("get_hospital"),await h(e)||null}catch(e){return u.Z.error("getFullHospital ERROR:",e),null}}let q=(0,s.j)("722df2eb81d6901644ad9eadd578284b693e02df",H);async function H(...e){try{return await (0,N.isAllowed)("get_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}let C=(0,s.j)("7badc5813153ab449d43a950ee717949bee4b73f",S);async function S(...e){try{return await (0,N.isAllowed)("search_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}async function Z(e){return await (0,N.isAllowed)("delete_hospitals"),e.length&&await v(e),!0}let A=(0,s.j)("0e3c0ad7f0b4a17c9ea85569d6f68d67646b35e7",R);async function R(...e){try{return await (0,N.isAllowed)("create_hospitals"),await y(...e)}catch(e){throw u.Z.error("createHospitals ERROR",e),e}}let _=(0,s.j)("ad451422ee0e8d7be85f07dd8f65cc186afee186",T);async function T(...e){try{return await (0,N.isAllowed)("update_hospitals"),await j(...e)}catch(e){throw u.Z.error("updateHospitals ERROR",e),e}}(0,w.h)([P,I,q,C,Z,A,_]),(0,s.j)("6cb2303157c9ed693f7ae3c03b0c029c027238e6",P),(0,s.j)("cfc91cdfe0ca46d2ac7380d818a5b5b06b272f50",I),(0,s.j)("7ddbd6d73a428b212e13712785bbe2a47dba0f7e",q),(0,s.j)("0fdec2a36177cba16f69e460c423861bbf404e5b",C),(0,s.j)("4e8ea467f6e3c24a6d19367ff4f150839963fa5c",Z),(0,s.j)("8d0e8853fd9e4c89d36268a7f266efbb50bdf11c",A),(0,s.j)("58d233f62675141721c552c27bec89c6ba4be640",_)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>i});var s=t(19510),r=t(50650);function i({className:e,...a}){return s.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>d});var s=t(68570);let r=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let d=(0,s.createProxy)(String.raw`/Users/lafarai/Werq/BWS/NeoTree/neotree-webeditor/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>l,aY:()=>d});var s=t(19510),r=t(71159),i=t(50650);let l=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},34478:(e,a,t)=>{"use strict";t.d(a,{f:()=>d});var s=t(17577),r=t(45226),i=t(10326),l=s.forwardRef((e,a)=>(0,i.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=l},90220:(e,a,t)=>{"use strict";t.d(a,{f:()=>n});var s=t(17577),r=t(45226),i=t(10326),l="horizontal",d=["horizontal","vertical"],c=s.forwardRef((e,a)=>{let{decorative:t,orientation:s=l,...c}=e,n=d.includes(s)?s:l;return(0,i.jsx)(r.WV.div,{"data-orientation":n,...t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...c,ref:a})});c.displayName="Separator";var n=c}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[5822,1744,3788,1490,5802,4084,7708,6620,9387,7938,4723,1813,6943,413,6267,8151,3911,3856,565,7228],()=>t(27791));module.exports=s})();