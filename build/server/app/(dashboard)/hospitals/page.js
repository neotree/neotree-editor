(()=>{var e={};e.id=4075,e.ids=[4075],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},57407:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>o,routeModule:()=>b,tree:()=>c}),t(17357),t(81928),t(56367),t(12699),t(69684),t(96560);var s=t(23191),r=t(88716),i=t(37922),l=t.n(i),d=t(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(a,n);let c=["",{children:["(dashboard)",{children:["hospitals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17357)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/hospitals/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,81928)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/hospitals/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,69684)),"/home/farai/Workbench/Neotree/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/home/farai/Workbench/Neotree/neotree-editor/app/not-found.tsx"]}],o=["/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/hospitals/page.tsx"],f="/(dashboard)/hospitals/page",p={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/hospitals/page",pathname:"/hospitals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},86716:(e,a,t)=>{let s={"0d4b90a613e80ee279557510ae39d6a687652165":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.deleteHospitals),"66e0e3ddb50f4882b9741048703e49ad1320b9bd":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_3),"68f564a64c5cb341a924153f7541bcc4ff1c6458":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospital),"7a70714cc06d396c784a686f1c879d5a62c1b0cd":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_0),"7dabc6cb600b6e84665315e80562bf41a45d09a0":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_2),"83641473ab6af6384ae46c03f7c956c1cc1e42b2":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_1),"898ba220dd556cf7483dab1a97504dc3037f4734":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospitals),"9419c0fa6a4b7fa2f8616eae04c81e79805b45a1":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.searchHospitals),a896e2a8a124f1878df7bc0d0d5daf845f3efce4:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getFullHospital),bc3473a150504626c95b49a2d6b92b083befa2e4:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.createHospitals),f3e1b7dd75875602cf4d21d356a03fd626b0e10d:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.updateHospitals),"0f298125b479af528a1665109806dd8c7cbf485f":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),e7ff353478ea7638eb62d92b3a19672b1cefa03f:()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3687a5d3a69097dd7418edaf538e63f38f229ea5":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),ff4d8db268db4669375c09f8725893bf00f6ae28:()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),"559815287213d06ead0c877c60e184e5031ac06e":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),b5d1e928850507f1eade38e5d8700567fd19649e:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),"4bccbc621808e65939704fa615db3606c6862204":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.$$ACTION_0),"50f9349ef19cfd3c0ac7777709536f6f53cfa025":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.importRemoteScripts),"522709ab77b10b961291141716509b467eed511d":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.$$ACTION_1),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSites),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSitesWithoutConfidentialData),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSite),ea276d8b8dc674a1b891605b84c4b6addb452962:()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.saveSites),"3628525f9968b3410608c9eeaf253358ba48d9fe":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.publishData),"49172b38c10122728aa1b2fc14d20f7760f2abd3":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.getEditorDetails),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_1),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.countAllDrafts),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.revalidatePath),e584eea53fe697cdba6835e3a5f23e256760fd14:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_0),f28667e6446bdcb1da1b47a90e98f363919ccac6:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.discardDrafts)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"0d4b90a613e80ee279557510ae39d6a687652165":r.bind(null,"0d4b90a613e80ee279557510ae39d6a687652165"),"66e0e3ddb50f4882b9741048703e49ad1320b9bd":r.bind(null,"66e0e3ddb50f4882b9741048703e49ad1320b9bd"),"68f564a64c5cb341a924153f7541bcc4ff1c6458":r.bind(null,"68f564a64c5cb341a924153f7541bcc4ff1c6458"),"7a70714cc06d396c784a686f1c879d5a62c1b0cd":r.bind(null,"7a70714cc06d396c784a686f1c879d5a62c1b0cd"),"7dabc6cb600b6e84665315e80562bf41a45d09a0":r.bind(null,"7dabc6cb600b6e84665315e80562bf41a45d09a0"),"83641473ab6af6384ae46c03f7c956c1cc1e42b2":r.bind(null,"83641473ab6af6384ae46c03f7c956c1cc1e42b2"),"898ba220dd556cf7483dab1a97504dc3037f4734":r.bind(null,"898ba220dd556cf7483dab1a97504dc3037f4734"),"9419c0fa6a4b7fa2f8616eae04c81e79805b45a1":r.bind(null,"9419c0fa6a4b7fa2f8616eae04c81e79805b45a1"),a896e2a8a124f1878df7bc0d0d5daf845f3efce4:r.bind(null,"a896e2a8a124f1878df7bc0d0d5daf845f3efce4"),bc3473a150504626c95b49a2d6b92b083befa2e4:r.bind(null,"bc3473a150504626c95b49a2d6b92b083befa2e4"),f3e1b7dd75875602cf4d21d356a03fd626b0e10d:r.bind(null,"f3e1b7dd75875602cf4d21d356a03fd626b0e10d"),"0f298125b479af528a1665109806dd8c7cbf485f":r.bind(null,"0f298125b479af528a1665109806dd8c7cbf485f"),e7ff353478ea7638eb62d92b3a19672b1cefa03f:r.bind(null,"e7ff353478ea7638eb62d92b3a19672b1cefa03f"),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":r.bind(null,"31571c1d1cec06f4e312c633fd04f0420aecf3f0"),"3687a5d3a69097dd7418edaf538e63f38f229ea5":r.bind(null,"3687a5d3a69097dd7418edaf538e63f38f229ea5"),ff4d8db268db4669375c09f8725893bf00f6ae28:r.bind(null,"ff4d8db268db4669375c09f8725893bf00f6ae28"),"559815287213d06ead0c877c60e184e5031ac06e":r.bind(null,"559815287213d06ead0c877c60e184e5031ac06e"),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":r.bind(null,"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1"),b5d1e928850507f1eade38e5d8700567fd19649e:r.bind(null,"b5d1e928850507f1eade38e5d8700567fd19649e"),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:r.bind(null,"bb5715444ca1fc8c6b68cca354c0a3615e5615e2"),"4bccbc621808e65939704fa615db3606c6862204":r.bind(null,"4bccbc621808e65939704fa615db3606c6862204"),"50f9349ef19cfd3c0ac7777709536f6f53cfa025":r.bind(null,"50f9349ef19cfd3c0ac7777709536f6f53cfa025"),"522709ab77b10b961291141716509b467eed511d":r.bind(null,"522709ab77b10b961291141716509b467eed511d"),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":r.bind(null,"60d4bc4dbf8a7e1570162873f97e0d36be03fa83"),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":r.bind(null,"65af2414f4ea72aa53dd5bd16d03045d9ac81d36"),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":r.bind(null,"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc"),ea276d8b8dc674a1b891605b84c4b6addb452962:r.bind(null,"ea276d8b8dc674a1b891605b84c4b6addb452962"),"3628525f9968b3410608c9eeaf253358ba48d9fe":r.bind(null,"3628525f9968b3410608c9eeaf253358ba48d9fe"),"49172b38c10122728aa1b2fc14d20f7760f2abd3":r.bind(null,"49172b38c10122728aa1b2fc14d20f7760f2abd3"),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":r.bind(null,"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3"),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":r.bind(null,"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828"),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:r.bind(null,"bc2ee616f8ba694d4ae301d1c34ff957771a7cfb"),e584eea53fe697cdba6835e3a5f23e256760fd14:r.bind(null,"e584eea53fe697cdba6835e3a5f23e256760fd14"),f28667e6446bdcb1da1b47a90e98f363919ccac6:r.bind(null,"f28667e6446bdcb1da1b47a90e98f363919ccac6")}},45999:(e,a,t)=>{Promise.resolve().then(t.bind(t,27145)),Promise.resolve().then(t.bind(t,10827))},74393:(e,a,t)=>{Promise.resolve().then(t.bind(t,77228))},27145:(e,a,t)=>{"use strict";t.d(a,{HospitalsTable:()=>R});var s=t(10326),r=t(17577),i=t(85999),l=t(44099),d=t(77228),n=t(58879),c=t(8281),o=t(11870),f=t(12260),p=t(46670),b=t(39447),h=t(47035),u=t(60097),m=t(90772);function x({hospitalId:e,hospitalName:a,onDelete:t}){let r=(0,f.l)();return s.jsx(s.Fragment,{children:(0,s.jsxs)(u.h_,{children:[s.jsx(u.$F,{asChild:!0,children:s.jsx(m.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:s.jsx(b.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(u.AW,{children:[s.jsx(u.Ju,{children:a}),s.jsx(u.VD,{}),s.jsx(u.Xi,{onClick:()=>r.push({hospitalId:e}),children:"Edit"}),s.jsx(u.VD,{}),(0,s.jsxs)(u.Xi,{onClick:t,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[s.jsx(h.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]})})}var g=t(90748),v=t(47463),y=t(74723),j=t(7890),N=t(54432),w=t(31048),P=t(96221),I=t(43059);function C({open:e,hospitalId:a,getHospital:t,onClose:i,updateHospitals:d,createHospitals:n,onSaveSuccess:c}){let{alert:p}=(0,P.s)(),{parsed:b,replace:h}=(0,f.l)(),u=a||b.hospitalId,[x,C]=(0,r.useState)(!1),[H,k]=(0,r.useState)(!1),[,Z]=(0,r.useState)(),{setValue:q,register:A,handleSubmit:R}=(0,y.cI)({defaultValues:{hospitalId:u||(0,v.Z)(),name:""}}),_=(0,r.useCallback)(()=>{u&&(C(!0),t(u).then(e=>{Z(e),e&&(q("hospitalId",e.hospitalId),q("name",e.name))}).catch(e=>p({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>h({hospitalId:void 0})})).finally(()=>C(!1)))},[u,h,p,q,t]);(0,I.q)(_);let S=R(e=>{(async()=>{try{k(!0),u?await l.Z.post("/api/hospitals/update",{data:[{hospitalId:u,data:e}]}):await l.Z.post("/api/hospitals/add",{data:[e]}),c&&await c(),p({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{i?.(),h({hospitalId:void 0})}})}catch(e){p({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{k(!1)}})()});return x?s.jsx(o.a,{overlay:!0}):(0,s.jsxs)(s.Fragment,{children:[H&&s.jsx(o.a,{overlay:!0}),(0,s.jsxs)(j.yo,{open:e||!!b.hospitalId,onOpenChange:()=>{i?.(),h({hospitalId:void 0})},children:[s.jsx(j.aM,{asChild:!0,children:s.jsx(m.z,{className:"md:hidden",variant:"ghost",children:s.jsx(g.Z,{className:"h-6 w-6"})})}),(0,s.jsxs)(j.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[s.jsx(j.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,s.jsxs)(j.bC,{children:[u?"Edit":"New"," Hospital"]})}),s.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,s.jsxs)("div",{children:[s.jsx(w._,{htmlFor:"name",children:"Hospital Name"}),s.jsx(N.I,{...A("name",{required:!0,disabled:H}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[s.jsx(j.sw,{asChild:!0,children:s.jsx(m.z,{variant:"outline",children:"Cancel"})}),s.jsx(m.z,{onClick:S,children:"Save"})]})]})]})]})}var H=t(83855),k=t(2165),Z=t(30811);function q({searchHospitals:e,onDelete:a}){let t=(0,r.useRef)(),[o,{width:p}]=(0,k.Z)(),b=(0,f.l)(),[h,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,P]=(0,r.useState)(),[I,C]=(0,r.useState)(),{watch:H,register:q,handleSubmit:A}=(0,y.cI)({defaultValues:{searchValue:""}}),R=H("searchValue");(0,r.useMemo)(()=>w?.page||1,[w?.page]),(0,r.useMemo)(()=>b.parsed.hospitalId,[b.parsed.hospitalId]);let _=(0,r.useCallback)(async e=>{try{if(R||w?.searchValue!==R){j(!0);let a=(await l.Z.get("/api/hospitals?data="+JSON.stringify({searchValue:R,limit:5,...e}))).data;a.error?i.Am.error(a.error):P(a)}}catch(e){i.Am.error(e.message)}finally{j(!1)}},[R,w,e]),S=A(({searchValue:e})=>{(async()=>{try{if(e){t.current&&clearTimeout(t.current),g(!0),u(!0);let a=document.querySelector("[data-search-input]");setTimeout(()=>a?.focus(),10),await _({searchValue:e})}else P(void 0),u(!1)}catch(e){i.Am.error(e.message)}finally{g(!1)}})()});return(0,s.jsxs)(Z.J2,{open:h,onOpenChange:e=>{u(e)},children:[s.jsx(Z.xo,{disabled:!0,className:"w-full",children:s.jsx("form",{onSubmit:S,className:"",ref:o,children:s.jsx(N.I,{...q("searchValue",{required:!0}),type:"search",placeholder:"Search hospitals","data-search-input":"true",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",onFocus:e=>{u(!!R),setTimeout(()=>e.target.focus(),0)},onKeyUp:()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(S,1e3)}})})}),s.jsx(Z.yk,{style:{width:p},className:"flex flex-col gap-y-2 p-0",children:!!w&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.DataTable,{loading:v,maxRows:5,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=w.data[e.rowIndex];return s.jsx(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>a([t.hospitalId],()=>_({page:w.page}))})}}],data:w.data.map(e=>[e.name||"",""])}),s.jsx(c.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(n.t,{currentPage:w.page,totalPages:w.totalPages,disabled:v,limit:w.limit||w.totalRows,totalRows:w.totalRows,collectionName:"hospitals",onPaginate:e=>_({page:e}),hideControls:!1,hideSummary:!1})})]})})]})}function A({selected:e,onDelete:a,toggleHospitalForm:t,searchHospitals:i}){let l=(0,f.l)(),[d,n]=(0,r.useState)(l.parsed.role||"all"),[o,p]=(0,r.useState)(l.parsed.status||"all");return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"py-4 flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"px-4 flex flex-col gap-y-2 md:flex-row md:gap-y-0 md:gap-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[s.jsx("span",{className:"text-2xl md:mr-auto",children:"Hospitals"}),s.jsx("div",{className:"ml-auto"}),(0,s.jsxs)(m.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>t(),children:[s.jsx(H.Z,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"New Hospital"})]})]}),s.jsx("div",{className:"flex-1",children:s.jsx(q,{searchHospitals:i,onDelete:a})})]}),!!e.length&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{}),(0,s.jsxs)("div",{className:"px-4 flex flex-wrap gap-x-2 gap-y-1",children:[s.jsx("div",{className:"md:ml-auto"}),s.jsx("div",{children:(0,s.jsxs)(m.z,{variant:"destructive",className:"h-auto w-auto",onClick:()=>a(e),children:[s.jsx(h.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:e.length>1?`Delete ${e.length} selected hospitals`:"Delete selected hospital"})]})})]})]})]})})}function R({hospitals:e,getHospitals:a,deleteHospitals:t,getHospital:b,updateHospitals:h,createHospitals:u,searchHospitals:m}){let g=(0,f.l)(),[v,y]=(0,r.useState)(e),[j,N]=(0,r.useState)(!1),[w,P]=(0,r.useState)([]),[I,H]=(0,r.useState)(!1),{confirm:k}=(0,p.t)(),Z=(0,r.useCallback)(async(a,t)=>{N(!0);let s=(await l.Z.get("/api/hospitals?data="+JSON.stringify({...g.parsed,roles:g.parsed.role?[g.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;s.error?i.Am.error(s.error):(y(s),P([])),t?.(s.error,s),N(!1)},[a,g,e]),q=(0,r.useCallback)((e,a)=>{let t=v.data.filter(a=>e.includes(a.hospitalId)).map(e=>e.name);k(()=>{(async()=>{try{N(!0),await l.Z.delete("/api/hospitals?data="+JSON.stringify(e)),await Z(),a?.()}catch(e){i.Am.error(e.message)}finally{N(!1)}})()},{title:"Delete "+(t.length>1?"hospitals":"hospital"),message:`<p>Are you sure you want to delete:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[k,t,Z,v]),R=g.parsed.hospitalId||I?s.jsx(C,{open:I,getHospital:b,updateHospitals:h,createHospitals:u,onSaveSuccess:Z,onClose:()=>H(!1)}):null;return(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx(A,{hospitals:v,selected:w.map(e=>v.data[e].hospitalId),onDelete:q,getHospitals:Z,searchHospitals:m,toggleHospitalForm:()=>H(e=>!e)}),s.jsx(c.Z,{}),s.jsx(d.DataTable,{selectable:!0,selectedIndexes:w,onSelect:P,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let a=v.data[e.rowIndex];return s.jsx(x,{hospitalId:a.hospitalId,hospitalName:a.name,onDelete:()=>q([a.hospitalId])})}}],data:v.data.map(e=>[e.name,""])}),s.jsx(c.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(n.t,{currentPage:v.page,totalPages:v.totalPages,disabled:j,limit:v.limit||v.totalRows,totalRows:v.totalRows,collectionName:"hospitals",onPaginate:e=>Z({page:e},(e,a)=>!e&&g.push({page:a?.page||v.page})),hideControls:!1,hideSummary:!1})}),R,j&&s.jsx(o.a,{overlay:!0})]})}},58879:(e,a,t)=>{"use strict";t.d(a,{t:()=>j});var s=t(10326),r=t(17577),i=t(11890),l=t(39183),d=t(15919),n=t(77863),c=t(90772);let o=({className:e,...a})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",e),...a});o.displayName="Pagination";let f=r.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,className:(0,n.cn)("flex flex-row items-center gap-1",e),...a}));f.displayName="PaginationContent";let p=r.forwardRef(({className:e,...a},t)=>s.jsx("li",{ref:t,className:(0,n.cn)("",e),...a}));p.displayName="PaginationItem";let b=({className:e,isActive:a,size:t="icon",...r})=>s.jsx("a",{"aria-current":a?"page":void 0,className:(0,n.cn)((0,c.d)({variant:a?"outline":"ghost",size:t}),e),...r});b.displayName="PaginationLink";let h=({className:e,...a})=>(0,s.jsxs)(b,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 pl-2.5",e),...a,children:[s.jsx(i.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});h.displayName="PaginationPrevious";let u=({className:e,...a})=>(0,s.jsxs)(b,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 pr-2.5",e),...a,children:[s.jsx("span",{children:"Next"}),s.jsx(l.Z,{className:"h-4 w-4"})]});u.displayName="PaginationNext";let m=({className:e,...a})=>(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,n.cn)("flex h-9 w-9 items-center justify-center",e),...a,children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"More pages"})]});m.displayName="PaginationEllipsis";var x=t(24082);let g="LEFT",v="RIGHT";function y(e,a,t=1){let s=e,r=[];for(;s<=a;)r.push(s),s+=t;return r}function j(e){let{currentPage:a,totalPages:t,disabled:r,limit:i=1,totalRows:l,collectionName:d="results",hideControls:c,hideSummary:j,classes:N}=e,w=function(e){let{currentPage:a=1,totalPages:t=0,onPaginate:s}=e,r=[{id:"first",label:"Previous",disabled:a<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>s(a-1)}];return(function({totalPages:e=0,currentPage:a=1}){if(e>9){let t=[],s=a-2,r=a+2,i=e-1,l=s>2?s:2,d=r<i?r:i,n=7-(t=y(l,d)).length-1,c=l>2,o=d<i;return c&&!o?t=[g,...y(l-n,l-1),...t]:!c&&o?t=[...t,...y(d+1,d+n),v]:c&&o&&(t=[g,...t,v]),[1,...t,e]}return y(1,e)})(e).forEach(e=>{[g,v].includes(e)?r.push({label:"...",id:`${e}`,disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):r.push({id:`${e}`,label:`${e}`,disabled:a===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>s(Number(e))})}),r.push({id:"last",label:"Next",disabled:t===a,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>s(a+1)}),r}(e);return c&&j?null:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!j&&(0,s.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",l?(0,x.c)((a-1)*i+1):0,"\xa0-\xa0",(0,x.c)(Math.min(l,a*i)),"\xa0of\xa0",(0,x.c)(l,{separator:" "})," ",d]}),!c&&s.jsx(o,{children:s.jsx(f,{children:w.map(e=>s.jsx(p,{children:(()=>{let i=`${a}`==`${e.label}`,l=e.disabled||r,d="opacity-50",c=()=>!l&&e.onClick();return e.isPrev?(l=l||1===a,s.jsx(h,{href:"#",className:(0,n.cn)(1===a?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),c()}})):e.isEllipsis?s.jsx(m,{className:(0,n.cn)(l?d:"","hidden md:flex",N?.pageNumber)}):e.isNext?(l=l||a===t,s.jsx(u,{href:"#",className:(0,n.cn)(l?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),c()}})):s.jsx(b,{href:"#",className:(0,n.cn)(l?d:"","hidden md:flex",N?.pageNumber),isActive:i,onClick:e=>{e.stopPropagation(),e.preventDefault(),c()},children:e.label})})()},e.id))})})]})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>c});var s=t(10326),r=t(17577),i=t(34478),l=t(28671),d=t(77863);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,secondary:a,error:t,...r},l)=>s.jsx(i.f,{ref:l,className:(0,d.cn)(n(),a&&"text-xs",t?"text-danger":"",e),...r}));c.displayName=i.f.displayName},8281:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var s=t(10326),r=t(17577),i=t(90220),l=t(77863);let d=r.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},d)=>s.jsx(i.f,{ref:d,decorative:t,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));d.displayName=i.f.displayName},43059:(e,a,t)=>{"use strict";t.d(a,{q:()=>r});var s=t(17577);function r(e){return(0,s.useRef)(0),null}},24082:(e,a,t)=>{"use strict";function s(e,a){let{decimals:t=0,separator:s=" "}={...a};isNaN(e=Number(`${e}`.replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let r=(e=`${Number(e).toFixed(t>=0?t:2)}`).toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),r.join(".")}t.d(a,{c:()=>s})},11890:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},15919:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},81928:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(19510),r=t(21113),i=t(24569),l=t(46697);function d(){return s.jsx(i.V,{children:s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Name"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},17357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(19510),r=t(5973),i=t(24569),l=t(85431),d=t(46697),n=t(68570);let c=(0,n.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/hospitals/components/table.tsx`),{__esModule:o,$$typeof:f}=c;c.default;let p=(0,n.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/hospitals/components/table.tsx#HospitalsTable`);async function b({searchParams:{page:e}}){let[a]=await Promise.all([(0,r.getHospitals)({limit:25,page:e?Number(e):void 0})]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.D,{children:"Hospitals"}),s.jsx(i.V,{children:a.error?s.jsx(d.Zb,{className:"border-danger bg-danger/20 text-center",children:s.jsx(d.aY,{children:s.jsx("div",{className:"text-danger",children:a.error})})}):s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"p-0",children:s.jsx(p,{hospitals:a,getHospitals:r.getHospitals,deleteHospitals:r.deleteHospitals,getHospital:r.getHospital,updateHospitals:r.updateHospitals,createHospitals:r.createHospitals,searchHospitals:r.searchHospitals})})})})]})}},5973:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>H,$$ACTION_1:()=>Z,$$ACTION_2:()=>R,$$ACTION_3:()=>S,createHospitals:()=>A,deleteHospitals:()=>q,getFullHospital:()=>I,getHospital:()=>P,getHospitals:()=>C,searchHospitals:()=>k,updateHospitals:()=>_});var s=t(24330);t(60166);var r=t(57745),i=t(9576),l=t(10413),d=t(57418),n=t(34149),c=t(60938),o=t(81445),f=t(30900),p=t(41502),b=t(57435);async function h(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt)),columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}})}async function u(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt))})}async function m({limit:e,archived:a,page:t=1,hospitalIds:s,searchValue:i}){t=Math.max(0,t);let f=[];if(a?f.push((0,r.K0)(d.hospitals.deletedAt)):f.push((0,r.Ft)(d.hospitals.deletedAt)),s?.length&&f.push((0,r.d3)(d.hospitals.hospitalId,s)),i=`${i||""}`.trim()){let e=["%",i,"%"].join("");f.push((0,n.i6)`LOWER(hospitals.name) like LOWER(${e})`)}let b=l.Z.select({count:(0,c.QX)()}).from(d.hospitals);f.length&&b.where((0,r.xD)(...f));let[{count:h}]=await b.execute(),u=1;h&&(t=Math.min(t,u=(0,p.x)(e)?1:Math.ceil(h/e)));let m=(0,p.x)(e)?void 0:Math.max(0,(t-1)*e),x=await l.Z.query.hospitals.findMany({where:f.length?(0,r.xD)(...f):void 0,limit:(0,p.x)(e)?void 0:e,orderBy:(0,o.C)(d.hospitals.id),offset:m,columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}});return{page:t,limit:e,data:x,totalRows:h,totalPages:u,searchValue:i,error:void 0}}let x={page:1,limit:void 0,totalRows:0,totalPages:1,data:[],searchValue:void 0,error:void 0};async function g(e){let a=x;try{a=await m(e)}catch(e){b.Z.error("_getHospitals ERROR",e),a.error=e.message}finally{return a}}async function v(e){if(e.length){let a=(0,r.d3)(d.hospitals.hospitalId,e),t=new Date;await l.Z.update(d.hospitals).set({deletedAt:t}).where(a)}return!0}async function y(e,a){let t=[];for(let a of e)t.push({...a,hospitalId:a.hospitalId||(0,i.Z)()});let s={inserted:[],success:!1};try{if(await l.Z.insert(d.hospitals).values(t),a?.returnInserted){let e=await g({hospitalIds:t.map(e=>e.hospitalId)});s.inserted=e.data}s.success=!0}catch(e){s.error=e.message}finally{return s}}async function j(e,a){let t=[];for(let{hospitalId:s,data:i}of e)try{delete i.id,delete i.createdAt,delete i.updatedAt,delete i.oldHospitalId,delete i.hospitalId,await l.Z.update(d.hospitals).set(i).where((0,r.eq)(d.hospitals.hospitalId,s));let e=a?.returnUpdated?await h(s):void 0;t.push({hospitalId:s,hospital:e})}catch(e){t.push({hospitalId:s,error:e.message})}return t}var N=t(66267),w=t(40618);async function P(e){try{return await (0,N.isAllowed)("get_hospital"),await h(e)||null}catch(e){return b.Z.error("getHospital ERROR:",e),null}}async function I(e){try{return await (0,N.isAllowed)("get_hospital"),await u(e)||null}catch(e){return b.Z.error("getFullHospital ERROR:",e),null}}let C=(0,s.j)("7a70714cc06d396c784a686f1c879d5a62c1b0cd",H);async function H(...e){try{return await (0,N.isAllowed)("get_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}let k=(0,s.j)("83641473ab6af6384ae46c03f7c956c1cc1e42b2",Z);async function Z(...e){try{return await (0,N.isAllowed)("search_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}async function q(e){return await (0,N.isAllowed)("delete_hospitals"),e.length&&await v(e),!0}let A=(0,s.j)("7dabc6cb600b6e84665315e80562bf41a45d09a0",R);async function R(...e){try{return await (0,N.isAllowed)("create_hospitals"),await y(...e)}catch(e){throw b.Z.error("createHospitals ERROR",e),e}}let _=(0,s.j)("66e0e3ddb50f4882b9741048703e49ad1320b9bd",S);async function S(...e){try{return await (0,N.isAllowed)("update_hospitals"),await j(...e)}catch(e){throw b.Z.error("updateHospitals ERROR",e),e}}(0,w.h)([P,I,C,k,q,A,_]),(0,s.j)("68f564a64c5cb341a924153f7541bcc4ff1c6458",P),(0,s.j)("a896e2a8a124f1878df7bc0d0d5daf845f3efce4",I),(0,s.j)("898ba220dd556cf7483dab1a97504dc3037f4734",C),(0,s.j)("9419c0fa6a4b7fa2f8616eae04c81e79805b45a1",k),(0,s.j)("0d4b90a613e80ee279557510ae39d6a687652165",q),(0,s.j)("bc3473a150504626c95b49a2d6b92b083befa2e4",A),(0,s.j)("f3e1b7dd75875602cf4d21d356a03fd626b0e10d",_)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>i});var s=t(19510),r=t(50650);function i({className:e,...a}){return s.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>d});var s=t(68570);let r=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/components/data-table/index.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let d=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>l,aY:()=>d});var s=t(19510),r=t(71159),i=t(50650);let l=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},34478:(e,a,t)=>{"use strict";t.d(a,{f:()=>d});var s=t(17577),r=t(45226),i=t(10326),l=s.forwardRef((e,a)=>(0,i.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=l},90220:(e,a,t)=>{"use strict";t.d(a,{f:()=>c});var s=t(17577),r=t(45226),i=t(10326),l="horizontal",d=["horizontal","vertical"],n=s.forwardRef((e,a)=>{let{decorative:t,orientation:s=l,...n}=e,c=d.includes(s)?s:l;return(0,i.jsx)(r.WV.div,{"data-orientation":c,...t?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...n,ref:a})});n.displayName="Separator";var c=n}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[1633,1381,1744,3788,1490,5802,4084,7708,6620,9387,7938,4723,1813,6943,413,6267,8151,3911,9252,9087,7228],()=>t(57407));module.exports=s})();