(()=>{var e={};e.id=4075,e.ids=[4075],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},88814:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>b,originalPathname:()=>f,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(17357),t(81928),t(56367),t(12699),t(69684),t(96560);var s=t(23191),r=t(88716),i=t(37922),l=t.n(i),d=t(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(a,n);let o=["",{children:["(dashboard)",{children:["hospitals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17357)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/hospitals/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,81928)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/hospitals/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,56367)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,12699)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,69684)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/home/farai/Workbench/Neotree/neotree-editor-master/app/not-found.tsx"]}],c=["/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/hospitals/page.tsx"],f="/(dashboard)/hospitals/page",b={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/hospitals/page",pathname:"/hospitals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},87135:(e,a,t)=>{let s={"079cc39bb83c3f687b793a208594b122729f0616":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_2),"0f442bcb1ec42d1f41dd9e35fc60179dfef3efd7":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getFullHospital),"2d69aa34f0f360efa71053273512ba7431c1d5d6":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.deleteHospitals),"328a30ddf28d748e73be4d73334872630d125dd8":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.searchHospitals),"492ca01967c7d90a418035535e3b1bcf42e8a07e":()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.updateHospitals),ab130121856e9d94a57a8da2b7b5e30201799a86:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospital),b5a732c6cf8a04784c4795b87a1d5916761a2637:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.getHospitals),c35f3f5449619c7898f9e69079f69da5299f0741:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_3),e0af8364cbbd2de0a9fd16090be6727129770aea:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_1),e4e4d577e50b3727395cda55abc451b56b07e767:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.$$ACTION_0),e8f85c8f8b1e19d40bac7a80c5a67e381706ee15:()=>Promise.resolve().then(t.bind(t,5973)).then(e=>e.createHospitals),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.canAccessPage),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":()=>Promise.resolve().then(t.bind(t,66267)).then(e=>e.isAllowed),"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getSession),"576365f197acb2f10e29644ba43ca25aec52e8b7":()=>Promise.resolve().then(t.bind(t,40801)).then(e=>e.getAuthenticatedUser),"055174a9ccd19bad29237b1c3a8c05cd527be07b":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.getSys),"088c57d60b5ed83f7dd0192c87404045099f271b":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_0),"099e6b671d625a88f30c9806fa7bdac48e2a3710":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.$$ACTION_1),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":()=>Promise.resolve().then(t.bind(t,60563)).then(e=>e.updateSys),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.$$ACTION_0),"580940ab09cedb0e060484c8b6a6463e9a81461a":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSitesWithoutConfidentialData),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSites),"783eb2f9264b34f18cf3044d2185e64f2f39333e":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.getSite),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.saveSites),bc9ee3170ebb00872b5f727b1c2f7c7f22904d46:()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.importRemoteScripts),ce3f79f79487da7423d693aa0d77a1d2b0c35448:()=>Promise.resolve().then(t.bind(t,1750)).then(e=>e.$$ACTION_1),"112a744ae93bf04aba1a4250d687a325a73a55c1":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.publishData),"294bf0d6332f28a618099d7c02669de60070f8a2":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_1),"2995d4697010486034183adc4a3028bfd106123b":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.discardDrafts),"354f249d3682e1a7ac814300889c8b929172be69":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.getEditorDetails),"3af78304ef3b80b391189cdb5be758ed14bb9be7":()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.countAllDrafts),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.$$ACTION_0),afc9c4d3ed7201152607116aa5f72d4579144ffc:()=>Promise.resolve().then(t.bind(t,53911)).then(e=>e.revalidatePath)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"079cc39bb83c3f687b793a208594b122729f0616":r.bind(null,"079cc39bb83c3f687b793a208594b122729f0616"),"0f442bcb1ec42d1f41dd9e35fc60179dfef3efd7":r.bind(null,"0f442bcb1ec42d1f41dd9e35fc60179dfef3efd7"),"2d69aa34f0f360efa71053273512ba7431c1d5d6":r.bind(null,"2d69aa34f0f360efa71053273512ba7431c1d5d6"),"328a30ddf28d748e73be4d73334872630d125dd8":r.bind(null,"328a30ddf28d748e73be4d73334872630d125dd8"),"492ca01967c7d90a418035535e3b1bcf42e8a07e":r.bind(null,"492ca01967c7d90a418035535e3b1bcf42e8a07e"),ab130121856e9d94a57a8da2b7b5e30201799a86:r.bind(null,"ab130121856e9d94a57a8da2b7b5e30201799a86"),b5a732c6cf8a04784c4795b87a1d5916761a2637:r.bind(null,"b5a732c6cf8a04784c4795b87a1d5916761a2637"),c35f3f5449619c7898f9e69079f69da5299f0741:r.bind(null,"c35f3f5449619c7898f9e69079f69da5299f0741"),e0af8364cbbd2de0a9fd16090be6727129770aea:r.bind(null,"e0af8364cbbd2de0a9fd16090be6727129770aea"),e4e4d577e50b3727395cda55abc451b56b07e767:r.bind(null,"e4e4d577e50b3727395cda55abc451b56b07e767"),e8f85c8f8b1e19d40bac7a80c5a67e381706ee15:r.bind(null,"e8f85c8f8b1e19d40bac7a80c5a67e381706ee15"),"8d3a0534ac3ddb0c44a91b766b2183165c62dbed":r.bind(null,"8d3a0534ac3ddb0c44a91b766b2183165c62dbed"),"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c":r.bind(null,"98c147f0ddb064f66a4d243e26ad14e1fbd69d9c"),"103d82a5a607c9f7f049ac9bfe2bb62dc7128462":r.bind(null,"103d82a5a607c9f7f049ac9bfe2bb62dc7128462"),"3054c9aa3ede38673855ee3dff9f25ad492b7d73":r.bind(null,"3054c9aa3ede38673855ee3dff9f25ad492b7d73"),"576365f197acb2f10e29644ba43ca25aec52e8b7":r.bind(null,"576365f197acb2f10e29644ba43ca25aec52e8b7"),"055174a9ccd19bad29237b1c3a8c05cd527be07b":r.bind(null,"055174a9ccd19bad29237b1c3a8c05cd527be07b"),"088c57d60b5ed83f7dd0192c87404045099f271b":r.bind(null,"088c57d60b5ed83f7dd0192c87404045099f271b"),"099e6b671d625a88f30c9806fa7bdac48e2a3710":r.bind(null,"099e6b671d625a88f30c9806fa7bdac48e2a3710"),"0c0d564b6e8549cd52e9489443ca8f11eb739d52":r.bind(null,"0c0d564b6e8549cd52e9489443ca8f11eb739d52"),"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6":r.bind(null,"4b9c4cf0240fcf15d4869a3f982ee2d97caf5ea6"),"580940ab09cedb0e060484c8b6a6463e9a81461a":r.bind(null,"580940ab09cedb0e060484c8b6a6463e9a81461a"),"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435":r.bind(null,"6c76d6cc57800dd271e4df8386a0ae6e7ecbc435"),"783eb2f9264b34f18cf3044d2185e64f2f39333e":r.bind(null,"783eb2f9264b34f18cf3044d2185e64f2f39333e"),"8e6d2d1bfc206d2044ed01620bfa151c6fd87125":r.bind(null,"8e6d2d1bfc206d2044ed01620bfa151c6fd87125"),bc9ee3170ebb00872b5f727b1c2f7c7f22904d46:r.bind(null,"bc9ee3170ebb00872b5f727b1c2f7c7f22904d46"),ce3f79f79487da7423d693aa0d77a1d2b0c35448:r.bind(null,"ce3f79f79487da7423d693aa0d77a1d2b0c35448"),"112a744ae93bf04aba1a4250d687a325a73a55c1":r.bind(null,"112a744ae93bf04aba1a4250d687a325a73a55c1"),"294bf0d6332f28a618099d7c02669de60070f8a2":r.bind(null,"294bf0d6332f28a618099d7c02669de60070f8a2"),"2995d4697010486034183adc4a3028bfd106123b":r.bind(null,"2995d4697010486034183adc4a3028bfd106123b"),"354f249d3682e1a7ac814300889c8b929172be69":r.bind(null,"354f249d3682e1a7ac814300889c8b929172be69"),"3af78304ef3b80b391189cdb5be758ed14bb9be7":r.bind(null,"3af78304ef3b80b391189cdb5be758ed14bb9be7"),ac5d4de4d5312ee7fa1967d05ccea3edfbd18033:r.bind(null,"ac5d4de4d5312ee7fa1967d05ccea3edfbd18033"),afc9c4d3ed7201152607116aa5f72d4579144ffc:r.bind(null,"afc9c4d3ed7201152607116aa5f72d4579144ffc")}},49792:(e,a,t)=>{Promise.resolve().then(t.bind(t,27145)),Promise.resolve().then(t.bind(t,10827))},13268:(e,a,t)=>{Promise.resolve().then(t.bind(t,77228))},27145:(e,a,t)=>{"use strict";t.d(a,{HospitalsTable:()=>R});var s=t(10326),r=t(17577),i=t(85999),l=t(44099),d=t(77228),n=t(58879),o=t(8281),c=t(11870),f=t(12260),b=t(46670),p=t(39447),h=t(47035),u=t(60097),m=t(90772);function x({hospitalId:e,hospitalName:a,onDelete:t}){let r=(0,f.l)();return s.jsx(s.Fragment,{children:(0,s.jsxs)(u.h_,{children:[s.jsx(u.$F,{asChild:!0,children:s.jsx(m.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:s.jsx(p.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(u.AW,{children:[s.jsx(u.Ju,{children:a}),s.jsx(u.VD,{}),s.jsx(u.Xi,{onClick:()=>r.push({hospitalId:e}),children:"Edit"}),s.jsx(u.VD,{}),(0,s.jsxs)(u.Xi,{onClick:t,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[s.jsx(h.Z,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]})})}var g=t(90748),v=t(47463),y=t(74723),j=t(7890),N=t(54432),w=t(31048),P=t(96221),I=t(43059);function C({open:e,hospitalId:a,getHospital:t,onClose:i,updateHospitals:d,createHospitals:n,onSaveSuccess:o}){let{alert:b}=(0,P.s)(),{parsed:p,replace:h}=(0,f.l)(),u=a||p.hospitalId,[x,C]=(0,r.useState)(!1),[H,k]=(0,r.useState)(!1),[,Z]=(0,r.useState)(),{setValue:q,register:A,handleSubmit:R}=(0,y.cI)({defaultValues:{hospitalId:u||(0,v.Z)(),name:""}}),_=(0,r.useCallback)(()=>{u&&(C(!0),t(u).then(e=>{Z(e),e&&(q("hospitalId",e.hospitalId),q("name",e.name))}).catch(e=>b({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>h({hospitalId:void 0})})).finally(()=>C(!1)))},[u,h,b,q,t]);(0,I.q)(_);let S=R(e=>{(async()=>{try{k(!0),u?await l.Z.post("/api/hospitals/update",{data:[{hospitalId:u,data:e}]}):await l.Z.post("/api/hospitals/add",{data:[e]}),o&&await o(),b({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{i?.(),h({hospitalId:void 0})}})}catch(e){b({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{k(!1)}})()});return x?s.jsx(c.a,{overlay:!0}):(0,s.jsxs)(s.Fragment,{children:[H&&s.jsx(c.a,{overlay:!0}),(0,s.jsxs)(j.yo,{open:e||!!p.hospitalId,onOpenChange:()=>{i?.(),h({hospitalId:void 0})},children:[s.jsx(j.aM,{asChild:!0,children:s.jsx(m.z,{className:"md:hidden",variant:"ghost",children:s.jsx(g.Z,{className:"h-6 w-6"})})}),(0,s.jsxs)(j.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[s.jsx(j.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,s.jsxs)(j.bC,{children:[u?"Edit":"New"," Hospital"]})}),s.jsx("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,s.jsxs)("div",{children:[s.jsx(w._,{htmlFor:"name",children:"Hospital Name"}),s.jsx(N.I,{...A("name",{required:!0,disabled:H}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[s.jsx(j.sw,{asChild:!0,children:s.jsx(m.z,{variant:"outline",children:"Cancel"})}),s.jsx(m.z,{onClick:S,children:"Save"})]})]})]})]})}var H=t(83855),k=t(2165),Z=t(30811);function q({searchHospitals:e,onDelete:a}){let t=(0,r.useRef)(),[c,{width:b}]=(0,k.Z)(),p=(0,f.l)(),[h,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,P]=(0,r.useState)(),[I,C]=(0,r.useState)(),{watch:H,register:q,handleSubmit:A}=(0,y.cI)({defaultValues:{searchValue:""}}),R=H("searchValue");(0,r.useMemo)(()=>w?.page||1,[w?.page]),(0,r.useMemo)(()=>p.parsed.hospitalId,[p.parsed.hospitalId]);let _=(0,r.useCallback)(async e=>{try{if(R||w?.searchValue!==R){j(!0);let a=(await l.Z.get("/api/hospitals?data="+JSON.stringify({searchValue:R,limit:5,...e}))).data;a.error?i.Am.error(a.error):P(a)}}catch(e){i.Am.error(e.message)}finally{j(!1)}},[R,w,e]),S=A(({searchValue:e})=>{(async()=>{try{if(e){t.current&&clearTimeout(t.current),g(!0),u(!0);let a=document.querySelector("[data-search-input]");setTimeout(()=>a?.focus(),10),await _({searchValue:e})}else P(void 0),u(!1)}catch(e){i.Am.error(e.message)}finally{g(!1)}})()});return(0,s.jsxs)(Z.J2,{open:h,onOpenChange:e=>{u(e)},children:[s.jsx(Z.xo,{disabled:!0,className:"w-full",children:s.jsx("form",{onSubmit:S,className:"",ref:c,children:s.jsx(N.I,{...q("searchValue",{required:!0}),type:"search",placeholder:"Search hospitals","data-search-input":"true",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",onFocus:e=>{u(!!R),setTimeout(()=>e.target.focus(),0)},onKeyUp:()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(S,1e3)}})})}),s.jsx(Z.yk,{style:{width:b},className:"flex flex-col gap-y-2 p-0",children:!!w&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.DataTable,{loading:v,maxRows:5,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=w.data[e.rowIndex];return s.jsx(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>a([t.hospitalId],()=>_({page:w.page}))})}}],data:w.data.map(e=>[e.name||"",""])}),s.jsx(o.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(n.t,{currentPage:w.page,totalPages:w.totalPages,disabled:v,limit:w.limit||w.totalRows,totalRows:w.totalRows,collectionName:"hospitals",onPaginate:e=>_({page:e}),hideControls:!1,hideSummary:!1})})]})})]})}function A({selected:e,onDelete:a,toggleHospitalForm:t,searchHospitals:i}){let l=(0,f.l)(),[d,n]=(0,r.useState)(l.parsed.role||"all"),[c,b]=(0,r.useState)(l.parsed.status||"all");return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"py-4 flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"px-4 flex flex-col gap-y-2 md:flex-row md:gap-y-0 md:gap-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[s.jsx("span",{className:"text-2xl md:mr-auto",children:"Hospitals"}),s.jsx("div",{className:"ml-auto"}),(0,s.jsxs)(m.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>t(),children:[s.jsx(H.Z,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"New Hospital"})]})]}),s.jsx("div",{className:"flex-1",children:s.jsx(q,{searchHospitals:i,onDelete:a})})]}),!!e.length&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.Z,{}),(0,s.jsxs)("div",{className:"px-4 flex flex-wrap gap-x-2 gap-y-1",children:[s.jsx("div",{className:"md:ml-auto"}),s.jsx("div",{children:(0,s.jsxs)(m.z,{variant:"destructive",className:"h-auto w-auto",onClick:()=>a(e),children:[s.jsx(h.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:e.length>1?`Delete ${e.length} selected hospitals`:"Delete selected hospital"})]})})]})]})]})})}function R({hospitals:e,getHospitals:a,deleteHospitals:t,getHospital:p,updateHospitals:h,createHospitals:u,searchHospitals:m}){let g=(0,f.l)(),[v,y]=(0,r.useState)(e),[j,N]=(0,r.useState)(!1),[w,P]=(0,r.useState)([]),[I,H]=(0,r.useState)(!1),{confirm:k}=(0,b.t)(),Z=(0,r.useCallback)(async(a,t)=>{N(!0);let s=(await l.Z.get("/api/hospitals?data="+JSON.stringify({...g.parsed,roles:g.parsed.role?[g.parsed.role]:void 0,page:1,limit:e.limit,...a}))).data;s.error?i.Am.error(s.error):(y(s),P([])),t?.(s.error,s),N(!1)},[a,g,e]),q=(0,r.useCallback)((e,a)=>{let t=v.data.filter(a=>e.includes(a.hospitalId)).map(e=>e.name);k(()=>{(async()=>{try{N(!0),await l.Z.delete("/api/hospitals?data="+JSON.stringify(e)),await Z(),a?.()}catch(e){i.Am.error(e.message)}finally{N(!1)}})()},{title:"Delete "+(t.length>1?"hospitals":"hospital"),message:`<p>Are you sure you want to delete:</p> ${t.map(e=>`<div class="font-bold text-danger">${e}</div>`).join("")}`,negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[k,t,Z,v]),R=g.parsed.hospitalId||I?s.jsx(C,{open:I,getHospital:p,updateHospitals:h,createHospitals:u,onSaveSuccess:Z,onClose:()=>H(!1)}):null;return(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx(A,{hospitals:v,selected:w.map(e=>v.data[e].hospitalId),onDelete:q,getHospitals:Z,searchHospitals:m,toggleHospitalForm:()=>H(e=>!e)}),s.jsx(o.Z,{}),s.jsx(d.DataTable,{selectable:!0,selectedIndexes:w,onSelect:P,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let a=v.data[e.rowIndex];return s.jsx(x,{hospitalId:a.hospitalId,hospitalName:a.name,onDelete:()=>q([a.hospitalId])})}}],data:v.data.map(e=>[e.name,""])}),s.jsx(o.Z,{}),s.jsx("div",{className:"p-2",children:s.jsx(n.t,{currentPage:v.page,totalPages:v.totalPages,disabled:j,limit:v.limit||v.totalRows,totalRows:v.totalRows,collectionName:"hospitals",onPaginate:e=>Z({page:e},(e,a)=>!e&&g.push({page:a?.page||v.page})),hideControls:!1,hideSummary:!1})}),R,j&&s.jsx(c.a,{overlay:!0})]})}},58879:(e,a,t)=>{"use strict";t.d(a,{t:()=>j});var s=t(10326),r=t(17577),i=t(11890),l=t(39183),d=t(15919),n=t(77863),o=t(90772);let c=({className:e,...a})=>s.jsx("nav",{role:"navigation","aria-label":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",e),...a});c.displayName="Pagination";let f=r.forwardRef(({className:e,...a},t)=>s.jsx("ul",{ref:t,className:(0,n.cn)("flex flex-row items-center gap-1",e),...a}));f.displayName="PaginationContent";let b=r.forwardRef(({className:e,...a},t)=>s.jsx("li",{ref:t,className:(0,n.cn)("",e),...a}));b.displayName="PaginationItem";let p=({className:e,isActive:a,size:t="icon",...r})=>s.jsx("a",{"aria-current":a?"page":void 0,className:(0,n.cn)((0,o.d)({variant:a?"outline":"ghost",size:t}),e),...r});p.displayName="PaginationLink";let h=({className:e,...a})=>(0,s.jsxs)(p,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 pl-2.5",e),...a,children:[s.jsx(i.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Previous"})]});h.displayName="PaginationPrevious";let u=({className:e,...a})=>(0,s.jsxs)(p,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 pr-2.5",e),...a,children:[s.jsx("span",{children:"Next"}),s.jsx(l.Z,{className:"h-4 w-4"})]});u.displayName="PaginationNext";let m=({className:e,...a})=>(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,n.cn)("flex h-9 w-9 items-center justify-center",e),...a,children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"More pages"})]});m.displayName="PaginationEllipsis";var x=t(24082);let g="LEFT",v="RIGHT";function y(e,a,t=1){let s=e,r=[];for(;s<=a;)r.push(s),s+=t;return r}function j(e){let{currentPage:a,totalPages:t,disabled:r,limit:i=1,totalRows:l,collectionName:d="results",hideControls:o,hideSummary:j,classes:N}=e,w=function(e){let{currentPage:a=1,totalPages:t=0,onPaginate:s}=e,r=[{id:"first",label:"Previous",disabled:a<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>s(a-1)}];return(function({totalPages:e=0,currentPage:a=1}){if(e>9){let t=[],s=a-2,r=a+2,i=e-1,l=s>2?s:2,d=r<i?r:i,n=7-(t=y(l,d)).length-1,o=l>2,c=d<i;return o&&!c?t=[g,...y(l-n,l-1),...t]:!o&&c?t=[...t,...y(d+1,d+n),v]:o&&c&&(t=[g,...t,v]),[1,...t,e]}return y(1,e)})(e).forEach(e=>{[g,v].includes(e)?r.push({label:"...",id:`${e}`,disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):r.push({id:`${e}`,label:`${e}`,disabled:a===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>s(Number(e))})}),r.push({id:"last",label:"Next",disabled:t===a,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>s(a+1)}),r}(e);return o&&j?null:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!j&&(0,s.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",l?(0,x.c)((a-1)*i+1):0,"\xa0-\xa0",(0,x.c)(Math.min(l,a*i)),"\xa0of\xa0",(0,x.c)(l,{separator:" "})," ",d]}),!o&&s.jsx(c,{children:s.jsx(f,{children:w.map(e=>s.jsx(b,{children:(()=>{let i=`${a}`==`${e.label}`,l=e.disabled||r,d="opacity-50",o=()=>!l&&e.onClick();return e.isPrev?(l=l||1===a,s.jsx(h,{href:"#",className:(0,n.cn)(1===a?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),o()}})):e.isEllipsis?s.jsx(m,{className:(0,n.cn)(l?d:"","hidden md:flex",N?.pageNumber)}):e.isNext?(l=l||a===t,s.jsx(u,{href:"#",className:(0,n.cn)(l?d:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),o()}})):s.jsx(p,{href:"#",className:(0,n.cn)(l?d:"","hidden md:flex",N?.pageNumber),isActive:i,onClick:e=>{e.stopPropagation(),e.preventDefault(),o()},children:e.label})})()},e.id))})})]})}},31048:(e,a,t)=>{"use strict";t.d(a,{_:()=>o});var s=t(10326),r=t(17577),i=t(34478),l=t(28671),d=t(77863);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,secondary:a,error:t,...r},l)=>s.jsx(i.f,{ref:l,className:(0,d.cn)(n(),a&&"text-xs",t?"text-danger":"",e),...r}));o.displayName=i.f.displayName},8281:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var s=t(10326),r=t(17577),i=t(90220),l=t(77863);let d=r.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},d)=>s.jsx(i.f,{ref:d,decorative:t,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));d.displayName=i.f.displayName},43059:(e,a,t)=>{"use strict";t.d(a,{q:()=>r});var s=t(17577);function r(e){return(0,s.useRef)(0),null}},24082:(e,a,t)=>{"use strict";function s(e,a){let{decimals:t=0,separator:s=" "}={...a};isNaN(e=Number(`${e}`.replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let r=(e=`${Number(e).toFixed(t>=0?t:2)}`).toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),r.join(".")}t.d(a,{c:()=>s})},11890:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},15919:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},47035:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},81928:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(19510),r=t(21113),i=t(24569),l=t(46697);function d(){return s.jsx(i.V,{children:s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"p-0",children:s.jsx(r.w,{loading:!0,maxRows:25,columns:[{name:"Name"},{name:"Action",align:"right",cellClassName:"w-20"}],data:[]})})})})}},17357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(19510),r=t(5973),i=t(24569),l=t(85431),d=t(46697),n=t(68570);let o=(0,n.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/hospitals/components/table.tsx`),{__esModule:c,$$typeof:f}=o;o.default;let b=(0,n.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/app/(dashboard)/hospitals/components/table.tsx#HospitalsTable`);async function p({searchParams:{page:e}}){let[a]=await Promise.all([(0,r.getHospitals)({limit:25,page:e?Number(e):void 0})]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.D,{children:"Hospitals"}),s.jsx(i.V,{children:a.error?s.jsx(d.Zb,{className:"border-danger bg-danger/20 text-center",children:s.jsx(d.aY,{children:s.jsx("div",{className:"text-danger",children:a.error})})}):s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"p-0",children:s.jsx(b,{hospitals:a,getHospitals:r.getHospitals,deleteHospitals:r.deleteHospitals,getHospital:r.getHospital,updateHospitals:r.updateHospitals,createHospitals:r.createHospitals,searchHospitals:r.searchHospitals})})})})]})}},5973:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$ACTION_0:()=>H,$$ACTION_1:()=>Z,$$ACTION_2:()=>R,$$ACTION_3:()=>S,createHospitals:()=>A,deleteHospitals:()=>q,getFullHospital:()=>I,getHospital:()=>P,getHospitals:()=>C,searchHospitals:()=>k,updateHospitals:()=>_});var s=t(24330);t(60166);var r=t(57745),i=t(9576),l=t(10413),d=t(57418),n=t(34149),o=t(60938),c=t(81445),f=t(30900),b=t(41502),p=t(57435);async function h(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt)),columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}})}async function u(e){let a=f.Z(e)?(0,r.eq)(d.hospitals.hospitalId,e):(0,r.eq)(d.hospitals.oldHospitalId,e);return await l.Z.query.hospitals.findFirst({where:(0,r.xD)(a,(0,r.Ft)(d.hospitals.deletedAt))})}async function m({limit:e,archived:a,page:t=1,hospitalIds:s,searchValue:i}){t=Math.max(0,t);let f=[];if(a?f.push((0,r.K0)(d.hospitals.deletedAt)):f.push((0,r.Ft)(d.hospitals.deletedAt)),s?.length&&f.push((0,r.d3)(d.hospitals.hospitalId,s)),i=`${i||""}`.trim()){let e=["%",i,"%"].join("");f.push((0,n.i6)`LOWER(hospitals.name) like LOWER(${e})`)}let p=l.Z.select({count:(0,o.QX)()}).from(d.hospitals);f.length&&p.where((0,r.xD)(...f));let[{count:h}]=await p.execute(),u=1;h&&(t=Math.min(t,u=(0,b.x)(e)?1:Math.ceil(h/e)));let m=(0,b.x)(e)?void 0:Math.max(0,(t-1)*e),x=await l.Z.query.hospitals.findMany({where:f.length?(0,r.xD)(...f):void 0,limit:(0,b.x)(e)?void 0:e,orderBy:(0,c.C)(d.hospitals.id),offset:m,columns:{id:!0,hospitalId:!0,name:!0,oldHospitalId:!0}});return{page:t,limit:e,data:x,totalRows:h,totalPages:u,searchValue:i,error:void 0}}let x={page:1,limit:void 0,totalRows:0,totalPages:1,data:[],searchValue:void 0,error:void 0};async function g(e){let a=x;try{a=await m(e)}catch(e){p.Z.error("_getHospitals ERROR",e),a.error=e.message}finally{return a}}async function v(e){if(e.length){let a=(0,r.d3)(d.hospitals.hospitalId,e),t=new Date;await l.Z.update(d.hospitals).set({deletedAt:t}).where(a)}return!0}async function y(e,a){let t=[];for(let a of e)t.push({...a,hospitalId:a.hospitalId||(0,i.Z)()});let s={inserted:[],success:!1};try{if(await l.Z.insert(d.hospitals).values(t),a?.returnInserted){let e=await g({hospitalIds:t.map(e=>e.hospitalId)});s.inserted=e.data}s.success=!0}catch(e){s.error=e.message}finally{return s}}async function j(e,a){let t=[];for(let{hospitalId:s,data:i}of e)try{delete i.id,delete i.createdAt,delete i.updatedAt,delete i.oldHospitalId,delete i.hospitalId,await l.Z.update(d.hospitals).set(i).where((0,r.eq)(d.hospitals.hospitalId,s));let e=a?.returnUpdated?await h(s):void 0;t.push({hospitalId:s,hospital:e})}catch(e){t.push({hospitalId:s,error:e.message})}return t}var N=t(66267),w=t(40618);async function P(e){try{return await (0,N.isAllowed)("get_hospital"),await h(e)||null}catch(e){return p.Z.error("getHospital ERROR:",e),null}}async function I(e){try{return await (0,N.isAllowed)("get_hospital"),await u(e)||null}catch(e){return p.Z.error("getFullHospital ERROR:",e),null}}let C=(0,s.j)("e4e4d577e50b3727395cda55abc451b56b07e767",H);async function H(...e){try{return await (0,N.isAllowed)("get_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}let k=(0,s.j)("e0af8364cbbd2de0a9fd16090be6727129770aea",Z);async function Z(...e){try{return await (0,N.isAllowed)("search_hospitals"),await g(...e)}catch(e){return{...x,error:e.message}}}async function q(e){return await (0,N.isAllowed)("delete_hospitals"),e.length&&await v(e),!0}let A=(0,s.j)("079cc39bb83c3f687b793a208594b122729f0616",R);async function R(...e){try{return await (0,N.isAllowed)("create_hospitals"),await y(...e)}catch(e){throw p.Z.error("createHospitals ERROR",e),e}}let _=(0,s.j)("c35f3f5449619c7898f9e69079f69da5299f0741",S);async function S(...e){try{return await (0,N.isAllowed)("update_hospitals"),await j(...e)}catch(e){throw p.Z.error("updateHospitals ERROR",e),e}}(0,w.h)([P,I,C,k,q,A,_]),(0,s.j)("ab130121856e9d94a57a8da2b7b5e30201799a86",P),(0,s.j)("0f442bcb1ec42d1f41dd9e35fc60179dfef3efd7",I),(0,s.j)("b5a732c6cf8a04784c4795b87a1d5916761a2637",C),(0,s.j)("328a30ddf28d748e73be4d73334872630d125dd8",k),(0,s.j)("2d69aa34f0f360efa71053273512ba7431c1d5d6",q),(0,s.j)("e8f85c8f8b1e19d40bac7a80c5a67e381706ee15",A),(0,s.j)("492ca01967c7d90a418035535e3b1bcf42e8a07e",_)},24569:(e,a,t)=>{"use strict";t.d(a,{V:()=>i});var s=t(19510),r=t(50650);function i({className:e,...a}){return s.jsx("div",{...a,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},21113:(e,a,t)=>{"use strict";t.d(a,{w:()=>d});var s=t(68570);let r=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/components/data-table/index.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let d=(0,s.createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor-master/components/data-table/index.tsx#DataTable`)},46697:(e,a,t)=>{"use strict";t.d(a,{Zb:()=>l,aY:()=>d});var s=t(19510),r=t(71159),i=t(50650);let l=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},34478:(e,a,t)=>{"use strict";t.d(a,{f:()=>d});var s=t(17577),r=t(45226),i=t(10326),l=s.forwardRef((e,a)=>(0,i.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=l},90220:(e,a,t)=>{"use strict";t.d(a,{f:()=>o});var s=t(17577),r=t(45226),i=t(10326),l="horizontal",d=["horizontal","vertical"],n=s.forwardRef((e,a)=>{let{decorative:t,orientation:s=l,...n}=e,o=d.includes(s)?s:l;return(0,i.jsx)(r.WV.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...n,ref:a})});n.displayName="Separator";var o=n}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[1633,1744,1381,3788,1490,9092,5802,9712,7708,4259,9387,7938,4723,1813,6943,413,6267,8151,3911,4442,1717,7228],()=>t(88814));module.exports=s})();