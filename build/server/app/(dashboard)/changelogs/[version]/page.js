(()=>{var e={};e.id=1688,e.ids=[1688],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},48964:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(78821),r(56367),r(12699),r(99985),r(96560);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["changelogs",{children:["[version]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,78821)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/changelogs/[version]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,56367)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,12699)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99985)),"/home/farai/Workbench/Neotree/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/home/farai/Workbench/Neotree/neotree-editor/app/not-found.tsx"]}],c=["/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/changelogs/[version]/page.tsx"],u="/(dashboard)/changelogs/[version]/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/changelogs/[version]/page",pathname:"/changelogs/[version]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},47251:(e,t,r)=>{Promise.resolve().then(r.bind(r,32628)),Promise.resolve().then(r.bind(r,10827)),Promise.resolve().then(r.bind(r,8281)),Promise.resolve().then(r.t.bind(r,79404,23))},32628:(e,t,r)=>{"use strict";r.d(t,{DataVersionChangesTable:()=>f});var s=r(10326),a=r(17577),n=r(35047),i=r(2453),l=r(12714),o=r(567),d=r(90772),c=r(15940),u=r(77863),x=r(75533);let m={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"},p={create:"border-emerald-500/20 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",update:"border-blue-500/20 bg-blue-500/10 text-blue-600 dark:text-blue-400",delete:"border-red-500/20 bg-red-500/10 text-red-600 dark:text-red-400",publish:"border-purple-500/20 bg-purple-500/10 text-purple-600 dark:text-purple-400",restore:"border-amber-500/20 bg-amber-500/10 text-amber-600 dark:text-amber-400",rollback:"border-orange-500/20 bg-orange-500/10 text-orange-600 dark:text-orange-400",merge:"border-cyan-500/20 bg-cyan-500/10 text-cyan-600 dark:text-cyan-400"},h={create:"Created",update:"Updated",delete:"Deleted",publish:"Published",restore:"Restored",rollback:"Rolled back",merge:"Merged"},g={active:"border-emerald-500/20 bg-emerald-500/10 text-emerald-700 dark:text-emerald-400",inactive:"border-red-500/20 bg-red-500/10 text-red-700 dark:text-red-400",superseded:"border-amber-500/20 bg-amber-500/10 text-amber-700 dark:text-amber-400"};function f({changes:e,dataVersion:t}){let r=(0,n.useRouter)(),f=(0,a.useMemo)(()=>[...e].sort((e,t)=>new Date(t.dateOfChange).getTime()-new Date(e.dateOfChange).getTime()),[e]),b=e=>{let s=(0,x.y5)(e)??t;r.push(`/changelogs/v${s}/changes/${e.changeLogId}`)};return(0,s.jsxs)(c.iA,{children:[s.jsx(c.xD,{children:(0,s.jsxs)(c.SC,{children:[s.jsx(c.ss,{className:"w-[200px]",children:"Entity"}),s.jsx(c.ss,{className:"w-[120px]",children:"Action"}),s.jsx(c.ss,{className:"w-[80px] text-center",children:"Fields"}),s.jsx(c.ss,{children:"Description"}),s.jsx(c.ss,{className:"w-[200px]",children:"Changed By"}),s.jsx(c.ss,{className:"w-[180px]",children:"Changed At"}),s.jsx(c.ss,{className:"text-right w-[120px]",children:"Details"})]})}),s.jsx(c.RM,{children:f.map(e=>{let t=(0,x._b)(e).length,r=m[e.entityType]||e.entityType,a=(0,i.WU)(new Date(e.dateOfChange),"PPpp"),n=(0,x.EC)(e),f=function(e){let t=e.fullSnapshot||{},r=t?.deletedAt??t?.deleted_at??t?.data?.deletedAt??t?.data?.deleted_at??null;return"delete"===e.action||r||t?.isDeleted===!0||t?.status==="inactive"?{label:"Inactive",state:"inactive",reason:"deleted"}:e.isActive?{label:"Active",state:"active"}:{label:"Superseded",state:"superseded",reason:"newer-version"}}(e),j=s.jsx(o.C,{variant:"outline",className:(0,u.cn)("w-fit",g[f.state]),title:"inactive"===f.state?"This entity was deleted in a later version":"superseded"===f.state?"This change was replaced by a newer version":"This change is currently active",children:f.label});return(0,s.jsxs)(c.SC,{className:"transition-colors hover:bg-muted/50",children:[s.jsx(c.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"font-medium",children:n}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[r," • ",e.entityId]})]})}),s.jsx(c.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx(o.C,{variant:"outline",className:(0,u.cn)("w-fit",p[e.action]??"border-muted bg-muted text-muted-foreground"),children:h[e.action]||e.action}),j]})}),s.jsx(c.pj,{className:"text-center",children:s.jsx(o.C,{variant:"outline",className:"w-fit bg-muted text-muted-foreground",children:t})}),(0,s.jsxs)(c.pj,{className:"max-w-[320px]",children:[s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:e.description||"No description provided"}),e.changeReason&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-foreground",children:"Reason:"})," ",e.changeReason]})]}),s.jsx(c.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{children:e.userName||"Unknown user"}),e.userEmail&&s.jsx("span",{className:"text-xs text-muted-foreground",children:e.userEmail})]})}),s.jsx(c.pj,{className:"whitespace-nowrap text-sm text-muted-foreground",children:a}),s.jsx(c.pj,{className:"text-right",children:(0,s.jsxs)(d.z,{size:"sm",variant:"ghost",className:"text-primary",onClick:()=>b(e),children:[s.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"View"]})})]},e.changeLogId)})})]})}},15940:(e,t,r)=>{"use strict";r.d(t,{RM:()=>o,SC:()=>d,iA:()=>i,pj:()=>u,ss:()=>c,xD:()=>l});var s=r(10326),a=r(17577),n=r(77863);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},75533:(e,t,r)=>{"use strict";function s(e){if(null==e)return null;let t="number"==typeof e?e:Number(e);return Number.isFinite(t)&&t>0?t:null}function a(e){let t=s(e?.dataVersion),r=s(e?.fullSnapshot?.dataVersion);return t??r??null}function n(e){let t=[],r=e.changes;if(Array.isArray(r))for(let e of r)if(e&&"object"==typeof e){let r=e.field||e.fieldPath||"Unknown field",s="previousValue"in e?e.previousValue:"oldValue"in e?e.oldValue:void 0,a="newValue"in e?e.newValue:"value"in e?e.value:e.updatedValue;t.push({field:r,previousValue:s,newValue:a})}else t.push({field:"Unknown field",previousValue:void 0,newValue:e});else if(r&&"object"==typeof r&&"oldValues"in r&&"newValues"in r){let{oldValues:e=[],newValues:s=[]}=r,a=Math.max(e.length,s.length);for(let r=0;r<a;r++){let a=e[r]||{},n=s[r]||{},i=Object.keys({...a,...n})[0]||`field_${r+1}`;t.push({field:i,previousValue:a[i],newValue:n[i]})}}if(!t.length&&"create"===e.action){let r=e.fullSnapshot;if(r&&"object"==typeof r)for(let[e,s]of Object.entries(r))t.push({field:e,previousValue:void 0,newValue:s})}return t}function i(e){let t=e?.entityTitle||e?.entityName;if("string"==typeof t&&t.trim().length)return t.trim();let r=e.fullSnapshot||{};for(let e of[r?.title,r?.name,r?.label,r?.printTitle,r?.sectionTitle,r?.collectionLabel,r?.key])if("string"==typeof e&&e.trim().length)return e.trim();return`${e.entityType} ${e.entityId}`}r.d(t,{EC:()=>i,_b:()=>n,y5:()=>a})},12714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},78821:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(19510),a=r(57371),n=r(58585),i=r(33570),l=r(39755),o=r(85431),d=r(24569),c=r(46697),u=r(18897),x=r(17747),m=r(48298);let p=(0,r(68570).createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/changelogs/components/data-version-changes-table.tsx#DataVersionChangesTable`),h={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"},g={create:"Create",update:"Update",delete:"Delete",publish:"Publish",restore:"Restore",rollback:"Rollback",merge:"Merge"};async function f({params:e}){let t=function(e){let t=Number(e.startsWith("v")||e.startsWith("V")?e.slice(1):e);return Number.isFinite(t)&&t>0?t:null}(e.version);null===t&&(0,n.notFound)();let{data:r,errors:f}=await (0,m.getChangeLogs)({dataVersions:[t],limit:2e3,sortBy:"dateOfChange",sortOrder:"desc"});if(f?.length)throw Error(f.join(", "));let b=r??[];if(!b.length)return(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.D,{children:`Data Version v${t}`}),(0,s.jsxs)(d.V,{children:[(0,s.jsxs)(a.default,{href:"/changelogs",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Back to releases"]}),s.jsx(c.Zb,{className:"mt-6",children:(0,s.jsxs)(c.aY,{className:"p-8 text-center text-muted-foreground",children:["No changelog entries were found for data version v",t,"."]})})]})]});let j=b.reduce((e,t)=>e?new Date(t.dateOfChange).getTime()>new Date(e.dateOfChange).getTime()?t:e:t,b[0]),v=b.find(e=>"publish"===e.action)??j,y=(0,i.WU)(new Date(j.dateOfChange),"PPpp"),N=v.userName||j.userName||"Unknown user",w=v.userEmail||j.userEmail||"",k=new Map,q=new Map,C=0,V=new Set;for(let e of b){var P;k.set(e.entityType,(k.get(e.entityType)||0)+1),q.set(e.action,(q.get(e.action)||0)+1),V.add(`${e.entityType}:${e.entityId}`),C+=Array.isArray(P=e.changes)?P.length:P&&"object"==typeof P&&"oldValues"in P&&"newValues"in P?Math.max(P.oldValues?.length||0,P.newValues?.length||0):0}let _=function(e){let t=Array.from(e.entries()).sort(([,e],[,t])=>t-e);return t.length?t.map(([e,t])=>{let r=h[e]||e;return`${t} ${r}${1===t?"":"s"}`}).join(" • "):"—"}(k);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.D,{children:`Data Version v${t}`}),(0,s.jsxs)(d.V,{className:"space-y-6",children:[(0,s.jsxs)(a.default,{href:"/changelogs",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Back to releases"]}),s.jsx(c.Zb,{children:(0,s.jsxs)(c.aY,{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Published At"}),s.jsx("span",{className:"text-lg font-semibold",children:y})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Published By"}),s.jsx("span",{className:"text-lg font-semibold",children:N}),w&&s.jsx("span",{className:"text-xs text-muted-foreground",children:w})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Summary"}),s.jsx("span",{className:"text-lg font-semibold",children:_})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Changes"}),s.jsx("div",{className:"text-2xl font-semibold mt-1",children:b.length})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Entities Affected"}),s.jsx("div",{className:"text-2xl font-semibold mt-1",children:V.size})]}),(0,s.jsxs)("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Fields Updated"}),s.jsx("div",{className:"text-2xl font-semibold mt-1",children:C})]})]}),s.jsx(x.Z,{}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(q.entries()).sort(([,e],[,t])=>t-e).map(([e,t])=>(0,s.jsxs)(u.C,{variant:"outline",className:"capitalize bg-muted text-muted-foreground",children:[t," ",g[e]||e]},e))}),s.jsx(x.Z,{}),s.jsx(p,{changes:b,dataVersion:t})]})})]})]})}},18897:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var s=r(19510);r(71159);var a=r(46145),n=r(50650);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},17747:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(68570).createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/components/ui/separator.tsx#Separator`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9380,1744,1337,3788,2758,4901,4263,1121,3579,6360,1098,868,413,6267,6741,8781,1162,6826,5241,2418,8778,2303,3883,7857,9087,8298,7082],()=>r(48964));module.exports=s})();