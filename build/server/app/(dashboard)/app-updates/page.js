(()=>{var e={};e.id=593,e.ids=[593],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},26924:(e,a,d)=>{"use strict";d.r(a),d.d(a,{GlobalError:()=>c.a,__next_app__:()=>o,originalPathname:()=>b,pages:()=>l,routeModule:()=>p,tree:()=>i}),d(90233),d(56367),d(12699),d(99985),d(96560);var t=d(23191),s=d(88716),r=d(37922),c=d.n(r),n=d(95231),f={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(f[e]=()=>n[e]);d.d(a,f);let i=["",{children:["(dashboard)",{children:["app-updates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,90233)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/app-updates/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,56367)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(d.bind(d,12699)),"/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(d.bind(d,99985)),"/home/farai/Workbench/Neotree/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(d.bind(d,96560)),"/home/farai/Workbench/Neotree/neotree-editor/app/not-found.tsx"]}],l=["/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/app-updates/page.tsx"],b="/(dashboard)/app-updates/page",o={require:d,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/app-updates/page",pathname:"/app-updates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},37555:(e,a,d)=>{let t={"0f298125b479af528a1665109806dd8c7cbf485f":()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.canAccessPage),e7ff353478ea7638eb62d92b3a19672b1cefa03f:()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.isAllowed),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUserWithRoles),"3687a5d3a69097dd7418edaf538e63f38f229ea5":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getSession),ff4d8db268db4669375c09f8725893bf00f6ae28:()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUser),"04735d9f1526dc37a61e2769ee4fe731c0bf01b1":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicyDrafts),"1b18b2134ff1df5d35ecebd4d2865e1579f17379":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_1),"25a5630d2324646e25abd227ff79db057549d851":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveApkReleases),"4e5026d9f99bcd9d4813143f83100af62551f170":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicy),"54fbba3ffc5a59be1e69830160323bd867d2b590":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleaseDrafts),"7fdfad1f692be1ce8898fbdc384a3909f7ddb740":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_3),a0d27668b61f6817d549e05123b2213096968286:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleases),b082424b20693c7c09e9ecbb896d03ff668828b1:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_4),caf349f7a8bd7b1ee37f7ce1f2f64e30b3dc26ff:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_5),df65c9fd40755413d882902a0c3c314e804d5fd6:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_0),e2a18713b4ea45b3656fe02141fb15f463aafd6a:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_2),e6a3ab81f92158b9bcc24deed2039d60d91f98c7:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveAppUpdatePolicies),"52bade57d4bbe53c2ecaf846ff2553fbb8d0e439":()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.$$ACTION_0),"87c443b7ea2fa92a2af89785e5d1f8eb041129ce":()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.getDeviceUpdateEvents),"559815287213d06ead0c877c60e184e5031ac06e":()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.updateSys),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_1),b5d1e928850507f1eade38e5d8700567fd19649e:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_0),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.getSys),"4bccbc621808e65939704fa615db3606c6862204":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.$$ACTION_0),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSites),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSitesWithoutConfidentialData),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSite),ea276d8b8dc674a1b891605b84c4b6addb452962:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.saveSites),"3628525f9968b3410608c9eeaf253358ba48d9fe":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.publishData),"49172b38c10122728aa1b2fc14d20f7760f2abd3":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.getEditorDetails),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_1),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.countAllDrafts),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.revalidatePath),e584eea53fe697cdba6835e3a5f23e256760fd14:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_0),f28667e6446bdcb1da1b47a90e98f363919ccac6:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.discardDrafts),"2765783afbcbd3389809865445019eb362ccc203":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeys),"2d54e8c0d2223cf05bd04ae114adaf6d75945de3":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysUpdateIfExist),"2e1b1572167e8449a14c811a6b2b3e462fa263d5":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.getDataKeys),"3a0d2e45b2393e17307a9bcfbe4fd2ee096e9f31":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_0),"5ec891f57cf5c05bc7e269d7b2f9e2a6cb8ac39e":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysIfNotExist),"90041e3ef5b6f3da78e75421c0239ae445c66d63":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_2),"9b5a511d36f35054112299c8168ff23e74730b0d":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_1),ed74efefdcb0734ec3f4ee2295f07fb7415f75db:()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.exportDataKeys)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"0f298125b479af528a1665109806dd8c7cbf485f":s.bind(null,"0f298125b479af528a1665109806dd8c7cbf485f"),e7ff353478ea7638eb62d92b3a19672b1cefa03f:s.bind(null,"e7ff353478ea7638eb62d92b3a19672b1cefa03f"),"31571c1d1cec06f4e312c633fd04f0420aecf3f0":s.bind(null,"31571c1d1cec06f4e312c633fd04f0420aecf3f0"),"3687a5d3a69097dd7418edaf538e63f38f229ea5":s.bind(null,"3687a5d3a69097dd7418edaf538e63f38f229ea5"),ff4d8db268db4669375c09f8725893bf00f6ae28:s.bind(null,"ff4d8db268db4669375c09f8725893bf00f6ae28"),"04735d9f1526dc37a61e2769ee4fe731c0bf01b1":s.bind(null,"04735d9f1526dc37a61e2769ee4fe731c0bf01b1"),"1b18b2134ff1df5d35ecebd4d2865e1579f17379":s.bind(null,"1b18b2134ff1df5d35ecebd4d2865e1579f17379"),"25a5630d2324646e25abd227ff79db057549d851":s.bind(null,"25a5630d2324646e25abd227ff79db057549d851"),"4e5026d9f99bcd9d4813143f83100af62551f170":s.bind(null,"4e5026d9f99bcd9d4813143f83100af62551f170"),"54fbba3ffc5a59be1e69830160323bd867d2b590":s.bind(null,"54fbba3ffc5a59be1e69830160323bd867d2b590"),"7fdfad1f692be1ce8898fbdc384a3909f7ddb740":s.bind(null,"7fdfad1f692be1ce8898fbdc384a3909f7ddb740"),a0d27668b61f6817d549e05123b2213096968286:s.bind(null,"a0d27668b61f6817d549e05123b2213096968286"),b082424b20693c7c09e9ecbb896d03ff668828b1:s.bind(null,"b082424b20693c7c09e9ecbb896d03ff668828b1"),caf349f7a8bd7b1ee37f7ce1f2f64e30b3dc26ff:s.bind(null,"caf349f7a8bd7b1ee37f7ce1f2f64e30b3dc26ff"),df65c9fd40755413d882902a0c3c314e804d5fd6:s.bind(null,"df65c9fd40755413d882902a0c3c314e804d5fd6"),e2a18713b4ea45b3656fe02141fb15f463aafd6a:s.bind(null,"e2a18713b4ea45b3656fe02141fb15f463aafd6a"),e6a3ab81f92158b9bcc24deed2039d60d91f98c7:s.bind(null,"e6a3ab81f92158b9bcc24deed2039d60d91f98c7"),"52bade57d4bbe53c2ecaf846ff2553fbb8d0e439":s.bind(null,"52bade57d4bbe53c2ecaf846ff2553fbb8d0e439"),"87c443b7ea2fa92a2af89785e5d1f8eb041129ce":s.bind(null,"87c443b7ea2fa92a2af89785e5d1f8eb041129ce"),"559815287213d06ead0c877c60e184e5031ac06e":s.bind(null,"559815287213d06ead0c877c60e184e5031ac06e"),"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1":s.bind(null,"9f6d32db3dcac1f6a722471c0a6a5f2465041eb1"),b5d1e928850507f1eade38e5d8700567fd19649e:s.bind(null,"b5d1e928850507f1eade38e5d8700567fd19649e"),bb5715444ca1fc8c6b68cca354c0a3615e5615e2:s.bind(null,"bb5715444ca1fc8c6b68cca354c0a3615e5615e2"),"4bccbc621808e65939704fa615db3606c6862204":s.bind(null,"4bccbc621808e65939704fa615db3606c6862204"),"60d4bc4dbf8a7e1570162873f97e0d36be03fa83":s.bind(null,"60d4bc4dbf8a7e1570162873f97e0d36be03fa83"),"65af2414f4ea72aa53dd5bd16d03045d9ac81d36":s.bind(null,"65af2414f4ea72aa53dd5bd16d03045d9ac81d36"),"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc":s.bind(null,"85f6ad3db1fc721aba5aaf50300cb3f13c10a7dc"),ea276d8b8dc674a1b891605b84c4b6addb452962:s.bind(null,"ea276d8b8dc674a1b891605b84c4b6addb452962"),"3628525f9968b3410608c9eeaf253358ba48d9fe":s.bind(null,"3628525f9968b3410608c9eeaf253358ba48d9fe"),"49172b38c10122728aa1b2fc14d20f7760f2abd3":s.bind(null,"49172b38c10122728aa1b2fc14d20f7760f2abd3"),"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3":s.bind(null,"6c4c8093da4330fc3d7393832fd9d8e2f17a4bd3"),"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828":s.bind(null,"93f98a1a18e2ffbbcd9b86311fd7e5a2204d9828"),bc2ee616f8ba694d4ae301d1c34ff957771a7cfb:s.bind(null,"bc2ee616f8ba694d4ae301d1c34ff957771a7cfb"),e584eea53fe697cdba6835e3a5f23e256760fd14:s.bind(null,"e584eea53fe697cdba6835e3a5f23e256760fd14"),f28667e6446bdcb1da1b47a90e98f363919ccac6:s.bind(null,"f28667e6446bdcb1da1b47a90e98f363919ccac6"),"2765783afbcbd3389809865445019eb362ccc203":s.bind(null,"2765783afbcbd3389809865445019eb362ccc203"),"2d54e8c0d2223cf05bd04ae114adaf6d75945de3":s.bind(null,"2d54e8c0d2223cf05bd04ae114adaf6d75945de3"),"2e1b1572167e8449a14c811a6b2b3e462fa263d5":s.bind(null,"2e1b1572167e8449a14c811a6b2b3e462fa263d5"),"3a0d2e45b2393e17307a9bcfbe4fd2ee096e9f31":s.bind(null,"3a0d2e45b2393e17307a9bcfbe4fd2ee096e9f31"),"5ec891f57cf5c05bc7e269d7b2f9e2a6cb8ac39e":s.bind(null,"5ec891f57cf5c05bc7e269d7b2f9e2a6cb8ac39e"),"90041e3ef5b6f3da78e75421c0239ae445c66d63":s.bind(null,"90041e3ef5b6f3da78e75421c0239ae445c66d63"),"9b5a511d36f35054112299c8168ff23e74730b0d":s.bind(null,"9b5a511d36f35054112299c8168ff23e74730b0d"),ed74efefdcb0734ec3f4ee2295f07fb7415f75db:s.bind(null,"ed74efefdcb0734ec3f4ee2295f07fb7415f75db")}},77689:(e,a,d)=>{Promise.resolve().then(d.bind(d,20706)),Promise.resolve().then(d.bind(d,10827))},20706:(e,a,d)=>{"use strict";d.d(a,{AppUpdatesClient:()=>l});var t=d(10326),s=d(17577),r=d(35047),c=d(90772),n=d(33071),f=d(79210),i=d(3529);function l({policy:e,policyDrafts:a,apkReleases:d,apkReleaseDrafts:l,otaEvents:b}){let o=(0,r.useRouter)(),{viewOnly:p,mode:u}=(0,i.b)(),[h,m]=(0,s.useState)("apk"),x=(0,s.useMemo)(()=>a.length?[...a].sort((e,a)=>{let d=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(a.updatedAt||a.createdAt||0).getTime()-d})[0]:null,[a]),v=(0,s.useMemo)(()=>{let e=new Map;for(let a of l){let d=a.data||{},t=d.apkReleaseId||a.apkReleaseDraftId;t&&e.set(t,{...d,apkReleaseId:t,__draft:!0,__draftId:a.apkReleaseDraftId,__updatedAt:a.updatedAt||a.createdAt})}for(let a of d){let d=a.apkReleaseId;d&&(e.has(d)||e.set(d,{...a,__draft:!1}))}return Array.from(e.values()).sort((e,a)=>{let d=new Date(e.__updatedAt||e.updatedAt||e.createdAt||0).getTime();return new Date(a.__updatedAt||a.updatedAt||a.createdAt||0).getTime()-d})},[l,d]),g=(0,s.useMemo)(()=>[...b].filter(e=>"ota_update_applied"===e.eventType).sort((e,a)=>{let d=new Date(e.createdAt||0).getTime();return new Date(a.createdAt||0).getTime()-d}),[b]),N=(0,s.useCallback)(e=>{let a=e.apkReleaseId||e.apkReleaseDraftId;a&&o.push(`/app-updates/new-apk?apkReleaseId=${a}`)},[o]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Zb,{className:"mb-4",children:t.jsx(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Recommended release flow"}),(0,t.jsxs)("div",{className:"text-sm",children:["1) Upload APK and save a draft ","->"," 2) Mark it available ","->"," 3) Update policy to point to the release"]}),t.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:x?`Policy draft updated ${x.updatedAt?.toString?.()||""}`:e?"Published policy is live":"No policy yet"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:p?"View mode: edits disabled":"development"===u?"Development mode: drafts enabled":`Mode: ${u}`})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(c.z,{variant:"primary-outline",onClick:()=>o.push("/app-updates/new-apk"),disabled:p,children:"New APK Release"}),t.jsx(c.z,{onClick:()=>o.push("/app-updates/new-policy"),children:p?"View Policy":"New Policy"})]})]})})}),(0,t.jsxs)(f.mQ,{value:h,onValueChange:m,className:"w-full",children:[(0,t.jsxs)(f.dr,{className:"w-full",children:[t.jsx(f.SP,{value:"apk",className:"flex-1",children:"APK Updates"}),t.jsx(f.SP,{value:"ota",className:"flex-1",children:"OTA Updates"})]}),t.jsx(f.nU,{value:"apk",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"APK releases"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"Status"}),t.jsx("th",{className:"py-2 pr-4",children:"Available"}),t.jsx("th",{className:"py-2 pr-4",children:"Draft"}),t.jsx("th",{className:"py-2 pr-4",children:"File"}),t.jsx("th",{className:"py-2 pr-4",children:"Updated"}),t.jsx("th",{className:"py-2 pr-4"})]})}),t.jsx("tbody",{children:v.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsxs)("td",{className:"py-2 pr-4",children:[e.versionName," (",e.versionCode,")"]}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion}),t.jsx("td",{className:"py-2 pr-4",children:e.status}),t.jsx("td",{className:"py-2 pr-4",children:e.isAvailable?"Yes":"No"}),t.jsx("td",{className:"py-2 pr-4",children:e.__draft?"Draft":"Published"}),t.jsx("td",{className:"py-2 pr-4",children:e.fileId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.__updatedAt?.toString?.()||e.updatedAt?.toString?.()||""}),t.jsx("td",{className:"py-2 pr-4",children:t.jsx(c.z,{variant:"ghost",onClick:()=>N(e),children:p?"View":"Edit"})})]},e.apkReleaseId))})]}),v.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No releases found."})]})]})})})}),t.jsx(f.nU,{value:"ota",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"OTA updates applied (device acknowledgements)"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Device"}),t.jsx("th",{className:"py-2 pr-4",children:"App Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"OTA Update ID"}),t.jsx("th",{className:"py-2 pr-4",children:"Channel"}),t.jsx("th",{className:"py-2 pr-4",children:"Received"})]})}),t.jsx("tbody",{children:g.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[t.jsx("td",{className:"py-2 pr-4",children:e.deviceId}),t.jsx("td",{className:"py-2 pr-4",children:e.appVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaUpdateId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaChannel||""}),t.jsx("td",{className:"py-2 pr-4",children:e.createdAt?.toString?.()||""})]},e.eventId))})]}),g.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No OTA acknowledgements yet."})]})]})})})})]})]})}},90233:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>p,dynamic:()=>o});var t=d(19510),s=d(58585),r=d(85431),c=d(24569),n=d(46697),f=d(66267),i=d(64723),l=d(58517);let b=(0,d(68570).createProxy)(String.raw`/home/farai/Workbench/Neotree/neotree-editor/app/(dashboard)/app-updates/components/app-updates-client.tsx#AppUpdatesClient`),o="force-dynamic";async function p(){let{user:e,yes:a}=await (0,f.canAccessPage)();if(e||(0,s.redirect)("/login"),!a)return t.jsx(c.V,{children:t.jsx(n.Zb,{children:t.jsx(n.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[d,o,p,u,h]=await Promise.all([i.getAppUpdatePolicy(),i.getAppUpdatePolicyDrafts(),i.getApkReleases(),i.getApkReleaseDrafts(),(0,l.getDeviceUpdateEvents)({limit:200,offset:0})]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(r.D,{children:"App Updates"}),t.jsx(c.V,{children:t.jsx(b,{policy:d.data,policyDrafts:o.data,apkReleases:p.data,apkReleaseDrafts:u.data,otaEvents:h.data||[]})})]})}},64723:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>l,$$ACTION_1:()=>o,$$ACTION_2:()=>u,$$ACTION_3:()=>m,$$ACTION_4:()=>v,$$ACTION_5:()=>N,getApkReleaseDrafts:()=>b,getApkReleases:()=>h,getAppUpdatePolicy:()=>p,getAppUpdatePolicyDrafts:()=>i,saveApkReleases:()=>g,saveAppUpdatePolicies:()=>x});var t=d(24330);d(60166);var s=d(57435),r=d(66267),c=d(82102),n=d(48578),f=d(40618);let i=(0,t.j)("df65c9fd40755413d882902a0c3c314e804d5fd6",l);async function l(...e){try{return await (0,r.isAllowed)(),await (0,c.MO)(...e)}catch(e){return s.Z.error("getAppUpdatePolicyDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let b=(0,t.j)("1b18b2134ff1df5d35ecebd4d2865e1579f17379",o);async function o(...e){try{return await (0,r.isAllowed)(),await (0,c.LW)(...e)}catch(e){return s.Z.error("getApkReleaseDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let p=(0,t.j)("e2a18713b4ea45b3656fe02141fb15f463aafd6a",u);async function u(...e){try{return await (0,r.isAllowed)(),await (0,c.Dy)(...e)}catch(e){return s.Z.error("getAppUpdatePolicy ERROR",e.message),{data:null,errors:[e.message]}}}let h=(0,t.j)("7fdfad1f692be1ce8898fbdc384a3909f7ddb740",m);async function m(...e){try{return await (0,r.isAllowed)(),await (0,c.vQ)(...e)}catch(e){return s.Z.error("getApkReleases ERROR",e.message),{data:[],errors:[e.message]}}}let x=(0,t.j)("b082424b20693c7c09e9ecbb896d03ff668828b1",v);async function v(e){try{let a=await (0,r.isAllowed)();return await (0,n.uf)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveAppUpdatePolicies ERROR",e.message),{success:!1,errors:[e.message]}}}let g=(0,t.j)("caf349f7a8bd7b1ee37f7ce1f2f64e30b3dc26ff",N);async function N(e){try{let a=await (0,r.isAllowed)();return await (0,n.tP)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveApkReleases ERROR",e.message),{success:!1,inserted:[],errors:[e.message]}}}(0,f.h)([i,b,p,h,x,g]),(0,t.j)("04735d9f1526dc37a61e2769ee4fe731c0bf01b1",i),(0,t.j)("54fbba3ffc5a59be1e69830160323bd867d2b590",b),(0,t.j)("4e5026d9f99bcd9d4813143f83100af62551f170",p),(0,t.j)("a0d27668b61f6817d549e05123b2213096968286",h),(0,t.j)("e6a3ab81f92158b9bcc24deed2039d60d91f98c7",x),(0,t.j)("25a5630d2324646e25abd227ff79db057549d851",g)},58517:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>i,getDeviceUpdateEvents:()=>f});var t=d(24330);d(60166);var s=d(57435),r=d(66267),c=d(55340),n=d(40618);let f=(0,t.j)("52bade57d4bbe53c2ecaf846ff2553fbb8d0e439",i);async function i(...e){try{return await (0,r.isAllowed)(),await (0,c.C)(...e)}catch(e){return s.Z.error("getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}(0,n.h)([f]),(0,t.j)("87c443b7ea2fa92a2af89785e5d1f8eb041129ce",f)},24569:(e,a,d)=>{"use strict";d.d(a,{V:()=>r});var t=d(19510),s=d(50650);function r({className:e,...a}){return t.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},46697:(e,a,d)=>{"use strict";d.d(a,{Ol:()=>n,Zb:()=>c,aY:()=>i,ll:()=>f});var t=d(19510),s=d(71159),r=d(50650);let c=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));c.displayName="Card";let n=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let f=s.forwardRef(({className:e,...a},d)=>t.jsx("h3",{ref:d,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));f.displayName="CardTitle",s.forwardRef(({className:e,...a},d)=>t.jsx("p",{ref:d,className:(0,r.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let i=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent",s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},55340:(e,a,d)=>{"use strict";d.d(a,{C:()=>f});var t=d(57745),s=d(81445),r=d(10413),c=d(93567),n=d(57435);async function f(e){try{let{deviceId:a,eventType:d,limit:n=100,offset:f=0}={...e},i=[...a?[(0,t.eq)(c.deviceUpdateEvents.deviceId,a)]:[],...d?[(0,t.eq)(c.deviceUpdateEvents.eventType,d)]:[]];return{data:await r.Z.query.deviceUpdateEvents.findMany({where:i.length?(0,t.xD)(...i):void 0,orderBy:[(0,s.C)(c.deviceUpdateEvents.createdAt)],limit:n,offset:f})}}catch(e){return n.Z.error("_getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}}};var a=require("../../../webpack-runtime.js");a.C(e);var d=e=>a(a.s=e),t=a.X(0,[9380,1744,1337,3788,2758,9092,4901,4263,1121,3579,6360,1098,413,6267,5002,6741,8781,1162,7939,5241,2418,8778,1271,7857,9087],()=>d(26924));module.exports=t})();