(()=>{var e={};e.id=593,e.ids=[593],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},97064:(e,a,d)=>{"use strict";d.r(a),d.d(a,{GlobalError:()=>r.a,__next_app__:()=>o,originalPathname:()=>f,pages:()=>b,routeModule:()=>p,tree:()=>l}),d(90233),d(56367),d(12699),d(99985),d(96560);var t=d(23191),s=d(88716),c=d(37922),r=d.n(c),n=d(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);d.d(a,i);let l=["",{children:["(dashboard)",{children:["app-updates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,90233)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/app-updates/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,56367)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(d.bind(d,12699)),"/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(d.bind(d,99985)),"/home/watkay/ReactProjects/neotree-editor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(d.bind(d,96560)),"/home/watkay/ReactProjects/neotree-editor/app/not-found.tsx"]}],b=["/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/app-updates/page.tsx"],f="/(dashboard)/app-updates/page",o={require:d,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/app-updates/page",pathname:"/app-updates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},65958:(e,a,d)=>{let t={b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.canAccessPage),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.isAllowed),"3753e7204934c26ff5afc7fac412906b9ec7c2cd":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getSession),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUser),cf37b218c9ffd359e595d215859090895afe32a3:()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUserWithRoles),"15073b4e8e333464b712596bae253770c00908d5":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicy),"4e9c94e9670a03a3e1e067d520c49cb5c75901cb":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_5),"5358a37c4384e717cf87b4f898fd86b38c9891b9":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleaseDrafts),"6ad9e789776abbd0cbff6072aa92a43f0616e1e0":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_2),"84f24a0a7e80366e9d243e80ae2685d89bbdf3ba":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_4),b87e1677693da2684ee3a0f21554e6b76275a119:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_1),ba14e2d8542f377df983f696f5fb0a367a9e24a2:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicyDrafts),c20bc40beb4b7b0277426d1054f29ae96aaa52f3:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_0),e72d12ec316a6da1bed636e4c33ea4038f681ba6:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveApkReleases),e7722c8e63e1374d5c2e84b847fad3b8bd4bdb7a:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_3),e7ada5c8ede3819bccc9053873317e9379817e1a:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveAppUpdatePolicies),e7dc8f9c9b57868d23c134b3ed25a105d5cd91e5:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleases),"354d954c9855e1fba9fca5cf7dd3be4eb00c167b":()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.$$ACTION_0),e68eb989a3c2428e3772d67a346d571547ee23ee:()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.getDeviceUpdateEvents),"6397523a8f8672c5182495764c492b3a235cbcab":()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_1),"76f0b17712f4501d72b44a5049e045af2774269b":()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.getSys),d97e2a08525547477613111effde4792d4260225:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.updateSys),e1c6930531e9485f362babf55d97916a1ad501cf:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_0),"5b32a18b5d68c0559bdc20224d166443def15579":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSites),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSitesWithoutConfidentialData),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.saveSites),cec02b7793208620ac58f5f16076922997e6559c:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.$$ACTION_0),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSite),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.discardDrafts),a51a2d6c6369fbe75939846346b95c575004df1d:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_0),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.countAllDrafts),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.getEditorDetails),d7b5dfae0e5e175752e21d0929fede082af11157:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.revalidatePath),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_1),ed96721a8cdb9e337ce13bba84ed504642533051:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.publishData),"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysUpdateIfExist),"18105b87f644f168cafbc747f8197c9d6b0856c9":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysIfNotExist),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeys),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_2),"7d2b1575988c8ba2208de85022e895402fc6d2b9":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_0),"8d785c7c89e5102dc66ece2b74bfc7bb0e1ac0de":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_3),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.getDataKeys),"9d877ffb99d1a1c5e846aa31358bd3e5830db961":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.previewDataKeysRefsImpact),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.exportDataKeys),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_1)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59:s.bind(null,"b0fcf79e40cf0e7239aad2b69d0f6e6ceac06a59"),c7db9b1ba0cab2a335eda35b61797bc9a5b816ba:s.bind(null,"c7db9b1ba0cab2a335eda35b61797bc9a5b816ba"),"3753e7204934c26ff5afc7fac412906b9ec7c2cd":s.bind(null,"3753e7204934c26ff5afc7fac412906b9ec7c2cd"),"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025":s.bind(null,"986fd4782cffd1a8b11ca93d5c1f784b6d7a2025"),cf37b218c9ffd359e595d215859090895afe32a3:s.bind(null,"cf37b218c9ffd359e595d215859090895afe32a3"),"15073b4e8e333464b712596bae253770c00908d5":s.bind(null,"15073b4e8e333464b712596bae253770c00908d5"),"4e9c94e9670a03a3e1e067d520c49cb5c75901cb":s.bind(null,"4e9c94e9670a03a3e1e067d520c49cb5c75901cb"),"5358a37c4384e717cf87b4f898fd86b38c9891b9":s.bind(null,"5358a37c4384e717cf87b4f898fd86b38c9891b9"),"6ad9e789776abbd0cbff6072aa92a43f0616e1e0":s.bind(null,"6ad9e789776abbd0cbff6072aa92a43f0616e1e0"),"84f24a0a7e80366e9d243e80ae2685d89bbdf3ba":s.bind(null,"84f24a0a7e80366e9d243e80ae2685d89bbdf3ba"),b87e1677693da2684ee3a0f21554e6b76275a119:s.bind(null,"b87e1677693da2684ee3a0f21554e6b76275a119"),ba14e2d8542f377df983f696f5fb0a367a9e24a2:s.bind(null,"ba14e2d8542f377df983f696f5fb0a367a9e24a2"),c20bc40beb4b7b0277426d1054f29ae96aaa52f3:s.bind(null,"c20bc40beb4b7b0277426d1054f29ae96aaa52f3"),e72d12ec316a6da1bed636e4c33ea4038f681ba6:s.bind(null,"e72d12ec316a6da1bed636e4c33ea4038f681ba6"),e7722c8e63e1374d5c2e84b847fad3b8bd4bdb7a:s.bind(null,"e7722c8e63e1374d5c2e84b847fad3b8bd4bdb7a"),e7ada5c8ede3819bccc9053873317e9379817e1a:s.bind(null,"e7ada5c8ede3819bccc9053873317e9379817e1a"),e7dc8f9c9b57868d23c134b3ed25a105d5cd91e5:s.bind(null,"e7dc8f9c9b57868d23c134b3ed25a105d5cd91e5"),"354d954c9855e1fba9fca5cf7dd3be4eb00c167b":s.bind(null,"354d954c9855e1fba9fca5cf7dd3be4eb00c167b"),e68eb989a3c2428e3772d67a346d571547ee23ee:s.bind(null,"e68eb989a3c2428e3772d67a346d571547ee23ee"),"6397523a8f8672c5182495764c492b3a235cbcab":s.bind(null,"6397523a8f8672c5182495764c492b3a235cbcab"),"76f0b17712f4501d72b44a5049e045af2774269b":s.bind(null,"76f0b17712f4501d72b44a5049e045af2774269b"),d97e2a08525547477613111effde4792d4260225:s.bind(null,"d97e2a08525547477613111effde4792d4260225"),e1c6930531e9485f362babf55d97916a1ad501cf:s.bind(null,"e1c6930531e9485f362babf55d97916a1ad501cf"),"5b32a18b5d68c0559bdc20224d166443def15579":s.bind(null,"5b32a18b5d68c0559bdc20224d166443def15579"),"62f755d2b4c846d8090cd4b57ab2767f1a077d36":s.bind(null,"62f755d2b4c846d8090cd4b57ab2767f1a077d36"),"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c":s.bind(null,"71c992fbf5ecbf9d61a1842244bc34a6b478ed4c"),cec02b7793208620ac58f5f16076922997e6559c:s.bind(null,"cec02b7793208620ac58f5f16076922997e6559c"),ea9a3fcf74a0c423c844e980536ccc9ede1b166d:s.bind(null,"ea9a3fcf74a0c423c844e980536ccc9ede1b166d"),a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01:s.bind(null,"a3f2c9f22a2d74bc5c52f0a99bf5982daa41ae01"),a51a2d6c6369fbe75939846346b95c575004df1d:s.bind(null,"a51a2d6c6369fbe75939846346b95c575004df1d"),c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca:s.bind(null,"c7b55d6a1f3e2e1bcaf7d0c11dca2a32d5a604ca"),cb9a2ec0d6364666ae991ca69a1ccc30f74a5220:s.bind(null,"cb9a2ec0d6364666ae991ca69a1ccc30f74a5220"),d7b5dfae0e5e175752e21d0929fede082af11157:s.bind(null,"d7b5dfae0e5e175752e21d0929fede082af11157"),e5fa07e4fdc4dcce863b886208c69a80b05c95d4:s.bind(null,"e5fa07e4fdc4dcce863b886208c69a80b05c95d4"),ed96721a8cdb9e337ce13bba84ed504642533051:s.bind(null,"ed96721a8cdb9e337ce13bba84ed504642533051"),"0d39aaa823e839a6bfddf6a5ed21623edef0aec2":s.bind(null,"0d39aaa823e839a6bfddf6a5ed21623edef0aec2"),"18105b87f644f168cafbc747f8197c9d6b0856c9":s.bind(null,"18105b87f644f168cafbc747f8197c9d6b0856c9"),"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86":s.bind(null,"25a1ece3dd2f23f7c7a4052df92f18e3c4b24f86"),"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a":s.bind(null,"7a27adb185b0bf9ba8250af2ec4fd78ac20b1b5a"),"7d2b1575988c8ba2208de85022e895402fc6d2b9":s.bind(null,"7d2b1575988c8ba2208de85022e895402fc6d2b9"),"8d785c7c89e5102dc66ece2b74bfc7bb0e1ac0de":s.bind(null,"8d785c7c89e5102dc66ece2b74bfc7bb0e1ac0de"),"948e22b55d8b846c9687619f6f7f74f3fc26b22d":s.bind(null,"948e22b55d8b846c9687619f6f7f74f3fc26b22d"),"9d877ffb99d1a1c5e846aa31358bd3e5830db961":s.bind(null,"9d877ffb99d1a1c5e846aa31358bd3e5830db961"),c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744:s.bind(null,"c2ca9c5aa59be01c8a3407f1b00f7f96ee1f8744"),e50183efb5391ac0e2bc1cb207a43a2f6847d6ed:s.bind(null,"e50183efb5391ac0e2bc1cb207a43a2f6847d6ed")}},90309:(e,a,d)=>{Promise.resolve().then(d.bind(d,20706)),Promise.resolve().then(d.bind(d,10827))},20706:(e,a,d)=>{"use strict";d.d(a,{AppUpdatesClient:()=>b});var t=d(10326),s=d(17577),c=d(35047),r=d(90772),n=d(33071),i=d(79210),l=d(3529);function b({policy:e,policyDrafts:a,apkReleases:d,apkReleaseDrafts:b,otaEvents:f}){let o=(0,c.useRouter)(),{viewOnly:p,mode:u}=(0,l.b)(),[h,m]=(0,s.useState)("apk"),x=(0,s.useMemo)(()=>a.length?[...a].sort((e,a)=>{let d=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(a.updatedAt||a.createdAt||0).getTime()-d})[0]:null,[a]),v=(0,s.useMemo)(()=>{let e=new Map;for(let a of b){let d=a.data||{},t=d.apkReleaseId||a.apkReleaseDraftId;t&&e.set(t,{...d,apkReleaseId:t,__draft:!0,__draftId:a.apkReleaseDraftId,__updatedAt:a.updatedAt||a.createdAt})}for(let a of d){let d=a.apkReleaseId;d&&(e.has(d)||e.set(d,{...a,__draft:!1}))}return Array.from(e.values()).sort((e,a)=>{let d=new Date(e.__updatedAt||e.updatedAt||e.createdAt||0).getTime();return new Date(a.__updatedAt||a.updatedAt||a.createdAt||0).getTime()-d})},[b,d]),y=(0,s.useMemo)(()=>[...f].filter(e=>"ota_update_applied"===e.eventType).sort((e,a)=>{let d=new Date(e.createdAt||0).getTime();return new Date(a.createdAt||0).getTime()-d}),[f]),g=(0,s.useCallback)(e=>{let a=e.apkReleaseId||e.apkReleaseDraftId;a&&o.push(`/app-updates/new-apk?apkReleaseId=${a}`)},[o]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Zb,{className:"mb-4",children:t.jsx(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Recommended release flow"}),(0,t.jsxs)("div",{className:"text-sm",children:["1) Upload APK and save a draft ","->"," 2) Mark it available ","->"," 3) Update policy to point to the release"]}),t.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:x?`Policy draft updated ${x.updatedAt?.toString?.()||""}`:e?"Published policy is live":"No policy yet"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:p?"View mode: edits disabled":"development"===u?"Development mode: drafts enabled":`Mode: ${u}`})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(r.z,{variant:"primary-outline",onClick:()=>o.push("/app-updates/new-apk"),disabled:p,children:"New APK Release"}),t.jsx(r.z,{onClick:()=>o.push("/app-updates/new-policy"),children:p?"View Policy":"New Policy"})]})]})})}),(0,t.jsxs)(i.mQ,{value:h,onValueChange:m,className:"w-full",children:[(0,t.jsxs)(i.dr,{className:"w-full",children:[t.jsx(i.SP,{value:"apk",className:"flex-1",children:"APK Updates"}),t.jsx(i.SP,{value:"ota",className:"flex-1",children:"OTA Updates"})]}),t.jsx(i.nU,{value:"apk",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"APK releases"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"Status"}),t.jsx("th",{className:"py-2 pr-4",children:"Available"}),t.jsx("th",{className:"py-2 pr-4",children:"Draft"}),t.jsx("th",{className:"py-2 pr-4",children:"File"}),t.jsx("th",{className:"py-2 pr-4",children:"Updated"}),t.jsx("th",{className:"py-2 pr-4"})]})}),t.jsx("tbody",{children:v.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsxs)("td",{className:"py-2 pr-4",children:[e.versionName," (",e.versionCode,")"]}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion}),t.jsx("td",{className:"py-2 pr-4",children:e.status}),t.jsx("td",{className:"py-2 pr-4",children:e.isAvailable?"Yes":"No"}),t.jsx("td",{className:"py-2 pr-4",children:e.__draft?"Draft":"Published"}),t.jsx("td",{className:"py-2 pr-4",children:e.fileId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.__updatedAt?.toString?.()||e.updatedAt?.toString?.()||""}),t.jsx("td",{className:"py-2 pr-4",children:t.jsx(r.z,{variant:"ghost",onClick:()=>g(e),children:p?"View":"Edit"})})]},e.apkReleaseId))})]}),v.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No releases found."})]})]})})})}),t.jsx(i.nU,{value:"ota",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"OTA updates applied (device acknowledgements)"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Device"}),t.jsx("th",{className:"py-2 pr-4",children:"App Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"OTA Update ID"}),t.jsx("th",{className:"py-2 pr-4",children:"Channel"}),t.jsx("th",{className:"py-2 pr-4",children:"Received"})]})}),t.jsx("tbody",{children:y.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[t.jsx("td",{className:"py-2 pr-4",children:e.deviceId}),t.jsx("td",{className:"py-2 pr-4",children:e.appVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaUpdateId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaChannel||""}),t.jsx("td",{className:"py-2 pr-4",children:e.createdAt?.toString?.()||""})]},e.eventId))})]}),y.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No OTA acknowledgements yet."})]})]})})})})]})]})}},90233:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>p,dynamic:()=>o});var t=d(19510),s=d(58585),c=d(85431),r=d(24569),n=d(46697),i=d(66267),l=d(64723),b=d(58517);let f=(0,d(68570).createProxy)(String.raw`/home/watkay/ReactProjects/neotree-editor/app/(dashboard)/app-updates/components/app-updates-client.tsx#AppUpdatesClient`),o="force-dynamic";async function p(){let{user:e,yes:a}=await (0,i.canAccessPage)();if(e||(0,s.redirect)("/login"),!a)return t.jsx(r.V,{children:t.jsx(n.Zb,{children:t.jsx(n.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[d,o,p,u,h]=await Promise.all([l.getAppUpdatePolicy(),l.getAppUpdatePolicyDrafts(),l.getApkReleases(),l.getApkReleaseDrafts(),(0,b.getDeviceUpdateEvents)({limit:200,offset:0})]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.D,{children:"App Updates"}),t.jsx(r.V,{children:t.jsx(f,{policy:d.data,policyDrafts:o.data,apkReleases:p.data,apkReleaseDrafts:u.data,otaEvents:h.data||[]})})]})}},64723:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>b,$$ACTION_1:()=>o,$$ACTION_2:()=>u,$$ACTION_3:()=>m,$$ACTION_4:()=>v,$$ACTION_5:()=>g,getApkReleaseDrafts:()=>f,getApkReleases:()=>h,getAppUpdatePolicy:()=>p,getAppUpdatePolicyDrafts:()=>l,saveApkReleases:()=>y,saveAppUpdatePolicies:()=>x});var t=d(24330);d(60166);var s=d(57435),c=d(66267),r=d(82102),n=d(48578),i=d(40618);let l=(0,t.j)("c20bc40beb4b7b0277426d1054f29ae96aaa52f3",b);async function b(...e){try{return await (0,c.isAllowed)(),await (0,r.MO)(...e)}catch(e){return s.Z.error("getAppUpdatePolicyDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let f=(0,t.j)("b87e1677693da2684ee3a0f21554e6b76275a119",o);async function o(...e){try{return await (0,c.isAllowed)(),await (0,r.LW)(...e)}catch(e){return s.Z.error("getApkReleaseDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let p=(0,t.j)("6ad9e789776abbd0cbff6072aa92a43f0616e1e0",u);async function u(...e){try{return await (0,c.isAllowed)(),await (0,r.Dy)(...e)}catch(e){return s.Z.error("getAppUpdatePolicy ERROR",e.message),{data:null,errors:[e.message]}}}let h=(0,t.j)("e7722c8e63e1374d5c2e84b847fad3b8bd4bdb7a",m);async function m(...e){try{return await (0,c.isAllowed)(),await (0,r.vQ)(...e)}catch(e){return s.Z.error("getApkReleases ERROR",e.message),{data:[],errors:[e.message]}}}let x=(0,t.j)("84f24a0a7e80366e9d243e80ae2685d89bbdf3ba",v);async function v(e){try{let a=await (0,c.isAllowed)();return await (0,n.uf)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveAppUpdatePolicies ERROR",e.message),{success:!1,errors:[e.message]}}}let y=(0,t.j)("4e9c94e9670a03a3e1e067d520c49cb5c75901cb",g);async function g(e){try{let a=await (0,c.isAllowed)();return await (0,n.tP)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveApkReleases ERROR",e.message),{success:!1,inserted:[],errors:[e.message]}}}(0,i.h)([l,f,p,h,x,y]),(0,t.j)("ba14e2d8542f377df983f696f5fb0a367a9e24a2",l),(0,t.j)("5358a37c4384e717cf87b4f898fd86b38c9891b9",f),(0,t.j)("15073b4e8e333464b712596bae253770c00908d5",p),(0,t.j)("e7dc8f9c9b57868d23c134b3ed25a105d5cd91e5",h),(0,t.j)("e7ada5c8ede3819bccc9053873317e9379817e1a",x),(0,t.j)("e72d12ec316a6da1bed636e4c33ea4038f681ba6",y)},58517:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>l,getDeviceUpdateEvents:()=>i});var t=d(24330);d(60166);var s=d(57435),c=d(66267),r=d(55340),n=d(40618);let i=(0,t.j)("354d954c9855e1fba9fca5cf7dd3be4eb00c167b",l);async function l(...e){try{return await (0,c.isAllowed)(),await (0,r.C)(...e)}catch(e){return s.Z.error("getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}(0,n.h)([i]),(0,t.j)("e68eb989a3c2428e3772d67a346d571547ee23ee",i)},24569:(e,a,d)=>{"use strict";d.d(a,{V:()=>c});var t=d(19510),s=d(50650);function c({className:e,...a}){return t.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},46697:(e,a,d)=>{"use strict";d.d(a,{Ol:()=>n,Zb:()=>r,aY:()=>l,ll:()=>i});var t=d(19510),s=d(71159),c=d(50650);let r=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let n=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let i=s.forwardRef(({className:e,...a},d)=>t.jsx("h3",{ref:d,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle",s.forwardRef(({className:e,...a},d)=>t.jsx("p",{ref:d,className:(0,c.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let l=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,c.cn)("p-6 pt-0",e),...a}));l.displayName="CardContent",s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,c.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},55340:(e,a,d)=>{"use strict";d.d(a,{C:()=>i});var t=d(57745),s=d(81445),c=d(10413),r=d(93567),n=d(57435);async function i(e){try{let{deviceId:a,eventType:d,limit:n=100,offset:i=0}={...e},l=[...a?[(0,t.eq)(r.deviceUpdateEvents.deviceId,a)]:[],...d?[(0,t.eq)(r.deviceUpdateEvents.eventType,d)]:[]];return{data:await c.Z.query.deviceUpdateEvents.findMany({where:l.length?(0,t.xD)(...l):void 0,orderBy:[(0,s.C)(r.deviceUpdateEvents.createdAt)],limit:n,offset:i})}}catch(e){return n.Z.error("_getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}}};var a=require("../../../webpack-runtime.js");a.C(e);var d=e=>a(a.s=e),t=a.X(0,[9380,1744,1337,3788,2758,9092,4901,4263,1121,3579,6360,1098,413,6267,5002,6741,8781,1162,7939,5241,2418,2724,1271,3173,7645],()=>d(97064));module.exports=t})();