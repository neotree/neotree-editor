(()=>{var e={};e.id=593,e.ids=[593],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},45695:(e,a,d)=>{"use strict";d.r(a),d.d(a,{GlobalError:()=>c.a,__next_app__:()=>o,originalPathname:()=>b,pages:()=>f,routeModule:()=>p,tree:()=>l}),d(90233),d(56367),d(12699),d(99985),d(96560);var t=d(23191),s=d(88716),r=d(37922),c=d.n(r),n=d(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);d.d(a,i);let l=["",{children:["(dashboard)",{children:["app-updates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,90233)),"C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\(dashboard)\\app-updates\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,56367)),"C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\(dashboard)\\layout.tsx"],loading:[()=>Promise.resolve().then(d.bind(d,12699)),"C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\(dashboard)\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(d.bind(d,99985)),"C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(d.bind(d,96560)),"C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\not-found.tsx"]}],f=["C:\\Users\\HomePC\\Neotree Projects\\neotree-editor\\app\\(dashboard)\\app-updates\\page.tsx"],b="/(dashboard)/app-updates/page",o={require:d,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/app-updates/page",pathname:"/app-updates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},91200:(e,a,d)=>{let t={"1258ba61386eb4d720fa34dd752ebbc33df297ae":()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.isAllowed),b101e093ad697b04228a470ee9001be8e031cf18:()=>Promise.resolve().then(d.bind(d,66267)).then(e=>e.canAccessPage),"14e2ee76ca3e4bfc1bcd04b0f04936c04f3ef9a1":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUser),"6eaf0e526707ea7fe2cf08669e9ccfb4701bff82":()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getAuthenticatedUserWithRoles),a69365ec9584c5ac5f833b8f58460ae666c0c724:()=>Promise.resolve().then(d.bind(d,40801)).then(e=>e.getSession),"0a72ecaa3fff3a1057bede04dbf3816a071acafa":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_4),"0b757848a203e887c454d13a51a105f73a3ebc62":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_2),"34dda87d5cfd4ee6427370c735e99310dcdf2cd1":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicyDrafts),"4465b66e838e666344dcd1927a43c33f66f83eb6":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleases),"5dc7cfc48e823903048908321631187c59f8160d":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getAppUpdatePolicy),"5f8b4739f421530b0d645e4f7d58fa52c4dd207b":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_0),"6689603a8a1393b55f960bc92891b354209e08bd":()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_1),a8208c509640dd14cae2104c6214c54a390004d7:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_5),adcbd713f90e9f7e170682bf03633a97e67176be:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveApkReleases),d51d95f26bca94337a91a24aabe7947aea369562:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.saveAppUpdatePolicies),e657b7c360a6e3a21c58aaf94af6c8e061991e68:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.$$ACTION_3),fbf73067ae697a579e4ee8489b4f3451ae144743:()=>Promise.resolve().then(d.bind(d,64723)).then(e=>e.getApkReleaseDrafts),"8329e7bbb0a388f3d22a3782ef1d56fbc7184869":()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.$$ACTION_0),a2cad89fb3f02c981fa1ef7c10d3bba8e0cc6ddc:()=>Promise.resolve().then(d.bind(d,58517)).then(e=>e.getDeviceUpdateEvents),"504b47065818979b01d9ea192aa893511e98df40":()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.updateSys),bd359f817196f265511cbda0108d8c55e3f5000b:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_0),bf07f47a0b3f93f6c9e28a48bf4d6728c4d544bc:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.$$ACTION_1),e8c35cfc4816dc340b04f96cc2d82cc38dcf54cc:()=>Promise.resolve().then(d.bind(d,60563)).then(e=>e.getSys),"08819fd80dbabf1032ea3d5742547f4d116fbf46":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSitesWithoutConfidentialData),"66f4466938616393f7dc119bdf6f97e18e426c7e":()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSite),bf6ab908d57c92b0ae3efbac6b0b724bd23822b4:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.$$ACTION_0),e60d11ab1bcc422ca65e1e8853c6ecfe0d6fd31b:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.saveSites),f8109569475a5f6ec2d3763d9fe6847fb6b8fcaa:()=>Promise.resolve().then(d.bind(d,82065)).then(e=>e.getSites),"11026d34fb6d547dd737a66f7dba323c72484a3a":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.discardDrafts),"16bccb008954f0b8eb6edc82e3630151cae804c5":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_0),"3e26759f3cbd8bef562081904cd2dd0819f0bdd7":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.revalidatePath),"3e2890ac69272701a0c8aa97627933c4122c2d98":()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.publishData),a9f930f7f8e5bc28032c14285e0f5d644e7ada51:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.getEditorDetails),e5b8162fb8957d04ed4165e51884476733aaa0b3:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.$$ACTION_1),f072aab2d1312ff00c5b72bd303974180f455eea:()=>Promise.resolve().then(d.bind(d,71271)).then(e=>e.countAllDrafts),"0df91a61585a44e382358b467fe8fde07ae4179b":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysUpdateIfExist),"10e06fe35a4d32ac922ac0f09759f026193ad57a":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeys),"28599db0021a4eedd4778629a4cba46fe01740e5":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_0),"65a933d528e11a71d8f7e4f8b055d8c6ca644816":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_2),"74faa79fd496f7c008435c4d42eb114ef20cee2c":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.saveDataKeysIfNotExist),"8954f7bb916c7bc71c2a5dcace3fd2d594f13118":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.exportDataKeys),"9283f807b952487d022c9914e83bda887f40e4fc":()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.$$ACTION_1),f1d743094e3be1ae5b9959c4bdf78ea2e045be49:()=>Promise.resolve().then(d.bind(d,94136)).then(e=>e.getDataKeys)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"1258ba61386eb4d720fa34dd752ebbc33df297ae":s.bind(null,"1258ba61386eb4d720fa34dd752ebbc33df297ae"),b101e093ad697b04228a470ee9001be8e031cf18:s.bind(null,"b101e093ad697b04228a470ee9001be8e031cf18"),"14e2ee76ca3e4bfc1bcd04b0f04936c04f3ef9a1":s.bind(null,"14e2ee76ca3e4bfc1bcd04b0f04936c04f3ef9a1"),"6eaf0e526707ea7fe2cf08669e9ccfb4701bff82":s.bind(null,"6eaf0e526707ea7fe2cf08669e9ccfb4701bff82"),a69365ec9584c5ac5f833b8f58460ae666c0c724:s.bind(null,"a69365ec9584c5ac5f833b8f58460ae666c0c724"),"0a72ecaa3fff3a1057bede04dbf3816a071acafa":s.bind(null,"0a72ecaa3fff3a1057bede04dbf3816a071acafa"),"0b757848a203e887c454d13a51a105f73a3ebc62":s.bind(null,"0b757848a203e887c454d13a51a105f73a3ebc62"),"34dda87d5cfd4ee6427370c735e99310dcdf2cd1":s.bind(null,"34dda87d5cfd4ee6427370c735e99310dcdf2cd1"),"4465b66e838e666344dcd1927a43c33f66f83eb6":s.bind(null,"4465b66e838e666344dcd1927a43c33f66f83eb6"),"5dc7cfc48e823903048908321631187c59f8160d":s.bind(null,"5dc7cfc48e823903048908321631187c59f8160d"),"5f8b4739f421530b0d645e4f7d58fa52c4dd207b":s.bind(null,"5f8b4739f421530b0d645e4f7d58fa52c4dd207b"),"6689603a8a1393b55f960bc92891b354209e08bd":s.bind(null,"6689603a8a1393b55f960bc92891b354209e08bd"),a8208c509640dd14cae2104c6214c54a390004d7:s.bind(null,"a8208c509640dd14cae2104c6214c54a390004d7"),adcbd713f90e9f7e170682bf03633a97e67176be:s.bind(null,"adcbd713f90e9f7e170682bf03633a97e67176be"),d51d95f26bca94337a91a24aabe7947aea369562:s.bind(null,"d51d95f26bca94337a91a24aabe7947aea369562"),e657b7c360a6e3a21c58aaf94af6c8e061991e68:s.bind(null,"e657b7c360a6e3a21c58aaf94af6c8e061991e68"),fbf73067ae697a579e4ee8489b4f3451ae144743:s.bind(null,"fbf73067ae697a579e4ee8489b4f3451ae144743"),"8329e7bbb0a388f3d22a3782ef1d56fbc7184869":s.bind(null,"8329e7bbb0a388f3d22a3782ef1d56fbc7184869"),a2cad89fb3f02c981fa1ef7c10d3bba8e0cc6ddc:s.bind(null,"a2cad89fb3f02c981fa1ef7c10d3bba8e0cc6ddc"),"504b47065818979b01d9ea192aa893511e98df40":s.bind(null,"504b47065818979b01d9ea192aa893511e98df40"),bd359f817196f265511cbda0108d8c55e3f5000b:s.bind(null,"bd359f817196f265511cbda0108d8c55e3f5000b"),bf07f47a0b3f93f6c9e28a48bf4d6728c4d544bc:s.bind(null,"bf07f47a0b3f93f6c9e28a48bf4d6728c4d544bc"),e8c35cfc4816dc340b04f96cc2d82cc38dcf54cc:s.bind(null,"e8c35cfc4816dc340b04f96cc2d82cc38dcf54cc"),"08819fd80dbabf1032ea3d5742547f4d116fbf46":s.bind(null,"08819fd80dbabf1032ea3d5742547f4d116fbf46"),"66f4466938616393f7dc119bdf6f97e18e426c7e":s.bind(null,"66f4466938616393f7dc119bdf6f97e18e426c7e"),bf6ab908d57c92b0ae3efbac6b0b724bd23822b4:s.bind(null,"bf6ab908d57c92b0ae3efbac6b0b724bd23822b4"),e60d11ab1bcc422ca65e1e8853c6ecfe0d6fd31b:s.bind(null,"e60d11ab1bcc422ca65e1e8853c6ecfe0d6fd31b"),f8109569475a5f6ec2d3763d9fe6847fb6b8fcaa:s.bind(null,"f8109569475a5f6ec2d3763d9fe6847fb6b8fcaa"),"11026d34fb6d547dd737a66f7dba323c72484a3a":s.bind(null,"11026d34fb6d547dd737a66f7dba323c72484a3a"),"16bccb008954f0b8eb6edc82e3630151cae804c5":s.bind(null,"16bccb008954f0b8eb6edc82e3630151cae804c5"),"3e26759f3cbd8bef562081904cd2dd0819f0bdd7":s.bind(null,"3e26759f3cbd8bef562081904cd2dd0819f0bdd7"),"3e2890ac69272701a0c8aa97627933c4122c2d98":s.bind(null,"3e2890ac69272701a0c8aa97627933c4122c2d98"),a9f930f7f8e5bc28032c14285e0f5d644e7ada51:s.bind(null,"a9f930f7f8e5bc28032c14285e0f5d644e7ada51"),e5b8162fb8957d04ed4165e51884476733aaa0b3:s.bind(null,"e5b8162fb8957d04ed4165e51884476733aaa0b3"),f072aab2d1312ff00c5b72bd303974180f455eea:s.bind(null,"f072aab2d1312ff00c5b72bd303974180f455eea"),"0df91a61585a44e382358b467fe8fde07ae4179b":s.bind(null,"0df91a61585a44e382358b467fe8fde07ae4179b"),"10e06fe35a4d32ac922ac0f09759f026193ad57a":s.bind(null,"10e06fe35a4d32ac922ac0f09759f026193ad57a"),"28599db0021a4eedd4778629a4cba46fe01740e5":s.bind(null,"28599db0021a4eedd4778629a4cba46fe01740e5"),"65a933d528e11a71d8f7e4f8b055d8c6ca644816":s.bind(null,"65a933d528e11a71d8f7e4f8b055d8c6ca644816"),"74faa79fd496f7c008435c4d42eb114ef20cee2c":s.bind(null,"74faa79fd496f7c008435c4d42eb114ef20cee2c"),"8954f7bb916c7bc71c2a5dcace3fd2d594f13118":s.bind(null,"8954f7bb916c7bc71c2a5dcace3fd2d594f13118"),"9283f807b952487d022c9914e83bda887f40e4fc":s.bind(null,"9283f807b952487d022c9914e83bda887f40e4fc"),f1d743094e3be1ae5b9959c4bdf78ea2e045be49:s.bind(null,"f1d743094e3be1ae5b9959c4bdf78ea2e045be49")}},88066:(e,a,d)=>{Promise.resolve().then(d.bind(d,20706)),Promise.resolve().then(d.bind(d,10827))},20706:(e,a,d)=>{"use strict";d.d(a,{AppUpdatesClient:()=>f});var t=d(10326),s=d(17577),r=d(35047),c=d(90772),n=d(33071),i=d(79210),l=d(3529);function f({policy:e,policyDrafts:a,apkReleases:d,apkReleaseDrafts:f,otaEvents:b}){let o=(0,r.useRouter)(),{viewOnly:p,mode:u}=(0,l.b)(),[h,m]=(0,s.useState)("apk"),x=(0,s.useMemo)(()=>a.length?[...a].sort((e,a)=>{let d=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(a.updatedAt||a.createdAt||0).getTime()-d})[0]:null,[a]),v=(0,s.useMemo)(()=>{let e=new Map;for(let a of f){let d=a.data||{},t=d.apkReleaseId||a.apkReleaseDraftId;t&&e.set(t,{...d,apkReleaseId:t,__draft:!0,__draftId:a.apkReleaseDraftId,__updatedAt:a.updatedAt||a.createdAt})}for(let a of d){let d=a.apkReleaseId;d&&(e.has(d)||e.set(d,{...a,__draft:!1}))}return Array.from(e.values()).sort((e,a)=>{let d=new Date(e.__updatedAt||e.updatedAt||e.createdAt||0).getTime();return new Date(a.__updatedAt||a.updatedAt||a.createdAt||0).getTime()-d})},[f,d]),g=(0,s.useMemo)(()=>[...b].filter(e=>"ota_update_applied"===e.eventType).sort((e,a)=>{let d=new Date(e.createdAt||0).getTime();return new Date(a.createdAt||0).getTime()-d}),[b]),j=(0,s.useCallback)(e=>{let a=e.apkReleaseId||e.apkReleaseDraftId;a&&o.push(`/app-updates/new-apk?apkReleaseId=${a}`)},[o]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Zb,{className:"mb-4",children:t.jsx(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Recommended release flow"}),(0,t.jsxs)("div",{className:"text-sm",children:["1) Upload APK and save a draft ","->"," 2) Mark it available ","->"," 3) Update policy to point to the release"]}),t.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:x?`Policy draft updated ${x.updatedAt?.toString?.()||""}`:e?"Published policy is live":"No policy yet"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:p?"View mode: edits disabled":"development"===u?"Development mode: drafts enabled":`Mode: ${u}`})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(c.z,{variant:"primary-outline",onClick:()=>o.push("/app-updates/new-apk"),disabled:p,children:"New APK Release"}),t.jsx(c.z,{onClick:()=>o.push("/app-updates/new-policy"),children:p?"View Policy":"New Policy"})]})]})})}),(0,t.jsxs)(i.mQ,{value:h,onValueChange:m,className:"w-full",children:[(0,t.jsxs)(i.dr,{className:"w-full",children:[t.jsx(i.SP,{value:"apk",className:"flex-1",children:"APK Updates"}),t.jsx(i.SP,{value:"ota",className:"flex-1",children:"OTA Updates"})]}),t.jsx(i.nU,{value:"apk",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"APK releases"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"Status"}),t.jsx("th",{className:"py-2 pr-4",children:"Available"}),t.jsx("th",{className:"py-2 pr-4",children:"Draft"}),t.jsx("th",{className:"py-2 pr-4",children:"File"}),t.jsx("th",{className:"py-2 pr-4",children:"Updated"}),t.jsx("th",{className:"py-2 pr-4"})]})}),t.jsx("tbody",{children:v.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsxs)("td",{className:"py-2 pr-4",children:[e.versionName," (",e.versionCode,")"]}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion}),t.jsx("td",{className:"py-2 pr-4",children:e.status}),t.jsx("td",{className:"py-2 pr-4",children:e.isAvailable?"Yes":"No"}),t.jsx("td",{className:"py-2 pr-4",children:e.__draft?"Draft":"Published"}),t.jsx("td",{className:"py-2 pr-4",children:e.fileId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.__updatedAt?.toString?.()||e.updatedAt?.toString?.()||""}),t.jsx("td",{className:"py-2 pr-4",children:t.jsx(c.z,{variant:"ghost",onClick:()=>j(e),children:p?"View":"Edit"})})]},e.apkReleaseId))})]}),v.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No releases found."})]})]})})})}),t.jsx(i.nU,{value:"ota",className:"mt-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsx(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"OTA updates applied (device acknowledgements)"})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left border-b",children:[t.jsx("th",{className:"py-2 pr-4",children:"Device"}),t.jsx("th",{className:"py-2 pr-4",children:"App Version"}),t.jsx("th",{className:"py-2 pr-4",children:"Runtime"}),t.jsx("th",{className:"py-2 pr-4",children:"OTA Update ID"}),t.jsx("th",{className:"py-2 pr-4",children:"Channel"}),t.jsx("th",{className:"py-2 pr-4",children:"Received"})]})}),t.jsx("tbody",{children:g.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[t.jsx("td",{className:"py-2 pr-4",children:e.deviceId}),t.jsx("td",{className:"py-2 pr-4",children:e.appVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.runtimeVersion||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaUpdateId||""}),t.jsx("td",{className:"py-2 pr-4",children:e.otaChannel||""}),t.jsx("td",{className:"py-2 pr-4",children:e.createdAt?.toString?.()||""})]},e.eventId))})]}),g.length?null:t.jsx("div",{className:"text-muted-foreground text-sm",children:"No OTA acknowledgements yet."})]})]})})})})]})]})}},90233:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>p,dynamic:()=>o});var t=d(19510),s=d(58585),r=d(85431),c=d(24569),n=d(46697),i=d(66267),l=d(64723),f=d(58517);let b=(0,d(68570).createProxy)(String.raw`C:\Users\HomePC\Neotree Projects\neotree-editor\app\(dashboard)\app-updates\components\app-updates-client.tsx#AppUpdatesClient`),o="force-dynamic";async function p(){let{user:e,yes:a}=await (0,i.canAccessPage)();if(e||(0,s.redirect)("/login"),!a)return t.jsx(c.V,{children:t.jsx(n.Zb,{children:t.jsx(n.aY,{className:"p-4 text-xl text-center text-danger bg-danger/10",children:"You don't have sufficient rights to access this page!"})})});let[d,o,p,u,h]=await Promise.all([l.getAppUpdatePolicy(),l.getAppUpdatePolicyDrafts(),l.getApkReleases(),l.getApkReleaseDrafts(),(0,f.getDeviceUpdateEvents)({limit:200,offset:0})]);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(r.D,{children:"App Updates"}),t.jsx(c.V,{children:t.jsx(b,{policy:d.data,policyDrafts:o.data,apkReleases:p.data,apkReleaseDrafts:u.data,otaEvents:h.data||[]})})]})}},64723:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>f,$$ACTION_1:()=>o,$$ACTION_2:()=>u,$$ACTION_3:()=>m,$$ACTION_4:()=>v,$$ACTION_5:()=>j,getApkReleaseDrafts:()=>b,getApkReleases:()=>h,getAppUpdatePolicy:()=>p,getAppUpdatePolicyDrafts:()=>l,saveApkReleases:()=>g,saveAppUpdatePolicies:()=>x});var t=d(24330);d(60166);var s=d(57435),r=d(66267),c=d(82102),n=d(48578),i=d(40618);let l=(0,t.j)("5f8b4739f421530b0d645e4f7d58fa52c4dd207b",f);async function f(...e){try{return await (0,r.isAllowed)(),await (0,c.MO)(...e)}catch(e){return s.Z.error("getAppUpdatePolicyDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let b=(0,t.j)("6689603a8a1393b55f960bc92891b354209e08bd",o);async function o(...e){try{return await (0,r.isAllowed)(),await (0,c.LW)(...e)}catch(e){return s.Z.error("getApkReleaseDrafts ERROR",e.message),{data:[],errors:[e.message]}}}let p=(0,t.j)("0b757848a203e887c454d13a51a105f73a3ebc62",u);async function u(...e){try{return await (0,r.isAllowed)(),await (0,c.Dy)(...e)}catch(e){return s.Z.error("getAppUpdatePolicy ERROR",e.message),{data:null,errors:[e.message]}}}let h=(0,t.j)("e657b7c360a6e3a21c58aaf94af6c8e061991e68",m);async function m(...e){try{return await (0,r.isAllowed)(),await (0,c.vQ)(...e)}catch(e){return s.Z.error("getApkReleases ERROR",e.message),{data:[],errors:[e.message]}}}let x=(0,t.j)("0a72ecaa3fff3a1057bede04dbf3816a071acafa",v);async function v(e){try{let a=await (0,r.isAllowed)();return await (0,n.uf)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveAppUpdatePolicies ERROR",e.message),{success:!1,errors:[e.message]}}}let g=(0,t.j)("a8208c509640dd14cae2104c6214c54a390004d7",j);async function j(e){try{let a=await (0,r.isAllowed)();return await (0,n.tP)({...e,userId:a.user?.userId})}catch(e){return s.Z.error("saveApkReleases ERROR",e.message),{success:!1,inserted:[],errors:[e.message]}}}(0,i.h)([l,b,p,h,x,g]),(0,t.j)("34dda87d5cfd4ee6427370c735e99310dcdf2cd1",l),(0,t.j)("fbf73067ae697a579e4ee8489b4f3451ae144743",b),(0,t.j)("5dc7cfc48e823903048908321631187c59f8160d",p),(0,t.j)("4465b66e838e666344dcd1927a43c33f66f83eb6",h),(0,t.j)("d51d95f26bca94337a91a24aabe7947aea369562",x),(0,t.j)("adcbd713f90e9f7e170682bf03633a97e67176be",g)},58517:(e,a,d)=>{"use strict";d.r(a),d.d(a,{$$ACTION_0:()=>l,getDeviceUpdateEvents:()=>i});var t=d(24330);d(60166);var s=d(57435),r=d(66267),c=d(55340),n=d(40618);let i=(0,t.j)("8329e7bbb0a388f3d22a3782ef1d56fbc7184869",l);async function l(...e){try{return await (0,r.isAllowed)(),await (0,c.C)(...e)}catch(e){return s.Z.error("getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}(0,n.h)([i]),(0,t.j)("a2cad89fb3f02c981fa1ef7c10d3bba8e0cc6ddc",i)},24569:(e,a,d)=>{"use strict";d.d(a,{V:()=>r});var t=d(19510),s=d(50650);function r({className:e,...a}){return t.jsx("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",e)})}},46697:(e,a,d)=>{"use strict";d.d(a,{Ol:()=>n,Zb:()=>c,aY:()=>l,ll:()=>i});var t=d(19510),s=d(71159),r=d(50650);let c=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));c.displayName="Card";let n=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let i=s.forwardRef(({className:e,...a},d)=>t.jsx("h3",{ref:d,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle",s.forwardRef(({className:e,...a},d)=>t.jsx("p",{ref:d,className:(0,r.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let l=s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("p-6 pt-0",e),...a}));l.displayName="CardContent",s.forwardRef(({className:e,...a},d)=>t.jsx("div",{ref:d,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},55340:(e,a,d)=>{"use strict";d.d(a,{C:()=>i});var t=d(57745),s=d(81445),r=d(10413),c=d(93567),n=d(57435);async function i(e){try{let{deviceId:a,eventType:d,limit:n=100,offset:i=0}={...e},l=[...a?[(0,t.eq)(c.deviceUpdateEvents.deviceId,a)]:[],...d?[(0,t.eq)(c.deviceUpdateEvents.eventType,d)]:[]];return{data:await r.Z.query.deviceUpdateEvents.findMany({where:l.length?(0,t.xD)(...l):void 0,orderBy:[(0,s.C)(c.deviceUpdateEvents.createdAt)],limit:n,offset:i})}}catch(e){return n.Z.error("_getDeviceUpdateEvents ERROR",e.message),{data:[],errors:[e.message]}}}}};var a=require("../../../webpack-runtime.js");a.C(e);var d=e=>a(a.s=e),t=a.X(0,[9380,1744,1337,3788,2758,9092,4901,4263,1121,264,6360,1098,413,6267,5002,6741,8781,1162,7939,5241,2418,8778,1271,9011,6746],()=>d(45695));module.exports=t})();