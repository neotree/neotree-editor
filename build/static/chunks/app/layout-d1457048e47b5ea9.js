(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{94667:function(e,t,n){Promise.resolve().then(n.t.bind(n,47960,23)),Promise.resolve().then(n.bind(n,98942)),Promise.resolve().then(n.bind(n,55130)),Promise.resolve().then(n.bind(n,91276)),Promise.resolve().then(n.bind(n,15446)),Promise.resolve().then(n.bind(n,77772)),Promise.resolve().then(n.bind(n,28164)),Promise.resolve().then(n.bind(n,19820)),Promise.resolve().then(n.bind(n,33606)),Promise.resolve().then(n.bind(n,67132)),Promise.resolve().then(n.t.bind(n,98794,23)),Promise.resolve().then(n.bind(n,84226))},42004:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var a=n(57437),s=n(16107);function r(e){let{width:t=0,height:n=0,containerWidth:r,...l}=e;l.sizes;let i={width:"100%",height:"auto"};if(n&&t&&r){let e=(0,s.a)({imageWidth:t,imageHeight:n,containerWidth:r});i.width=e.imageWidth,i.height=e.imageHeight}return(0,a.jsx)("img",{...l,src:l.src,style:{...i,...l.style}})}},69711:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var a=n(57437),s=n(15001);function r(e){let{overlay:t,transparent:n,padding:r="50px 0"}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:n?"transparent":"rgba(255,255,255,.6)"}:{padding:r}},children:(0,a.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},98942:function(e,t,n){"use strict";n.d(t,{AlertModal:function(){return d}});var a=n(57437),s=n(2265),r=n(37996),l=n(37099),i=n(98656),o=n(62869),c=n(94508);function d(){let{isOpen:e,title:t,message:n,variant:d,buttonLabel:u,close:f,onClose:m}=(0,i.s)(),x=(0,s.useCallback)(()=>{null==m||m(),f()},[f,m]);return(0,a.jsx)(l.aR,{open:e,onOpenChange:x,children:(0,a.jsxs)(l._T,{children:[(0,a.jsxs)(l.fY,{children:[(0,a.jsx)(l.f$,{className:(0,c.cn)(!t&&"hidden"),children:t||""}),(0,a.jsx)(l.yT,{className:"hidden",children:""}),!!n&&(0,a.jsxs)("div",{className:(0,c.cn)("flex gap-y-4 flex-col sm:items-start sm:flex-row sm:gap-x-4"),children:["error"===d&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(r.BJv,{className:"text-red-600 min-w-12 min-h-12 w-12 h-12"})}),"success"===d&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(r._rq,{className:"text-green-600 min-w-12 min-h-12 w-12 h-12"})}),(0,a.jsx)("div",{className:"flex-1 text-lg",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})})]})]}),(0,a.jsx)(l.xo,{children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.z,{onClick:x,variant:"outline",children:u})})})]})})}},55130:function(e,t,n){"use strict";n.d(t,{ConfirmModal:function(){return c}});var a=n(57437),s=n(37099),r=n(37996),l=n(86180),i=n(62869),o=n(94508);function c(){let{isOpen:e,danger:t,title:n,message:c,positiveLabel:d,negativeLabel:u,close:f,onConfirm:m}=(0,l.t)();return(0,a.jsx)(s.aR,{open:e,onOpenChange:f,children:(0,a.jsxs)(s._T,{className:"p-0 max-h-[80%] flex flex-col",children:[!!n&&(0,a.jsx)(s.fY,{className:"py-2 px-4",children:(0,a.jsx)(s.f$,{children:n})}),(0,a.jsxs)("div",{className:(0,o.cn)("px-4 flex-1 flex flex-col gap-y-4 items-center sm:items-start sm:flex-row sm:gap-x-4 overflow-y-auto",!n&&"py-2"),children:[t&&(0,a.jsx)(r.bcx,{className:"text-red-600 min-w-10 min-h-10 w-10 h-10"}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:c}})]}),(0,a.jsxs)(s.xo,{className:"px-4 py-2",children:[(0,a.jsx)(s.le,{children:u}),(0,a.jsx)(i.z,{variant:t?"destructive":void 0,asChild:!0,children:(0,a.jsx)(s.OL,{onClick:()=>null==m?void 0:m(),children:d})})]})]})})}},91276:function(e,t,n){"use strict";n.d(t,{FilesModal:function(){return z}});var a=n(57437),s=n(2265),r=n(26110),l=n(66070),i=n(69711),o=n(70465),c=n(12339),d=n(19820),u=n(78632),f=n(37996),m=n(37099),x=n(62869);function h(){let{unhandledErrors:e}=(0,o.Y)(),t=(0,s.useCallback)(()=>o.Y.setState({unhandledErrors:[]}),[]);return(0,a.jsx)(m.aR,{open:!!e.length,onOpenChange:e=>!e&&t(),children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[(0,a.jsx)(m.f$,{children:""}),(0,a.jsx)(m.yT,{children:""}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(f.BJv,{className:"text-red-600 min-w-12 min-h-12 w-12 h-12"})}),(0,a.jsx)("div",{className:"flex-1 text-lg",dangerouslySetInnerHTML:{__html:e.join("\n")}})]}),(0,a.jsx)(m.xo,{children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.z,{onClick:()=>t(),variant:"outline",children:"Okay"})})})]})})}var p=n(49360),g=n(69658),v=n(17689),j=n(55122),N=n(83464),y=n(94508),b=n(98656),w=n(16107),C=n(42004);function k(e){let{type:t,inputProps:n,fileDetails:l,onUpload:c}=e,{closeModal:d}=(0,o.Y)(),[u,{width:f}]=(0,j.Z)(),[m,h]=(0,s.useState)([]),[k,P]=(0,s.useState)(!1),{alert:R}=(0,b.s)(),E=(0,s.useCallback)(async()=>{let e=(null==n?void 0:n.multiple)?m:[m[0]];try{P(!0);let t=[],n=[];for(let{file:a,metadata:s,fileId:r}of e)try{let e=new FormData;e.append("file",a),e.append("fileId",r||(0,p.Z)()),e.append("filename",a.name),e.append("contentType",a.type),e.append("size","".concat(a.size)),e.append("metadata",JSON.stringify({...s})),l&&Object.keys(l).forEach(t=>{let n=l[t];e.append(t,JSON.stringify(n))});let i=(await N.Z.post("/api/files/upload",e)).data;if(i.errors)throw Error("Failed to upload ".concat(a.name,": ").concat(t.join(", \n")));i.data&&n.push(i.data)}catch(e){t=[...t,e.message]}if(t.length)throw Error(t.join(", "));n.length&&(null==c||c(n)),h([]),R({title:"Success",message:"File".concat(e.length>1?"s":""," uploaded successfully!"),variant:"success"})}catch(e){R({title:"Error",message:e.message,variant:"error"})}finally{P(!1)}},[c,R,m,null==n?void 0:n.multiple,l]),S=(0,s.useCallback)(async e=>{try{var t;let n=[];if(null===(t=e.target.files)||void 0===t?void 0:t.length)for(let t=0;t<e.target.files.length;t++)n.push(e.target.files[t]);let a=[];for(let e of n){let t,n;let s=URL.createObjectURL(e),r={};if("".concat(e.type).includes("image"))try{let e=await (0,w.p)(s);r={...r,...e},t=s}catch(e){}a.push({fileId:(0,p.Z)(),file:e,url:s,imageURL:t,videoURL:n,metadata:r})}h(a)}catch(e){R({title:"Error",message:e.message})}},[R]);return(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(i.a,{overlay:!0}),(0,a.jsxs)("div",{className:"p-4 flex-1 overflow-y-auto",ref:u,children:[1===m.length&&m.map(e=>{let t=(0,a.jsx)(g.Z,{className:"w-20 h-20 text-muted-foreground"});return e.imageURL&&(t=(0,a.jsx)(C.E,{alt:"",width:e.metadata.width||0,height:e.metadata.height||0,containerWidth:f,src:e.imageURL||"/images/placeholder.png"})),(0,a.jsxs)("div",{className:(0,y.cn)("\n                                    flex\n                                    flex-col\n                                    gap-y-2\n                                    w-full\n                                    items-center\n                                    justify-center\n                                    text-xs\n                                ",!(e.imageURL||e.videoURL)&&""),children:[t,(0,a.jsx)("span",{children:e.file.name})]},e.fileId)}),!m.length&&(0,a.jsxs)("div",{className:(0,y.cn)("\n                                relative\n                                w-full\n                                h-36\n                                bg-primary/20\n                                flex\n                                flex-col\n                                items-center\n                                justify-center\n                                text-primary\n                                uppercase\n                                font-bold\n                                rounded-md\n                                transition-colors\n                                hover:bg-primary/30\n                            ",!!m.length&&"hidden"),children:[(0,a.jsx)("div",{children:(null==n?void 0:n.placeholder)||"Choose file"}),(0,a.jsx)("input",{...n,type:"file",accept:t,value:"",className:(0,y.cn)("\n                                    absolute\n                                    left-0\n                                    top-0\n                                    w-full\n                                    h-full\n                                    opacity-0\n                                "),onChange:S})]})]}),(0,a.jsxs)(r.cN,{className:"px-4 py-4",children:[!m.length&&(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(x.z,{variant:"ghost",onClick:()=>d(),children:"Cancel"}),!!m.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(x.z,{variant:"destructive",onClick:()=>h([]),children:"Clear"}),(0,a.jsxs)(x.z,{disabled:!m.length,onClick:()=>E(),className:(0,y.cn)(!m.length&&"hidden"),children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Upload"})]})]})]})]})}var P=n(61994),R=n(93022);function E(e){let{file:t,...n}=e,[l,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),{selectMultiple:u,onSelectFiles:f,closeModal:m}=(0,o.Y)(),h=(0,a.jsx)(C.E,{...n,onLoad:()=>i(!0),className:(0,P.Z)(!l&&"hidden opacity-0",n.className)});return(0,a.jsxs)(a.Fragment,{children:[!l&&(0,a.jsx)(R.O,{className:"h-24"}),(0,a.jsxs)(r.Vq,{open:c,onOpenChange:d,children:[(0,a.jsx)(r.hg,{children:h}),(0,a.jsxs)(r.cZ,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col w-full max-w-xl max-h-[80%]",children:[(0,a.jsxs)(r.fK,{className:"p-0 m-0 h-0 overflow-hidden",children:[(0,a.jsx)(r.$N,{children:""}),(0,a.jsx)(r.Be,{children:""})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-2",children:h}),(0,a.jsxs)(r.cN,{className:"px-4 py-2",children:[(0,a.jsx)(r.GG,{asChild:!0,children:(0,a.jsx)(x.z,{variant:"ghost",children:"Close"})}),!!f&&(0,a.jsx)(r.GG,{asChild:!0,children:(0,a.jsx)(x.z,{onClick:()=>{f([t]),u||m()},children:"Select"})})]})]})]})]})}let S=[{label:"Files",value:"files"},{label:"Upload",value:"upload"}];function z(){let{isModalOpen:e,loading:t,files:n,lastFilesQueryDate:f,page:m,totalPages:x,totalRows:p,limit:g,closeModal:v,getFiles:j}=(0,o.Y)(),[N,b]=(0,s.useState)(S[0].value);return!f&&t?(0,a.jsx)(i.a,{overlay:!0}):(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(i.a,{overlay:!0}),(0,a.jsx)(d.SocketEventsListener,{events:[{name:"file_uploaded",onEvent:{callback(){f&&j({reset:!0})}}}]}),(0,a.jsx)(r.Vq,{open:e,onOpenChange:v,children:(0,a.jsxs)(r.cZ,{hideCloseButton:!0,className:"px-0 py-0 max-w-3xl max-h-[80%] flex flex-col",children:[(0,a.jsxs)(r.fK,{className:"p-0 m-0 h-0 overflow-hidden",children:[(0,a.jsx)(r.$N,{children:""}),(0,a.jsx)(r.Be,{children:""})]}),(0,a.jsx)(c.mQ,{className:"w-full [&>div]:w-full",value:N,onValueChange:e=>b(e),children:(0,a.jsx)(c.dr,{children:S.map(e=>(0,a.jsx)(c.SP,{value:e.value,className:"flex-1",children:e.label},e.value))})}),(0,a.jsxs)(a.Fragment,{children:[N===S[0].value&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-4 flex-1 overflow-y-auto columns-1 sm:columns-2 md:columns-3 gap-4",children:n.map(e=>{let t={...e.metadata};return(0,a.jsx)(l.Zb,{className:"mb-4",children:(0,a.jsx)(l.aY,{className:"p-2 transition-all hover:scale-105",children:(0,a.jsx)("div",{children:(0,a.jsx)(E,{width:t.width||t.w,height:t.height||t.h,alt:e.filename,src:e.url,file:e})})})},e.fileId)})}),(0,a.jsxs)(r.cN,{className:"px-4 py-2 flex flex-row items-center",children:[(0,a.jsxs)("span",{className:(0,y.cn)("text-xs text-muted-foreground"),children:["Showing ",n.length," of ",p," files"]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{children:(0,a.jsx)(u.t,{currentPage:m,totalPages:x,disabled:t,limit:g,totalRows:p,collectionName:"Files",onPaginate:e=>j({page:e}),hideControls:!1,hideSummary:!0,hideNumbers:!0,nextLabel:"More",prevLabel:"",hidePrev:!0})})]})]}),N===S[1].value&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(k,{onUpload:()=>b(S[0].value),type:"image/*"})})]})]})}),(0,a.jsx)(h,{})]})}},78632:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var a=n(57437),s=n(10346),r=n(85968),l=n(94508);let i="LEFT",o="RIGHT";function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e,s=[];for(;a<=t;)s.push(a),a+=n;return s}function d(e){let{currentPage:t,totalPages:n,disabled:d,limit:u=1,totalRows:f,collectionName:m="results",hideControls:x,hideSummary:h,hideNumbers:p,hideNext:g,hidePrev:v,classes:j}=e,N=function(e){let{currentPage:t=1,totalPages:n=0,onPaginate:a}=e,s=[{id:"first",label:void 0!==e.prevLabel?e.prevLabel:"Previous",disabled:t<2,isPrev:!0,isNext:!1,isEllipsis:!1,onClick:()=>a(t-1)}];return(function(e){let{totalPages:t=0,currentPage:n=1}=e;if(t>9){let e=[],a=n-2,s=n+2,r=t-1,l=a>2?a:2,d=s<r?s:r,u=7-(e=c(l,d)).length-1,f=l>2,m=d<r;return f&&!m?e=[i,...c(l-u,l-1),...e]:!f&&m?e=[...e,...c(d+1,d+u),o]:f&&m&&(e=[i,...e,o]),[1,...e,t]}return c(1,t)})(e).forEach(e=>{[i,o].includes(e)?s.push({label:"...",id:"".concat(e),disabled:!1,isPrev:!1,isNext:!1,isEllipsis:!0,onClick:()=>{}}):s.push({id:"".concat(e),label:"".concat(e),disabled:t===e,isPrev:!1,isNext:!1,isEllipsis:!1,onClick:()=>a(Number(e))})}),s.push({id:"last",label:void 0!==e.nextLabel?e.nextLabel:"Next",disabled:n===t,isPrev:!1,isNext:!0,isEllipsis:!1,onClick:()=>a(t+1)}),s}(e);return x&&h?null:(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2",children:[!h&&(0,a.jsxs)("div",{className:"text-xs opacity-50 min-w-10",children:["Showing ",f?(0,r.c)((t-1)*u+1):0,"\xa0-\xa0",(0,r.c)(Math.min(f,t*u)),"\xa0of\xa0",(0,r.c)(f,{separator:" "})," ",m]}),!x&&(0,a.jsx)(s.tl,{children:(0,a.jsx)(s.ng,{children:N.map(e=>(0,a.jsx)(s.nt,{children:(()=>{let r="".concat(t)==="".concat(e.label),i=e.disabled||d,o="opacity-50",c=()=>!i&&e.onClick();return e.isPrev?v?null:(i=i||1===t,(0,a.jsx)(s.dN,{href:"#",className:(0,l.cn)(1===t?o:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),c()},children:(0,a.jsx)("span",{children:e.label})})):e.isEllipsis?p?null:(0,a.jsx)(s.Dj,{className:(0,l.cn)(i?o:"","hidden md:flex",null==j?void 0:j.pageNumber)}):e.isNext?g?null:(i=i||t===n,(0,a.jsx)(s.$0,{href:"#",className:(0,l.cn)(i?o:""),onClick:e=>{e.stopPropagation(),e.preventDefault(),c()},children:(0,a.jsx)("span",{children:e.label})})):p?null:(0,a.jsx)(s.kN,{href:"#",className:(0,l.cn)(i?o:"","hidden md:flex",null==j?void 0:j.pageNumber),isActive:r,onClick:e=>{e.stopPropagation(),e.preventDefault(),c()},children:e.label})})()},e.id))})})]})}},15446:function(e,t,n){"use strict";n.d(t,{AuthContextProvider:function(){return r}});var a=n(57437),s=n(80605);function r(e){let{children:t}=e;return(0,a.jsx)(s.SessionProvider,{children:t})}},77772:function(e,t,n){"use strict";n.d(t,{ChangeLogProvider:function(){return l}});var a=n(57437),s=n(2265);let r=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,s.useState)({});return(0,a.jsx)(r.Provider,{value:{...n,setCurrentEntity:e=>{l(e)},clearCurrentEntity:()=>{l({})}},children:t})}},28164:function(e,t,n){"use strict";n.d(t,{ThemeProvider:function(){return r}});var a=n(57437);n(2265);var s=n(25922);function r(e){let{children:t,...n}=e;return(0,a.jsx)(s.f,{...n,children:t})}},19820:function(e,t,n){"use strict";n.d(t,{SocketEventsListener:function(){return l}});var a=n(2265),s=n(99376),r=n(62265);function l(e){let{events:t}=e,n=(0,a.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,a.useRef)(new Date().getTime());let l=(0,s.useRouter)();return(0,a.useEffect)(()=>{t.forEach(e=>{let{name:t,action:a,delay:s=100,onEvent:i}=e;r.Z.on(t,function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];let c=()=>{var e,n;(!a||r[0]===a)&&(null===(e=i.callback)||void 0===e||e.call(i,...r),(null==i?void 0:i.refreshRouter)&&(console.log(t,"refreshing..."),l.refresh()),(null===(n=i.redirect)||void 0===n?void 0:n.to)&&(i.redirect.replace?l.replace(i.redirect.to):l.push(i.redirect.to)))},d=new Date().getTime();s?(clearTimeout(n.current.eventsTimeouts[t]),n.current.eventsTimeouts[t]=setTimeout(()=>{n.current.eventsTimestamps[t]=d,c()},s)):(n.current.eventsTimestamps[t]=new Date().getTime(),c())})})},[t,l]),null}},37099:function(e,t,n){"use strict";n.d(t,{OL:function(){return p},_T:function(){return u},aR:function(){return o},f$:function(){return x},fY:function(){return f},le:function(){return g},xo:function(){return m},yT:function(){return h}});var a=n(57437),s=n(2265),r=n(7880),l=n(94508),i=n(62869);let o=r.fC;r.xz;let c=r.h_,d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-[99999999999] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:t})});d.displayName=r.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(r.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-[99999999999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...s})]})});u.displayName=r.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let m=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};m.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",n),...s})});x.displayName=r.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});h.displayName=r.dk.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.aU,{ref:t,className:(0,l.cn)((0,i.d)(),n),...s})});p.displayName=r.aU.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.$j,{ref:t,className:(0,l.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...s})});g.displayName=r.$j.displayName},62869:function(e,t,n){"use strict";n.d(t,{d:function(){return o},z:function(){return c}});var a=n(57437),s=n(2265),r=n(37053),l=n(90535),i=n(94508);let o=(0,l.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:l,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:n})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var a=n(57437),s=n(2265),r=n(94508);let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",n),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",n),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",n),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",n),...s})});u.displayName="CardFooter"},26110:function(e,t,n){"use strict";n.d(t,{$N:function(){return p},Be:function(){return g},GG:function(){return u},Vq:function(){return o},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return c}});var a=n(57437),s=n(2265),r=n(70001),l=n(32489),i=n(94508);let o=r.fC,c=r.xz,d=r.h_,u=r.x8,f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});f.displayName=r.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:n,children:s,hideCloseButton:o,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...c,children:[s,!0!==o&&(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};x.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});p.displayName=r.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});g.displayName=r.dk.displayName},10346:function(e,t,n){"use strict";n.d(t,{$0:function(){return h},Dj:function(){return p},dN:function(){return x},kN:function(){return m},ng:function(){return u},nt:function(){return f},tl:function(){return d}});var a=n(57437),s=n(2265),r=n(92451),l=n(10407),i=n(67782),o=n(94508),c=n(62869);let d=e=>{let{className:t,...n}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",t),...n})};d.displayName="Pagination";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("ul",{ref:t,className:(0,o.cn)("flex flex-row items-center gap-1",n),...s})});u.displayName="PaginationContent";let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("li",{ref:t,className:(0,o.cn)("",n),...s})});f.displayName="PaginationItem";let m=e=>{let{className:t,isActive:n,size:s="icon",...r}=e;return(0,a.jsx)("a",{"aria-current":n?"page":void 0,className:(0,o.cn)((0,c.d)({variant:n?"outline":"ghost",size:s}),t),...r})};m.displayName="PaginationLink";let x=e=>{let{className:t,children:n,...s}=e;return(0,a.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 pl-2.5",t),...s,children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),n||(0,a.jsx)("span",{children:"Previous"})]})};x.displayName="PaginationPrevious";let h=e=>{let{className:t,children:n,...s}=e;return(0,a.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 pr-2.5",t),...s,children:[n||(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(l.Z,{className:"h-4 w-4"})]})};h.displayName="PaginationNext";let p=e=>{let{className:t,...n}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,o.cn)("flex h-9 w-9 items-center justify-center",t),...n,children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};p.displayName="PaginationEllipsis"},93022:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var a=n(57437),s=n(94508);function r(e){let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...n})}},33606:function(e,t,n){"use strict";n.d(t,{Toaster:function(){return l}});var a=n(57437),s=n(25922),r=n(14438);let l=e=>{let{...t}=e,{theme:n="system"}=(0,s.F)();return(0,a.jsx)(r.x7,{theme:n,richColors:!0,position:"top-center",...t})}},12339:function(e,t,n){"use strict";n.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var a=n(57437),s=n(2265),r=n(20271),l=n(94508);let i=r.fC,o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...s})});o.displayName=r.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...s})});c.displayName=r.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...s})});d.displayName=r.VY.displayName},67132:function(e,t,n){"use strict";n.d(t,{AppContextProvider:function(){return g},b:function(){return p}});var a=n(57437),s=n(2265),r=n(25922),l=n(99376),i=n(6760),o=n(64131);let c=o.Z.get,d=o.Z.set;o.Z.remove;var u={get:c,set:d};function f(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var m=n(62265),x=n(19820);let h=(0,s.createContext)(null),p=()=>(0,s.useContext)(h);function g(e){let{children:t,...n}=e,o=function(e){(0,l.useRouter)();let{isAdmin:t,isSuperUser:n,sys:a}=e,{setTheme:i}=(0,r.F)();(0,s.useEffect)(()=>{"yes"===a.data.hide_theme_toggle&&i("light")},[a]);let o=(0,s.useCallback)(()=>(t||n?f():"view")||"view",[n,t]),[c,d]=(0,s.useState)(o()),x=!t&&!n||"view"===c,h=(0,s.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let a=function(e){return u.set("mode",e,{expires:31536e7}),f()}(...t);return m.Z.emit("mode_changed",o()),d(o()),a},[o]),p=(0,s.useCallback)(()=>{d(o())},[o]);return{...e,mode:c,viewOnly:x,onModeChange:p,getMode:f,setMode:h}}(n),[c,d]=(0,s.useState)(!1);return((0,i.Z)(()=>{d(!0)}),c)?(0,a.jsxs)(h.Provider,{value:o,children:[t,(0,a.jsx)(x.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:o.onModeChange}}]})]}):null}},98656:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var a=n(59625);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},r=(0,a.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},86180:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var a=n(59625);let s={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},r=(0,a.Ue)(e=>({isOpen:!1,...s,confirm:(t,n)=>e({isOpen:!0,...s,...n,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...s})}))},70465:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var a=n(59625),s=n(83464);let r=(0,a.Ue)((e,t)=>{let n=async n=>{try{let{reset:a,...r}={...n};a&&(r.page=1),e({loading:!0,unhandledErrors:[]});let{data:l,errors:i,totalPages:o,totalRows:c,page:d}=(await s.Z.get("/api/files?data=".concat(JSON.stringify({...r,limit:r.limit||t().limit,page:r.page||t().page})))).data;if(null==i?void 0:i.length)e({unhandledErrors:i});else{let n=a?l:[...t().files,...l];n=n.filter((e,t)=>t===n.map(e=>e.fileId).indexOf(e.fileId)),r.siteId&&r.siteId!==t().siteId&&(n=l),e({files:n,totalPages:o,totalRows:c,page:d,siteId:r.siteId||t().siteId,lastFilesQueryDate:l.length?new Date:null})}}catch(t){e({unhandledErrors:[t.message]})}finally{e({loading:!1})}};return{isModalOpen:!1,loading:!1,siteId:"",files:[],unhandledErrors:[],lastFilesQueryDate:null,page:1,limit:15,totalPages:1,totalRows:0,onSelectFiles:null,selectMultiple:!1,getFiles:n,openModal(a){e({onSelectFiles:(null==a?void 0:a.onSelectFiles)||null,isModalOpen:!0}),t().lastFilesQueryDate||n()},closeModal:()=>e({isModalOpen:!1})}})},85968:function(e,t,n){"use strict";function a(e,t){let{decimals:n=0,separator:a=" "}={...t};isNaN(e=Number("".concat(e).replace(/[^a-z0-9.]+/gi,"")))&&(e="0");let s=(e="".concat(Number(e).toFixed(n>=0?n:2))).toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,a),s.join(".")}n.d(t,{c:function(){return a}})},16107:function(e,t,n){"use strict";async function a(e){return new Promise((t,n)=>{let a=new Image;a.onload=function(){t({width:a.width,height:a.height})},a.onerror=function(e,t,a,s,r){n(r||Error("Failed to load image"))},a.src=e})}function s(e){let{imageWidth:t,imageHeight:n,containerWidth:a}=e;return t>a&&(n=a/t*n,t=a),{imageWidth:t,imageHeight:n}}n.d(t,{a:function(){return s},p:function(){return a}})},62265:function(e,t,n){"use strict";var a=n(68680),s=n(40257);let r=(0,a.io)(s.env.NEXT_PUBLIC_APP_URL);t.Z=r},94508:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var a=n(61994),s=n(53335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,a.W)(t))}},47960:function(){}},function(e){e.O(0,[3587,7784,9956,6137,2696,3186,9327,3464,3238,605,4438,762,1009,7478,2117,1744],function(){return e(e.s=94667)}),_N_E=e.O()}]);