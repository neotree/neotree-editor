(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{81905:function(e,t,n){Promise.resolve().then(n.bind(n,37712)),Promise.resolve().then(n.bind(n,25704))},37712:function(e,t,n){"use strict";n.d(t,{Form:function(){return v}});var r=n(57437),s=n(2265),a=n(39343),i=n(83102),u=n(50495),o=n(53699);function l(e){let{email:t,sendAuthCode:n,onAuthCode:l}=e,{alert:c}=(0,o.s)(),[d,f]=(0,s.useState)(!1),{register:h,handleSubmit:m}=(0,a.cI)({shouldUnregister:!1,defaultValues:{email:t||""}}),v=m(async e=>{let{email:t}=e;try{f(!0);let{tokenId:e}=await n({email:t});l({tokenId:e,email:t})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{f(!1)}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{className:" flex flex-col gap-y-4 ",onSubmit:e=>{e.preventDefault(),v()},children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.I,{type:"email",placeholder:"Email address",...h("email",{required:!0,disabled:d})})}),(0,r.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,r.jsx)(u.z,{type:"submit",disabled:d,className:"w-full",children:d?"Please wait...":"Send verification code"})})]})})}var c=n(30998),d=n(16463),f=n(32243),h=n(37440);function m(e){let{email:t,onSendCode:n}=e,{alert:l}=(0,o.s)(),m=(0,d.useRouter)(),[v,p]=(0,s.useState)(!1),[x,y]=(0,s.useState)(!0),[g,b]=(0,s.useState)(!1),{watch:S,setValue:j,register:w,handleSubmit:E}=(0,a.cI)({shouldUnregister:!1,defaultValues:{email:t,code:"",password:""}}),P=S("code"),C=E(async e=>{try{p(!0);let n=await (0,c.signIn)("credentials",{...e,email:t,redirect:!1});if(null==n?void 0:n.ok)m.replace("/");else throw Error((null==n?void 0:n.error)||"Failed to sign in")}catch(e){l({title:"Error",message:e.message,variant:"error"})}finally{p(!1)}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{className:" flex flex-col gap-y-4 ",onSubmit:e=>{e.preventDefault(),C()},children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.I,{type:"email",placeholder:"Email address",...w("email",{disabled:!0})})}),(0,r.jsx)("div",{className:(0,h.cn)("flex justify-center",x?"":"hidden"),children:(0,r.jsx)(f.Zn,{maxLength:6,value:P,required:x,onChange:e=>{j("code",e),6===e.length&&C()},children:(0,r.jsx)(f.hf,{children:(()=>{let e=[];for(let t=0;t<6;t++)e.push((0,r.jsx)(f.cY,{index:t,className:"w-14"},t));return e})()})})}),(0,r.jsx)("div",{className:(0,h.cn)(g?"":"hidden"),children:(0,r.jsx)(i.I,{type:"password",placeholder:"Password",...w("password",{required:g,disabled:v})})}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)(u.z,{type:"submit",disabled:v,className:"w-full",children:v?"Please wait...":"Sign in"}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-y-1",children:[(0,r.jsx)("a",{href:"#",className:(0,h.cn)("text text-sm transition-colors text-secondary/60 hover:text-secondary",v&&"opacity-20"),onClick:e=>{e.preventDefault(),v||(j("code",""),j("password",""),g?(b(!1),y(!0)):(b(!0),y(!1)))},children:g?"Sign in with code":"Sign in with password"}),x&&(0,r.jsx)("a",{href:"#",className:(0,h.cn)("text text-sm transition-colors text-secondary/60 hover:text-secondary",v&&"opacity-20"),onClick:e=>{e.preventDefault(),v||n()},children:"Resend code"})]})]})]})})}function v(e){let{sendAuthCode:t}=e,[n,a]=(0,s.useState)("sendCodeForm"),[i,u]=(0,s.useState)("");return(0,r.jsxs)(r.Fragment,{children:["sendCodeForm"===n&&(0,r.jsx)(l,{email:i,sendAuthCode:t,onAuthCode:e=>{let{email:t}=e;u(t),a("signInForm")}}),"signInForm"===n&&(0,r.jsx)(m,{email:i,onSendCode:()=>a("sendCodeForm")})]})}},53699:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var r=n(39099);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},a=(0,r.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},16463:function(e,t,n){"use strict";var r=n(71169);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},34492:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,u=r.useLayoutEffect,o=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),s=r[0].inst,c=r[1];return u(function(){s.value=n,s.getSnapshot=t,l(s)&&c({inst:s})},[e,n,t]),i(function(){return l(s)&&c({inst:s}),e(function(){l(s)&&c({inst:s})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},85107:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),s=n(10554),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useSyncExternalStore,u=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=u(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=i(e,(d=l(function(){function e(e){if(!o){if(o=!0,i=e,e=r(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return u=t}return u=e}if(t=u,a(i,e))return t;var n=r(e);return void 0!==s&&s(t,n)?t:(i=e,u=n)}var i,u,o=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,s]))[0],d[1]);return o(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},10554:function(e,t,n){"use strict";e.exports=n(34492)},35006:function(e,t,n){"use strict";e.exports=n(85107)},39099:function(e,t,n){"use strict";n.d(t,{Ue:function(){return f}});let r=e=>{let t;let n=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,s,a);return a},s=e=>e?r(e):r;var a=n(2265),i=n(35006);let{useDebugValue:u}=a,{useSyncExternalStoreWithSelector:o}=i,l=!1,c=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,n=(e,n)=>(function(e,t=c,n){n&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let r=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return u(r),r})(t,e,n);return Object.assign(n,t),n},f=e=>e?d(e):d}},function(e){e.O(0,[4868,9343,9370,3666,7478,7023,1744],function(){return e(e.s=81905)}),_N_E=e.O()}]);