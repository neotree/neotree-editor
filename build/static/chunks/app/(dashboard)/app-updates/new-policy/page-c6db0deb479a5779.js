(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8570],{6317:function(e,t,r){Promise.resolve().then(r.bind(r,40788)),Promise.resolve().then(r.bind(r,89884))},40788:function(e,t,r){"use strict";r.d(t,{AppUpdatePolicyForm:function(){return y}});var n=r(57437),a=r(2265),s=r(99376),i=r(62869),l=r(66070),o=r(95186),d=r(26815),c=r(24253),u=r(76818),f=r(53647),p=r(69711),m=r(98656),h=r(67132);let v=["on_restart","idle","immediate"],x=()=>({runtimeVersion:"",policyVersion:1,otaEnabled:!0,otaChannel:"production",apkAutoDownload:!0,apkForceInstall:!1,apkGracePeriodHours:null,apkForceAfter:null,apkInstallWindow:"on_restart",apkMessageTitle:"",apkMessageBody:"",currentApkReleaseId:null,rollbackApkReleaseId:null}),g=e=>{if(!e)return"";let t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,16)},b=e=>{if(""===e||null==e)return null;let t=Number(e);return Number.isFinite(t)?t:null};function y(e){var t,r,y,j,k;let{policy:w,policyDrafts:N,apkReleases:A,apkReleaseDrafts:_,saveAppUpdatePolicies:C}=e,R=(0,s.useRouter)(),{alert:T}=(0,m.s)(),{viewOnly:P,mode:I}=(0,h.b)(),[E,M]=(0,a.useState)(!1),D=(0,a.useMemo)(()=>N.length?[...N].sort((e,t)=>{let r=new Date(e.updatedAt||e.createdAt||0).getTime();return new Date(t.updatedAt||t.createdAt||0).getTime()-r})[0]:null,[N]),F=(0,a.useMemo)(()=>(null==D?void 0:D.data)?D.data:w||null,[D,w]),[V,S]=(0,a.useState)(()=>F?{...x(),...F,policyId:F.policyId||null,apkForceAfter:g(F.apkForceAfter)}:x());(0,a.useEffect)(()=>{F?S({...x(),...F,policyId:F.policyId||null,apkForceAfter:g(F.apkForceAfter)}):S(x())},[F]);let Z=(0,a.useMemo)(()=>{let e=new Map;for(let t of _){let r=t.data||{},n=r.apkReleaseId||t.apkReleaseDraftId;n&&e.set(n,{...r,apkReleaseId:n,__draft:!0,__draftId:t.apkReleaseDraftId,__updatedAt:t.updatedAt||t.createdAt})}for(let t of A){let r=t.apkReleaseId;r&&(e.has(r)||e.set(r,{...t,__draft:!1}))}return Array.from(e.values()).sort((e,t)=>{let r=new Date(e.__updatedAt||e.updatedAt||e.createdAt||0).getTime();return new Date(t.__updatedAt||t.updatedAt||t.createdAt||0).getTime()-r})},[_,A]),L=(0,a.useMemo)(()=>Z.map(e=>({value:e.apkReleaseId,label:"".concat(e.versionName||""," (").concat(e.versionCode||"",")").concat(e.__draft?" - draft":"")})),[Z]),B=(0,a.useMemo)(()=>Z[0]||null,[Z]);(0,a.useEffect)(()=>{B&&(F||S(e=>{let t={...e};return t.runtimeVersion||(t.runtimeVersion=B.runtimeVersion||""),t.currentApkReleaseId||(t.currentApkReleaseId=B.apkReleaseId||null),t}))},[F,B]);let O=(0,a.useCallback)(async()=>{try{var e,t;if(P)return;M(!0);let r={...V,apkGracePeriodHours:null!==(t=V.apkGracePeriodHours)&&void 0!==t?t:null,apkForceAfter:V.apkForceAfter?new Date(V.apkForceAfter):null,policyVersion:Number(V.policyVersion||1)},n=await C({data:[r]});if(null===(e=n.errors)||void 0===e?void 0:e.length)throw Error(n.errors.join(", "));R.refresh(),T({title:"Success",message:"App update policy saved to drafts.",variant:"success"})}catch(e){T({title:"Error",message:"Failed to save policy: ".concat(e.message),variant:"error"})}finally{M(!1)}},[T,P,V,R,C]);return(0,n.jsxs)(n.Fragment,{children:[E&&(0,n.jsx)(p.a,{overlay:!0}),(0,n.jsx)(l.Zb,{children:(0,n.jsxs)(l.aY,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Policy draft"}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:D?"Draft updated ".concat((null===(r=D.updatedAt)||void 0===r?void 0:null===(t=r.toString)||void 0===t?void 0:t.call(r))||""):w?"Published policy is live":"No policy yet"}),B?(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Latest APK: ",B.versionName," (",B.versionCode,")"]}):null,(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:P?"View mode: edits disabled":"development"===I?"Development mode: drafts enabled":"Mode: ".concat(I)})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>R.push("/app-updates"),children:"Cancel"}),(0,n.jsx)(i.z,{onClick:O,disabled:E||P,children:"Save Draft"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 mt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Runtime Version"}),(0,n.jsx)(o.I,{value:V.runtimeVersion,onChange:e=>S(t=>({...t,runtimeVersion:e.target.value})),disabled:P})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Policy Version"}),(0,n.jsx)(o.I,{type:"number",value:null!==(y=V.policyVersion)&&void 0!==y?y:1,onChange:e=>S(t=>({...t,policyVersion:Number(e.target.value||1)})),disabled:P})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"OTA Channel"}),(0,n.jsx)(o.I,{value:V.otaChannel,onChange:e=>S(t=>({...t,otaChannel:e.target.value})),disabled:P})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(c.r,{checked:V.otaEnabled,onCheckedChange:e=>S(t=>({...t,otaEnabled:e})),disabled:P}),(0,n.jsx)(d._,{children:"OTA Enabled"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(c.r,{checked:V.apkAutoDownload,onCheckedChange:e=>S(t=>({...t,apkAutoDownload:e})),disabled:P}),(0,n.jsx)(d._,{children:"Auto-download APK"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(c.r,{checked:V.apkForceInstall,onCheckedChange:e=>S(t=>({...t,apkForceInstall:e})),disabled:P}),(0,n.jsx)(d._,{children:"Force install APK"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"APK Grace Period (hours)"}),(0,n.jsx)(o.I,{type:"number",value:null!==(j=V.apkGracePeriodHours)&&void 0!==j?j:"",onChange:e=>S(t=>({...t,apkGracePeriodHours:b(e.target.value)})),disabled:P})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"APK Force After"}),(0,n.jsx)(o.I,{type:"datetime-local",value:null!==(k=V.apkForceAfter)&&void 0!==k?k:"",onChange:e=>S(t=>({...t,apkForceAfter:e.target.value||null})),disabled:P})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"APK Install Window"}),(0,n.jsxs)(f.Ph,{value:V.apkInstallWindow,onValueChange:e=>S(t=>({...t,apkInstallWindow:e})),disabled:P,children:[(0,n.jsx)(f.i4,{children:(0,n.jsx)(f.ki,{placeholder:"Select install window"})}),(0,n.jsx)(f.Bw,{children:v.map(e=>(0,n.jsx)(f.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Current APK Release"}),(0,n.jsxs)(f.Ph,{value:V.currentApkReleaseId||"",onValueChange:e=>S(t=>({...t,currentApkReleaseId:e||null})),disabled:P,children:[(0,n.jsx)(f.i4,{children:(0,n.jsx)(f.ki,{placeholder:"Select current APK"})}),(0,n.jsx)(f.Bw,{children:L.map(e=>(0,n.jsx)(f.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Rollback APK Release"}),(0,n.jsxs)(f.Ph,{value:V.rollbackApkReleaseId||"",onValueChange:e=>S(t=>({...t,rollbackApkReleaseId:e||null})),disabled:P,children:[(0,n.jsx)(f.i4,{children:(0,n.jsx)(f.ki,{placeholder:"Select rollback APK"})}),(0,n.jsx)(f.Bw,{children:L.map(e=>(0,n.jsx)(f.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"APK Message Title"}),(0,n.jsx)(o.I,{value:V.apkMessageTitle||"",onChange:e=>S(t=>({...t,apkMessageTitle:e.target.value})),disabled:P})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"APK Message Body"}),(0,n.jsx)(u.g,{value:V.apkMessageBody||"",onChange:e=>S(t=>({...t,apkMessageBody:e.target.value})),disabled:P})]})]})]})})]})}},69711:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var n=r(57437),a=r(15001);function s(e){let{overlay:t,transparent:r,padding:s="50px 0"}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:r?"transparent":"rgba(255,255,255,.6)"}:{padding:s}},children:(0,n.jsx)(a.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},19820:function(e,t,r){"use strict";r.d(t,{SocketEventsListener:function(){return i}});var n=r(2265),a=r(99376),s=r(62265);function i(e){let{events:t}=e,r=(0,n.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,n.useRef)(new Date().getTime());let i=(0,a.useRouter)();return(0,n.useEffect)(()=>{t.forEach(e=>{let{name:t,action:n,delay:a=100,onEvent:l}=e;s.Z.on(t,function(){for(var e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];let d=()=>{var e,r;(!n||s[0]===n)&&(null===(e=l.callback)||void 0===e||e.call(l,...s),(null==l?void 0:l.refreshRouter)&&(console.log(t,"refreshing..."),i.refresh()),(null===(r=l.redirect)||void 0===r?void 0:r.to)&&(l.redirect.replace?i.replace(l.redirect.to):i.push(l.redirect.to)))},c=new Date().getTime();a?(clearTimeout(r.current.eventsTimeouts[t]),r.current.eventsTimeouts[t]=setTimeout(()=>{r.current.eventsTimestamps[t]=c,d()},a)):(r.current.eventsTimestamps[t]=new Date().getTime(),d())})})},[t,i]),null}},89884:function(e,t,r){"use strict";r.d(t,{Title:function(){return s}});var n=r(2265),a=r(40257);function s(e){let{children:t}=e;return(0,n.useEffect)(()=>{document.title=[a.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,n.useEffect)(()=>()=>{document.title="".concat(a.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var n=r(57437),a=r(2265),s=r(37053),i=r(90535),l=r(94508);let o=(0,i.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,type:a,noRing:i,error:l,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",l&&"border-danger",l&&!i&&"focus-visible:ring-danger",r),ref:t,...o})});i.displayName="Input"},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(57437),a=r(2265),s=r(370),i=r(90535),l=r(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,secondary:a,error:i,...d}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),a&&"text-xs",i?"text-danger":"",r),...d})});d.displayName=s.f.displayName},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return v},DI:function(){return u},Ph:function(){return c},Ql:function(){return g},U$:function(){return b},i4:function(){return p},ki:function(){return f},n5:function(){return x}});var n=r(57437),a=r(2265),s=r(74797),i=r(40875),l=r(22135),o=r(30401),d=r(94508);let c=s.fC,u=s.ZA,f=s.B4,p=a.forwardRef((e,t)=>{let{className:r,children:a,error:l,...o}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l&&"border-danger",r),...o,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=s.xz.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let v=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...l}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,n.jsx)(m,{}),(0,n.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(h,{})]})})});v.displayName=s.VY.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})});x.displayName=s.__.displayName;let g=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});g.displayName=s.ck.displayName;let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})});b.displayName=s.Z0.displayName},24253:function(e,t,r){"use strict";r.d(t,{r:function(){return w}});var n=r(57437),a=r(2265),s=r(6741),i=r(98575),l=r(73966),o=r(80886),d=r(6718),c=r(90420),u=r(82912),f="Switch",[p,m]=(0,l.b)(f),[h,v]=p(f),x=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:l,checked:d,defaultChecked:c,required:p,disabled:m,value:v="on",onCheckedChange:x,form:g,...b}=e,[k,w]=a.useState(null),N=(0,i.e)(t,e=>w(e)),A=a.useRef(!1),_=!k||g||!!k.closest("form"),[C,R]=(0,o.T)({prop:d,defaultProp:null!=c&&c,onChange:x,caller:f});return(0,n.jsxs)(h,{scope:r,checked:C,disabled:m,children:[(0,n.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":C,"aria-required":p,"data-state":j(C),"data-disabled":m?"":void 0,disabled:m,value:v,...b,ref:N,onClick:(0,s.Mj)(e.onClick,e=>{R(e=>!e),_&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),_&&(0,n.jsx)(y,{control:k,bubbles:!A.current,name:l,value:v,checked:C,required:p,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});x.displayName=f;var g="SwitchThumb",b=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,s=v(g,r);return(0,n.jsx)(u.WV.span,{"data-state":j(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})});b.displayName=g;var y=a.forwardRef((e,t)=>{let{__scopeSwitch:r,control:s,checked:l,bubbles:o=!0,...u}=e,f=a.useRef(null),p=(0,i.e)(f,t),m=(0,d.D)(l),h=(0,c.t)(s);return a.useEffect(()=>{let e=f.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==l&&t){let r=new Event("click",{bubbles:o});t.call(e,l),e.dispatchEvent(r)}},[m,l,o]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...u,tabIndex:-1,ref:p,style:{...u.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var k=r(94508);let w=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(x,{className:(0,k.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,n.jsx)(b,{className:(0,k.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});w.displayName=x.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,noRing:a,...i}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",r),ref:t,...i})});i.displayName="Textarea"},67132:function(e,t,r){"use strict";r.d(t,{AppContextProvider:function(){return x},b:function(){return v}});var n=r(57437),a=r(2265),s=r(25922),i=r(99376),l=r(6760),o=r(64131);let d=o.Z.get,c=o.Z.set;o.Z.remove;var u={get:d,set:c};function f(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var p=r(62265),m=r(19820);let h=(0,a.createContext)(null),v=()=>(0,a.useContext)(h);function x(e){let{children:t,...r}=e,o=function(e){(0,i.useRouter)();let{isAdmin:t,isSuperUser:r,sys:n}=e,{setTheme:l}=(0,s.F)();(0,a.useEffect)(()=>{"yes"===n.data.hide_theme_toggle&&l("light")},[n]);let o=(0,a.useCallback)(()=>(t||r?f():"view")||"view",[r,t]),[d,c]=(0,a.useState)(o()),m=!t&&!r||"view"===d,h=(0,a.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=function(e){return u.set("mode",e,{expires:31536e7}),f()}(...t);return p.Z.emit("mode_changed",o()),c(o()),n},[o]),v=(0,a.useCallback)(()=>{c(o())},[o]);return{...e,mode:d,viewOnly:m,onModeChange:v,getMode:f,setMode:h}}(r),[d,c]=(0,a.useState)(!1);return((0,l.Z)(()=>{c(!0)}),d)?(0,n.jsxs)(h.Provider,{value:o,children:[t,(0,n.jsx)(m.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:o.onModeChange}}]})]}):null}},98656:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var n=r(59625);let a={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},s=(0,n.Ue)(e=>({isOpen:!1,...a,alert:t=>e({isOpen:!0,...a,...t}),close:()=>e({isOpen:!1,onClose:void 0,...a})}))},62265:function(e,t,r){"use strict";var n=r(68680),a=r(40257);let s=(0,n.io)(a.env.NEXT_PUBLIC_APP_URL);t.Z=s},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},15001:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},40257:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(44227)},44227:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var o=[],d=!1,c=-1;function u(){d&&n&&(d=!1,n.length?o=n.concat(o):c=-1,o.length&&f())}function f(){if(!d){var e=l(u);d=!0;for(var t=o.length;t;){for(n=o,o=[];++c<t;)n&&n[c].run();c=-1,t=o.length}n=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new p(e,t)),1!==o.length||d||l(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(229);e.exports=a}()},370:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(2265);r(54887);var a=r(37053),s=r(57437),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.Z8)(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:a,...i}=e,l=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(l,{...i,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),l=n.forwardRef((e,t)=>(0,s.jsx)(i.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var o=l},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var n=r(2265);function a(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[6137,2696,3186,9327,5972,3238,604,7478,2117,1744],function(){return e(e.s=6317)}),_N_E=e.O()}]);