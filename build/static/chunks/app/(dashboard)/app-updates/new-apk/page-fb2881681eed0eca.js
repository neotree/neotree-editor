(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3001],{26539:function(e,t,r){Promise.resolve().then(r.bind(r,69306)),Promise.resolve().then(r.bind(r,89884))},69306:function(e,t,r){"use strict";r.d(t,{ApkReleaseForm:function(){return I}});var n=r(57437),a=r(2265),s=r(99376),l=r(83464),i=r(62869),d=r(66070),o=r(95186),c=r(26815),u=r(24253),f=r(76818),m=r(53647),p=r(49360),h=r(17689),v=r(69658),x=r(55122),g=r(9699),b=r(94508),j=r(69711),y=r(98656),N=r(16107),w=r(42004);function k(e){let{type:t,children:r,inputProps:s,fileDetails:l,onUpload:d,...o}=e,[c,{width:u}]=(0,x.Z)(),[f,m]=(0,a.useState)(!1),[k,C]=(0,a.useState)([]),[A,R]=(0,a.useState)(!1),{alert:_}=(0,y.s)(),S=(0,a.useCallback)(async()=>{let e=(null==s?void 0:s.multiple)?k:[k[0]];try{for(let{file:t,metadata:r,fileId:n}of(R(!0),e)){let e=new FormData;e.append("file",t),e.append("fileId",n||(0,p.Z)()),e.append("filename",t.name),e.append("contentType",t.type),e.append("size","".concat(t.size)),e.append("metadata",JSON.stringify({...r})),l&&Object.keys(l).forEach(t=>{let r=l[t];e.append(t,JSON.stringify(r))}),await d(e)}m(!1),C([]),_({title:"Success",message:"File".concat(e.length>1?"s":""," uploaded successfully!"),variant:"success"})}catch(t){_({title:"Error",message:"Failed to upload file".concat(e.length>1?"s":"",": ").concat(t.message),variant:"error"})}finally{R(!1)}},[d,_,k,null==s?void 0:s.multiple,l]),I=(0,a.useCallback)(async e=>{try{var t;let r=[];if(null===(t=e.target.files)||void 0===t?void 0:t.length)for(let t=0;t<e.target.files.length;t++)r.push(e.target.files[t]);let n=[];for(let e of r){let t,r;let a=URL.createObjectURL(e),s={};if("".concat(e.type).includes("image"))try{let e=await (0,N.p)(a);s={...s,...e},t=a}catch(e){}n.push({fileId:(0,p.Z)(),file:e,url:a,imageURL:t,videoURL:r,metadata:s})}C(n)}catch(e){_({title:"Error",message:e.message})}},[_]);return(0,n.jsxs)(n.Fragment,{children:[A&&(0,n.jsx)(j.a,{overlay:!0}),(0,n.jsx)(g.u,{open:f,onOpenChange:e=>{m(e),C([])},title:"Upload file",trigger:r,...o,actions:(0,n.jsxs)(n.Fragment,{children:[!k.length&&(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),!!k.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(i.z,{variant:"destructive",onClick:()=>C([]),children:"Clear"}),(0,n.jsxs)(i.z,{disabled:!k.length,onClick:()=>S(),className:(0,b.cn)(!k.length&&"hidden"),children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),(0,n.jsx)("span",{children:"Upload"})]})]})]}),children:(0,n.jsxs)("div",{ref:c,children:[1===k.length&&k.map(e=>{let t=(0,n.jsx)(v.Z,{className:"w-20 h-20 text-muted-foreground"});return e.imageURL&&(t=(0,n.jsx)(w.E,{alt:"",width:e.metadata.width||0,height:e.metadata.height||0,containerWidth:u,src:e.imageURL||"/images/placeholder.png"})),(0,n.jsxs)("div",{className:(0,b.cn)("\n                                        flex\n                                        flex-col\n                                        gap-y-2\n                                        w-full\n                                        items-center\n                                        justify-center\n                                        text-xs\n                                    ",!(e.imageURL||e.videoURL)&&""),children:[t,(0,n.jsx)("span",{children:e.file.name})]},e.fileId)}),!k.length&&(0,n.jsxs)("div",{className:(0,b.cn)("\n                                    relative\n                                    w-full\n                                    h-36\n                                    bg-primary/20\n                                    flex\n                                    flex-col\n                                    items-center\n                                    justify-center\n                                    text-primary\n                                    uppercase\n                                    font-bold\n                                    rounded-md\n                                    transition-colors\n                                    hover:bg-primary/30\n                                ",!!k.length&&"hidden"),children:[(0,n.jsx)("div",{children:(null==s?void 0:s.placeholder)||"Choose file"}),(0,n.jsx)("input",{...s,type:"file",accept:t,value:"",className:(0,b.cn)("\n                                        absolute\n                                        left-0\n                                        top-0\n                                        w-full\n                                        h-full\n                                        opacity-0\n                                    "),onChange:I})]})]})})]})}var C=r(67132);let A=["uploaded","validated","approved","available","deprecated","revoked","rolled_back"],R=()=>({runtimeVersion:"",versionName:"",versionCode:null,status:"uploaded",isAvailable:!1,fileId:null,fileSize:null,checksumSha256:null,signatureSha256:null,validatedAt:null,approvedAt:null,releasedAt:null,releaseNotes:""}),_=e=>{if(!e)return"";let t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,16)},S=e=>{if(""===e||null==e)return null;let t=Number(e);return Number.isFinite(t)?t:null};function I(e){var t;let{apkReleases:r,apkReleaseDrafts:p,apkReleaseId:h,saveApkReleases:v}=e,x=(0,s.useRouter)(),{alert:g}=(0,y.s)(),{viewOnly:N,mode:w}=(0,C.b)(),[I,E]=(0,a.useState)(!1),P=(0,a.useMemo)(()=>{let e=new Map;for(let t of p){let r=t.data||{},n=r.apkReleaseId||t.apkReleaseDraftId;n&&e.set(n,{...r,apkReleaseId:n,__draft:!0,__draftId:t.apkReleaseDraftId,__updatedAt:t.updatedAt||t.createdAt})}for(let t of r){let r=t.apkReleaseId;r&&(e.has(r)||e.set(r,{...t,__draft:!1}))}return Array.from(e.values()).sort((e,t)=>{let r=new Date(e.__updatedAt||e.updatedAt||e.createdAt||0).getTime();return new Date(t.__updatedAt||t.updatedAt||t.createdAt||0).getTime()-r})},[p,r]),z=(0,a.useMemo)(()=>P[0]||null,[P]),Z=(0,a.useMemo)(()=>h&&P.find(e=>e.apkReleaseId===h)||null,[h,P]),[D,V]=(0,a.useState)(()=>R());(0,a.useEffect)(()=>{if(Z){var e;V({...R(),...Z,apkReleaseId:Z.apkReleaseId,versionCode:null!==(e=Z.versionCode)&&void 0!==e?e:null,validatedAt:_(Z.validatedAt),approvedAt:_(Z.approvedAt),releasedAt:_(Z.releasedAt)});return}V(R())},[Z]),(0,a.useEffect)(()=>{!Z&&z&&V(e=>e.runtimeVersion||e.versionName||e.versionCode?e:{...e,runtimeVersion:z.runtimeVersion||"",versionName:z.versionName||"",versionCode:"number"==typeof z.versionCode?z.versionCode+1:null})},[Z,z]);let T=(0,a.useCallback)(async()=>{try{var e;if(N)return;if(E(!0),!D.runtimeVersion)throw Error("Runtime version is required");if(!D.versionName)throw Error("Version name is required");if(!D.versionCode)throw Error("Version code is required");let t={...D,versionCode:Number(D.versionCode||0),validatedAt:D.validatedAt?new Date(D.validatedAt):null,approvedAt:D.approvedAt?new Date(D.approvedAt):null,releasedAt:D.releasedAt?new Date(D.releasedAt):null},r=await v({data:[t]});if(null===(e=r.errors)||void 0===e?void 0:e.length)throw Error(r.errors.join(", "));x.refresh(),g({title:"Success",message:"APK release saved to drafts.",variant:"success"})}catch(e){g({title:"Error",message:"Failed to save APK release: ".concat(e.message),variant:"error"})}finally{E(!1)}},[g,D,N,x,v]),O=(0,a.useCallback)(async e=>{var t;if(N)return;let r=(await l.Z.post("/api/files/upload",e)).data;if(null===(t=r.errors)||void 0===t?void 0:t.length)throw Error(r.errors.join(", "));let n=r.data;if(!(null==n?void 0:n.fileId))throw Error("File upload failed");V(e=>{var t,r;return{...e,fileId:n.fileId,fileSize:n.size||e.fileSize||null,checksumSha256:(null===(t=n.metadata)||void 0===t?void 0:t.apkChecksumSha256)||e.checksumSha256||null,signatureSha256:(null===(r=n.metadata)||void 0===r?void 0:r.apkSignatureSha256)||e.signatureSha256||null}})},[N]),F=(0,a.useCallback)(()=>{V(R())},[]);return(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsx)(j.a,{overlay:!0}),(0,n.jsx)(d.Zb,{children:(0,n.jsxs)(d.aY,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"APK release draft"}),z?(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Latest APK: ",z.versionName," (",z.versionCode,")"]}):null,(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:N?"View mode: edits disabled":"development"===w?"Development mode: drafts enabled":"Mode: ".concat(w)})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>x.push("/app-updates"),children:"Cancel"}),(0,n.jsx)(i.z,{variant:"primary-outline",onClick:F,disabled:N,children:"Reset"}),(0,n.jsx)(i.z,{onClick:T,disabled:I||N,children:"Save Draft"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 mt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Runtime Version"}),(0,n.jsx)(o.I,{value:D.runtimeVersion,onChange:e=>V(t=>({...t,runtimeVersion:e.target.value})),disabled:N})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Version Name"}),(0,n.jsx)(o.I,{value:D.versionName,onChange:e=>V(t=>({...t,versionName:e.target.value})),disabled:N})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Version Code"}),(0,n.jsx)(o.I,{type:"number",value:null!==(t=D.versionCode)&&void 0!==t?t:"",onChange:e=>V(t=>({...t,versionCode:S(e.target.value)})),disabled:N})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Status"}),(0,n.jsxs)(m.Ph,{value:D.status,onValueChange:e=>V(t=>({...t,status:e})),disabled:N,children:[(0,n.jsx)(m.i4,{children:(0,n.jsx)(m.ki,{placeholder:"Select status"})}),(0,n.jsx)(m.Bw,{children:A.map(e=>(0,n.jsx)(m.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(u.r,{checked:D.isAvailable,onCheckedChange:e=>V(t=>({...t,isAvailable:e})),disabled:N}),(0,n.jsx)(c._,{children:"Available to devices"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(k,{type:".apk,application/vnd.android.package-archive",inputProps:{multiple:!1,placeholder:"Choose APK"},onUpload:O,children:(0,n.jsx)(i.z,{variant:"primary-outline",disabled:N,children:"Upload APK"})}),(0,n.jsx)("span",{className:(0,b.cn)("text-xs",!D.fileId&&"text-muted-foreground"),children:D.fileId?"File: ".concat(D.fileId):"No file uploaded"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Checksum (SHA-256)"}),(0,n.jsx)(o.I,{value:D.checksumSha256||"",disabled:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Signature (SHA-256)"}),(0,n.jsx)(o.I,{value:D.signatureSha256||"",disabled:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Validated At"}),(0,n.jsx)(o.I,{type:"datetime-local",value:D.validatedAt||"",onChange:e=>V(t=>({...t,validatedAt:e.target.value||null})),disabled:N})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Approved At"}),(0,n.jsx)(o.I,{type:"datetime-local",value:D.approvedAt||"",onChange:e=>V(t=>({...t,approvedAt:e.target.value||null})),disabled:N})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{children:"Released At"}),(0,n.jsx)(o.I,{type:"datetime-local",value:D.releasedAt||"",onChange:e=>V(t=>({...t,releasedAt:e.target.value||null})),disabled:N})]})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(c._,{children:"Release Notes"}),(0,n.jsx)(f.g,{value:D.releaseNotes||"",onChange:e=>V(t=>({...t,releaseNotes:e.target.value})),disabled:N})]})]})})]})}},42004:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(57437),a=r(16107);function s(e){let{width:t=0,height:r=0,containerWidth:s,...l}=e;l.sizes;let i={width:"100%",height:"auto"};if(r&&t&&s){let e=(0,a.a)({imageWidth:t,imageHeight:r,containerWidth:s});i.width=e.imageWidth,i.height=e.imageHeight}return(0,n.jsx)("img",{...l,src:l.src,style:{...i,...l.style}})}},69711:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var n=r(57437),a=r(15001);function s(e){let{overlay:t,transparent:r,padding:s="50px 0"}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:r?"transparent":"rgba(255,255,255,.6)"}:{padding:s}},children:(0,n.jsx)(a.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},9699:function(e,t,r){"use strict";r.d(t,{u:function(){return d}});var n=r(57437),a=r(2265),s=r(26110),l=r(94508);let i=(0,r(59625).Ue)((e,t)=>({modals:{},open(t){e(e=>({modals:{...e.modals,[t]:!0}}))},toggle(r){let n=t().modals;e(e=>({modals:{...e.modals,[r]:!n[r]}}))},close(t){e(e=>({modals:{...e.modals,[t]:!1}}))},isOpen:e=>!!t().modals[e],set(t){e(e=>({modals:{...e.modals,...t}}))}}));function d(e){let{id:t,children:r,title:d,description:o,actions:c,trigger:u,contentProps:f,footerProps:m,...p}=e,{close:h,isOpen:v,set:x}=i();return(0,a.useEffect)(()=>{t&&x({[t]:!1})},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.Vq,{...p,open:(t?v(t):void 0)||p.open,onOpenChange:e=>{var r;t&&x({[t]:e}),null==p||null===(r=p.onOpenChange)||void 0===r||r.call(p,e)},children:[u,(0,n.jsxs)(s.cZ,{hideCloseButton:!0,className:(0,l.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",null==f?void 0:f.className),...f,children:[(0,n.jsxs)(s.fK,{className:(0,l.cn)(d||o?"":"hidden","border-b border-b-border px-4 py-4"),children:[(0,n.jsx)(s.$N,{className:(0,l.cn)(d?"":"hidden"),children:d}),(0,n.jsx)(s.Be,{className:(0,l.cn)(o?"":"hidden"),children:o})]}),(0,n.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:r}),(0,n.jsx)(s.cN,{className:(0,l.cn)("border-t border-t-border px-4 py-2 items-center w-full",c?"":"hidden",null==m?void 0:m.className),...m,children:c})]})]})})}},19820:function(e,t,r){"use strict";r.d(t,{SocketEventsListener:function(){return l}});var n=r(2265),a=r(99376),s=r(62265);function l(e){let{events:t}=e,r=(0,n.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,n.useRef)(new Date().getTime());let l=(0,a.useRouter)();return(0,n.useEffect)(()=>{t.forEach(e=>{let{name:t,action:n,delay:a=100,onEvent:i}=e;s.Z.on(t,function(){for(var e=arguments.length,s=Array(e),d=0;d<e;d++)s[d]=arguments[d];let o=()=>{var e,r;(!n||s[0]===n)&&(null===(e=i.callback)||void 0===e||e.call(i,...s),(null==i?void 0:i.refreshRouter)&&(console.log(t,"refreshing..."),l.refresh()),(null===(r=i.redirect)||void 0===r?void 0:r.to)&&(i.redirect.replace?l.replace(i.redirect.to):l.push(i.redirect.to)))},c=new Date().getTime();a?(clearTimeout(r.current.eventsTimeouts[t]),r.current.eventsTimeouts[t]=setTimeout(()=>{r.current.eventsTimestamps[t]=c,o()},a)):(r.current.eventsTimestamps[t]=new Date().getTime(),o())})})},[t,l]),null}},89884:function(e,t,r){"use strict";r.d(t,{Title:function(){return s}});var n=r(2265),a=r(40257);function s(e){let{children:t}=e;return(0,n.useEffect)(()=>{document.title=[a.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,n.useEffect)(()=>()=>{document.title="".concat(a.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return d},z:function(){return o}});var n=r(57437),a=r(2265),s=r(37053),l=r(90535),i=r(94508);let d=(0,l.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:o=!1,...c}=e,u=o?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(d({variant:a,size:l,className:r})),ref:t,...c})});o.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var n=r(57437),a=r(2265),s=r(94508);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},26110:function(e,t,r){"use strict";r.d(t,{$N:function(){return v},Be:function(){return x},GG:function(){return u},Vq:function(){return d},cN:function(){return h},cZ:function(){return m},fK:function(){return p},hg:function(){return o}});var n=r(57437),a=r(2265),s=r(70001),l=r(32489),i=r(94508);let d=s.fC,o=s.xz,c=s.h_,u=s.x8,f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});f.displayName=s.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:r,children:a,hideCloseButton:d,...o}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(f,{}),(0,n.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[a,!0!==d&&(0,n.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};p.displayName="DialogHeader";let h=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};h.displayName="DialogFooter";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});v.displayName=s.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});x.displayName=s.dk.displayName},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(57437),a=r(2265),s=r(94508);let l=a.forwardRef((e,t)=>{let{className:r,type:a,noRing:l,error:i,...d}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",i&&"border-danger",i&&!l&&"focus-visible:ring-danger",r),ref:t,...d})});l.displayName="Input"},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var n=r(57437),a=r(2265),s=r(370),l=r(90535),i=r(94508);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,secondary:a,error:l,...o}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,i.cn)(d(),a&&"text-xs",l?"text-danger":"",r),...o})});o.displayName=s.f.displayName},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return v},DI:function(){return u},Ph:function(){return c},Ql:function(){return g},U$:function(){return b},i4:function(){return m},ki:function(){return f},n5:function(){return x}});var n=r(57437),a=r(2265),s=r(74797),l=r(40875),i=r(22135),d=r(30401),o=r(94508);let c=s.fC,u=s.ZA,f=s.B4,m=a.forwardRef((e,t)=>{let{className:r,children:a,error:i,...d}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i&&"border-danger",r),...d,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=s.xz.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=s.u_.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let v=a.forwardRef((e,t)=>{let{className:r,children:a,position:l="popper",...i}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,n.jsx)(p,{}),(0,n.jsx)(s.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(h,{})]})})});v.displayName=s.VY.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})});x.displayName=s.__.displayName;let g=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});g.displayName=s.ck.displayName;let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...a})});b.displayName=s.Z0.displayName},24253:function(e,t,r){"use strict";r.d(t,{r:function(){return w}});var n=r(57437),a=r(2265),s=r(6741),l=r(98575),i=r(73966),d=r(80886),o=r(6718),c=r(90420),u=r(82912),f="Switch",[m,p]=(0,i.b)(f),[h,v]=m(f),x=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:i,checked:o,defaultChecked:c,required:m,disabled:p,value:v="on",onCheckedChange:x,form:g,...b}=e,[N,w]=a.useState(null),k=(0,l.e)(t,e=>w(e)),C=a.useRef(!1),A=!N||g||!!N.closest("form"),[R,_]=(0,d.T)({prop:o,defaultProp:null!=c&&c,onChange:x,caller:f});return(0,n.jsxs)(h,{scope:r,checked:R,disabled:p,children:[(0,n.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":R,"aria-required":m,"data-state":y(R),"data-disabled":p?"":void 0,disabled:p,value:v,...b,ref:k,onClick:(0,s.Mj)(e.onClick,e=>{_(e=>!e),A&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),A&&(0,n.jsx)(j,{control:N,bubbles:!C.current,name:i,value:v,checked:R,required:m,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});x.displayName=f;var g="SwitchThumb",b=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,s=v(g,r);return(0,n.jsx)(u.WV.span,{"data-state":y(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})});b.displayName=g;var j=a.forwardRef((e,t)=>{let{__scopeSwitch:r,control:s,checked:i,bubbles:d=!0,...u}=e,f=a.useRef(null),m=(0,l.e)(f,t),p=(0,o.D)(i),h=(0,c.t)(s);return a.useEffect(()=>{let e=f.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==i&&t){let r=new Event("click",{bubbles:d});t.call(e,i),e.dispatchEvent(r)}},[p,i,d]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...u,tabIndex:-1,ref:m,style:{...u.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(e){return e?"checked":"unchecked"}j.displayName="SwitchBubbleInput";var N=r(94508);let w=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(x,{className:(0,N.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,n.jsx)(b,{className:(0,N.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});w.displayName=x.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return l}});var n=r(57437),a=r(2265),s=r(94508);let l=a.forwardRef((e,t)=>{let{className:r,noRing:a,...l}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",r),ref:t,...l})});l.displayName="Textarea"},67132:function(e,t,r){"use strict";r.d(t,{AppContextProvider:function(){return x},b:function(){return v}});var n=r(57437),a=r(2265),s=r(25922),l=r(99376),i=r(6760),d=r(64131);let o=d.Z.get,c=d.Z.set;d.Z.remove;var u={get:o,set:c};function f(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var m=r(62265),p=r(19820);let h=(0,a.createContext)(null),v=()=>(0,a.useContext)(h);function x(e){let{children:t,...r}=e,d=function(e){(0,l.useRouter)();let{isAdmin:t,isSuperUser:r,sys:n}=e,{setTheme:i}=(0,s.F)();(0,a.useEffect)(()=>{"yes"===n.data.hide_theme_toggle&&i("light")},[n]);let d=(0,a.useCallback)(()=>(t||r?f():"view")||"view",[r,t]),[o,c]=(0,a.useState)(d()),p=!t&&!r||"view"===o,h=(0,a.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=function(e){return u.set("mode",e,{expires:31536e7}),f()}(...t);return m.Z.emit("mode_changed",d()),c(d()),n},[d]),v=(0,a.useCallback)(()=>{c(d())},[d]);return{...e,mode:o,viewOnly:p,onModeChange:v,getMode:f,setMode:h}}(r),[o,c]=(0,a.useState)(!1);return((0,i.Z)(()=>{c(!0)}),o)?(0,n.jsxs)(h.Provider,{value:d,children:[t,(0,n.jsx)(p.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:d.onModeChange}}]})]}):null}},98656:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var n=r(59625);let a={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},s=(0,n.Ue)(e=>({isOpen:!1,...a,alert:t=>e({isOpen:!0,...a,...t}),close:()=>e({isOpen:!1,onClose:void 0,...a})}))},16107:function(e,t,r){"use strict";async function n(e){return new Promise((t,r)=>{let n=new Image;n.onload=function(){t({width:n.width,height:n.height})},n.onerror=function(e,t,n,a,s){r(s||Error("Failed to load image"))},n.src=e})}function a(e){let{imageWidth:t,imageHeight:r,containerWidth:n}=e;return t>n&&(r=n/t*r,t=n),{imageWidth:t,imageHeight:r}}r.d(t,{a:function(){return a},p:function(){return n}})},62265:function(e,t,r){"use strict";var n=r(68680),a=r(40257);let s=(0,n.io)(a.env.NEXT_PUBLIC_APP_URL);t.Z=s},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},370:function(e,t,r){"use strict";r.d(t,{f:function(){return d}});var n=r(2265);r(54887);var a=r(37053),s=r(57437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.Z8)(`Primitive.${t}`),l=n.forwardRef((e,n)=>{let{asChild:a,...l}=e,i=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i,{...l,ref:n})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),i=n.forwardRef((e,t)=>(0,s.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var d=i},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var n=r(2265);function a(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[6137,2696,3186,9327,5972,3464,3238,604,762,7478,2117,1744],function(){return e(e.s=26539)}),_N_E=e.O()}]);