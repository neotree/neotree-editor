(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{10565:function(e,a,t){Promise.resolve().then(t.bind(t,25704)),Promise.resolve().then(t.bind(t,23920)),Promise.resolve().then(t.bind(t,15701))},95229:function(e,a,t){"use strict";t.d(a,{Alert:function(){return n}});var l=t(53699),r=t(16463),s=t(2265);function n(e){let a=(0,r.useRouter)(),{alert:t}=(0,l.s)();return(0,s.useEffect)(()=>{let{redirectTo:l,onClose:r,...s}=e;t({...s,variant:s.variant||"error",buttonLabel:s.buttonLabel||"Ok",onClose:()=>{null==r||r(),l&&a.replace(l)}})},[t,a,e]),null}},39661:function(e,a,t){"use strict";t.d(a,{a:function(){return s}});var l=t(57437),r=t(89627);function s(e){let{overlay:a,transparent:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...a?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:t?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,l.jsx)(r.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},25704:function(e,a,t){"use strict";t.d(a,{Title:function(){return s}});var l=t(2265),r=t(20357);function s(e){let{children:a}=e;return(0,l.useEffect)(()=>{document.title=[r.env.NEXT_PUBLIC_APP_NAME||"",a||""].filter(e=>e).join(" - ")},[a]),(0,l.useEffect)(()=>()=>{document.title="".concat(r.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},76905:function(e,a,t){"use strict";t.d(a,{Uv:function(){return s},VO:function(){return r},d4:function(){return l},fR:function(){return i}});let l=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],r=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],s=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],n={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},i={admission:[{...n,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...n,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...n,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...n,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...n,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},83146:function(e,a,t){"use strict";t.d(a,{$7:function(){return o},F4:function(){return v},PU:function(){return n},Tf:function(){return d},UQ:function(){return f},_S:function(){return i},m1:function(){return c},ph:function(){return b},uh:function(){return u},y0:function(){return m}});var l=t(76905),r=t(30139),s=t(28680);let n={headerFormat:"",headerFields:[],footerFields:[],sections:[]},i="Example: ($key = true and $key2 = false) or $key3 = 'HD'",o={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},u=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],c=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"}],d=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],b=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}];({...d.reduce((e,a)=>{let t=a.value,l=a.value,r=[l,"".concat(l,"_option")];return"single_select"===t&&(r=[...r,"dropdown","dropdown_option"]),{...e,[l]:r}},{}),...l.Uv.reduce((e,a)=>{let t=a.name,l=a.name,r=[l,"".concat(l,"_option")];return"dropdown"===t&&(r=[...r,"single_select","single_select_option"]),{...e,[l]:r}},{})});let m=[{value:"checklist",label:"checklist",hasChildren:!0,defaults:{}},{value:"multi_select",label:"multi_select",hasChildren:!0,defaults:{valuesOptions:[]}},{value:"single_select",label:"single_select",hasChildren:!0,defaults:{}},{value:"yesno",label:"yesno",hasChildren:!1,defaults:{positiveLabel:"Yes",negativeLabel:"No"}},{value:"drug",label:"drug",hasChildren:!1,defaults:{}},{value:"fluid",label:"fluid",hasChildren:!1,defaults:{}},{value:"zw_edliz_summary_table_option",label:"zw_edliz_summary_table_option",hasChildren:!1,defaults:{}},{value:"mwi_edliz_summary_table_option",label:"mwi_edliz_summary_table_option",hasChildren:!1,defaults:{}},{value:"diagnosis",label:"diagnosis",hasChildren:!1,defaults:{}},{value:"date",label:"date",hasChildren:!1,defaults:{}},{value:"datetime",label:"datetime",hasChildren:!1,defaults:{}},{value:"dropdown",label:"dropdown",hasChildren:!0,defaults:{}},{value:"number",label:"number",hasChildren:!1,defaults:{}},{value:"text",label:"text",hasChildren:!1,defaults:{}},{value:"timer",label:"timer",hasChildren:!1,defaults:{}},{value:"period",label:"period",hasChildren:!1,defaults:{}}],v=[{value:"label.asc",label:"Label (asc)",Icon:r.Z},{value:"label.desc",label:"Label (desc)",Icon:s.Z},{value:"key.asc",label:"Key (asc)",Icon:r.Z},{value:"key.desc",label:"Key (desc)",Icon:s.Z},{value:"type.asc",label:"Type (asc)",Icon:r.Z},{value:"type.desc",label:"Type (desc)",Icon:s.Z},{value:"createdAt.asc",label:"Date (asc)",Icon:r.Z},{value:"createdAt.desc",label:"Date (desc)",Icon:s.Z}],f=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}]},23920:function(e,a,t){"use strict";t.d(a,{DataKeysCtxProvider:function(){return v},M:function(){return m}});var l=t(57437),r=t(2265),s=t(38472),n=t(73741),i=t(16463),o=t(53699),u=t(39661),c=t(95229),d=t(83146);let b=(0,r.createContext)(null),m=()=>{let e=(0,r.useContext)(b);if(!e)throw Error("useChart must be used within a <DataKeysCtxProvider />");return e};function v(e){var a,t;let{children:m,prefetchSelectOptions:v,selectOptions:h=[],prefetchDataKeys:y=!0}=e,p=(0,r.useRef)(!1),g=(0,i.useRouter)(),{alert:k}=(0,o.s)(),[C,_]=(0,n.v1)("uuid",{clearOnDefault:!0,shallow:!0,history:"push",defaultValue:""}),[w,D]=(0,r.useState)([]),[S,x]=(0,r.useState)(d.F4[0].value),[T,E]=(0,r.useState)(""),[N,I]=(0,r.useState)(!1),[Z,P]=(0,r.useState)(!1),[A,F]=(0,r.useState)({data:[]}),[j,L]=(0,r.useState)(!1),[O,U]=(0,r.useState)(h),K=(0,r.useCallback)(()=>new Promise((e,a)=>{P(!0),s.Z.get("/api/data-keys").then(a=>{a.data.data=f(a.data.data,S),F(a.data),e(a.data.data||[]),I(!0)}).catch(e=>{F({data:[],errors:[e.message]}),a(e)}).finally(()=>P(!1))}),[S]),z=(0,r.useCallback)(()=>new Promise((e,a)=>{L(!0),s.Z.get("/api/data-keys/select-options").then(a=>{let t=a.data.data||[];U(t),e(t)}).catch(e=>{F({data:[],errors:[e.message]}),a(e)}).finally(()=>L(!1))}),[]);(0,r.useEffect)(()=>{!p.current&&(p.current=!0,y?K():I(!0),v&&z())},[v,y,K]);let[Y,M]=(0,r.useState)(!1),R=(0,r.useCallback)(async(e,a)=>{try{var t;M(!0);let l=(await s.Z.post("/api/data-keys/save",{data:e,broadcastAction:!0})).data;(null===(t=l.errors)||void 0===t?void 0:t.length)?k({title:"Error",message:l.errors.join(", "),variant:"error"}):(await K(),g.refresh(),k({message:"Data key saved!",variant:"success",onClose:()=>null==a?void 0:a()}))}catch(e){k({title:"Error",message:"Failed to save data key: "+e.message,onClose:()=>null==a?void 0:a(e.message)})}finally{M(!1)}},[k,g.refresh,K]),[B,$]=(0,r.useState)(!1),V=(0,r.useCallback)(async e=>{try{var a;$(!0);let t=(await s.Z.delete("/api/data-keys?data="+JSON.stringify({dataKeysIds:e,broadcastAction:!0}))).data;if(null===(a=t.errors)||void 0===a?void 0:a.length)throw Error(t.errors[0]);D([]),await K(),g.refresh(),k({title:"Success",message:"Data keys deleted successfully!",variant:"success"})}catch(e){k({title:"Error",message:e.message,variant:"error"})}finally{$(!1)}},[g.refresh,k,K]),[J,W]=(0,r.useState)(!1),H=(0,r.useCallback)(async e=>{try{var a;W(!0);let t=(await s.Z.post("/api/data-keys/export",e)).data;if(null===(a=t.errors)||void 0===a?void 0:a.length)throw Error(t.errors[0]);g.refresh(),k({title:"Success",message:"Data exported successfully!",variant:"success"})}catch(e){k({title:"Error",message:e.message,variant:"error"})}finally{W(!1)}},[g.refresh,k]),X=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.F4[0].value;x(e),D([]),F(a=>({...a,data:f(a.data,e)}))},[]);return(null==A?void 0:null===(a=A.errors)||void 0===a?void 0:a.length)?(0,l.jsx)(c.Alert,{title:"Error",message:"Failed to load data keys: "+(null==A?void 0:null===(t=A.errors)||void 0===t?void 0:t.join(", ")),buttonLabel:"Try again",onClose:()=>K()}):N?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(b.Provider,{value:{loading:Z,saving:Y,exporting:J,deleting:B,dataKeys:A.data,errors:A.errors,selected:w,currentDataKeyUuid:C,sort:S,filter:T,selectOptions:O,loadingSelectOptions:j,deleteDataKeys:V,saveDataKeys:R,exportDataKeys:H,setCurrentDataKeyUuid:_,loadDataKeys:K,setSelected:D,setSort:x,onSort:X,setFilter:E},children:m})}):(0,l.jsx)(u.a,{overlay:!0})}function f(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.F4[0].value,t=[...e],l=e=>{let{key1:a,key2:t,sortDirection:l}=e;a=(a||"").trim().toLowerCase(),t=(t||"").trim().toLowerCase();let r=0;return"asc"===l?(a<t&&(r=-1),a>t&&(r=1)):(a>t&&(r=-1),a<t&&(r=1)),r};switch(a){case"key.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:e.name,key2:a.name}));break;case"label.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"label.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"type.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"type.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"createdAt.asc":t=e.sort((e,a)=>l({sortDirection:"asc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;case"createdAt.desc":t=e.sort((e,a)=>l({sortDirection:"desc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;default:t=e.sort((e,a)=>l({sortDirection:"asc",key1:e.name,key2:a.name}))}return t}},15701:function(e,a,t){"use strict";t.d(a,{ScriptsContextProvider:function(){return d},h:function(){return c}});var l=t(57437),r=t(2265),s=t(16463),n=t(12491),i=t(38472),o=t(23733);let u=(0,r.createContext)(null),c=()=>(0,r.useContext)(u);function d(e){let{children:a,...t}=e,c=function(e){let{}=e,a=(0,s.useRouter)(),{scriptId:t}=(0,s.useParams)(),{parsed:l}=(0,o.l)(),[u,c]=(0,r.useState)(!1),[d,b]=(0,r.useState)({data:[]}),[m,v]=(0,r.useState)(!1),[f,h]=(0,r.useState)([]),y=(0,r.useCallback)(()=>{a.push("/")},[a]),p=(0,r.useCallback)(()=>{a.push("/script/".concat(t,"?").concat(n.Z.stringify({...l,section:"screens"})))},[a,l,t]),g=(0,r.useCallback)(()=>{a.push("/script/".concat(t,"?").concat(n.Z.stringify({...l,section:"diagnoses"})))},[a,l,t]),k=(0,r.useCallback)(async()=>{try{var e,a;c(!0);let l=await i.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(null===(a=l.data)||void 0===a?void 0:null===(e=a.errors)||void 0===e?void 0:e.length)throw Error(l.data.errors.join(", "));b(l.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{c(!1)}},[t,open,alert]);return{screens:d,screensLoading:u,keys:f,keysLoading:m,loadKeys:(0,r.useCallback)(async()=>{try{var e,a;v(!0);let l=await i.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[t]}));if(null===(a=l.data)||void 0===a?void 0:null===(e=a.errors)||void 0===e?void 0:e.length)throw Error(l.data.errors.join(", "));let r=l.data.data.reduce((e,a)=>[...e,...a.keys],[]);h(r)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{v(!1)}},[t,open,alert]),loadScreens:k,onCancelDiagnosisForm:g,onCancelScreenForm:p,onCancelScriptForm:y}}(t);return(0,l.jsx)(u.Provider,{value:{...t,...c},children:a})}},53699:function(e,a,t){"use strict";t.d(a,{s:function(){return s}});var l=t(39099);let r={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},s=(0,l.Ue)(e=>({isOpen:!1,...r,alert:a=>e({isOpen:!0,...r,...a}),close:()=>e({isOpen:!1,onClose:void 0,...r})}))},23733:function(e,a,t){"use strict";t.d(a,{l:function(){return n}});var l=t(16463),r=t(12491),s=t(2265);function n(){let e=(0,l.useRouter)(),a=(0,l.useSearchParams)(),t=(0,s.useMemo)(()=>a.toString(),[a]),n=(0,s.useMemo)(()=>r.Z.parse(a.toString()),[a]),i=(0,s.useCallback)(e=>r.Z.stringify({...n,...e}),[n]),o=(0,s.useCallback)(a=>{e.push("?".concat(i(a)))},[i,e]);return{parsed:n,stringified:t,replace:(0,s.useCallback)(a=>{e.replace("?".concat(i(a)))},[i,e]),push:o,toSearchParams:i}}}},function(e){e.O(0,[8472,7202,877,7478,7023,1744],function(){return e(e.s=10565)}),_N_E=e.O()}]);