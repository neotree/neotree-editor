(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3322],{5209:function(e,t,a){Promise.resolve().then(a.bind(a,62290)),Promise.resolve().then(a.bind(a,89884))},62290:function(e,t,a){"use strict";a.d(t,{ChangelogManagement:function(){return T}});var r=a(57437),s=a(2265),n=a(64014),l=a(99376),i=a(73247),o=a(71533),d=a(69711),c=a(35974),u=a(62869),f=a(95186),m=a(6512),p=a(37099),x=a(84190),h=a(10346),g=a(73578),b=a(94508),v=a(90740),j=a(53647);let y={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"};function N(e){let{entityType:t,action:a,isActiveOnly:s,sort:n,sortOptions:l,setEntityType:i,setAction:o,setIsActiveOnly:d,setSort:c,clearFilters:f,loading:p,onRefresh:x}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"p-4 flex flex-col gap-y-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,r.jsx)("div",{className:"text-2xl font-semibold",children:"Published Releases"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-wrap items-center justify-end gap-x-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(j.Ph,{value:n,onValueChange:c,children:[(0,r.jsx)(j.i4,{className:"w-[180px]",children:(0,r.jsx)(j.ki,{placeholder:"Sort"})}),(0,r.jsx)(j.Bw,{children:l.map(e=>(0,r.jsx)(j.Ql,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(j.Ph,{value:t,onValueChange:i,children:[(0,r.jsx)(j.i4,{className:"w-[150px]",children:(0,r.jsx)(j.ki,{placeholder:"Entity Type"})}),(0,r.jsx)(j.Bw,{children:(0,r.jsxs)(j.DI,{children:[(0,r.jsx)(j.Ql,{value:"all",children:"All Types"}),Object.entries(y).map(e=>{let[t,a]=e;return(0,r.jsx)(j.Ql,{value:t,children:a},t)})]})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(j.Ph,{value:a,onValueChange:o,children:[(0,r.jsx)(j.i4,{className:"w-[130px]",children:(0,r.jsx)(j.ki,{placeholder:"Action"})}),(0,r.jsx)(j.Bw,{children:(0,r.jsxs)(j.DI,{children:[(0,r.jsx)(j.Ql,{value:"all",children:"All Actions"}),(0,r.jsx)(j.Ql,{value:"create",children:"Create"}),(0,r.jsx)(j.Ql,{value:"update",children:"Update"}),(0,r.jsx)(j.Ql,{value:"delete",children:"Delete"}),(0,r.jsx)(j.Ql,{value:"publish",children:"Publish"}),(0,r.jsx)(j.Ql,{value:"restore",children:"Restore"}),(0,r.jsx)(j.Ql,{value:"rollback",children:"Rollback"}),(0,r.jsx)(j.Ql,{value:"merge",children:"Merge"})]})})]})}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:s,onChange:e=>d(e.target.checked),className:"rounded"}),(0,r.jsx)("span",{className:"text-sm whitespace-nowrap",children:"Active only"})]})}),(0,r.jsxs)(u.z,{variant:"outline",onClick:f,disabled:p,children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),(0,r.jsx)(u.z,{variant:"ghost",onClick:x,disabled:p,children:"Refresh"})]})]})}),(0,r.jsx)(m.Separator,{})]})}var w=a(83464),k=a(98656);let C=[{value:"publishedAt.desc",label:"Published (Newest)"},{value:"publishedAt.asc",label:"Published (Oldest)"},{value:"dataVersion.desc",label:"Data Version (High to Low)"},{value:"dataVersion.asc",label:"Data Version (Low to High)"},{value:"changeCount.desc",label:"Changes (High to Low)"},{value:"changeCount.asc",label:"Changes (Low to High)"}];function V(e){if(null==e)return null;let t="number"==typeof e?e:Number(e);return Number.isFinite(t)&&t>0?t:null}var R=a(72191);let A={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"},S={create:"Created",update:"Updated",delete:"Deleted",publish:"Published",restore:"Restored",rollback:"Rolled back",merge:"Merged"},_={create:"border-emerald-500/20 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",update:"border-blue-500/20 bg-blue-500/10 text-blue-600 dark:text-blue-400",delete:"border-red-500/20 bg-red-500/10 text-red-600 dark:text-red-400",publish:"border-purple-500/20 bg-purple-500/10 text-purple-600 dark:text-purple-400",restore:"border-amber-500/20 bg-amber-500/10 text-amber-600 dark:text-amber-400",rollback:"border-orange-500/20 bg-orange-500/10 text-orange-600 dark:text-orange-400",merge:"border-cyan-500/20 bg-cyan-500/10 text-cyan-600 dark:text-cyan-400"};function P(e){let{dataVersions:t,totalDataVersions:a,loading:v,searchValue:j,entityType:y,action:P,isActiveOnly:T,sort:D,pagination:z,currentPage:O,itemsPerPage:E,sortOptions:L,setSearchValue:Z,setEntityType:F,setAction:M,setIsActiveOnly:I,setSort:U,setCurrentPage:B,loadChangelogs:Q,clearFilters:$}=function(e){let{initialChangelogs:t}=e,[a,r]=(0,s.useState)(t),[n,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(""),[d,c]=(0,s.useState)("all"),[u,f]=(0,s.useState)("all"),[m,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(C[0].value),[g,b]=(0,s.useState)(1),[v]=(0,s.useState)(25),{alert:j}=(0,k.s)(),y=(0,s.useCallback)(async()=>{try{l(!0);let{errors:e,data:t}=(await w.Z.post("/api/changelogs/get",{limit:2e3,sortBy:"dateOfChange",sortOrder:"desc"})).data;if(null==e?void 0:e.length){j({title:"Error",message:"Failed to load changelogs: "+e.join(", "),variant:"error"});return}r(t)}catch(e){j({title:"Error",message:"Failed to load changelogs: "+e.message,variant:"error"})}finally{l(!1)}},[j]),N=(0,s.useMemo)(()=>{let e=new Map;for(let t of a){let a=function(e){var t,a;let r=V(null==e?void 0:e.dataVersion),s=V(null==e?void 0:null===(t=e.fullSnapshot)||void 0===t?void 0:t.dataVersion);return null!==(a=null!=r?r:s)&&void 0!==a?a:null}(t);null!==a&&(e.has(a)||e.set(a,[]),e.get(a).push(t))}let t=[],r=Array.from(e.keys()),s=r.length?Math.max(...r):null;for(let[a,r]of Array.from(e.entries())){var n;if(!r.length)continue;let e=[...r].sort((e,t)=>new Date(t.dateOfChange).getTime()-new Date(e.dateOfChange).getTime())[0],l=null!==(n=r.find(e=>"publish"===e.action))&&void 0!==n?n:e,i=r.find(e=>"rollback"===e.action),o=(null==i?void 0:i.changes)&&Array.isArray(i.changes)?(()=>{let e=i.changes.find(e=>Number.isFinite(null==e?void 0:e.toDataVersion)||Number.isFinite(null==e?void 0:e.toVersion));return Number.isFinite(null==e?void 0:e.toDataVersion)?e.toDataVersion:Number.isFinite(null==e?void 0:e.toVersion)?e.toVersion:null})():null,d=r.reduce((e,t)=>(e[t.entityType]=(e[t.entityType]||0)+1,e),{}),c=r.reduce((e,t)=>(e[t.action]=(e[t.action]||0)+1,e),{}),u=Array.from(new Set(r.map(e=>{var t;return(null===(t=e.description)||void 0===t?void 0:t.trim())||""}).filter(e=>e.length>0))).slice(0,5);t.push({dataVersion:a,publishedAt:(null==e?void 0:e.dateOfChange)?new Date(e.dateOfChange).toISOString():null,publishedByName:(null==l?void 0:l.userName)||(null==e?void 0:e.userName)||"Unknown user",publishedByEmail:(null==l?void 0:l.userEmail)||(null==e?void 0:e.userEmail)||void 0,totalChanges:r.length,hasActiveChanges:r.some(e=>e.isActive),isLatestVersion:null!==s&&a===s,entityCounts:d,actionCounts:c,descriptions:u,changeLogIds:r.map(e=>e.changeLogId),changes:r,rollbackSourceVersion:o})}return t.sort((e,t)=>t.dataVersion-e.dataVersion)},[a]),R=(0,s.useMemo)(()=>{let e=[...N];if(i){let t=i.toLowerCase();e=e.filter(e=>{var a,r;return!!("v".concat(e.dataVersion).toLowerCase().includes(t)||(null===(a=e.publishedByName)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.publishedByEmail)||void 0===r?void 0:r.toLowerCase().includes(t))||e.descriptions.some(e=>e.toLowerCase().includes(t)))||e.changes.some(e=>[e.description||"",e.entityId||"",e.changeReason||"",e.userName||"",e.userEmail||""].join(" ").toLowerCase().includes(t))})}return"all"!==d&&(e=e.filter(e=>e.changes.some(e=>e.entityType===d))),"all"!==u&&(e=e.filter(e=>e.changes.some(e=>e.action===u))),m&&(e=e.filter(e=>e.isLatestVersion)),function(e,t){let a=[...e],r=(e,t)=>(e?new Date(e).getTime():0)-(t?new Date(t).getTime():0);switch(t){case"publishedAt.asc":return a.sort((e,t)=>r(e.publishedAt,t.publishedAt));case"publishedAt.desc":return a.sort((e,t)=>r(t.publishedAt,e.publishedAt));case"dataVersion.asc":return a.sort((e,t)=>e.dataVersion-t.dataVersion);case"dataVersion.desc":return a.sort((e,t)=>t.dataVersion-e.dataVersion);case"changeCount.asc":return a.sort((e,t)=>e.totalChanges-t.totalChanges);case"changeCount.desc":return a.sort((e,t)=>t.totalChanges-e.totalChanges);default:return a.sort((e,t)=>r(t.publishedAt,e.publishedAt))}}(e,x)},[N,i,d,u,m,x]),{data:A,pagination:S}=(0,s.useMemo)(()=>{if(!R.length)return{data:[],pagination:void 0};let e=function(e,t,a){let r=e.length,s=(t-1)*a;return{data:e.slice(s,s+a),pagination:{page:t,limit:a,total:r,totalPages:Math.ceil(r/a)}}}(R,g,v);return{data:e.data,pagination:e.pagination}},[R,g,v]);(0,s.useEffect)(()=>{b(1)},[i,d,u,m,x]);let _=(0,s.useCallback)(()=>{o(""),c("all"),f("all"),p(!1),h(C[0].value),b(1)},[]);return{dataVersions:A,totalDataVersions:R.length,loading:n,searchValue:i,entityType:d,action:u,isActiveOnly:m,sort:x,pagination:S,currentPage:g,itemsPerPage:v,sortOptions:C,setSearchValue:o,setEntityType:c,setAction:f,setIsActiveOnly:p,setSort:h,setCurrentPage:b,loadChangelogs:y,clearFilters:_}}(e),{isSuperUser:Y}=e,H=(0,l.useRouter)(),{alert:X}=(0,k.s)(),[G,K]=(0,s.useState)(null),[W,J]=(0,s.useState)(null),[q,ee]=(0,s.useState)(!1),et=e=>{B(e)},ea=e=>{H.push("/changelogs/v".concat(e))},er=async e=>{if(!(e<2))try{var t,a;K(e);let r=await w.Z.post("/api/changelogs/rollback-data-version",{dataVersion:e,changeReason:"Rollback release v".concat(e," to v").concat(e-1)});if(null===(a=r.data)||void 0===a?void 0:null===(t=a.errors)||void 0===t?void 0:t.length)throw Error(r.data.errors.join(", "));X({title:"Rollback queued",message:"Release v".concat(e," will be rolled back to the state of v").concat(e-1,". New release v").concat(e+1," will be created. Refreshing..."),variant:"success",onClose:()=>window.location.reload()})}catch(e){X({title:"Rollback failed",message:e.message||"An unexpected error occurred.",variant:"error"})}finally{K(null),J(null)}};return(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsx)(d.a,{overlay:!0}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,r.jsx)(N,{entityType:y,action:P,isActiveOnly:T,sort:D,sortOptions:L,setEntityType:F,setAction:M,setIsActiveOnly:I,setSort:U,clearFilters:$,loading:v,onRefresh:Q}),(0,r.jsx)("div",{className:"px-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(f.I,{placeholder:"Search releases, publishers or entity ids...",value:j,onChange:e=>Z(e.target.value),className:"pl-10"})]})}),(0,r.jsx)(m.Separator,{}),(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsxs)("div",{className:"text-sm text-muted-foreground mb-4",children:[a," data version",1===a?"":"s"," found"]}),0===t.length?(0,r.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No published versions match your filters."}):(0,r.jsxs)(g.iA,{children:[(0,r.jsx)(g.xD,{children:(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.ss,{className:"w-[150px]",children:"Data Version"}),(0,r.jsx)(g.ss,{className:"w-[160px]",children:"Change Summary"}),(0,r.jsx)(g.ss,{children:"Entities Affected"}),(0,r.jsx)(g.ss,{children:"Notes"}),(0,r.jsx)(g.ss,{className:"w-[200px]",children:"Published By"}),(0,r.jsx)(g.ss,{className:"w-[170px]",children:"Published At"}),(0,r.jsx)(g.ss,{className:"text-right w-[150px]",children:"Actions"})]})}),(0,r.jsx)(g.RM,{children:t.map(e=>{let t=e.publishedAt?(0,n.WU)(new Date(e.publishedAt),"PPpp"):"Unknown",a=e.descriptions.slice(0,2),s=e.descriptions.length>a.length,l="v".concat(e.dataVersion);return(0,r.jsxs)(g.SC,{className:"cursor-pointer transition-colors hover:bg-muted/60",onClick:()=>ea(e.dataVersion),children:[(0,r.jsx)(g.pj,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("span",{className:"text-base font-semibold",children:l}),(0,r.jsxs)(c.C,{variant:"outline",className:"w-fit bg-muted text-muted-foreground",children:[e.totalChanges," change",1===e.totalChanges?"":"s"]})]})}),(0,r.jsx)(g.pj,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[function(e){let t=Object.entries(e.actionCounts).filter(e=>{let[,t]=e;return t>0}).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a}).slice(0,4);return t.length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>{var t;let[a,s]=e;return(0,r.jsxs)(c.C,{variant:"outline",className:(0,b.cn)("capitalize",null!==(t=_[a])&&void 0!==t?t:"border-muted bg-muted text-muted-foreground"),children:[s," ",S[a]||a]},a)})}):null}(e),e.rollbackSourceVersion?(0,r.jsxs)(c.C,{variant:"outline",className:"w-fit border-orange-500/30 bg-orange-500/10 text-orange-700 dark:text-orange-400",title:"This release restores the state from data version v".concat(e.rollbackSourceVersion,"."),children:["State of v",e.rollbackSourceVersion]}):e.isLatestVersion?(0,r.jsx)(c.C,{variant:"outline",className:"w-fit border-emerald-500/20 bg-emerald-500/10 text-emerald-700 dark:text-emerald-400",title:"This release is the latest published version.",children:"Active version"}):(0,r.jsx)(c.C,{variant:"outline",className:"w-fit border-amber-500/20 bg-amber-500/10 text-amber-700 dark:text-amber-400",title:"A newer release has replaced this version.",children:"Superseded"})]})}),(0,r.jsx)(g.pj,{children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:function(e){let t=Object.entries(e.entityCounts).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a});return t.length?t.map(e=>{let[t,a]=e,r=A[t]||t;return"".concat(a," ").concat(r).concat(1===a?"":"s")}).join(" • "):"—"}(e)})}),(0,r.jsx)(g.pj,{className:"max-w-[260px]",children:a.length>0?(0,r.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[a.map((e,t)=>(0,r.jsx)("p",{className:"line-clamp-2",children:e},t)),s&&(0,r.jsx)("p",{className:"text-xs italic",children:"+ more changes"})]}):(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"No description provided"})}),(0,r.jsx)(g.pj,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.publishedByName||"Unknown user"}),e.publishedByEmail&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.publishedByEmail})]})}),(0,r.jsx)(g.pj,{className:"whitespace-nowrap text-sm text-muted-foreground",children:t}),(0,r.jsx)(g.pj,{className:"text-right",children:(0,r.jsxs)(x.h_,{children:[(0,r.jsx)(x.$F,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(u.z,{variant:"outline",size:"icon",className:"h-8 w-8",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Open actions"})]})}),(0,r.jsxs)(x.AW,{align:"end",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(x.Xi,{onClick:()=>ea(e.dataVersion),className:"cursor-pointer",children:"View details"}),Y&&e.isLatestVersion&&e.dataVersion>1&&(0,r.jsx)(x.Xi,{disabled:G===e.dataVersion,onClick:()=>J(e),className:"cursor-pointer text-orange-600 focus:text-orange-700",children:G===e.dataVersion?"Rolling back...":"Rollback to v".concat(e.dataVersion-1)})]})]})})]},e.dataVersion)})})]})]}),z&&z.totalPages>1&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[(0,r.jsx)(h.tl,{children:(0,r.jsxs)(h.ng,{children:[(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.dN,{onClick:()=>et(Math.max(1,O-1)),className:(0,b.cn)("cursor-pointer",1===O&&"pointer-events-none opacity-50")})}),(()=>{if(!z)return null;let{page:e,totalPages:t}=z,a=[];if(a.push(1),t<=7)for(let e=2;e<=t;e++)a.push(e);else{e>3&&a.push("ellipsis");for(let r=Math.max(2,e-1);r<=Math.min(t-1,e+1);r++)a.push(r);e<t-2&&a.push("ellipsis"),t>1&&a.push(t)}return a.map((t,a)=>"ellipsis"===t?(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.Dj,{})},"ellipsis-".concat(a)):(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.kN,{onClick:()=>et(t),isActive:t===e,className:"cursor-pointer",children:t})},t))})(),(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.$0,{onClick:()=>et(Math.min(z.totalPages,O+1)),className:(0,b.cn)("cursor-pointer",O===z.totalPages&&"pointer-events-none opacity-50")})})]})}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:["Showing ",(O-1)*E+1," to"," ",Math.min(O*E,z.total)," of ",z.total," releases"]})]})]}),(0,r.jsx)(p.aR,{open:null!==W,onOpenChange:e=>{e||(J(null),ee(!1))},children:(0,r.jsxs)(p._T,{children:[(0,r.jsxs)(p.fY,{children:[(0,r.jsx)(p.f$,{children:"Danger: rollback release"}),(0,r.jsx)(p.yT,{asChild:!0,children:(0,r.jsxs)("div",{className:"space-y-3 text-sm text-muted-foreground",children:[W&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["You are about to publish a rollback for release v",W.dataVersion,", restoring the state of the previous release. This will publish a new release v",W.dataVersion+1,"."]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Entities affected:"}),(e=>{let t=Object.entries(e.entityCounts).filter(e=>{let[,t]=e;return t>0}).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a});return t.length?(0,r.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:t.map(e=>{let[t,a]=e;return(0,r.jsxs)("li",{children:[a," ",A[t]||t]},t)})}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No entities recorded."})})(W),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(u.z,{variant:"ghost",size:"sm",className:"px-0 text-primary",onClick:()=>ee(e=>!e),children:q?"Hide entity list":"View entity list"})}),q&&(0,r.jsx)("div",{className:"mt-2 max-h-56 overflow-y-auto pr-2",children:(e=>{let t=Object.entries(e.changes.reduce((e,t)=>{let a=t.entityType,r=A[a]||a,s=(0,R.EC)(t)||t.entityId;return e[a]||(e[a]={label:r,items:[]}),e[a].items.push("".concat(s," (").concat(t.entityId,")")),e},{})).sort((e,t)=>e[0].localeCompare(t[0]));return t.length?(0,r.jsx)("div",{className:"space-y-3",children:t.map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-foreground",children:a.label}),(0,r.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:a.items.map((e,a)=>(0,r.jsx)("li",{children:e},"".concat(t,"-").concat(a)))})]},t)})}):null})(W)})]})]}),(0,r.jsx)("p",{className:"font-semibold text-foreground",children:"Do not proceed unless you are absolutely sure what you are doing."})]})})]}),(0,r.jsxs)(p.xo,{children:[(0,r.jsx)(p.le,{onClick:()=>J(null),children:"Cancel"}),(0,r.jsx)(p.OL,{className:"bg-orange-600 hover:bg-orange-700 text-white",disabled:null!==G,onClick:()=>{null!==W&&er(W.dataVersion)},children:"Proceed with rollback"})]})]})})]})}function T(e){return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(P,{...e})})}},69711:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});var r=a(57437),s=a(15001);function n(e){let{overlay:t,transparent:a,padding:n="50px 0"}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:a?"transparent":"rgba(255,255,255,.6)"}:{padding:n}},children:(0,r.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},89884:function(e,t,a){"use strict";a.d(t,{Title:function(){return n}});var r=a(2265),s=a(40257);function n(e){let{children:t}=e;return(0,r.useEffect)(()=>{document.title=[s.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,r.useEffect)(()=>()=>{document.title="".concat(s.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},37099:function(e,t,a){"use strict";a.d(t,{OL:function(){return h},_T:function(){return u},aR:function(){return o},f$:function(){return p},fY:function(){return f},le:function(){return g},xo:function(){return m},yT:function(){return x}});var r=a(57437),s=a(2265),n=a(7880),l=a(94508),i=a(62869);let o=n.fC;n.xz;let d=n.h_,c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{className:(0,l.cn)("fixed inset-0 z-[99999999999] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});c.displayName=n.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-[99999999999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="AlertDialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",a),...s})});p.displayName=n.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=n.dk.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aU,{ref:t,className:(0,l.cn)((0,i.d)(),a),...s})});h.displayName=n.aU.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$j,{ref:t,className:(0,l.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});g.displayName=n.$j.displayName},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var r=a(57437);a(2265);var s=a(90535),n=a(94508);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var r=a(57437),s=a(2265),n=a(37053),l=a(90535),i=a(94508);let o=(0,l.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},84190:function(e,t,a){"use strict";a.d(t,{$F:function(){return u},AW:function(){return f},Ju:function(){return x},VD:function(){return h},Xi:function(){return m},bO:function(){return p},h_:function(){return c}});var r=a(57437),s=a(2265),n=a(28119),l=a(10407),i=a(30401),o=a(40519),d=a(94508);let c=n.fC,u=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,s.forwardRef((e,t)=>{let{className:a,inset:s,children:i,...o}=e;return(0,r.jsxs)(n.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...o,children:[i,(0,r.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=n.tu.displayName;let f=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(n.Uv,{children:(0,r.jsx)(n.VY,{ref:t,sideOffset:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});f.displayName=n.VY.displayName;let m=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...l})});m.displayName=n.ck.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,checked:l,...o}=e;return(0,r.jsxs)(n.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),s]})});p.displayName=n.oC.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=n.Rk.displayName;let x=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...l})});x.displayName=n.__.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});h.displayName=n.Z0.displayName},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(57437),s=a(2265),n=a(94508);let l=s.forwardRef((e,t)=>{let{className:a,type:s,noRing:l,error:i,...o}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",i&&"border-danger",i&&!l&&"focus-visible:ring-danger",a),ref:t,...o})});l.displayName="Input"},10346:function(e,t,a){"use strict";a.d(t,{$0:function(){return x},Dj:function(){return h},dN:function(){return p},kN:function(){return m},ng:function(){return u},nt:function(){return f},tl:function(){return c}});var r=a(57437),s=a(2265),n=a(92451),l=a(10407),i=a(67782),o=a(94508),d=a(62869);let c=e=>{let{className:t,...a}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",t),...a})};c.displayName="Pagination";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("ul",{ref:t,className:(0,o.cn)("flex flex-row items-center gap-1",a),...s})});u.displayName="PaginationContent";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("li",{ref:t,className:(0,o.cn)("",a),...s})});f.displayName="PaginationItem";let m=e=>{let{className:t,isActive:a,size:s="icon",...n}=e;return(0,r.jsx)("a",{"aria-current":a?"page":void 0,className:(0,o.cn)((0,d.d)({variant:a?"outline":"ghost",size:s}),t),...n})};m.displayName="PaginationLink";let p=e=>{let{className:t,children:a,...s}=e;return(0,r.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 pl-2.5",t),...s,children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),a||(0,r.jsx)("span",{children:"Previous"})]})};p.displayName="PaginationPrevious";let x=e=>{let{className:t,children:a,...s}=e;return(0,r.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 pr-2.5",t),...s,children:[a||(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(l.Z,{className:"h-4 w-4"})]})};x.displayName="PaginationNext";let h=e=>{let{className:t,...a}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,className:(0,o.cn)("flex h-9 w-9 items-center justify-center",t),...a,children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};h.displayName="PaginationEllipsis"},53647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},DI:function(){return u},Ph:function(){return c},Ql:function(){return b},U$:function(){return v},i4:function(){return m},ki:function(){return f},n5:function(){return g}});var r=a(57437),s=a(2265),n=a(74797),l=a(40875),i=a(22135),o=a(30401),d=a(94508);let c=n.fC,u=n.ZA,f=n.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,error:i,...o}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i&&"border-danger",a),...o,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});h.displayName=n.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});g.displayName=n.__.displayName;let b=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});b.displayName=n.ck.displayName;let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});v.displayName=n.Z0.displayName},6512:function(e,t,a){"use strict";a.d(t,{Separator:function(){return i}});var r=a(57437),s=a(2265),n=a(90759),l=a(94508);let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(n.f,{ref:t,decorative:i,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=n.f.displayName},73578:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=a(57437),s=a(2265),n=a(94508);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},98656:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var r=a(59625);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},n=(0,r.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},72191:function(e,t,a){"use strict";function r(e){if(null==e)return null;let t="number"==typeof e?e:Number(e);return Number.isFinite(t)&&t>0?t:null}function s(e){var t,a;let s=r(null==e?void 0:e.dataVersion),n=r(null==e?void 0:null===(t=e.fullSnapshot)||void 0===t?void 0:t.dataVersion);return null!==(a=null!=s?s:n)&&void 0!==a?a:null}function n(e){let t=[],a=e.changes;if(Array.isArray(a))for(let e of a)if(e&&"object"==typeof e){let a=e.field||e.fieldPath||"Unknown field",r="previousValue"in e?e.previousValue:"oldValue"in e?e.oldValue:void 0,s="newValue"in e?e.newValue:"value"in e?e.value:e.updatedValue;t.push({field:a,previousValue:r,newValue:s})}else t.push({field:"Unknown field",previousValue:void 0,newValue:e});else if(a&&"object"==typeof a&&"oldValues"in a&&"newValues"in a){let{oldValues:e=[],newValues:r=[]}=a,s=Math.max(e.length,r.length);for(let a=0;a<s;a++){let s=e[a]||{},n=r[a]||{},l=Object.keys({...s,...n})[0]||"field_".concat(a+1);t.push({field:l,previousValue:s[l],newValue:n[l]})}}if(!t.length&&"create"===e.action){let a=e.fullSnapshot;if(a&&"object"==typeof a)for(let[e,r]of Object.entries(a))t.push({field:e,previousValue:void 0,newValue:r})}return t}function l(e){let t=(null==e?void 0:e.entityTitle)||(null==e?void 0:e.entityName);if("string"==typeof t&&t.trim().length)return t.trim();let a=e.fullSnapshot||{};for(let e of[null==a?void 0:a.title,null==a?void 0:a.name,null==a?void 0:a.label,null==a?void 0:a.printTitle,null==a?void 0:a.sectionTitle,null==a?void 0:a.collectionLabel,null==a?void 0:a.key])if("string"==typeof e&&e.trim().length)return e.trim();return"".concat(e.entityType," ").concat(e.entityId)}a.d(t,{EC:function(){return l},_b:function(){return n},y5:function(){return s}})},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[6137,1475,253,5972,3464,7790,7781,8813,5262,4370,7478,2117,1744],function(){return e(e.s=5209)}),_N_E=e.O()}]);