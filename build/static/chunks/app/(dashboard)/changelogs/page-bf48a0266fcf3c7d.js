(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3322],{50681:function(e,t,r){Promise.resolve().then(r.bind(r,32152)),Promise.resolve().then(r.bind(r,89884))},32152:function(e,t,r){"use strict";r.d(t,{ChangelogManagement:function(){return T}});var a=r(57437),n=r(2265),s=r(64014),l=r(99376);let i=(0,r(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var o=r(71533),d=r(69711),c=r(35974),u=r(62869),f=r(95186),m=r(6512),p=r(37099),x=r(84190),h=r(10346),g=r(73578),v=r(94508),b=r(90740),y=r(53647);let j={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"};function N(e){let{entityType:t,action:r,isActiveOnly:n,applyFiltersToCounts:s,sort:l,sortOptions:i,setEntityType:o,setAction:d,setIsActiveOnly:c,setApplyFiltersToCounts:f,setSort:p,clearFilters:x,loading:h,onRefresh:g}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-4 flex flex-col gap-y-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold",children:"Published Releases"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-wrap items-center justify-end gap-x-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(y.Ph,{value:l,onValueChange:p,children:[(0,a.jsx)(y.i4,{className:"w-[180px]",children:(0,a.jsx)(y.ki,{placeholder:"Sort"})}),(0,a.jsx)(y.Bw,{children:i.map(e=>(0,a.jsx)(y.Ql,{value:e.value,children:e.label},e.value))})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(y.Ph,{value:t,onValueChange:o,children:[(0,a.jsx)(y.i4,{className:"w-[150px]",children:(0,a.jsx)(y.ki,{placeholder:"Entity Type"})}),(0,a.jsx)(y.Bw,{children:(0,a.jsxs)(y.DI,{children:[(0,a.jsx)(y.Ql,{value:"all",children:"All Types"}),Object.entries(j).map(e=>{let[t,r]=e;return(0,a.jsx)(y.Ql,{value:t,children:r},t)})]})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(y.Ph,{value:r,onValueChange:d,children:[(0,a.jsx)(y.i4,{className:"w-[130px]",children:(0,a.jsx)(y.ki,{placeholder:"Action"})}),(0,a.jsx)(y.Bw,{children:(0,a.jsxs)(y.DI,{children:[(0,a.jsx)(y.Ql,{value:"all",children:"All Actions"}),(0,a.jsx)(y.Ql,{value:"create",children:"Create"}),(0,a.jsx)(y.Ql,{value:"update",children:"Update"}),(0,a.jsx)(y.Ql,{value:"delete",children:"Delete"}),(0,a.jsx)(y.Ql,{value:"publish",children:"Publish"}),(0,a.jsx)(y.Ql,{value:"restore",children:"Restore"}),(0,a.jsx)(y.Ql,{value:"rollback",children:"Rollback"}),(0,a.jsx)(y.Ql,{value:"merge",children:"Merge"})]})})]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:e=>c(e.target.checked),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm whitespace-nowrap",children:"Active only"})]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:e=>f(e.target.checked),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm whitespace-nowrap",children:"Filter counts"})]})}),(0,a.jsxs)(u.z,{variant:"outline",onClick:x,disabled:h,children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),(0,a.jsx)(u.z,{variant:"ghost",onClick:g,disabled:h,children:"Refresh"})]})]})}),(0,a.jsx)(m.Separator,{})]})}var w=r(83464),k=r(98656);let C=[{value:"publishedAt.desc",label:"Published (Newest)"},{value:"publishedAt.asc",label:"Published (Oldest)"},{value:"dataVersion.desc",label:"Data Version (High to Low)"},{value:"dataVersion.asc",label:"Data Version (Low to High)"},{value:"changeCount.desc",label:"Changes (High to Low)"},{value:"changeCount.asc",label:"Changes (Low to High)"}];var R=r(72191),V=r(67132);let A={script:"Script",screen:"Screen",diagnosis:"Diagnosis",config_key:"Config Key",drugs_library:"Drugs Library",data_key:"Data Key",alias:"Alias"},S={create:"Created",update:"Updated",delete:"Deleted",publish:"Published",restore:"Restored",rollback:"Rolled back",merge:"Merged"},_={create:"border-emerald-500/20 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",update:"border-blue-500/20 bg-blue-500/10 text-blue-600 dark:text-blue-400",delete:"border-red-500/20 bg-red-500/10 text-red-600 dark:text-red-400",publish:"border-purple-500/20 bg-purple-500/10 text-purple-600 dark:text-purple-400",restore:"border-amber-500/20 bg-amber-500/10 text-amber-600 dark:text-amber-400",rollback:"border-orange-500/20 bg-orange-500/10 text-orange-600 dark:text-orange-400",merge:"border-cyan-500/20 bg-cyan-500/10 text-cyan-600 dark:text-cyan-400"};function D(e){let{dataVersions:t,totalDataVersions:r,loading:b,searchValue:y,entityType:j,action:D,isActiveOnly:T,applyFiltersToCounts:P,sort:E,pagination:Z,currentPage:z,itemsPerPage:O,sortOptions:F,setSearchValue:L,setEntityType:M,setAction:U,setIsActiveOnly:I,setApplyFiltersToCounts:B,setSort:$,setCurrentPage:Q,loadChangelogs:Y,clearFilters:H,detailsByVersion:X,detailsLoadingByVersion:q,loadVersionDetails:G}=function(e){let{initialSummaries:t=[],initialTotal:r=0,initialLatestDataVersion:a=null}=e,[s,l]=(0,n.useState)(t),[i,o]=(0,n.useState)(r),[d,c]=(0,n.useState)(a),[u,f]=(0,n.useState)({}),[m,p]=(0,n.useState)({}),[x,h]=(0,n.useState)(!1),[g,v]=(0,n.useState)(""),[b,y]=(0,n.useState)("all"),[j,N]=(0,n.useState)("all"),[R,V]=(0,n.useState)(!1),[A,S]=(0,n.useState)(!1),[_,D]=(0,n.useState)(C[0].value),[T,P]=(0,n.useState)(1),[E]=(0,n.useState)(25),{alert:Z}=(0,k.s)(),z=(0,n.useCallback)(async()=>{try{h(!0);let e=function(e){let t=e.trim().toLowerCase();if(!t||!/^v?\d+$/.exec(t))return null;let r=Number(t.replace(/^v/,""));return Number.isFinite(r)&&r>0?r:null}(g),[t,r]=_.split("."),a=R?1:E,n=R?0:(T-1)*E,{errors:s,data:i,total:d,latestDataVersion:u}=(await w.Z.post("/api/changelogs/summaries",{limit:a,offset:n,searchTerm:e?void 0:g||void 0,dataVersions:e?[e]:void 0,entityTypes:"all"!==b?[b]:void 0,actions:"all"!==j?[j]:void 0,applyFiltersToCounts:A,sortBy:t||"publishedAt",sortOrder:r||"desc",latestOnly:R})).data;if(null==s?void 0:s.length){Z({title:"Error",message:"Failed to load changelog summaries: "+s.join(", "),variant:"error"});return}l(Array.isArray(i)?i:[]),o(Number.isFinite(d)?Number(d):0),c(Number.isFinite(u)?Number(u):null)}catch(e){Z({title:"Error",message:"Failed to load changelog summaries: "+e.message,variant:"error"})}finally{h(!1)}},[Z,j,A,T,b,R,E,g,_]),O=(0,n.useMemo)(()=>{if(!i)return;let e=Math.max(1,Math.ceil(i/E));return{page:T,limit:E,total:i,totalPages:e}},[T,E,i]);(0,n.useEffect)(()=>{P(1)},[g,b,j,R,_,A]),(0,n.useEffect)(()=>{z()},[z]),(0,n.useEffect)(()=>{O&&T>O.totalPages&&P(1)},[T,O]);let F=(0,n.useCallback)(async e=>{if(!u[e]&&!m[e])try{p(t=>({...t,[e]:!0}));let t=0,r=0,a=[];do{let{errors:n,data:s,total:l}=(await w.Z.post("/api/changelogs/get",{limit:2e3,offset:t,dataVersions:[e],sortBy:"dateOfChange",sortOrder:"desc"})).data;if(null==n?void 0:n.length){Z({title:"Error",message:"Failed to load changelog details: "+n.join(", "),variant:"error"});return}if(!Array.isArray(s)||0===s.length)break;a.push(...s.filter(e=>"release"!==e.entityType)),r=Number.isFinite(l)?Number(l):a.length,t=a.length}while(t<r);f(t=>({...t,[e]:a}))}catch(e){Z({title:"Error",message:"Failed to load changelog details: "+e.message,variant:"error"})}finally{p(t=>({...t,[e]:!1}))}},[Z,u,m]),L=(0,n.useCallback)(()=>{v(""),y("all"),N("all"),V(!1),S(!1),D(C[0].value),P(1)},[]);return{dataVersions:s,totalDataVersions:i,loading:x,searchValue:g,entityType:b,action:j,isActiveOnly:R,applyFiltersToCounts:A,sort:_,pagination:O,currentPage:T,itemsPerPage:E,sortOptions:C,setSearchValue:v,setEntityType:y,setAction:N,setIsActiveOnly:V,setApplyFiltersToCounts:S,setSort:D,setCurrentPage:P,loadChangelogs:z,clearFilters:L,latestDataVersion:d,detailsByVersion:u,detailsLoadingByVersion:m,loadVersionDetails:F}}(e),{isSuperUser:J}=e,{viewOnly:K}=(0,V.b)(),W=(0,l.useRouter)(),{alert:ee}=(0,k.s)(),[et,er]=(0,n.useState)(null),[ea,en]=(0,n.useState)(null),[es,el]=(0,n.useState)(!1),[ei,eo]=(0,n.useState)(!1);(0,n.useEffect)(()=>{ea&&G(ea.dataVersion)},[G,ea]),(0,n.useEffect)(()=>{K&&(en(null),el(!1),eo(!1))},[K]);let ed=e=>{Q(e)},ec=e=>{W.push("/changelogs/v".concat(e))},eu=async e=>{if(!K&&!(e<2))try{var t,r;er(e);let a=await w.Z.post("/api/changelogs/rollback-data-version",{dataVersion:e,changeReason:"Rollback release v".concat(e," to v").concat(e-1),createdEntityPolicy:ei?"soft_delete":"keep"});if(null===(r=a.data)||void 0===r?void 0:null===(t=r.errors)||void 0===t?void 0:t.length)throw Error(a.data.errors.join(", "));ee({title:"Rollback queued",message:"Release v".concat(e," will be rolled back to the state of v").concat(e-1,". New release v").concat(e+1," will be created. Refreshing..."),variant:"success",onClose:()=>window.location.reload()})}catch(e){ee({title:"Rollback failed",message:e.message||"An unexpected error occurred.",variant:"error"})}finally{er(null),en(null),eo(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(b||null!==et)&&(0,a.jsx)(d.a,{overlay:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsx)(N,{entityType:j,action:D,isActiveOnly:T,applyFiltersToCounts:P,sort:E,sortOptions:F,setEntityType:M,setAction:U,setIsActiveOnly:I,setApplyFiltersToCounts:B,setSort:$,clearFilters:H,loading:b,onRefresh:Y}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(f.I,{placeholder:"Search releases, publishers or entity ids...",value:y,onChange:e=>L(e.target.value),className:"pl-10"})]})}),(0,a.jsx)(m.Separator,{}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mb-4",children:[r," data version",1===r?"":"s"," found"]}),0===t.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No published versions match your filters."}):(0,a.jsxs)(g.iA,{children:[(0,a.jsx)(g.xD,{children:(0,a.jsxs)(g.SC,{children:[(0,a.jsx)(g.ss,{className:"w-[150px]",children:"Data Version"}),(0,a.jsx)(g.ss,{className:"w-[160px]",children:"Change Summary"}),(0,a.jsx)(g.ss,{children:"Entities Affected"}),(0,a.jsx)(g.ss,{children:"Notes"}),(0,a.jsx)(g.ss,{className:"w-[200px]",children:"Published By"}),(0,a.jsx)(g.ss,{className:"w-[170px]",children:"Published At"}),(0,a.jsx)(g.ss,{className:"text-right w-[150px]",children:"Actions"})]})}),(0,a.jsx)(g.RM,{children:t.map(e=>{let t=e.publishedAt?(0,s.WU)(new Date(e.publishedAt),"PPpp"):"Unknown",r=e.descriptions.slice(0,2),n=e.descriptions.length>r.length,l="v".concat(e.dataVersion);return(0,a.jsxs)(g.SC,{className:"cursor-pointer transition-colors hover:bg-muted/60",onClick:()=>ec(e.dataVersion),children:[(0,a.jsx)(g.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-base font-semibold",children:l}),(0,a.jsxs)(c.C,{variant:"outline",className:"w-fit bg-muted text-muted-foreground",children:[e.totalChanges," change",1===e.totalChanges?"":"s"]})]})}),(0,a.jsx)(g.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[function(e){let t=Object.entries(e.actionCounts).filter(e=>{let[,t]=e;return t>0}).sort((e,t)=>{let[,r]=e,[,a]=t;return a-r}).slice(0,4);return t.length?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>{var t;let[r,n]=e;return(0,a.jsxs)(c.C,{variant:"outline",className:(0,v.cn)("capitalize",null!==(t=_[r])&&void 0!==t?t:"border-muted bg-muted text-muted-foreground"),children:[n," ",S[r]||r]},r)})}):null}(e),e.rollbackSourceVersion?(0,a.jsxs)(c.C,{variant:"outline",className:"w-fit border-orange-500/30 bg-orange-500/10 text-orange-700 dark:text-orange-400",title:"This release restores the state from data version v".concat(e.rollbackSourceVersion,"."),children:["State of v",e.rollbackSourceVersion]}):e.isLatestVersion?(0,a.jsx)(c.C,{variant:"outline",className:"w-fit border-emerald-500/20 bg-emerald-500/10 text-emerald-700 dark:text-emerald-400",title:"This release is the latest published version.",children:"Active version"}):(0,a.jsx)(c.C,{variant:"outline",className:"w-fit border-amber-500/20 bg-amber-500/10 text-amber-700 dark:text-amber-400",title:"A newer release has replaced this version.",children:"Superseded"})]})}),(0,a.jsx)(g.pj,{children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:function(e){let t=Object.entries(e.entityCounts).sort((e,t)=>{let[,r]=e,[,a]=t;return a-r});return t.length?t.map(e=>{let[t,r]=e,a=A[t]||t;return"".concat(r," ").concat(a).concat(1===r?"":"s")}).join(" • "):"—"}(e)})}),(0,a.jsx)(g.pj,{className:"max-w-[260px]",children:r.length>0?(0,a.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[r.map((e,t)=>(0,a.jsx)("p",{className:"line-clamp-2",children:e},t)),n&&(0,a.jsx)("p",{className:"text-xs italic",children:"+ more changes"})]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No description provided"})}),(0,a.jsx)(g.pj,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.publishedByName||"Unknown user"}),e.publishedByEmail&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.publishedByEmail})]})}),(0,a.jsx)(g.pj,{className:"whitespace-nowrap text-sm text-muted-foreground",children:t}),(0,a.jsx)(g.pj,{className:"text-right",children:(0,a.jsxs)(x.h_,{children:[(0,a.jsx)(x.$F,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(u.z,{variant:"outline",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open actions"})]})}),(0,a.jsxs)(x.AW,{align:"end",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(x.Xi,{onClick:()=>ec(e.dataVersion),className:"cursor-pointer",children:"View details"}),J&&!K&&e.isLatestVersion&&e.dataVersion>1&&(0,a.jsx)(x.Xi,{disabled:et===e.dataVersion,onClick:()=>en(e),className:"cursor-pointer text-orange-600 focus:text-orange-700",children:et===e.dataVersion?"Rolling back...":"Rollback to v".concat(e.dataVersion-1)})]})]})})]},e.dataVersion)})})]})]}),Z&&Z.totalPages>1&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[(0,a.jsx)(h.tl,{children:(0,a.jsxs)(h.ng,{children:[(0,a.jsx)(h.nt,{children:(0,a.jsx)(h.dN,{onClick:()=>ed(Math.max(1,z-1)),className:(0,v.cn)("cursor-pointer",1===z&&"pointer-events-none opacity-50")})}),(()=>{if(!Z)return null;let{page:e,totalPages:t}=Z,r=[];if(r.push(1),t<=7)for(let e=2;e<=t;e++)r.push(e);else{e>3&&r.push("ellipsis");for(let a=Math.max(2,e-1);a<=Math.min(t-1,e+1);a++)r.push(a);e<t-2&&r.push("ellipsis"),t>1&&r.push(t)}return r.map((t,r)=>"ellipsis"===t?(0,a.jsx)(h.nt,{children:(0,a.jsx)(h.Dj,{})},"ellipsis-".concat(r)):(0,a.jsx)(h.nt,{children:(0,a.jsx)(h.kN,{onClick:()=>ed(t),isActive:t===e,className:"cursor-pointer",children:t})},t))})(),(0,a.jsx)(h.nt,{children:(0,a.jsx)(h.$0,{onClick:()=>ed(Math.min(Z.totalPages,z+1)),className:(0,v.cn)("cursor-pointer",z===Z.totalPages&&"pointer-events-none opacity-50")})})]})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:["Showing ",(z-1)*O+1," to"," ",Math.min(z*O,Z.total)," of ",Z.total," releases"]})]})]}),(0,a.jsx)(p.aR,{open:!K&&null!==ea,onOpenChange:e=>{e||(en(null),el(!1),eo(!1))},children:(0,a.jsxs)(p._T,{children:[(0,a.jsxs)(p.fY,{children:[(0,a.jsx)(p.f$,{children:"Danger: rollback release"}),(0,a.jsx)(p.yT,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-3 text-sm text-muted-foreground",children:[ea&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["You are about to publish a rollback for release v",ea.dataVersion,", restoring the state of the previous release. This will publish a new release v",ea.dataVersion+1,"."]}),null!==et&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rollback in progress. Please wait..."}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Entities affected:"}),(e=>{let t=Object.entries(e.entityCounts).filter(e=>{let[,t]=e;return t>0}).sort((e,t)=>{let[,r]=e,[,a]=t;return a-r});return t.length?(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:t.map(e=>{let[t,r]=e;return(0,a.jsxs)("li",{children:[r," ",A[t]||t]},t)})}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No entities recorded."})})(ea),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(u.z,{variant:"ghost",size:"sm",className:"px-0 text-primary",onClick:()=>el(e=>!e),children:es?"Hide entity list":"View entity list"})}),es&&(0,a.jsx)("div",{className:"mt-2 max-h-56 overflow-y-auto pr-2",children:q[ea.dataVersion]?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading entity details..."}):((e,t)=>{if(!t||0===t.length)return(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No entity details available."});let r=Object.entries(t.reduce((e,t)=>{let r=t.entityType,a=A[r]||r,n=(0,R.EC)(t)||t.entityId;return e[r]||(e[r]={label:a,items:[]}),e[r].items.push("".concat(n," (").concat(t.entityId,")")),e},{})).sort((e,t)=>e[0].localeCompare(t[0]));return r.length?(0,a.jsx)("div",{className:"space-y-3",children:r.map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-foreground",children:r.label}),(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:r.items.map((e,r)=>(0,a.jsx)("li",{children:e},"".concat(t,"-").concat(r)))})]},t)})}):null})(0,X[ea.dataVersion])})]}),(0,a.jsxs)("div",{className:"pt-1",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:ei,onChange:e=>eo(e.target.checked),className:"rounded",disabled:K||null!==et}),(0,a.jsx)("span",{children:"Soft delete items created in this release"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Newly created entities with no prior snapshot will be marked deleted instead of kept."})]})]}),(0,a.jsx)("p",{className:"font-semibold text-foreground",children:"Do not proceed unless you are absolutely sure what you are doing."})]})})]}),(0,a.jsxs)(p.xo,{children:[(0,a.jsx)(p.le,{onClick:()=>en(null),children:"Cancel"}),(0,a.jsx)(p.OL,{className:"bg-orange-600 hover:bg-orange-700 text-white",disabled:K||null!==et,onClick:()=>{null!==ea&&eu(ea.dataVersion)},children:"Proceed with rollback"})]})]})})]})}function T(e){return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(D,{...e})})}},69711:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var a=r(57437),n=r(15001);function s(e){let{overlay:t,transparent:r,padding:s="50px 0"}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:r?"transparent":"rgba(255,255,255,.6)"}:{padding:s}},children:(0,a.jsx)(n.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},19820:function(e,t,r){"use strict";r.d(t,{SocketEventsListener:function(){return l}});var a=r(2265),n=r(99376),s=r(62265);function l(e){let{events:t}=e,r=(0,a.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,a.useRef)(new Date().getTime());let l=(0,n.useRouter)();return(0,a.useEffect)(()=>{t.forEach(e=>{let{name:t,action:a,delay:n=100,onEvent:i}=e;s.Z.on(t,function(){for(var e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];let d=()=>{var e,r;(!a||s[0]===a)&&(null===(e=i.callback)||void 0===e||e.call(i,...s),(null==i?void 0:i.refreshRouter)&&(console.log(t,"refreshing..."),l.refresh()),(null===(r=i.redirect)||void 0===r?void 0:r.to)&&(i.redirect.replace?l.replace(i.redirect.to):l.push(i.redirect.to)))},c=new Date().getTime();n?(clearTimeout(r.current.eventsTimeouts[t]),r.current.eventsTimeouts[t]=setTimeout(()=>{r.current.eventsTimestamps[t]=c,d()},n)):(r.current.eventsTimestamps[t]=new Date().getTime(),d())})})},[t,l]),null}},89884:function(e,t,r){"use strict";r.d(t,{Title:function(){return s}});var a=r(2265),n=r(40257);function s(e){let{children:t}=e;return(0,a.useEffect)(()=>{document.title=[n.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,a.useEffect)(()=>()=>{document.title="".concat(n.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},37099:function(e,t,r){"use strict";r.d(t,{OL:function(){return h},_T:function(){return u},aR:function(){return o},f$:function(){return p},fY:function(){return f},le:function(){return g},xo:function(){return m},yT:function(){return x}});var a=r(57437),n=r(2265),s=r(7880),l=r(94508),i=r(62869);let o=s.fC;s.xz;let d=s.h_,c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{className:(0,l.cn)("fixed inset-0 z-[99999999999] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n,ref:t})});c.displayName=s.aV.displayName;let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-[99999999999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};f.displayName="AlertDialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="AlertDialogFooter";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",r),...n})});p.displayName=s.Dx.displayName;let x=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});x.displayName=s.dk.displayName;let h=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aU,{ref:t,className:(0,l.cn)((0,i.d)(),r),...n})});h.displayName=s.aU.displayName;let g=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.$j,{ref:t,className:(0,l.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...n})});g.displayName=s.$j.displayName},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(57437);r(2265);var n=r(90535),s=r(94508);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(l({variant:r}),t),...n})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var a=r(57437),n=r(2265),s=r(37053),l=r(90535),i=r(94508);let o=(0,l.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:r})),ref:t,...c})});d.displayName="Button"},84190:function(e,t,r){"use strict";r.d(t,{$F:function(){return u},AW:function(){return f},Ju:function(){return x},VD:function(){return h},Xi:function(){return m},bO:function(){return p},h_:function(){return c}});var a=r(57437),n=r(2265),s=r(28119),l=r(10407),i=r(30401),o=r(40519),d=r(94508);let c=s.fC,u=s.xz;s.ZA,s.Uv,s.Tr,s.Ee,n.forwardRef((e,t)=>{let{className:r,inset:n,children:i,...o}=e;return(0,a.jsxs)(s.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",r),...o,children:[i,(0,a.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=s.fF.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})}).displayName=s.tu.displayName;let f=n.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...l}=e;return(0,a.jsx)(s.Uv,{children:(0,a.jsx)(s.VY,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})})});f.displayName=s.VY.displayName;let m=n.forwardRef((e,t)=>{let{className:r,inset:n,...l}=e;return(0,a.jsx)(s.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r),...l})});m.displayName=s.ck.displayName;let p=n.forwardRef((e,t)=>{let{className:r,children:n,checked:l,...o}=e;return(0,a.jsxs)(s.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:l,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),n]})});p.displayName=s.oC.displayName,n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsxs)(s.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=s.Rk.displayName;let x=n.forwardRef((e,t)=>{let{className:r,inset:n,...l}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...l})});x.displayName=s.__.displayName;let h=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...n})});h.displayName=s.Z0.displayName},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(57437),n=r(2265),s=r(94508);let l=n.forwardRef((e,t)=>{let{className:r,type:n,noRing:l,error:i,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",i&&"border-danger",i&&!l&&"focus-visible:ring-danger",r),ref:t,...o})});l.displayName="Input"},10346:function(e,t,r){"use strict";r.d(t,{$0:function(){return x},Dj:function(){return h},dN:function(){return p},kN:function(){return m},ng:function(){return u},nt:function(){return f},tl:function(){return c}});var a=r(57437),n=r(2265),s=r(92451),l=r(10407),i=r(67782),o=r(94508),d=r(62869);let c=e=>{let{className:t,...r}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",t),...r})};c.displayName="Pagination";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("ul",{ref:t,className:(0,o.cn)("flex flex-row items-center gap-1",r),...n})});u.displayName="PaginationContent";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("li",{ref:t,className:(0,o.cn)("",r),...n})});f.displayName="PaginationItem";let m=e=>{let{className:t,isActive:r,size:n="icon",...s}=e;return(0,a.jsx)("a",{"aria-current":r?"page":void 0,className:(0,o.cn)((0,d.d)({variant:r?"outline":"ghost",size:n}),t),...s})};m.displayName="PaginationLink";let p=e=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 pl-2.5",t),...n,children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),r||(0,a.jsx)("span",{children:"Previous"})]})};p.displayName="PaginationPrevious";let x=e=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 pr-2.5",t),...n,children:[r||(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(l.Z,{className:"h-4 w-4"})]})};x.displayName="PaginationNext";let h=e=>{let{className:t,...r}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,o.cn)("flex h-9 w-9 items-center justify-center",t),...r,children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};h.displayName="PaginationEllipsis"},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},DI:function(){return u},Ph:function(){return c},Ql:function(){return v},U$:function(){return b},i4:function(){return m},ki:function(){return f},n5:function(){return g}});var a=r(57437),n=r(2265),s=r(74797),l=r(40875),i=r(22135),o=r(30401),d=r(94508);let c=s.fC,u=s.ZA,f=s.B4,m=n.forwardRef((e,t)=>{let{className:r,children:n,error:i,...o}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i&&"border-danger",r),...o,children:[n,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=s.xz.displayName;let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=s.u_.displayName;let x=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=s.$G.displayName;let h=n.forwardRef((e,t)=>{let{className:r,children:n,position:l="popper",...i}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(x,{})]})})});h.displayName=s.VY.displayName;let g=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})});g.displayName=s.__.displayName;let v=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});v.displayName=s.ck.displayName;let b=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...n})});b.displayName=s.Z0.displayName},6512:function(e,t,r){"use strict";r.d(t,{Separator:function(){return i}});var a=r(57437),n=r(2265),s=r(90759),l=r(94508);let i=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(s.f,{ref:t,decorative:i,orientation:n,className:(0,l.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...o})});i.displayName=s.f.displayName},73578:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var a=r(57437),n=r(2265),s=r(94508);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});l.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...n})});i.displayName="TableHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});o.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},67132:function(e,t,r){"use strict";r.d(t,{AppContextProvider:function(){return g},b:function(){return h}});var a=r(57437),n=r(2265),s=r(25922),l=r(99376),i=r(6760),o=r(64131);let d=o.Z.get,c=o.Z.set;o.Z.remove;var u={get:d,set:c};function f(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var m=r(62265),p=r(19820);let x=(0,n.createContext)(null),h=()=>(0,n.useContext)(x);function g(e){let{children:t,...r}=e,o=function(e){(0,l.useRouter)();let{isAdmin:t,isSuperUser:r,sys:a}=e,{setTheme:i}=(0,s.F)();(0,n.useEffect)(()=>{"yes"===a.data.hide_theme_toggle&&i("light")},[a]);let o=(0,n.useCallback)(()=>(t||r?f():"view")||"view",[r,t]),[d,c]=(0,n.useState)(o()),p=!t&&!r||"view"===d,x=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let a=function(e){return u.set("mode",e,{expires:31536e7}),f()}(...t);return m.Z.emit("mode_changed",o()),c(o()),a},[o]),h=(0,n.useCallback)(()=>{c(o())},[o]);return{...e,mode:d,viewOnly:p,onModeChange:h,getMode:f,setMode:x}}(r),[d,c]=(0,n.useState)(!1);return((0,i.Z)(()=>{c(!0)}),d)?(0,a.jsxs)(x.Provider,{value:o,children:[t,(0,a.jsx)(p.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:o.onModeChange}}]})]}):null}},98656:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var a=r(59625);let n={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},s=(0,a.Ue)(e=>({isOpen:!1,...n,alert:t=>e({isOpen:!0,...n,...t}),close:()=>e({isOpen:!1,onClose:void 0,...n})}))},72191:function(e,t,r){"use strict";function a(e){if(null==e)return null;let t="number"==typeof e?e:Number(e);return Number.isFinite(t)&&t>0?t:null}function n(e){var t,r;let n=a(null==e?void 0:e.dataVersion),s=a(null==e?void 0:null===(t=e.fullSnapshot)||void 0===t?void 0:t.dataVersion);return null!==(r=null!=n?n:s)&&void 0!==r?r:null}function s(e,t){return null==e||"string"==typeof e&&""===e.trim()?null:["timerValue","multiplier","minValue","maxValue"].includes(t.split(".").pop()||t)&&"number"==typeof e&&0===e?null:e}function l(e,t,r){let a=s(e,r),n=s(t,r);if(null===a&&null===n)return!0;if("object"!=typeof a||"object"!=typeof n)return a===n;try{return JSON.stringify(a)===JSON.stringify(n)}catch(e){return!1}}function i(e){let t=[],r=e.changes;if(Array.isArray(r))for(let e of r)if(e&&"object"==typeof e){let r=e.field||e.fieldPath||"Unknown field",a="previousValue"in e?e.previousValue:"oldValue"in e?e.oldValue:void 0,n="newValue"in e?e.newValue:"value"in e?e.value:e.updatedValue;l(a,n,r)||t.push({field:r,previousValue:a,newValue:n})}else l(void 0,e,"Unknown field")||t.push({field:"Unknown field",previousValue:void 0,newValue:e});else if(r&&"object"==typeof r&&"oldValues"in r&&"newValues"in r){let{oldValues:e=[],newValues:a=[]}=r,n=Math.max(e.length,a.length);for(let r=0;r<n;r++){let n=e[r]||{},s=a[r]||{},i=Object.keys({...n,...s})[0]||"field_".concat(r+1),o=n[i],d=s[i];l(o,d,i)||t.push({field:i,previousValue:o,newValue:d})}}if(!t.length&&"create"===e.action){let r=e.fullSnapshot;if(r&&"object"==typeof r)for(let[e,a]of Object.entries(r))l(void 0,a,e)||t.push({field:e,previousValue:void 0,newValue:a})}return t}function o(e){let t=(null==e?void 0:e.entityTitle)||(null==e?void 0:e.entityName);if("string"==typeof t&&t.trim().length)return t.trim();let r=e.fullSnapshot||{};for(let e of[null==r?void 0:r.title,null==r?void 0:r.name,null==r?void 0:r.label,null==r?void 0:r.printTitle,null==r?void 0:r.sectionTitle,null==r?void 0:r.collectionLabel,null==r?void 0:r.key])if("string"==typeof e&&e.trim().length)return e.trim();return"".concat(e.entityType," ").concat(e.entityId)}r.d(t,{EC:function(){return o},_b:function(){return i},y5:function(){return n}})},62265:function(e,t,r){"use strict";var a=r(68680),n=r(40257);let s=(0,a.io)(n.env.NEXT_PUBLIC_APP_URL);t.Z=s},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(61994),n=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},92451:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},71533:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},67782:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},7880:function(e,t,r){"use strict";r.d(t,{aU:function(){return z},$j:function(){return O},VY:function(){return Z},dk:function(){return L},aV:function(){return E},h_:function(){return P},fC:function(){return D},Dx:function(){return F},xz:function(){return T}});var a=r(2265),n=r(73966),s=r(98575),l=r(70001),i=r(6741),o=r(57437),d=Symbol("radix.slottable"),c="AlertDialog",[u,f]=(0,n.b)(c,[l.p8]),m=(0,l.p8)(),p=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,o.jsx)(l.fC,{...a,...r,modal:!0})};p.displayName=c;var x=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=m(r);return(0,o.jsx)(l.xz,{...n,...a,ref:t})});x.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,o.jsx)(l.h_,{...a,...r})};h.displayName="AlertDialogPortal";var g=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=m(r);return(0,o.jsx)(l.aV,{...n,...a,ref:t})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[b,y]=u(v),j=function(e){let t=({children:e})=>(0,o.jsx)(o.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=d,t}("AlertDialogContent"),N=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,c=m(r),u=a.useRef(null),f=(0,s.e)(t,u),p=a.useRef(null);return(0,o.jsx)(l.jm,{contentName:v,titleName:w,docsSlug:"alert-dialog",children:(0,o.jsx)(b,{scope:r,cancelRef:p,children:(0,o.jsxs)(l.VY,{role:"alertdialog",...c,...d,ref:f,onOpenAutoFocus:(0,i.Mj)(d.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=p.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(j,{children:n}),(0,o.jsx)(_,{contentRef:u})]})})})});N.displayName=v;var w="AlertDialogTitle",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=m(r);return(0,o.jsx)(l.Dx,{...n,...a,ref:t})});k.displayName=w;var C="AlertDialogDescription",R=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=m(r);return(0,o.jsx)(l.dk,{...n,...a,ref:t})});R.displayName=C;var V=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=m(r);return(0,o.jsx)(l.x8,{...n,...a,ref:t})});V.displayName="AlertDialogAction";var A="AlertDialogCancel",S=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=y(A,r),i=m(r),d=(0,s.e)(t,n);return(0,o.jsx)(l.x8,{...i,...a,ref:d})});S.displayName=A;var _=e=>{let{contentRef:t}=e,r="`".concat(v,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(v,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(v,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},D=p,T=x,P=h,E=g,Z=N,z=V,O=S,F=k,L=R},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});var a=r(2265);function n(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[6137,2696,3186,9327,5972,3464,3238,7790,604,8813,5262,7478,2117,1744],function(){return e(e.s=50681)}),_N_E=e.O()}]);