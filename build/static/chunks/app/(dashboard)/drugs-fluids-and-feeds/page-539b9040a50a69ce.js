(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3638],{58039:function(e,l,i){Promise.resolve().then(i.bind(i,2400)),Promise.resolve().then(i.bind(i,25704))},80929:function(e,l,i){"use strict";i.d(l,{A:function(){return S}});var s=i(57437),a=i(2265),n=i(16463),t=i(12491),r=i(20920),d=i(5192),o=i(95317),c=i(46294),u=i(80852),m=i(86466),h=i(50495),x=i(83102),g=i(93146),v=i(67135),f=i(39661),y=i(44371),p=i(83146),j=i(76230),b=i(74166),N=i(71239),w=i(17647),C=i(42314),F=i(72341);let I=e=>{if(e)return(null==e?void 0:e.key)||(null==e?void 0:e.drug)||(null==e?void 0:e.feed)||(null==e?void 0:e.fluid)||(null==e?void 0:e.name)||(null==e?void 0:e.title)||void 0},A=[{value:"drug",label:"Drug"},{value:"fluid",label:"Fluid"}],k=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"drug";return{itemId:"".concat((null==e?void 0:e.itemId)||(0,r.Z)()),type:"".concat((null==e?void 0:e.type)||l),key:"".concat((null==e?void 0:e.key)||""),keyId:"".concat((null==e?void 0:e.keyId)||""),drug:"".concat((null==e?void 0:e.drug)||""),minGestation:"".concat((null==e?void 0:e.minGestation)===null?"":null==e?void 0:e.minGestation),maxGestation:"".concat((null==e?void 0:e.maxGestation)===null?"":null==e?void 0:e.maxGestation),minWeight:"".concat((null==e?void 0:e.minWeight)===null?"":null==e?void 0:e.minWeight),maxWeight:"".concat((null==e?void 0:e.maxWeight)===null?"":null==e?void 0:e.maxWeight),minAge:"".concat((null==e?void 0:e.minAge)===null?"":null==e?void 0:e.minAge),maxAge:"".concat((null==e?void 0:e.maxAge)===null?"":null==e?void 0:e.maxAge),dosage:"".concat((null==e?void 0:e.dosage)===null?"":null==e?void 0:e.dosage),dosageMultiplier:"".concat((null==e?void 0:e.dosageMultiplier)===null?"":null==e?void 0:e.dosageMultiplier),hourlyFeed:"".concat((null==e?void 0:e.hourlyFeed)===null?"":null==e?void 0:e.hourlyFeed),hourlyFeedDivider:"".concat((null==e?void 0:e.hourlyFeedDivider)===null?"":null==e?void 0:e.hourlyFeedDivider),dayOfLife:"".concat((null==e?void 0:e.dayOfLife)||""),dosageText:"".concat((null==e?void 0:e.dosageText)||""),managementText:"".concat((null==e?void 0:e.managementText)||""),gestationKey:"".concat((null==e?void 0:e.gestationKey)||""),weightKey:"".concat((null==e?void 0:e.weightKey)||""),diagnosisKey:"".concat((null==e?void 0:e.diagnosisKey)||""),gestationKeyId:"".concat((null==e?void 0:e.gestationKeyId)||""),weightKeyId:"".concat((null==e?void 0:e.weightKeyId)||""),diagnosisKeyId:"".concat((null==e?void 0:e.diagnosisKeyId)||""),condition:"".concat((null==e?void 0:e.condition)||""),administrationFrequency:"".concat((null==e?void 0:e.administrationFrequency)||""),drugUnit:"".concat((null==e?void 0:e.drugUnit)||""),routeOfAdministration:"".concat((null==e?void 0:e.routeOfAdministration)||""),ageKey:"".concat((null==e?void 0:e.ageKey)||""),ageKeyId:"".concat((null==e?void 0:e.ageKeyId)||""),validationType:"".concat((null==e?void 0:e.validationType)||"default")}},D=e=>{if(!e)return null;let{isDraft:l,draftCreatedByUserId:i,isDeleted:s,preferences:a,...n}=e;return{...n}};function S(e){let{disabled:l,item:i,floating:r,onChange:S}=e,K=(0,N.v)({isDraft:!!(null==i?void 0:i.isDraft),userId:null==i?void 0:i.draftCreatedByUserId});l=l||K;let T=(0,n.useRouter)(),L=(0,n.useSearchParams)(),G=(0,a.useMemo)(()=>t.Z.parse(L.toString()),[L]),{itemId:_,addItem:W}=G,[M,Z]=(0,d.Z)(),[E,O]=(0,d.Z)(),[V,z]=(0,a.useState)(!1),[q,U]=(0,a.useState)(k(i,W)),{keys:Q,loading:B}=(0,y.a)(),{authenticatedUser:R}=(0,w.b)(),{confirm:P}=(0,j.t)(),$=(0,a.useRef)(null),X=(0,a.useRef)(null),Y=(0,a.useRef)(null);(0,a.useEffect)(()=>{z(!!_||!!W)},[_,W]),(0,a.useEffect)(()=>{U(k(i,W))},[i,W]),(0,a.useEffect)(()=>{if(!(null==i?void 0:i.itemId)){$.current=null,X.current=null,Y.current=null;return}if(Y.current===i.itemId&&$.current)return;let e=(0,C.$u)({entityId:i.itemId,entityType:"drugsLibraryItem",userId:null==R?void 0:R.userId,userName:null==R?void 0:R.displayName,entityTitle:I(i)||"Drugs Library Item",resolveEntityTitle:e=>I(e)||void 0}),l=D(i);l&&(e.setSnapshot(l),X.current=l),$.current=e,Y.current=i.itemId},[i,null==R?void 0:R.userId,null==R?void 0:R.displayName]);let H=(0,a.useCallback)(async()=>{let e={...q,minWeight:q.minWeight?Number(q.minWeight):null,maxWeight:q.maxWeight?Number(q.maxWeight):null,minGestation:q.minGestation?Number(q.minGestation):null,maxGestation:q.maxGestation?Number(q.maxGestation):null,hourlyFeed:q.hourlyFeed?Number(q.hourlyFeed):null,hourlyFeedDivider:q.hourlyFeedDivider?Number(q.hourlyFeedDivider):null,minAge:q.minAge?Number(q.minAge):null,maxAge:q.maxAge?Number(q.maxAge):null,dosage:q.dosage?Number(q.dosage):null,dosageMultiplier:q.dosageMultiplier?Number(q.dosageMultiplier):null,type:q.type},l=D(e),s=e.itemId,a=async()=>{try{if(!i&&l&&s){let i=(await F.pb.getEntityChanges(s,"drugsLibraryItem")).find(e=>"create"===e.action),a=I(e)||"Drugs Library Item",n=I(e)||"New Library Item";(null==i?void 0:i.id)?await F.pb.updateChange(i.id,{fieldName:n,newValue:l,timestamp:Date.now(),userId:null==R?void 0:R.userId,userName:null==R?void 0:R.displayName,entityTitle:a,fullSnapshot:l}):await F.pb.addChange({entityType:"drugsLibraryItem",entityId:s,entityTitle:a,action:"create",fieldPath:"drugsLibraryItem",fieldName:n,oldValue:null,newValue:l,userId:null==R?void 0:R.userId,userName:null==R?void 0:R.displayName,fullSnapshot:l})}else $.current&&X.current&&l&&await $.current.trackChanges(l,"Drugs library item saved")}catch(e){console.error("Failed to track drugs library changes",e)}await S(e),z(!1)};i&&q.key!==(null==i?void 0:i.key)?P(()=>{a()},{danger:!0,title:"Confirm key change",message:'\n                    <p class="text-xl">Are you sure you want to change key?</p>\n                    <p>All references to the old key ('.concat(i.key,") will also be updated to: ").concat(q.key,"</p>\n                "),positiveLabel:"Yes, keep changes",negativeLabel:"No, do not save"}):await a()},[q,i,S,P,null==R?void 0:R.userId,null==R?void 0:R.displayName]),J=(0,a.useCallback)(()=>{z(!1),U(k(void 0,W)),T.push("?".concat(t.Z.stringify({...G,itemId:void 0,addItem:void 0})));let e=(null==Z?void 0:Z.top)||0;setTimeout(()=>window.scrollTo({top:e}),500)},[G,Z,T,W]),{isFormComplete:ee,isDrug:el,isFluid:ei,validateWithCondition:es}=(0,a.useMemo)(()=>{let e="drug"===q.type,l="fluid"===q.type,i="condition"===q.validationType,s=!!(q.type&&q.key&&q.drug&&q.managementText&&q.dosageText&&q.administrationFrequency&&q.drugUnit&&q.routeOfAdministration&&q.dosage&&i?q.condition:q.weightKey&&q.minWeight&&q.maxWeight&&q.gestationKey&&q.minGestation&&q.maxGestation&&q.ageKey&&q.minAge&&q.maxAge&&Number(q.minGestation||"0")<=Number(q.maxGestation||"0")&&Number(q.minWeight||"0")<=Number(q.maxWeight||"0")&&Number(q.minAge||"0")<=Number(q.maxAge||"0")&&(!e||q.diagnosisKey)&&(!l||q.condition&&q.hourlyFeed&&q.hourlyFeedDivider&&Number(q.hourlyFeed||"0")<=Number(q.hourlyFeed||"0")&&Number(q.hourlyFeedDivider||"0")<=Number(q.hourlyFeedDivider||"0")));return{isDrug:e,isFluid:l,isFormComplete:s,validateWithCondition:i}},[q]),ea=(0,a.useCallback)(()=>!ee||B||l,[ee,B,l]),en=(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"type",children:"Type *"}),(0,s.jsxs)(c.Ph,{value:q.type,required:!0,name:"type",disabled:l,onValueChange:e=>{let l=k((null==i?void 0:i.type)===e?i:void 0,W);P(()=>U(i=>({...i,type:e,hourlyFeed:l.hourlyFeed,hourlyFeedDivider:l.hourlyFeedDivider,condition:l.condition,diagnosisKey:l.diagnosisKey,drugUnit:l.drugUnit})),{danger:!0,title:"Confirm type change",message:'\n                                <p class="text-xl">Are you sure you want to change type?</p>\n                                <ol style="list-style:auto;margin:10px;">\n                                    <li>Some fields will be cleared as they do not apply on all types!</li>\n                                    <li>All references to this '.concat(q.type," will be removed.</li>\n                                </ol>\n                            "),positiveLabel:"Yes, change type",negativeLabel:"No, keep the current type"})},children:[(0,s.jsx)(c.i4,{children:(0,s.jsx)(c.ki,{placeholder:"Select type"})}),(0,s.jsx)(c.Bw,{children:(0,s.jsx)(c.DI,{children:A.map(e=>(0,s.jsx)(c.Ql,{value:e.value,children:e.label},e.value))})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"key",children:"Key *"}),(0,s.jsx)(x.I,{name:"key",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.key,disabled:l,onChange:e=>U(l=>({...l,key:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"drug",children:[(0,b.Z)(q.type)," *"]}),(0,s.jsx)(x.I,{name:"drug",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.drug,disabled:l,onChange:e=>U(l=>({...l,drug:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"condition",children:["Condition ",es?"*":""]}),(0,s.jsx)(g.g,{rows:3,name:"condition",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.condition,disabled:l,onChange:e=>U(l=>({...l,condition:e.target.value}))}),(0,s.jsxs)("span",{className:"font-bold opacity-50 text-xs",children:["e.g ",p._S]})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(m.X,{name:"validationType",id:"validationType",disabled:l,checked:"condition"===q.validationType,onCheckedChange:e=>U(e=>({...e,validationType:"condition"===e.validationType?"default":"condition"}))}),(0,s.jsx)(v._,{secondary:!0,htmlFor:"validationType",children:"Validate with conditional expression only"})]}),el&&(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"diagnosisKey",children:["Diagnosis Key ",es?"":"*"]}),(0,s.jsx)(g.g,{rows:3,name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.diagnosisKey,disabled:l,onChange:e=>U(l=>({...l,diagnosisKey:e.target.value}))}),(0,s.jsx)("span",{className:"font-bold opacity-50 text-xs",children:"e.g NSep,Premature,Dehyd"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"gestationKey",children:["Gestation Key ",es?"":"*"]}),(0,s.jsx)(u.L,{modal:!0,value:"".concat(q.gestationKey||""),disabled:l,onChange:e=>{let[l]=e;U(e=>({...e,gestationKey:l.name,gestationKeyId:null==l?void 0:l.uniqueKey}))}})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"minGestation",children:["Min Gestation (weeks) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"minGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.minGestation,type:"number",disabled:l,onChange:e=>{let l=e.target.value,i=q.maxGestation;l||(i=""),U(e=>({...e,minGestation:l,maxGestation:i}))}})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"maxGestation",error:Number(q.minGestation||"0")>Number(q.maxGestation||"0"),children:["Max Gestation (weeks) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"maxGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.maxGestation,type:"number",disabled:l||!q.minGestation,min:q.minGestation,error:Number(q.minGestation||"0")>Number(q.maxGestation||"0"),onChange:e=>U(l=>({...l,maxGestation:e.target.value}))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"weightKey",children:["Weight Key ",es?"":"*"]}),(0,s.jsx)(u.L,{modal:!0,value:"".concat(q.weightKey||""),disabled:l,onChange:e=>{let[l]=e;U(e=>({...e,weightKey:l.name,weightKeyId:null==l?void 0:l.uniqueKey}))}})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"minWeight",children:["Min Weight (grams) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"minWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.minWeight,type:"number",disabled:l,onChange:e=>{let l=e.target.value,i=q.maxWeight;l||(i=""),U(e=>({...e,minWeight:l,maxWeight:i}))}})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"maxWeight",error:Number(q.minWeight||"0")>Number(q.maxWeight||"0"),children:["Max Weight (grams) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"maxWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.maxWeight,type:"number",disabled:l||!q.minWeight,min:q.minWeight,error:Number(q.minWeight||"0")>Number(q.maxWeight||"0"),onChange:e=>U(l=>({...l,maxWeight:e.target.value}))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"ageKey",children:["Day of Life (Age) Key ",es?"":"*"]}),(0,s.jsx)(u.L,{modal:!0,value:"".concat(q.ageKey||""),disabled:l,onChange:e=>{let[l]=e;U(e=>({...e,ageKey:l.name,ageKeyId:null==l?void 0:l.uniqueKey}))}})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"minAge",children:["Min Day of Life (Age - hours) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"minAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.minAge,type:"number",disabled:l,onChange:e=>{let l=e.target.value,i=q.maxAge;l||(i=""),U(e=>({...e,minAge:l,maxAge:i}))}})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"maxAge",error:Number(q.minAge||"0")>Number(q.maxAge||"0"),children:["Max Day of Life (Age - hours) ",es?"":"*"]}),(0,s.jsx)(x.I,{name:"maxAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.maxAge,type:"number",disabled:l||!q.minAge,min:q.minAge,error:Number(q.minAge||"0")>Number(q.maxAge||"0"),onChange:e=>U(l=>({...l,maxAge:e.target.value}))})]})]}),ei&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"hourlyFeed",children:"Hourly feed *"}),(0,s.jsx)(x.I,{name:"hourlyFeed",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.hourlyFeed,type:"number",disabled:l,onChange:e=>U(l=>({...l,hourlyFeed:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"hourlyFeedDivider",children:"Hourly feed divider *"}),(0,s.jsx)(x.I,{name:"hourlyFeedDivider",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.hourlyFeedDivider,type:"number",disabled:l,onChange:e=>U(l=>({...l,hourlyFeedDivider:e.target.value}))})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(v._,{secondary:!0,htmlFor:"dosage",children:["Dose (e.g. ",ei?"ml/kg/24hrs":"mg/kg",") *"]}),(0,s.jsx)(x.I,{name:"dosage",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.dosage,disabled:l,onChange:e=>U(l=>({...l,dosage:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"dosageMultiplier",children:"Drug Dose Multiplier *"}),(0,s.jsx)(x.I,{name:"dosageMultiplier",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.dosageMultiplier,disabled:l,onChange:e=>U(l=>({...l,dosageMultiplier:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"drugUnit",children:"Drug Unit *"}),(0,s.jsx)(x.I,{name:"drugUnit",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.drugUnit,disabled:l,onChange:e=>U(l=>({...l,drugUnit:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"administrationFrequency",children:"Administration Frequency *"}),(0,s.jsx)(x.I,{name:"administrationFrequency",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.administrationFrequency,disabled:l,onChange:e=>U(l=>({...l,administrationFrequency:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"routeOfAdministration",children:"Route of Administration *"}),(0,s.jsx)(x.I,{name:"routeOfAdministration",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.routeOfAdministration,disabled:l,onChange:e=>U(l=>({...l,routeOfAdministration:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"managementText",children:"Management text *"}),(0,s.jsx)(x.I,{name:"managementText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.managementText,disabled:l,onChange:e=>U(l=>({...l,managementText:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v._,{secondary:!0,htmlFor:"weight",children:"Dosage text *"}),(0,s.jsx)(x.I,{name:"dosageText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:q.dosageText,disabled:l,onChange:e=>U(l=>({...l,dosageText:e.target.value}))})]})]});return(0,s.jsxs)(s.Fragment,{children:[B&&(0,s.jsx)(f.a,{overlay:!0}),(0,s.jsx)("div",{ref:M,children:!1===r?en:(0,s.jsx)(o.yo,{open:V,onOpenChange:e=>{e||J()},children:(0,s.jsxs)(o.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col w-full max-w-full sm:max-w-[80%] md:max-w-[80%] lg:max-w-[50%]",children:[(0,s.jsxs)(o.Tu,{className:"flex flex-row items-center py-2 px-4 border-b border-b-border text-left sm:text-left",children:[(0,s.jsxs)(o.bC,{children:[W?"Add":"",_?"Edit":""," ",(null==i?void 0:i.type)||W]}),(0,s.jsx)(o.Ei,{className:"hidden"})]}),(0,s.jsx)("div",{ref:E,className:"flex-1 py-2 px-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"px-4",children:en})}),(0,s.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex gap-x-2",children:[(0,s.jsx)("span",{className:"text-danger text-xs my-auto",children:"* Required"}),(0,s.jsx)("div",{className:"ml-auto"}),(0,s.jsx)(o.sw,{asChild:!0,children:(0,s.jsx)(h.z,{variant:"ghost",onClick:()=>{},children:"Cancel"})}),(0,s.jsx)(h.z,{onClick:()=>H(),disabled:ea(),children:"Save"})]})]})})})]})}},2400:function(e,l,i){"use strict";i.d(l,{DrugsLibrary:function(){return B}});var s=i(57437),a=i(2265),n=i(37440),t=i(76230),r=i(39661),d=i(44380),o=i(50495),c=i(64344),u=i(44371),m=i(17647),h=i(17501),x=i(80929),g=i(42421),v=i(87138),f=i(46910);function y(e){let{addDrugLink:l,addFluidLink:i}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(f.h_,{children:[(0,s.jsx)(f.$F,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"outline",children:[(0,s.jsx)("span",{children:"Add"}),(0,s.jsx)(g.Z,{className:"w-4 h-4 ml-2"})]})}),(0,s.jsxs)(f.AW,{children:[(0,s.jsx)(f.Xi,{asChild:!0,children:(0,s.jsx)(v.default,{href:l,children:"New drug"})}),(0,s.jsx)(f.Xi,{asChild:!0,children:(0,s.jsx)(v.default,{href:i,children:"New fluid"})})]})]})})}var p=i(58184),j=i(38472),b=i(39343),N=i(53853),w=i(67135),C=i(86466),F=i(53699),I=i(90837),A=i(46294);function k(e){var l;let{uuids:i}=e,[t,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),{alert:m}=(0,F.s)(),{sites:h,loading:x,loadSites:g}=(0,N.k)({loadOnMount:!1,onLoadSitesError:()=>d(!1)}),{formState:{errors:v},reset:f,watch:y,setValue:k,register:D,handleSubmit:S,setError:K}=(0,b.cI)({defaultValues:{siteId:"",overwriteExisting:!1}}),T=y("siteId"),L=y("overwriteExisting"),G=c||x,_=!!T&&!G,W=S(async e=>{try{var l;if(e.siteId||K("siteId",{message:"Site is required"}),!_)return;u(!0);let s=(await j.Z.post("/api/drugs-library/export",{...e,uuids:i})).data;if(null===(l=s.errors)||void 0===l?void 0:l.length)throw Error(s.errors.join(", "));m({variant:"success",title:"Success",message:"Data exported successfully!",onClose:()=>d(!1)})}catch(e){m({variant:"error",title:"Error",message:"Failed to export: "+e.message})}finally{u(!1)}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I.Vq,{open:t,onOpenChange:e=>{f(),e&&g(),d(e)},children:[(0,s.jsx)(I.hg,{asChild:!0,children:(0,s.jsxs)(o.z,{className:"h-auto w-auto",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:i.length>1?"Export ".concat(i.length):"Export"})]})}),(0,s.jsxs)(I.cZ,{children:[(0,s.jsxs)(I.fK,{children:[(0,s.jsx)(I.$N,{children:"Export"}),(0,s.jsx)(I.Be,{className:"hidden",children:""})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"siteId",children:"Site *"}),(0,s.jsxs)(A.Ph,{name:"siteId",onValueChange:e=>k("siteId",e,{shouldDirty:!0}),children:[(0,s.jsx)(A.i4,{children:(0,s.jsx)(A.ki,{placeholder:"Select site"})}),(0,s.jsx)(A.Bw,{children:(0,s.jsxs)(A.DI,{children:[(0,s.jsx)(A.n5,{children:"Sites"}),h.map(e=>{let{siteId:l,name:i}=e;return(0,s.jsx)(A.Ql,{value:l,children:i},l)})]})})]}),!!(null===(l=v.siteId)||void 0===l?void 0:l.message)&&(0,s.jsx)("div",{className:"text-xs text-danger mt-1",children:v.siteId.message})]}),(0,s.jsxs)("div",{className:(0,n.cn)("flex gap-x-2"),children:[(0,s.jsx)(C.X,{name:"overwriteExisting",id:"overwriteExisting",checked:L,onCheckedChange:()=>k("overwriteExisting",!L,{shouldDirty:!0})}),(0,s.jsx)(w._,{secondary:!0,htmlFor:"overwriteExisting",children:"Overwrite existing"})]})]}),(0,s.jsxs)(I.cN,{children:[(0,s.jsx)(I.GG,{asChild:!0,children:(0,s.jsx)(o.z,{variant:"ghost",children:"Cancel"})}),(0,s.jsxs)(o.z,{onClick:W,disabled:!_,children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),G&&(0,s.jsx)(r.a,{overlay:!0})]})}function D(e){let{sortBy:l,typeFilter:i,statusFilter:a,onSortChange:n,onFilterChange:t}=e;return(0,s.jsx)("div",{className:"p-4 flex flex-col gap-y-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,s.jsx)("div",{className:"text-2xl",children:"Drugs & Fluids Library"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-wrap items-center justify-end gap-x-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(A.Ph,{value:l,onValueChange:n,children:[(0,s.jsx)(A.i4,{className:"w-[140px]",children:(0,s.jsx)(A.ki,{placeholder:"Sort"})}),(0,s.jsxs)(A.Bw,{children:[(0,s.jsx)(A.Ql,{value:"name-asc",children:"Name (A-Z)"}),(0,s.jsx)(A.Ql,{value:"name-desc",children:"Name (Z-A)"}),(0,s.jsx)(A.Ql,{value:"type-asc",children:"Type (A-Z)"}),(0,s.jsx)(A.Ql,{value:"type-desc",children:"Type (Z-A)"}),(0,s.jsx)(A.Ql,{value:"key-asc",children:"Key (A-Z)"}),(0,s.jsx)(A.Ql,{value:"key-desc",children:"Key (Z-A)"})]})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)(A.Ph,{value:i||a||"all",onValueChange:e=>{"all"===e?t("",""):"drug"===e||"fluid"===e?t(e,""):("draft"===e||"published"===e)&&t("",e)},children:[(0,s.jsx)(A.i4,{className:"w-[140px]",children:(0,s.jsx)(A.ki,{placeholder:"All items"})}),(0,s.jsxs)(A.Bw,{children:[(0,s.jsx)(A.Ql,{value:"all",children:"All items"}),(0,s.jsx)(A.U$,{}),(0,s.jsxs)(A.DI,{children:[(0,s.jsx)(A.n5,{children:"Status"}),(0,s.jsx)(A.Ql,{value:"published",children:"Published"}),(0,s.jsx)(A.Ql,{value:"draft",children:"Draft"})]}),(0,s.jsx)(A.U$,{}),(0,s.jsxs)(A.DI,{children:[(0,s.jsx)(A.n5,{children:"Types"}),(0,s.jsx)(A.Ql,{value:"drug",children:"Drugs"}),(0,s.jsx)(A.Ql,{value:"fluid",children:"Fluids"})]})]})]})})]})]})})}var S=i(45188),K=i(6649),T=i(75733),L=i(6884),G=i(23787),_=i(90399),W=i(61386),M=i(71239);function Z(e){let{item:l,disabled:i,copyDrugs:a,deleteDrugs:n,editLink:r}=e,{confirm:d}=(0,t.t)(),c={isDraft:!!l.isDraft,userId:l.draftCreatedByUserId,dataType:l.type},u=(0,M.v)(c);return i=i||u,(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(W.O,{...c}),(0,s.jsxs)(f.h_,{children:[(0,s.jsx)(f.$F,{asChild:!0,children:(0,s.jsx)(o.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,s.jsx)(S.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(f.AW,{children:[(0,s.jsx)(f.Xi,{asChild:!0,children:(0,s.jsx)(v.default,{href:r("".concat(l.itemId)),children:(0,s.jsx)(s.Fragment,{children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"mr-2 h-4 w-4"})," View"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.Z,{className:"mr-2 h-4 w-4"})," Edit"]})})})}),!i&&(0,s.jsx)(f.Xi,{onClick:()=>setTimeout(()=>{d(()=>a([l.itemId]),{title:"Copy drug",message:"Are you sure you want to copy drug?<br /> <b>".concat(l.drug,"</b>"),positiveLabel:"Yes, copy",negativeLabel:"Cancel"})},0),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.Z,{className:"mr-2 h-4 w-4"})," Copy"]})}),(0,s.jsx)(f.Xi,{asChild:!0,children:(0,s.jsxs)(v.default,{target:"_blank",href:"/drugs-fluids-and-feeds/".concat(l.itemId,"/metadata"),children:[(0,s.jsx)(G.Z,{className:"mr-2 h-4 w-4"}),"View metadata"]})}),!i&&(0,s.jsxs)(f.Xi,{onClick:()=>setTimeout(()=>{d(()=>n([l.itemId]),{title:"Delete drug",message:"Are you sure you want to delete drug?",positiveLabel:"Yes, delete",negativeLabel:"Cancel",danger:!0})},0),className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,s.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})]})}var E=i(26975),O=i(36013),V=i(89229),z=i(43088);function q(e){let{search:l,setSearch:i,onSearch:a}=e,n=e=>{i(l=>l.value?{...l,filter:e,results:(0,z.UZ)({searchValue:l.value,filter:e,results:l.unfilteredResults})}:{...l,filter:e})};return(0,s.jsxs)(s.Fragment,{children:[l.searching&&(0,s.jsx)(r.a,{overlay:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-2 sm:flex-row sm:items-center sm:gap-x-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(V.M,{placeholder:"Search by key, title, label...",onSearch:a})}),!!l.value&&(0,s.jsx)("div",{className:"w-full sm:w-[200px]",children:(0,s.jsxs)(A.Ph,{value:l.filter,onValueChange:e=>n(e),children:[(0,s.jsx)(A.i4,{children:(0,s.jsx)(A.ki,{placeholder:"All matches"})}),(0,s.jsx)(A.Bw,{children:z.kv.map(e=>(0,s.jsx)(A.Ql,{value:e.value,children:e.label},e.value))})]})})]})]})}var U=i(37164);function Q(){return(0,s.jsx)(o.z,{asChild:!0,variant:"outline",children:(0,s.jsxs)(v.default,{href:"/drugs-fluids-and-feeds/metadata",target:"_blank",children:[(0,s.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Export metadata"]})})}function B(e){let{}=e,{confirm:l}=(0,t.t)(),{viewOnly:i}=(0,m.b)(),[g,v]=(0,a.useState)([]),{filteredDrugs:f,tableData:p,loading:j,addLink:b,selectedItemId:N,editLink:w,saveDrugs:C,deleteDrugs:F,copyDrugs:I,search:A,setSearch:S,onSearch:K,typeFilter:T,statusFilter:L,sortBy:G,setTypeFilter:_,setStatusFilter:W,setSortBy:M}=(0,u.a)(),V=(0,a.useMemo)(()=>i,[i]),z=A.results,U=(0,a.useMemo)(()=>{let e=new Map;return z.forEach(l=>{(null==l?void 0:l.itemId)&&e.set(l.itemId,l)}),e},[z]),B=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),R=(0,a.useCallback)(e=>{let l="".concat(null!=e?e:"");if(!A.value)return l;let i=A.value.toLowerCase();if(!l.toLowerCase().includes(i))return l;let a=RegExp("(".concat(B(A.value),")"),"gi");return l.split(a).map((e,l)=>e?e.toLowerCase()===i?(0,s.jsx)("mark",{className:"rounded bg-yellow-200 px-1",children:e},l):(0,s.jsx)("span",{children:e},l):null)},[A.value]);return(0,s.jsxs)(s.Fragment,{children:[j&&(0,s.jsx)(r.a,{overlay:!0}),(0,s.jsx)(x.A,{disabled:V,item:f.filter(e=>e.itemId===N)[0],onChange:C}),!!g.length&&(0,s.jsxs)(h.h,{children:[(0,s.jsx)(k,{uuids:f.filter((e,l)=>g.includes(l)).map(e=>e.itemId)}),(0,s.jsxs)(o.z,{variant:"destructive",onClick:()=>setTimeout(()=>{l(()=>F(f.filter((e,l)=>g.includes(l)).map(e=>e.itemId)),{title:"Delete drugs",message:"Are you sure you want to delete drugs?",positiveLabel:"Yes, delete",negativeLabel:"Cancel",danger:!0})},0),children:["Delete ",g.length<2?"":g.length+" items"]})]}),(0,s.jsx)(D,{sortBy:G,typeFilter:T,statusFilter:L,onSortChange:M,onFilterChange:(e,l)=>{_(e),W(l)}}),(0,s.jsx)("div",{className:"px-4 pb-4",children:(0,s.jsx)(q,{search:A,setSearch:S,onSearch:K})}),(0,s.jsx)(c.Separator,{}),(0,s.jsx)(d.DataTable,{onSelect:v,selectable:!V,headerActions:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)(Q,{}),(0,s.jsx)(y,{addDrugLink:b("drug"),addFluidLink:b("fluid")})]}),rowRenderer:A.value?e=>{let{props:l,cells:i,rowIndex:a}=e,t=f[a],r=t?U.get(t.itemId):void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.SC,{...l,children:i}),r&&r.matches.length?(0,s.jsx)(E.SC,{...l,className:(0,n.cn)(l.className,"bg-yellow-50 hover:bg-yellow-50"),children:(0,s.jsx)(E.pj,{colSpan:i.length,className:"border-t p-0",children:(0,s.jsx)(O.Zb,{className:"m-4 border-none bg-white shadow-none",children:(0,s.jsx)("div",{className:"flex flex-col divide-y text-xs",children:r.matches.map((e,l)=>(0,s.jsxs)("div",{className:"flex flex-col gap-y-1 px-4 py-3 sm:flex-row sm:items-center sm:gap-x-4",children:[(0,s.jsxs)("span",{className:"font-medium text-muted-foreground",children:[e.fieldLabel,e.context?" (".concat(e.context,")"):""]}),(0,s.jsx)("span",{className:"text-foreground sm:ml-auto sm:text-right",children:R(e.fieldValue)})]},"".concat(e.field,"-").concat(l,"-").concat(e.fieldValue)))})})})}):null]})}:void 0,getRowOptions:e=>{let{rowIndex:l}=e,i=f[l];return i?{className:(0,n.cn)(i.isDraft&&"bg-danger/20 hover:bg-danger/30")}:{}},columns:[{name:"Drug / Fluid"},{name:"Type",tdClassName:"w-[80px]"},{name:"Key"},{name:"Dosage text"},{name:"",align:"right",cellRenderer(e){let{value:l}=e,i=f.filter(e=>e.itemId===l)[0];return i?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Z,{item:i,disabled:V,copyDrugs:I,deleteDrugs:F,editLink:w})}):null}}],data:p})]})}},89229:function(e,l,i){"use strict";i.d(l,{M:function(){return t}});var s=i(57437),a=i(2265),n=i(37440);let t=(0,a.forwardRef)((e,l)=>{let{searchButton:i,hideSearchButton:t,onSearch:r,...d}=e,[o,c]=(0,a.useState)("");return(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),null==r||r(o)},children:(0,s.jsxs)("div",{className:(0,n.cn)("flex w-full"),children:[(0,s.jsx)("div",{className:(0,n.cn)("relative w-full"),children:(0,s.jsx)("input",{ref:l,type:"search",placeholder:"Search",value:o,...d,onChange:e=>{var l;let i=e.target.value;c(i),null===(l=d.onChange)||void 0===l||l.call(d,e),i||null==r||r(i)},className:(0,n.cn)("w-full pl-4 py-2 rounded-l-full border focus:outline-none focus:border-secondary bg-transparent",d.className)})}),!t&&(0,s.jsx)("button",{type:"submit",className:(0,n.cn)("px-5 py-2.5 transition-colors bg-transparent border border-l-0 rounded-r-full hover:bg-secondary/10 disabled:opacity-50 disabled:cursor-not-allowed",null==i?void 0:i.className),...i,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})})]})})});t.displayName="SearchInput"},80852:function(e,l,i){"use strict";i.d(l,{L:function(){return r}});var s=i(57437),a=i(2265),n=i(84492),t=i(23920);function r(e){let{value:l,type:i,disabled:r,modal:d,multiple:o,placeholder:c,error:u,onChange:m,filterDataKeys:h}=e,{allDataKeys:x,extractDataKeys:g}=(0,t.M)(),v=(0,a.useMemo)(()=>{let e=x;return i&&""!==i.trim()&&(e=e.filter(e=>e.dataType===i)),h&&(e=e.filter(h)),e.map(e=>({label:e.name,value:e.uniqueKey,caption:e.dataType||"",description:e.label}))},[x,i,h]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.V,{multiple:o,modal:d,error:u,placeholder:"".concat(l||"")||c||"Select key",search:{placeholder:"Search data keys"},options:v,onSelect:e=>{let l=g(e.map(e=>e.value)).map(e=>({...e,children:g(e.options)}));null==m||m(l)}})})}},84492:function(e,l,i){"use strict";i.d(l,{V:function(){return m}});var s=i(57437),a=i(2265),n=i(1282),t=i(22468),r=i(50495),d=i(83102),o=i(90837),c=i(37440),u=i(85937);function m(e){let{options:l,selected:i,...a}=e;i=Array.isArray(i)?i:i?[i]:[];let n=l.map(e=>({...e,value:"".concat(e.value)})),t=i.map(e=>"".concat(e));if(!a.multiple){let[e]=Array.isArray(t)?t:[t];e&&n.find(l=>l.value===e)}return(0,s.jsx)(h,{...a,options:n,selected:t})}function h(e){var l;let{modal:i,header:m,placeholder:h,search:x,multiple:g=!1,error:v=!1,disabled:f=!1,selected:y,options:p=[],trigger:j,onTrigger:b,onSelect:N}=e,[w,C]=(0,a.useState)(""),F=(0,u.N)(w),[I,A]=(0,a.useState)([]),k=(0,a.useMemo)(()=>y?Array.isArray(y)?y.map(e=>p.find(l=>(null==l?void 0:l.value)===e)).map(e=>e):p.filter(e=>(null==e?void 0:e.value)===y)||[]:[],[y,p]),D=(0,a.useMemo)(()=>p.map(e=>{let l=k.map(e=>null==e?void 0:e.value).map(e=>"".concat(e||"")).filter(e=>e).includes("".concat(null==e?void 0:e.value));return l=l||I.includes(e.value),{...e,isSelected:l}}).sort((e,l)=>(e.disabled?1:0)-(l.disabled?1:0)).sort((e,l)=>{let i=e.isSelected?1:0;return(l.isSelected?1:0)-i}).filter(e=>JSON.stringify([e.value||"",e.label||"",e.description||""]).toLowerCase().match(F.toLowerCase())),[p,F,k,I]);return(0,a.useEffect)(()=>()=>C(""),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.Vq,{modal:i,onOpenChange:()=>{C(""),A([])},children:[(0,s.jsx)(o.hg,{asChild:!0,children:j||(0,s.jsxs)(r.z,{disabled:f,variant:"outline",className:(0,c.cn)("justify-between w-full",v&&"border border-destructive hover:bg-destructive/10"),onClick:b,children:[(0,s.jsx)("span",{className:k.length?"":"opacity-50",children:(null===(l=k[0])||void 0===l?void 0:l.label)||h||""}),(0,s.jsx)(n.Z,{className:"size-4 opacity-50"})]})}),(0,s.jsxs)(o.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,s.jsxs)(o.fK,{className:"border-b border-b-border px-4 py-4",children:[(0,s.jsx)(o.$N,{className:"hidden",children:""}),(0,s.jsx)(o.Be,{className:"hidden",children:""}),(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[x?(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(d.I,{type:"search",placeholder:x.placeholder||"",value:w,onChange:e=>C(e.target.value)})}):null,m]})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col gap-y-1 overflow-y-auto px-4 py-2 overflow-x-hidden",children:D.map(e=>{let l=g?"button":o.GG;return(0,s.jsx)(a.Fragment,{children:(0,s.jsx)(l,{onClick:()=>{e.disabled||(e.isSelected?g?A(l=>l.filter(l=>l!==e.value)):null==N||N(k.filter(l=>l.value!==e.value)):g?A(l=>[...l,e.value]):null==N||N([e]))},className:(0,c.cn)("flex flex-col gap-y-1 border border-border p-2 rounded-md items-start text-left",e.disabled?"opacity-50 cursor-not-allowed":"transition-colors hover:bg-primary/20",e.isSelected&&"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.isSelected?(0,s.jsx)(t.Z,{className:"size-4 mr-2"}):null,(0,s.jsxs)("div",{children:[e.caption?(0,s.jsx)("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.caption||""}}):null,(0,s.jsx)("p",{children:e.label}),e.description?(0,s.jsx)("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.description||""}}):null]})]})})},e.value)})}),(0,s.jsxs)(o.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full gap-x-2",children:[(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(r.z,{variant:"ghost",children:"Close"})}),!!I.length&&(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(r.z,{onClick:()=>{null==N||N(I.map(e=>D.find(l=>l.value===e)).filter(e=>e))},children:"Save"})})]})]})]})})}},64344:function(e,l,i){"use strict";i.d(l,{Separator:function(){return r}});var s=i(57437),a=i(2265),n=i(48484),t=i(37440);let r=a.forwardRef((e,l)=>{let{className:i,orientation:a="horizontal",decorative:r=!0,...d}=e;return(0,s.jsx)(n.f,{ref:l,decorative:r,orientation:a,className:(0,t.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",i),...d})});r.displayName=n.f.displayName},53853:function(e,l,i){"use strict";i.d(l,{k:function(){return r}});var s=i(2265),a=i(38472),n=i(17647),t=i(53699);function r(e){let{loadOnMount:l=!0,onLoadSitesError:i}={...e},[r,d]=(0,s.useState)(!1),{alert:o}=(0,t.s)(),{getSites:c}=(0,n.b)(),[u,m]=(0,s.useState)([]),h=(0,s.useCallback)(async()=>{try{var e;d(!0);let l=(await a.Z.get("/api/sites?data="+JSON.stringify({types:["webeditor"]}))).data;if(null===(e=l.errors)||void 0===e?void 0:e.length)throw Error(l.errors.join(", "));m(l.data||[])}catch(e){o({title:"Error",message:"Failed to load sites: "+e.message,variant:"error",onClose:()=>null==i?void 0:i()})}finally{d(!1)}},[c,o,i]);return(0,s.useEffect)(()=>{l&&!u.length&&h()},[u,l,h]),{loading:r,sites:u,loadSites:h}}},74166:function(e,l){"use strict";l.Z=e=>"".concat(e||"").charAt(0).toUpperCase()+"".concat(e||"").slice(1)}},function(e){e.O(0,[4868,1086,7468,6044,8472,193,231,638,5929,9343,4264,4635,7202,7763,4081,4380,259,3920,7420,4371,7478,7023,1744],function(){return e(e.s=58039)}),_N_E=e.O()}]);