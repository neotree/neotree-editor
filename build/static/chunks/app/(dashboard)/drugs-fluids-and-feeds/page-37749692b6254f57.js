(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3638],{58039:function(e,t,s){Promise.resolve().then(s.bind(s,97619)),Promise.resolve().then(s.bind(s,25704))},97619:function(e,t,s){"use strict";s.d(t,{DrugsLibrary:function(){return V}});var r=s(57437),a=s(2265),i=s(37440),l=s(76230),n=s(39661),d=s(44380),o=s(50495),c=s(64344),u=s(44371),h=s(17647),g=s(17501),m=s(80929),f=s(42421),x=s(87138),p=s(46910);function v(e){let{addDrugLink:t,addFluidLink:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(p.h_,{children:[(0,r.jsx)(p.$F,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",children:[(0,r.jsx)("span",{children:"Add"}),(0,r.jsx)(f.Z,{className:"w-4 h-4 ml-2"})]})}),(0,r.jsxs)(p.AW,{children:[(0,r.jsx)(p.Xi,{asChild:!0,children:(0,r.jsx)(x.default,{href:t,children:"New drug"})}),(0,r.jsx)(p.Xi,{asChild:!0,children:(0,r.jsx)(x.default,{href:s,children:"New fluid"})})]})]})})}var y=s(58184),j=s(38472),b=s(39343),w=s(53853),k=s(67135),N=s(86466),C=s(53699),S=s(90837),D=s(46294);function I(e){var t;let{uuids:s}=e,[l,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),{alert:h}=(0,C.s)(),{sites:g,loading:m,loadSites:f}=(0,w.k)({loadOnMount:!1,onLoadSitesError:()=>d(!1)}),{formState:{errors:x},reset:p,watch:v,setValue:I,register:E,handleSubmit:F,setError:Z}=(0,b.cI)({defaultValues:{siteId:"",overwriteExisting:!1}}),T=v("siteId"),A=v("overwriteExisting"),L=c||m,Q=!!T&&!L,R=F(async e=>{try{var t;if(e.siteId||Z("siteId",{message:"Site is required"}),!Q)return;u(!0);let r=(await j.Z.post("/api/drugs-library/export",{...e,uuids:s})).data;if(null===(t=r.errors)||void 0===t?void 0:t.length)throw Error(r.errors.join(", "));h({variant:"success",title:"Success",message:"Data exported successfully!",onClose:()=>d(!1)})}catch(e){h({variant:"error",title:"Error",message:"Failed to export: "+e.message})}finally{u(!1)}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(S.Vq,{open:l,onOpenChange:e=>{p(),e&&f(),d(e)},children:[(0,r.jsx)(S.hg,{asChild:!0,children:(0,r.jsxs)(o.z,{className:"h-auto w-auto",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:s.length>1?"Export ".concat(s.length):"Export"})]})}),(0,r.jsxs)(S.cZ,{children:[(0,r.jsxs)(S.fK,{children:[(0,r.jsx)(S.$N,{children:"Export"}),(0,r.jsx)(S.Be,{className:"hidden",children:""})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k._,{htmlFor:"siteId",children:"Site *"}),(0,r.jsxs)(D.Ph,{name:"siteId",onValueChange:e=>I("siteId",e,{shouldDirty:!0}),children:[(0,r.jsx)(D.i4,{children:(0,r.jsx)(D.ki,{placeholder:"Select site"})}),(0,r.jsx)(D.Bw,{children:(0,r.jsxs)(D.DI,{children:[(0,r.jsx)(D.n5,{children:"Sites"}),g.map(e=>{let{siteId:t,name:s}=e;return(0,r.jsx)(D.Ql,{value:t,children:s},t)})]})})]}),!!(null===(t=x.siteId)||void 0===t?void 0:t.message)&&(0,r.jsx)("div",{className:"text-xs text-danger mt-1",children:x.siteId.message})]}),(0,r.jsxs)("div",{className:(0,i.cn)("flex gap-x-2"),children:[(0,r.jsx)(N.X,{name:"overwriteExisting",id:"overwriteExisting",checked:A,onCheckedChange:()=>I("overwriteExisting",!A,{shouldDirty:!0})}),(0,r.jsx)(k._,{secondary:!0,htmlFor:"overwriteExisting",children:"Overwrite existing"})]})]}),(0,r.jsxs)(S.cN,{children:[(0,r.jsx)(S.GG,{asChild:!0,children:(0,r.jsx)(o.z,{variant:"ghost",children:"Cancel"})}),(0,r.jsxs)(o.z,{onClick:R,disabled:!Q,children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),L&&(0,r.jsx)(n.a,{overlay:!0})]})}function E(e){let{sortBy:t,typeFilter:s,statusFilter:a,onSortChange:i,onFilterChange:l}=e;return(0,r.jsx)("div",{className:"p-4 flex flex-col gap-y-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,r.jsx)("div",{className:"text-2xl",children:"Drugs & Fluids Library"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-wrap items-center justify-end gap-x-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(D.Ph,{value:t,onValueChange:i,children:[(0,r.jsx)(D.i4,{className:"w-[140px]",children:(0,r.jsx)(D.ki,{placeholder:"Sort"})}),(0,r.jsxs)(D.Bw,{children:[(0,r.jsx)(D.Ql,{value:"name-asc",children:"Name (A-Z)"}),(0,r.jsx)(D.Ql,{value:"name-desc",children:"Name (Z-A)"}),(0,r.jsx)(D.Ql,{value:"type-asc",children:"Type (A-Z)"}),(0,r.jsx)(D.Ql,{value:"type-desc",children:"Type (Z-A)"}),(0,r.jsx)(D.Ql,{value:"key-asc",children:"Key (A-Z)"}),(0,r.jsx)(D.Ql,{value:"key-desc",children:"Key (Z-A)"})]})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(D.Ph,{value:s||a||"all",onValueChange:e=>{"all"===e?l("",""):"drug"===e||"fluid"===e?l(e,""):("draft"===e||"published"===e)&&l("",e)},children:[(0,r.jsx)(D.i4,{className:"w-[140px]",children:(0,r.jsx)(D.ki,{placeholder:"All items"})}),(0,r.jsxs)(D.Bw,{children:[(0,r.jsx)(D.Ql,{value:"all",children:"All items"}),(0,r.jsx)(D.U$,{}),(0,r.jsxs)(D.DI,{children:[(0,r.jsx)(D.n5,{children:"Status"}),(0,r.jsx)(D.Ql,{value:"published",children:"Published"}),(0,r.jsx)(D.Ql,{value:"draft",children:"Draft"})]}),(0,r.jsx)(D.U$,{}),(0,r.jsxs)(D.DI,{children:[(0,r.jsx)(D.n5,{children:"Types"}),(0,r.jsx)(D.Ql,{value:"drug",children:"Drugs"}),(0,r.jsx)(D.Ql,{value:"fluid",children:"Fluids"})]})]})]})})]})]})})}var F=s(45188),Z=s(6649),T=s(75733),A=s(6884),L=s(90399),Q=s(61386),R=s(71239);function _(e){let{item:t,disabled:s,copyDrugs:a,deleteDrugs:i,editLink:n}=e,{confirm:d}=(0,l.t)(),c={isDraft:!!t.isDraft,userId:t.draftCreatedByUserId,dataType:t.type},u=(0,R.v)(c);return s=s||u,(0,r.jsxs)("div",{className:"flex gap-x-2",children:[(0,r.jsx)(Q.O,{...c}),(0,r.jsxs)(p.h_,{children:[(0,r.jsx)(p.$F,{asChild:!0,children:(0,r.jsx)(o.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,r.jsx)(F.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(p.AW,{children:[(0,r.jsx)(p.Xi,{asChild:!0,children:(0,r.jsx)(x.default,{href:n("".concat(t.itemId)),children:(0,r.jsx)(r.Fragment,{children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Z,{className:"mr-2 h-4 w-4"})," View"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.Z,{className:"mr-2 h-4 w-4"})," Edit"]})})})}),!s&&(0,r.jsx)(p.Xi,{onClick:()=>setTimeout(()=>{d(()=>a([t.itemId]),{title:"Copy drug",message:"Are you sure you want to copy drug?<br /> <b>".concat(t.drug,"</b>"),positiveLabel:"Yes, copy",negativeLabel:"Cancel"})},0),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{className:"mr-2 h-4 w-4"})," Copy"]})}),!s&&(0,r.jsxs)(p.Xi,{onClick:()=>setTimeout(()=>{d(()=>i([t.itemId]),{title:"Delete drug",message:"Are you sure you want to delete drug?",positiveLabel:"Yes, delete",negativeLabel:"Cancel",danger:!0})},0),className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,r.jsx)(L.Z,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Delete"})]})]})]})]})}function V(e){let{}=e,{confirm:t}=(0,l.t)(),{viewOnly:s}=(0,h.b)(),[f,x]=(0,a.useState)([]),{filteredDrugs:p,tableData:y,loading:j,addLink:b,selectedItemId:w,editLink:k,saveDrugs:N,deleteDrugs:C,copyDrugs:S,searchQuery:D,typeFilter:F,statusFilter:Z,sortBy:T,setSearchQuery:A,setTypeFilter:L,setStatusFilter:Q,setSortBy:R}=(0,u.a)(),V=(0,a.useMemo)(()=>s,[s]);return(0,r.jsxs)(r.Fragment,{children:[j&&(0,r.jsx)(n.a,{overlay:!0}),(0,r.jsx)(m.A,{disabled:V,item:p.filter(e=>e.itemId===w)[0],onChange:N}),!!f.length&&(0,r.jsxs)(g.h,{children:[(0,r.jsx)(I,{uuids:p.filter((e,t)=>f.includes(t)).map(e=>e.itemId)}),(0,r.jsxs)(o.z,{variant:"destructive",onClick:()=>setTimeout(()=>{t(()=>C(p.filter((e,t)=>f.includes(t)).map(e=>e.itemId)),{title:"Delete drugs",message:"Are you sure you want to delete drugs?",positiveLabel:"Yes, delete",negativeLabel:"Cancel",danger:!0})},0),children:["Delete ",f.length<2?"":f.length+" items"]})]}),(0,r.jsx)(E,{sortBy:T,typeFilter:F,statusFilter:Z,onSortChange:R,onFilterChange:(e,t)=>{L(e),Q(t)}}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(d.DataTable,{onSelect:x,selectable:!V,search:{inputPlaceholder:"Search"},headerActions:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v,{addDrugLink:b("drug"),addFluidLink:b("fluid")})}),getRowOptions:e=>{let{rowIndex:t}=e,s=p[t];return s?{className:(0,i.cn)(s.isDraft&&"bg-danger/20 hover:bg-danger/30")}:{}},columns:[{name:"Drug / Fluid"},{name:"Type",tdClassName:"w-[80px]"},{name:"Key"},{name:"Dosage text"},{name:"",align:"right",cellRenderer(e){let{value:t}=e,s=p.filter(e=>e.itemId===t)[0];return s?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(_,{item:s,disabled:V,copyDrugs:S,deleteDrugs:C,editLink:k})}):null}}],data:y})]})}},95317:function(e,t,s){"use strict";s.d(t,{Ei:function(){return y},FF:function(){return p},Tu:function(){return x},aM:function(){return c},bC:function(){return v},sw:function(){return u},ue:function(){return f},yo:function(){return o}});var r=s(57437),a=s(2265),i=s(13304),l=s(13027),n=s(74697),d=s(37440);let o=i.fC,c=i.xz,u=i.x8,h=i.h_,g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});g.displayName=i.aV.displayName;let m=(0,l.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=a.forwardRef((e,t)=>{let{side:s="right",className:a,children:l,hideCloseButton:o,...c}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,d.cn)(m({side:s}),a),...c,children:[l,!0!==o&&(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=i.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="SheetHeader";let p=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="SheetFooter";let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold text-foreground",s),...a})});v.displayName=i.Dx.displayName;let y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...a})});y.displayName=i.dk.displayName},93146:function(e,t,s){"use strict";s.d(t,{g:function(){return l}});var r=s(57437),a=s(2265),i=s(37440);let l=a.forwardRef((e,t)=>{let{className:s,noRing:a,...l}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",s),ref:t,...l})});l.displayName="Textarea"},44371:function(e,t,s){"use strict";s.d(t,{R:function(){return h},a:function(){return g}});var r=s(2265),a=s(16463),i=s(12491),l=s(38472),n=s(39099),d=s(53699),o=s(7752);let c={initialised:!1,loading:!1,keys:[],drugs:[],searchQuery:"",typeFilter:"",statusFilter:"",sortBy:"name-asc"},u=(0,n.Ue)(e=>c);function h(){u.setState(c)}function g(){let e=u(),{drugs:t,searchQuery:s,typeFilter:n,statusFilter:h,sortBy:g}=e,m=(0,a.useRouter)(),f=(0,a.useSearchParams)(),x=(0,r.useMemo)(()=>i.Z.parse(f.toString()),[f]),{itemId:p}=x,v=(0,r.useMemo)(()=>{var e;return null===(e=t.filter(e=>e.itemId===p||e.key===p)[0])||void 0===e?void 0:e.itemId},[p,t]),{alert:y}=(0,d.s)(),j=(0,r.useCallback)(()=>{let e=[],r=t.map(e=>[e.drug||"",e.type||"",e.key||"",e.dosageText||"",e.itemId]),a=[...r=r.filter((r,a)=>{let i=t[a],l=!0;if(s){let e=s.toLowerCase(),t=[i.drug,i.type,i.key,i.dosageText].join(" ").toLowerCase();l=l&&t.includes(e)}if(n&&"all"!==n){var d;l=l&&(null===(d=i.type)||void 0===d?void 0:d.toLowerCase())===n.toLowerCase()}return h&&"all"!==h&&("draft"===h?l=l&&!0===i.isDraft:"published"===h&&(l=l&&!i.isDraft)),l&&e.push(t[a]),l})],i=[...e],l=a.map((e,t)=>({row:e,drug:i[t]}));switch(g){case"name-asc":l.sort((e,t)=>(e.drug.drug||"").localeCompare(t.drug.drug||""));break;case"name-desc":l.sort((e,t)=>(t.drug.drug||"").localeCompare(e.drug.drug||""));break;case"type-asc":l.sort((e,t)=>(e.drug.type||"").localeCompare(t.drug.type||""));break;case"type-desc":l.sort((e,t)=>(t.drug.type||"").localeCompare(e.drug.type||""));break;case"key-asc":l.sort((e,t)=>(e.drug.key||"").localeCompare(t.drug.key||""));break;case"key-desc":l.sort((e,t)=>(t.drug.key||"").localeCompare(e.drug.key||""))}return{tableData:l.map(e=>e.row),filteredDrugs:l.map(e=>e.drug)}},[t,s,n,h,g]),{tableData:b,filteredDrugs:w}=(0,r.useMemo)(()=>j(),[j]),k=(0,r.useCallback)(async()=>{try{var e,t;u.setState({loading:!0});let s=await l.Z.get("/api/drugs-library?data="+JSON.stringify({returnDraftsIfExist:!0}));if(null===(e=s.data.errors)||void 0===e?void 0:e.length)throw Error(null===(t=s.data.errors)||void 0===t?void 0:t.join(", "));u.setState({drugs:s.data.data})}catch(e){y({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[y]);!function(e){let{events:t}=e,s=(0,r.useMemo)(()=>t,[t]),i=(0,r.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,r.useRef)(new Date().getTime());let l=(0,a.useRouter)();(0,r.useEffect)(()=>{s.forEach(e=>{let{name:t,action:s,delay:r=100,onEvent:a}=e;o.Z.on(t,function(){for(var e=arguments.length,n=Array(e),d=0;d<e;d++)n[d]=arguments[d];let o=()=>{var e,r;(!s||n[0]===s)&&(null===(e=a.callback)||void 0===e||e.call(a,...n),(null==a?void 0:a.refreshRouter)&&(console.log(t,"refreshing..."),l.refresh()),(null===(r=a.redirect)||void 0===r?void 0:r.to)&&(a.redirect.replace?l.replace(a.redirect.to):l.push(a.redirect.to)))},c=new Date().getTime();r?(clearTimeout(i.current.eventsTimeouts[t]),i.current.eventsTimeouts[t]=setTimeout(()=>{i.current.eventsTimestamps[t]=c,o()},r)):(i.current.eventsTimestamps[t]=new Date().getTime(),o())})})},[s,l])}({events:[{name:"data_changed",onEvent:{callback:async()=>{await k(),m.refresh()}}}]});let N=(0,r.useCallback)(async e=>{try{var t,s;u.setState(t=>({loading:!0,drugs:t.drugs.filter(t=>!e.includes(t.itemId))}));let r=await l.Z.delete("/api/drugs-library?data="+JSON.stringify({itemsIds:e}));if(null===(t=r.data.errors)||void 0===t?void 0:t.length)throw Error(null===(s=r.data.errors)||void 0===s?void 0:s.join(", "));m.refresh(),y({title:"",message:"Drug deleted successfully!",variant:"success"})}catch(e){y({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[y,m.refresh]),C=(0,r.useCallback)(async e=>{try{var s,r;u.setState({loading:!0});let a=[],i=[],n=t;u.setState(t=>(n=!v&&e?[...t.drugs,e]:t.drugs.map(t=>t.itemId!==(null==e?void 0:e.itemId)?t:(e&&(t.key!==e.key&&i.push({old:t.key,new:e.key}),t.type!==e.type&&a.push(t.key)),{...t,...e})),{loading:!0,drugs:n}));let d={data:e?[e]:n,broadcastAction:!0},o=await l.Z.post("/api/drugs-library/save",d);if(null===(s=o.data.errors)||void 0===s?void 0:s.length)throw Error(null===(r=o.data.errors)||void 0===r?void 0:r.join(", "));await k(),m.refresh(),y({title:"",message:"Drug".concat(e?"":"s"," saved successfully!"),variant:"success"})}catch(e){y({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[t,v,m.refresh]),S=(0,r.useCallback)(async e=>{try{var t,s;u.setState({loading:!0});let r={data:e.map(e=>({itemId:e})),broadcastAction:!0},a=await l.Z.post("/api/drugs-library/copy",r);if(null===(t=a.data.errors)||void 0===t?void 0:t.length)throw Error(null===(s=a.data.errors)||void 0===s?void 0:s.join(", "));await k(),m.refresh(),y({title:"",message:"Drug".concat(e.length<2?"":"s"," copied successfully!"),variant:"success"})}catch(e){y({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[m.refresh]);(0,r.useEffect)(()=>{u.getState().initialised||(k(),u.setState({initialised:!0}))},[k]),(0,r.useCallback)(()=>{u.setState(c)},[]);let D=(0,r.useCallback)(e=>{u.setState({searchQuery:e})},[]),I=(0,r.useCallback)(e=>{u.setState({typeFilter:e})},[]),E=(0,r.useCallback)(e=>{u.setState({statusFilter:e})},[]),F=(0,r.useCallback)(e=>{u.setState({sortBy:e})},[]);return{...e,filteredDrugs:w,tableData:b,selectedItemId:v,addLink:e=>"?".concat(i.Z.stringify({...x,addItem:e})),editLink:e=>"?".concat(i.Z.stringify({...x,itemId:e})),getDrugs:k,deleteDrugs:N,saveDrugs:C,copyDrugs:S,setSearchQuery:D,setTypeFilter:I,setStatusFilter:E,setSortBy:F}}},53853:function(e,t,s){"use strict";s.d(t,{k:function(){return n}});var r=s(2265),a=s(38472),i=s(17647),l=s(53699);function n(e){let{loadOnMount:t=!0,onLoadSitesError:s}={...e},[n,d]=(0,r.useState)(!1),{alert:o}=(0,l.s)(),{getSites:c}=(0,i.b)(),[u,h]=(0,r.useState)([]),g=(0,r.useCallback)(async()=>{try{var e;d(!0);let t=(await a.Z.get("/api/sites?data="+JSON.stringify({types:["webeditor"]}))).data;if(null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(t.errors.join(", "));h(t.data||[])}catch(e){o({title:"Error",message:"Failed to load sites: "+e.message,variant:"error",onClose:()=>null==s?void 0:s()})}finally{d(!1)}},[c,o,s]);return(0,r.useEffect)(()=>{t&&!u.length&&g()},[u,t,g]),{loading:n,sites:u,loadSites:g}}}},function(e){e.O(0,[4868,1086,7468,6044,193,8472,231,638,2254,8872,2860,7202,3134,1133,4380,3920,6323,2529,553,7478,7023,1744],function(){return e(e.s=58039)}),_N_E=e.O()}]);