(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3638],{76923:function(e,t,r){Promise.resolve().then(r.bind(r,33283)),Promise.resolve().then(r.bind(r,25704))},33283:function(e,t,r){"use strict";r.d(t,{DrugsLibrary:function(){return N}});var s=r(57437),n=r(2265),a=r(87138),i=r(45188),l=r(6649),c=r(75733),d=r(6884),u=r(90399),o=r(37440),h=r(76230),g=r(39661),x=r(65120),m=r(46910),f=r(76942),y=r(50495),j=r(44371),p=r(17647),w=r(80929),k=r(42421);function b(e){let{addDrugLink:t,addFluidLink:r,disabled:n}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.h_,{children:[(0,s.jsx)(m.$F,{asChild:!0,children:(0,s.jsxs)(y.z,{variant:"outline",disabled:!!n,children:[(0,s.jsx)("span",{children:"Add"}),(0,s.jsx)(k.Z,{className:"w-4 h-4 ml-2"})]})}),(0,s.jsxs)(m.AW,{children:[(0,s.jsx)(m.Xi,{asChild:!0,children:(0,s.jsx)(a.default,{href:t,children:"New drug"})}),(0,s.jsx)(m.Xi,{asChild:!0,children:(0,s.jsx)(a.default,{href:r,children:"New fluid"})})]})]})})}var v=r(38472);function N(e){let{locked:t}=e,{confirm:r}=(0,h.t)(),{viewOnly:k}=(0,p.b)(),{drugs:N,loading:Z,addLink:C,selectedItemId:F,editLink:L,saveDrugs:_,deleteDrugs:D,copyDrugs:O}=(0,j.a)();(0,n.useEffect)(()=>{(async()=>{try{t||await v.Z.post("/api/locks?data="+JSON.stringify({script:null,lockType:"drug_library"}))}catch(e){alert({title:"",message:e.message})}})()},[alert,t]);let[E,I]=(0,n.useState)(!!t),T=(0,n.useCallback)(e=>{I(t=>E!==e?e:t)},[]),z=(0,n.useMemo)(()=>k||!!E,[k,E]);return(0,s.jsxs)(s.Fragment,{children:[Z&&(0,s.jsx)(g.a,{overlay:!0}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(x.O,{scriptId:"",lockType:"drug_library",doneLoading:!0,onStatusChange:e=>T(e)},"drug-lib"),(0,s.jsx)(w.A,{disabled:z,item:N.filter(e=>e.itemId===F)[0],onChange:_})]}),(0,s.jsx)(f.DataTable,{title:"Drugs & Fluids Library",headerActions:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b,{addDrugLink:C("drug"),addFluidLink:C("fluid"),disabled:z})}),getRowOptions:e=>{let{rowIndex:t}=e,r=N[t];return r?{className:(0,o.cn)(r.isDraft&&"bg-danger/20 hover:bg-danger/30")}:{}},columns:[{name:"Drug / Fluid"},{name:"Type",tdClassName:"w-[80px]"},{name:"Key"},{name:"Dosage text"},{name:"",align:"right",cellRenderer(e){let{value:t}=e,n=N.filter(e=>e.itemId===t)[0];return n?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.h_,{children:[(0,s.jsx)(m.$F,{asChild:!0,children:(0,s.jsx)(y.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(m.AW,{children:[(0,s.jsx)(m.Xi,{asChild:!0,children:(0,s.jsx)(a.default,{href:L("".concat(t)),children:(0,s.jsx)(s.Fragment,{children:z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"mr-2 h-4 w-4"})," View"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4"})," Edit"]})})})}),!z&&(0,s.jsx)(m.Xi,{onClick:()=>r(()=>O([n.itemId]),{title:"Copy drug",message:"Are you sure you want to copy drug?<br /> <b>".concat(n.drug,"</b>"),positiveLabel:"Yes, copy",negativeLabel:"Cancel"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Copy"]})}),!z&&(0,s.jsxs)(m.Xi,{onClick:()=>r(()=>D([n.itemId]),{title:"Delete drug",message:"Are you sure you want to delete drug?",positiveLabel:"Yes, delete",negativeLabel:"Cancel",danger:!0}),className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,s.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})}):null}}],data:N.map(e=>[e.drug||"",e.type||"",e.key||"",e.dosageText||"",e.itemId])})]})}},65120:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var s=r(57437),n=r(74453),a=r(63124),i=r(2265),l=r(38472);function c(e){let{scriptId:t,lockType:r,doneLoading:c,onStatusChange:d}=e,[u,o]=(0,i.useState)(void 0);return((0,i.useEffect)(()=>{let e=!0;return async function(){try{("script"===r&&c||"script"!==r)&&await l.Z.delete("/api/locks?data="+JSON.stringify({lockType:r}));let s=(await l.Z.get("/api/locks?data="+JSON.stringify({script:t||null,lockType:r}))).data;e&&(o(s),setTimeout(()=>null==d?void 0:d(s),0))}catch(e){console.error("Error fetching lock status:",e)}}(),()=>{e=!1}},[t]),void 0===u)?null:(0,s.jsx)("div",{className:"p-1 rounded ".concat(u?"bg-red-100":"bg-green-100"),children:u?(0,s.jsx)(n.Z,{className:"h-4 w-4 text-red-900"}):(0,s.jsx)(a.Z,{className:"h-4 w-4 text-green-900"})})}},6884:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},75733:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},63124:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},74453:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},87138:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var s=r(231),n=r.n(s)}},function(e){e.O(0,[4868,1086,7468,6044,9527,193,231,7776,625,8472,1565,8482,2860,4975,6942,1863,929,7478,7023,1744],function(){return e(e.s=76923)}),_N_E=e.O()}]);