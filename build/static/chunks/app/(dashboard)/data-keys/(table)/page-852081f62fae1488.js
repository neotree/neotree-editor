(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1967],{76052:function(e,t,a){Promise.resolve().then(a.bind(a,6047)),Promise.resolve().then(a.bind(a,25704))},6047:function(e,t,a){"use strict";a.d(t,{DataKeysTable:function(){return z}});var l=a(57437),s=a(23920),n=a(94638),r=a(17647),i=a(37440),o=a(83146),d=a(39661),c=a(92513),u=a(87138),m=a(50495),f=a(64344),h=a(46294);function x(){let{sort:e,filter:t,onSort:a,setFilter:n}=(0,s.M)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"p-4 flex flex-col gap-y-4",children:(0,l.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,l.jsx)("div",{className:"text-2xl",children:"Data keys"}),(0,l.jsxs)("div",{className:"flex-1 flex flex-wrap items-center justify-end gap-x-4",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(h.Ph,{value:e,onValueChange:e=>a(e),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Sort"})}),(0,l.jsx)(h.Bw,{children:o.F4.map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2 w-[120px]",children:[(0,l.jsx)(e.Icon,{className:"size-4"}),(0,l.jsx)("span",{children:e.label})]})},e.value))})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)(h.Ph,{value:t,onValueChange:e=>n("all"===e?"":e),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"All keys"})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"all",children:"All keys"}),(0,l.jsx)(h.U$,{}),(0,l.jsxs)(h.DI,{children:[(0,l.jsx)(h.n5,{children:"Status"}),o.UQ.map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:e.label},e.value))]}),(0,l.jsx)(h.U$,{}),(0,l.jsxs)(h.DI,{children:[(0,l.jsx)(h.n5,{children:"Types"}),o.y0.map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:e.label},e.value))]})]})]})}),(0,l.jsx)(m.z,{asChild:!0,variant:"ghost",className:"w-auto h-auto",children:(0,l.jsxs)(u.default,{href:"/data-keys/new",children:[(0,l.jsx)(c.Z,{className:"size-4 mr-2"}),"Add"]})})]})]})}),(0,l.jsx)(f.Z,{})]})}var v=a(2265),p=a(45188),y=a(75733),b=a(6649),g=a(90399),j=a(46910),w=a(76230);function k(e){let{rowIndex:t,disabled:a,setCurrentDataKeyUuid:n}=e,[r,o]=(0,v.useTransition)(),{dataKeys:c,deleteDataKeys:m}=(0,s.M)(),{confirm:f}=(0,w.t)(),h=c[t];return h?(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(d.a,{overlay:!0}),(0,l.jsxs)(j.h_,{children:[(0,l.jsx)(j.$F,{children:(0,l.jsx)(p.Z,{className:"h-4 w-4"})}),(0,l.jsxs)(j.AW,{children:[(0,l.jsx)(j.Xi,{asChild:!0,onClick:()=>setTimeout(()=>o(()=>{}),0),children:(0,l.jsx)(u.default,{href:"/data-keys/edit/".concat(h.uuid),children:a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.Z,{className:"h-4 w-4 mr-2"})," View"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-2"})," Edit"]})})}),(0,l.jsxs)(j.Xi,{className:(0,i.cn)("text-destructive",a&&"hidden"),onClick:()=>setTimeout(()=>{f(()=>m([h.uuid]),{title:"Delete data key",message:"Are you sure?"})},0),children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})]}):null}var N=a(17501),C=a(58184),_=a(39343),D=a(53853),I=a(67135),T=a(86466),S=a(90837);function Z(e){var t;let{uuids:a}=e,[n,r]=(0,v.useState)(!1),{dataKeys:o,exporting:c,exportDataKeys:u,extractDataKeys:f}=(0,s.M)(),{sites:x,loading:p,loadSites:y}=(0,D.k)({loadOnMount:!1,onLoadSitesError:()=>r(!1)}),{formState:{errors:b},reset:g,watch:j,setValue:w,handleSubmit:k,setError:N}=(0,_.cI)({defaultValues:{siteId:"",overwriteExisting:!1}}),Z=j("siteId"),E=j("overwriteExisting"),z=c||p,F=!!Z&&!z,R=k(async e=>{if(e.siteId){let t=f(a,{withNested:!0}).map(e=>e.uuid);await u({...e,uuids:t}),r(!1)}else N("siteId",{message:"Site is required"})});return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(S.Vq,{open:n,onOpenChange:e=>{g(),e&&y(),r(e)},children:[(0,l.jsx)(S.hg,{asChild:!0,children:(0,l.jsxs)(m.z,{className:"h-auto w-auto",children:[(0,l.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),(0,l.jsx)("span",{children:a.length>1?"Export ".concat(a.length):"Export"})]})}),(0,l.jsxs)(S.cZ,{children:[(0,l.jsxs)(S.fK,{children:[(0,l.jsx)(S.$N,{children:"Export"}),(0,l.jsx)(S.Be,{className:"hidden",children:""})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(I._,{htmlFor:"siteId",children:"Site *"}),(0,l.jsxs)(h.Ph,{name:"siteId",onValueChange:e=>w("siteId",e,{shouldDirty:!0}),children:[(0,l.jsx)(h.i4,{children:(0,l.jsx)(h.ki,{placeholder:"Select site"})}),(0,l.jsx)(h.Bw,{children:(0,l.jsxs)(h.DI,{children:[(0,l.jsx)(h.n5,{children:"Sites"}),x.map(e=>{let{siteId:t,name:a}=e;return(0,l.jsx)(h.Ql,{value:t,children:a},t)})]})})]}),!!(null===(t=b.siteId)||void 0===t?void 0:t.message)&&(0,l.jsx)("div",{className:"text-xs text-danger mt-1",children:b.siteId.message})]}),(0,l.jsxs)("div",{className:(0,i.cn)("flex gap-x-2"),children:[(0,l.jsx)(T.X,{name:"overwriteExisting",id:"overwriteExisting",checked:E,onCheckedChange:()=>w("overwriteExisting",!E,{shouldDirty:!0})}),(0,l.jsx)(I._,{secondary:!0,htmlFor:"overwriteExisting",children:"Overwrite existing"})]}),z&&(0,l.jsx)(d.a,{overlay:!0})]}),(0,l.jsxs)(S.cN,{children:[(0,l.jsx)(S.GG,{asChild:!0,children:(0,l.jsx)(m.z,{variant:"ghost",children:"Cancel"})}),(0,l.jsxs)(m.z,{onClick:R,disabled:!F,children:[(0,l.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]})})}function E(e){let{disabled:t}=e,{confirm:a}=(0,w.t)(),{selected:n,setSelected:r,deleteDataKeys:i}=(0,s.M)();return t||!n.length?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(N.h,{children:[(0,l.jsx)(m.z,{variant:"ghost",onClick:()=>r([]),children:"Cancel"}),(0,l.jsx)(Z,{uuids:n.map(e=>e.uuid)}),(0,l.jsxs)(m.z,{variant:"destructive",onClick:()=>setTimeout(()=>{a(()=>i(n.map(e=>e.uuid)),{title:"Delete data keys",message:"Are you sure?"})},0),children:[(0,l.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Delete",n.length>1?" ".concat(n.length," keys"):""]})]})})}function z(e){let{disabled:t}=e,{viewOnly:a}=(0,r.b)();t=t||a;let{dataKeys:c,selected:u,currentDataKeyUuid:m,filter:f,deleting:h,loadingDataKeys:v,setCurrentDataKeyUuid:p,setSelected:y}=(0,s.M)(),b={selectable:!t,selectedIndexes:u.map(e=>e.index),filter:e=>{let t=c[e];return!f||(f===o.UQ[0].value?!(null==t?void 0:t.isDraft):f===o.UQ[1].value?!!(null==t?void 0:t.isDraft):(console.log(null==t?void 0:t.dataType,f),(null==t?void 0:t.dataType)===f))},onSelect:e=>y(e.map(e=>{var t;return{index:e,uuid:null===(t=c[e])||void 0===t?void 0:t.uuid}}).filter(e=>e.uuid)),getRowOptions(e){let{rowIndex:t}=e,l=c[t];return l?{className:(0,i.cn)(!a&&l.isDraft&&"bg-danger/20 hover:bg-danger/30")}:{}},search:{inputPlaceholder:"Search data keys"},noDataMessage:(0,l.jsx)("div",{className:"mt-4 flex flex-col items-center justify-center gap-y-2",children:(0,l.jsx)("div",{children:"No data keys saved."})}),columns:[{name:"Key"},{name:"Label"},{name:"Ref ID"},{name:"Data type"},{name:"",align:"right",cellClassName:(0,i.cn)("w-10"),cellRenderer(e){let{rowIndex:a}=e;return(0,l.jsx)(k,{rowIndex:a,disabled:t,setCurrentDataKeyUuid:p})}}],data:c.map(e=>[e.name||"",e.label||"",e.refId||"",e.dataType||"",""])};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,l.jsx)(x,{}),(0,l.jsx)(n.DataTable,{...b})]}),(0,l.jsx)(E,{disabled:t}),(h||v)&&(0,l.jsx)(d.a,{overlay:!0})]})}},17501:function(e,t,a){"use strict";a.d(t,{h:function(){return r}});var l=a(57437),s=a(77606),n=a(37440);function r(e){let{children:t,className:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"h-16"}),(0,l.jsx)("div",{className:(0,n.cn)("\n                        fixed \n                        left-0 \n                        bottom-0 \n                        h-16 \n                        w-full \n                        border-t \n                        border-t-border \n                        z-[1] \n                        bg-primary-foreground \n                        dark:bg-background \n                        shadow-md \n                        dark:shadow-foreground/10\n                    "),children:(0,l.jsx)(s.V,{children:(0,l.jsx)("div",{className:(0,n.cn)("flex justify-end gap-x-4",a),children:t})})})]})}},95229:function(e,t,a){"use strict";a.d(t,{Alert:function(){return r}});var l=a(53699),s=a(16463),n=a(2265);function r(e){let t=(0,s.useRouter)(),{alert:a}=(0,l.s)();return(0,n.useEffect)(()=>{let{redirectTo:l,onClose:s,...n}=e;a({...n,variant:n.variant||"error",buttonLabel:n.buttonLabel||"Ok",onClose:()=>{null==s||s(),l&&t.replace(l)}})},[a,t,e]),null}},77606:function(e,t,a){"use strict";a.d(t,{V:function(){return n}});var l=a(57437),s=a(37440);function n(e){let{className:t,...a}=e;return(0,l.jsx)("div",{...a,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",t)})}},39661:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});var l=a(57437),s=a(89627);function n(e){let{overlay:t,transparent:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:a?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,l.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},58502:function(e,t,a){"use strict";a.d(t,{SocketEventsListener:function(){return r}});var l=a(2265),s=a(16463),n=a(7752);function r(e){let{events:t}=e,a=(0,l.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,l.useRef)(new Date().getTime());let r=(0,s.useRouter)();return(0,l.useEffect)(()=>{t.forEach(e=>{let{name:t,action:l,delay:s=100,onEvent:i}=e;n.Z.on(t,function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];let d=()=>{var e,a;(!l||n[0]===l)&&(null===(e=i.callback)||void 0===e||e.call(i,...n),(null==i?void 0:i.refreshRouter)&&(console.log(t,"refreshing..."),r.refresh()),(null===(a=i.redirect)||void 0===a?void 0:a.to)&&(i.redirect.replace?r.replace(i.redirect.to):r.push(i.redirect.to)))},c=new Date().getTime();s?(clearTimeout(a.current.eventsTimeouts[t]),a.current.eventsTimeouts[t]=setTimeout(()=>{a.current.eventsTimestamps[t]=c,d()},s)):(a.current.eventsTimestamps[t]=new Date().getTime(),d())})})},[t,r]),null}},25704:function(e,t,a){"use strict";a.d(t,{Title:function(){return n}});var l=a(2265),s=a(20357);function n(e){let{children:t}=e;return(0,l.useEffect)(()=>{document.title=[s.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,l.useEffect)(()=>()=>{document.title="".concat(s.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},90837:function(e,t,a){"use strict";a.d(t,{$N:function(){return v},Be:function(){return p},GG:function(){return u},Vq:function(){return o},cN:function(){return x},cZ:function(){return f},fK:function(){return h},hg:function(){return d}});var l=a(57437),s=a(2265),n=a(13304),r=a(74697),i=a(37440);let o=n.fC,d=n.xz,c=n.h_,u=n.x8,m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});m.displayName=n.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,hideCloseButton:o,...d}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)(m,{}),(0,l.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,!0!==o&&(0,l.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(r.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});v.displayName=n.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=n.dk.displayName},67135:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var l=a(57437),s=a(2265),n=a(38364),r=a(13027),i=a(37440);let o=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,secondary:s,error:r,...d}=e;return(0,l.jsx)(n.f,{ref:t,className:(0,i.cn)(o(),s&&"text-xs",r?"text-danger":"",a),...d})});d.displayName=n.f.displayName},46294:function(e,t,a){"use strict";a.d(t,{Bw:function(){return v},DI:function(){return u},Ph:function(){return c},Ql:function(){return y},U$:function(){return b},i4:function(){return f},ki:function(){return m},n5:function(){return p}});var l=a(57437),s=a(2265),n=a(48297),r=a(42421),i=a(14392),o=a(22468),d=a(37440);let c=n.fC,u=n.ZA,m=n.B4,f=s.forwardRef((e,t)=>{let{className:a,children:s,error:i,...o}=e;return(0,l.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i&&"border-danger",a),...o,children:[s,(0,l.jsx)(n.JO,{asChild:!0,children:(0,l.jsx)(r.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(r.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let v=s.forwardRef((e,t)=>{let{className:a,children:s,position:r="popper",...i}=e;return(0,l.jsx)(n.h_,{children:(0,l.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:[(0,l.jsx)(h,{}),(0,l.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(x,{})]})})});v.displayName=n.VY.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});p.displayName=n.__.displayName;let y=s.forwardRef((e,t)=>{let{className:a,children:s,...r}=e;return(0,l.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(n.wU,{children:(0,l.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(n.eT,{children:s})]})});y.displayName=n.ck.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});b.displayName=n.Z0.displayName},64344:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var l=a(57437),s=a(2265),n=a(48484),r=a(37440);let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,l.jsx)(n.f,{ref:t,decorative:i,orientation:s,className:(0,r.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=n.f.displayName},76905:function(e,t,a){"use strict";a.d(t,{Uv:function(){return n},VO:function(){return s},d4:function(){return l},fR:function(){return i}});let l=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],s=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],n=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],r={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},i={admission:[{...r,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...r,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...r,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...r,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...r,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},83146:function(e,t,a){"use strict";a.d(t,{$7:function(){return o},F4:function(){return h},PU:function(){return r},Tf:function(){return u},UQ:function(){return x},_S:function(){return i},m1:function(){return c},ph:function(){return m},uh:function(){return d},y0:function(){return f}});var l=a(76905),s=a(30139),n=a(28680);let r={headerFormat:"",headerFields:[],footerFields:[],sections:[]},i="Example: ($key = true and $key2 = false) or $key3 = 'HD'",o={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},d=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],c=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"}],u=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],m=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}];({...u.reduce((e,t)=>{let a=t.value,l=t.value,s=[l,"".concat(l,"_option")];return"single_select"===a&&(s=[...s,"dropdown","dropdown_option"]),{...e,[l]:s}},{}),...l.Uv.reduce((e,t)=>{let a=t.name,l=t.name,s=[l,"".concat(l,"_option")];return"dropdown"===a&&(s=[...s,"single_select","single_select_option"]),{...e,[l]:s}},{})});let f=[{value:"checklist_option",label:"checklist_option",hasChildren:!1},{value:"multi_select",label:"multi_select",hasChildren:!0},{value:"multi_select_option",label:"multi_select_option",hasChildren:!1},{value:"single_select",label:"single_select",hasChildren:!0},{value:"single_select_option",label:"single_select_option",hasChildren:!1},{value:"yesno",label:"yesno",hasChildren:!1},{value:"drug",label:"drug",hasChildren:!1},{value:"fluid",label:"fluid",hasChildren:!1},{value:"zw_edliz_summary_table_option",label:"zw_edliz_summary_table_option",hasChildren:!1},{value:"mwi_edliz_summary_table_option",label:"mwi_edliz_summary_table_option",hasChildren:!1},{value:"diagnosis",label:"diagnosis",hasChildren:!1},{value:"date",label:"date",hasChildren:!1},{value:"datetime",label:"datetime",hasChildren:!1},{value:"dropdown",label:"dropdown",hasChildren:!0},{value:"dropdown_option",label:"dropdown_option",hasChildren:!1},{value:"number",label:"number",hasChildren:!1},{value:"text",label:"text",hasChildren:!1},{value:"timer",label:"timer",hasChildren:!1},{value:"period",label:"period",hasChildren:!1}],h=[{value:"label.asc",label:"Label (asc)",Icon:s.Z},{value:"label.desc",label:"Label (desc)",Icon:n.Z},{value:"key.asc",label:"Key (asc)",Icon:s.Z},{value:"key.desc",label:"Key (desc)",Icon:n.Z},{value:"type.asc",label:"Type (asc)",Icon:s.Z},{value:"type.desc",label:"Type (desc)",Icon:n.Z},{value:"refId.asc",label:"Ref ID (asc)",Icon:s.Z},{value:"refId.desc",label:"Ref ID (desc)",Icon:n.Z},{value:"createdAt.asc",label:"Date (asc)",Icon:s.Z},{value:"createdAt.desc",label:"Date (desc)",Icon:n.Z}],x=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}]},17647:function(e,t,a){"use strict";a.d(t,{AppContextProvider:function(){return p},b:function(){return v}});var l=a(57437),s=a(2265),n=a(79512),r=a(16463),i=a(23314),o=a(44785);let d=o.Z.get,c=o.Z.set;o.Z.remove;var u={get:d,set:c};function m(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var f=a(7752),h=a(58502);let x=(0,s.createContext)(null),v=()=>(0,s.useContext)(x);function p(e){let{children:t,...a}=e,o=function(e){(0,r.useRouter)();let{isAdmin:t,isSuperUser:a,sys:l}=e,{setTheme:i}=(0,n.F)();(0,s.useEffect)(()=>{"yes"===l.data.hide_theme_toggle&&i("light")},[l]);let o=(0,s.useCallback)(()=>(t||a?m():"view")||"view",[a,t]),[d,c]=(0,s.useState)(o()),h=!t&&!a||"view"===d,x=(0,s.useCallback)(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let l=function(e){return u.set("mode",e,{expires:31536e7}),m()}(...t);return f.Z.emit("mode_changed",o()),c(o()),l},[o]),v=(0,s.useCallback)(()=>{c(o())},[o]);return{...e,mode:d,viewOnly:h,onModeChange:v,getMode:m,setMode:x}}(a),[d,c]=(0,s.useState)(!1);return((0,i.Z)(()=>{c(!0)}),d)?(0,l.jsxs)(x.Provider,{value:o,children:[t,(0,l.jsx)(h.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:o.onModeChange}}]})]}):null}},23920:function(e,t,a){"use strict";a.d(t,{DataKeysCtxProvider:function(){return f},M:function(){return m}});var l=a(57437),s=a(2265),n=a(38472),r=a(73741),i=a(16463),o=a(53699),d=a(95229),c=a(83146);let u=(0,s.createContext)(null),m=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useChart must be used within a <DataKeysCtxProvider />");return e};function f(e){var t,a;let{children:m,prefetchDataKeys:f=!0}=e,x=(0,s.useRef)(!1),v=(0,i.useRouter)(),{alert:p}=(0,o.s)(),[y,b]=(0,r.v1)("uuid",{clearOnDefault:!0,shallow:!0,history:"push",defaultValue:""}),[g,j]=(0,s.useState)([]),[w,k]=(0,s.useState)(c.F4[0].value),[N,C]=(0,s.useState)(""),[_,D]=(0,s.useState)(!1),[I,T]=(0,s.useState)({data:[]}),[S,Z]=(0,s.useState)(!1),E=(0,s.useCallback)(async()=>{D(!0),n.Z.get("/api/data-keys").then(e=>{e.data.data=h(e.data.data,w),T(e.data)}).catch(e=>{T({data:[],errors:[e.message]})}).finally(()=>D(!1))},[w]);(0,s.useEffect)(()=>{!x.current&&(x.current=!0,f&&E())},[f,E]);let[z,F]=(0,s.useState)(!1),R=(0,s.useCallback)(async(e,t)=>{try{var a;F(!0);let l=(await n.Z.post("/api/data-keys/save",{data:e,broadcastAction:!0})).data;(null===(a=l.errors)||void 0===a?void 0:a.length)?p({title:"Error",message:l.errors.join(", "),variant:"error"}):(await E(),v.refresh(),p({message:"Data key saved!",variant:"success",onClose:()=>null==t?void 0:t()}))}catch(e){p({title:"Error",message:"Failed to save data key: "+e.message,onClose:()=>null==t?void 0:t(e.message)})}finally{F(!1)}},[p,v.refresh,E]),[A,P]=(0,s.useState)(!1),U=(0,s.useCallback)(async e=>{try{var t;P(!0);let a=(await n.Z.delete("/api/data-keys?data="+JSON.stringify({dataKeysIds:e,broadcastAction:!0}))).data;if(null===(t=a.errors)||void 0===t?void 0:t.length)throw Error(a.errors[0]);j([]),await E(),v.refresh(),p({title:"Success",message:"Data keys deleted successfully!",variant:"success"})}catch(e){p({title:"Error",message:e.message,variant:"error"})}finally{P(!1)}},[v.refresh,p,E]),[O,L]=(0,s.useState)(!1),V=(0,s.useCallback)(async e=>{try{var t;L(!0);let a=(await n.Z.post("/api/data-keys/export",e)).data;if(null===(t=a.errors)||void 0===t?void 0:t.length)throw Error(a.errors[0]);await E(),j([]),p({title:"Success",message:"Data exported successfully!",variant:"success"})}catch(e){p({title:"Error",message:e.message,variant:"error"})}finally{L(!1)}},[I.data,E,p]),K=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.F4[0].value;k(e),j([]),T(t=>({...t,data:h(t.data,e)}))},[]),M=(0,s.useCallback)((e,t)=>{let a=e.map(e=>I.data.find(t=>t.uniqueKey===e||t.uuid===e)).filter(e=>e);return(null==t?void 0:t.withNested)&&a.filter(e=>e.options.length).forEach(e=>{let l=M(e.options,t);a=[...a,...l]}),a.filter((e,t)=>a.map(e=>e.uniqueKey).indexOf(e.uniqueKey)===t)},[I]);return(null==I?void 0:null===(t=I.errors)||void 0===t?void 0:t.length)?(0,l.jsx)(d.Alert,{title:"Error",message:"Failed to load data keys: "+(null==I?void 0:null===(a=I.errors)||void 0===a?void 0:a.join(", ")),buttonLabel:"Try again",onClose:()=>E()}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Provider,{value:{loadingDataKeys:_,saving:z,exporting:O,deleting:A,dataKeys:I.data,errors:I.errors,selected:g,currentDataKeyUuid:y,sort:w,filter:N,extractDataKeys:M,deleteDataKeys:U,saveDataKeys:R,exportDataKeys:V,setCurrentDataKeyUuid:b,loadDataKeys:E,setSelected:j,setSort:k,onSort:K,setFilter:C},children:m})})}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.F4[0].value,a=[...e],l=e=>{let{key1:t,key2:a,sortDirection:l}=e;t=(t||"").trim().toLowerCase(),a=(a||"").trim().toLowerCase();let s=0;return"asc"===l?(t<a&&(s=-1),t>a&&(s=1)):(t>a&&(s=-1),t<a&&(s=1)),s};switch(t){case"refId.asc":a=e.sort((e,t)=>l({sortDirection:"asc",key1:(e.refId||"").trim(),key2:(t.refId||"").trim()}));break;case"refId.desc":a=e.sort((e,t)=>l({sortDirection:"desc",key1:(e.refId||"").trim(),key2:(t.refId||"").trim()}));break;case"key.desc":a=e.sort((e,t)=>l({sortDirection:"desc",key1:e.name,key2:t.name}));break;case"label.asc":a=e.sort((e,t)=>l({sortDirection:"asc",key1:(e.label||e.name||"").trim(),key2:(t.label||t.name||"").trim()}));break;case"label.desc":a=e.sort((e,t)=>l({sortDirection:"desc",key1:(e.label||e.name||"").trim(),key2:(t.label||t.name||"").trim()}));break;case"type.asc":a=e.sort((e,t)=>l({sortDirection:"asc",key1:(e.dataType||"").trim(),key2:(t.dataType||"").trim()}));break;case"type.desc":a=e.sort((e,t)=>l({sortDirection:"desc",key1:(e.dataType||"").trim(),key2:(t.dataType||"").trim()}));break;case"createdAt.asc":a=e.sort((e,t)=>l({sortDirection:"asc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(t.createdAt||"").getTime().toString()}));break;case"createdAt.desc":a=e.sort((e,t)=>l({sortDirection:"desc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(t.createdAt||"").getTime().toString()}));break;default:a=e.sort((e,t)=>l({sortDirection:"asc",key1:e.name,key2:t.name}))}return a}},53699:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var l=a(39099);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},n=(0,l.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},76230:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var l=a(39099);let s={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},n=(0,l.Ue)(e=>({isOpen:!1,...s,confirm:(t,a)=>e({isOpen:!0,...s,...a,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...s})}))},53853:function(e,t,a){"use strict";a.d(t,{k:function(){return i}});var l=a(2265),s=a(38472),n=a(17647),r=a(53699);function i(e){let{loadOnMount:t=!0,onLoadSitesError:a}={...e},[i,o]=(0,l.useState)(!1),{alert:d}=(0,r.s)(),{getSites:c}=(0,n.b)(),[u,m]=(0,l.useState)([]),f=(0,l.useCallback)(async()=>{try{var e;o(!0);let t=(await s.Z.get("/api/sites?data="+JSON.stringify({types:["webeditor"]}))).data;if(null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(t.errors.join(", "));m(t.data||[])}catch(e){d({title:"Error",message:"Failed to load sites: "+e.message,variant:"error",onClose:()=>null==a?void 0:a()})}finally{o(!1)}},[c,d,a]);return(0,l.useEffect)(()=>{t&&!u.length&&f()},[u,t,f]),{loading:i,sites:u,loadSites:f}}},7752:function(e,t,a){"use strict";var l=a(45040),s=a(20357);let n=(0,l.io)(s.env.NEXT_PUBLIC_APP_URL);t.Z=n}},function(e){e.O(0,[4868,1086,7468,6044,193,8472,231,638,2254,2860,8872,7202,2237,4638,7478,7023,1744],function(){return e(e.s=76052)}),_N_E=e.O()}]);