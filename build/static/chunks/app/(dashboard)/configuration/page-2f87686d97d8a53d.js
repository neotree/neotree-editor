(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9851],{62096:function(e,s,t){Promise.resolve().then(t.bind(t,65233)),Promise.resolve().then(t.bind(t,25704)),Promise.resolve().then(t.bind(t,24989))},65233:function(e,s,t){"use strict";t.d(s,{ConfigKeysTable:function(){return S}});var a=t(57437),n=t(44380),r=t(24989),i=t(39661),l=t(37440),o=t(17647),d=t(90399),c=t(50495),u=t(17501);function f(){let{selected:e,configKeys:s,onDelete:t}=(0,r.u)();if(!e.length)return null;let n=s.data.filter((s,t)=>e.includes(t)).map(e=>e.configKeyId);return(0,a.jsx)(a.Fragment,{children:!!e.length&&(0,a.jsx)(u.h,{children:(0,a.jsxs)(c.z,{variant:"destructive",className:"h-auto w-auto",onClick:()=>t(n),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{children:e.length>1?"Delete ".concat(e.length):"Delete"})]})})})}var m=t(45188),x=t(6649),h=t(75733),g=t(46910),p=t(61386),b=t(71239);function v(e){let{item:s}=e,{disabled:t,onDelete:n,setActiveItemId:i}=(0,r.u)(),l={isDraft:s.isDraft,userId:s.draftCreatedByUserId,dataType:"config key"},o=(0,b.v)(l),u=t||o;return(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsx)(p.O,{...l}),(0,a.jsxs)(g.h_,{children:[(0,a.jsx)(g.$F,{asChild:!0,children:(0,a.jsx)(c.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(g.AW,{children:[(0,a.jsx)(g.Xi,{onClick:()=>i(s.configKeyId),children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," View"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"})," Edit"]})}),!u&&(0,a.jsxs)(g.Xi,{onClick:()=>setTimeout(()=>n([s.configKeyId]),0),className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})]})]})}var j=t(2265),y=t(92513),N=t(39343),w=t(20920),C=t(83102),k=t(67135),I=t(95317);function D(e){let{formData:s}=e,t=(0,b.v)({isDraft:!!(null==s?void 0:s.isDraft),userId:null==s?void 0:s.draftCreatedByUserId}),{disabled:n,onSave:i}=(0,r.u)(),l=n||t,{register:o,handleSubmit:d}=(0,N.cI)({defaultValues:{key:(null==s?void 0:s.key)||"",label:(null==s?void 0:s.label)||"",configKeyId:(null==s?void 0:s.configKeyId)||(0,w.Z)(),summary:(null==s?void 0:s.summary)||""}}),u=d(e=>i([e]));return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(I.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col",children:[(0,a.jsxs)(I.Tu,{className:"py-4 px-4 border-b border-b-border",children:[(0,a.jsx)(I.bC,{children:"".concat(s?"Update":"Add"," template")}),(0,a.jsx)(I.Ei,{className:"hidden"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{htmlFor:"key",children:"Key *"}),(0,a.jsx)(C.I,{...o("key",{disabled:l,required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{htmlFor:"label",children:"Label *"}),(0,a.jsx)(C.I,{...o("label",{disabled:l,required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{htmlFor:"summary",children:"Summary"}),(0,a.jsx)(C.I,{...o("summary",{disabled:l})})]})]}),(0,a.jsxs)(I.FF,{className:"border-t border-t-border px-4 py-2 gap-x-2",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(I.sw,{asChild:!0,children:(0,a.jsx)(c.z,{variant:"ghost",children:"Cancel"})}),(0,a.jsx)(c.z,{onClick:()=>u(),children:"Save"})]})]})})}function F(e){let{formData:s,open:t}=e,{disabled:n,isFormOpen:i,onFormOpenChange:l}=(0,r.u)(),o=(0,j.useMemo)(()=>t||i,[t,i]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(I.yo,{open:o,onOpenChange:e=>{l(e)},children:[!s&&!n&&(0,a.jsx)(I.aM,{asChild:!0,children:(0,a.jsx)(c.z,{size:"icon",className:"rounded-full w-12 h-12",children:(0,a.jsx)(y.Z,{className:"h-6 w-6"})})}),o&&(0,a.jsx)(D,{...e})]})})}function S(){let{sys:e,viewOnly:s}=(0,o.b)(),{disabled:t,loading:d,selected:c,configKeys:u,activeItem:m,setSelected:x,onSort:h}=(0,r.u)();return(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(i.a,{overlay:!0}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(n.DataTable,{selectedIndexes:c,onSelect:x,title:"Configuration",selectable:!t,sortable:!t,loading:d,maxRows:25,onSort:h,getRowOptions:e=>{let{rowIndex:t}=e,a=u.data[t];return a?{className:(0,l.cn)(!s&&a.isDraft&&"bg-danger/20 hover:bg-danger/30")}:{}},search:{inputPlaceholder:"Search config keys"},noDataMessage:(0,a.jsxs)("div",{className:"mt-4 flex flex-col items-center justify-center gap-y-2",children:[(0,a.jsx)("div",{children:"No config keys saved. To add settings, click:"}),(0,a.jsx)(F,{})]}),columns:[{name:"Position",cellRenderer(e){let{rowIndex:s}=e;return s+1}},{name:"Key"},{name:"Label"},{name:"Description"},{name:"Version",align:"right",cellClassName:(0,l.cn)("min-w-10","yes"===e.data.hide_data_table_version&&"hidden"),cellRenderer(e){let s=u.data[e.rowIndex];if(!s)return null;let t=s.isDraft?Math.max(0,s.version-1):s.version;return(0,a.jsxs)("div",{className:"inline-flex items-center gap-x-[2px]",children:[(0,a.jsx)("div",{className:(0,l.cn)("w-2 h-2 rounded-full",t?"bg-green-400":"bg-gray-300")}),(0,a.jsx)("span",{children:t||s.version}),!!t&&s.version!==t&&(0,a.jsxs)("span",{children:["(Draft v",s.version,")"]})]})}},{name:"Action",align:"right",cellClassName:"w-10",cellRenderer(e){let{rowIndex:s}=e,t=u.data[s];return t?(0,a.jsx)(v,{item:t}):null}}],data:u.data.map(e=>[e.position,e.key||"",e.label||"",e.summary||"",e.version,""])})}),!!u.data.length&&(0,a.jsx)("div",{className:"fixed bottom-5 right-10",children:(0,a.jsx)(F,{})}),!!m&&(0,a.jsx)(F,{formData:m,open:!0}),(0,a.jsx)(f,{})]})}},83102:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(57437),n=t(2265),r=t(37440);let i=n.forwardRef((e,s)=>{let{className:t,type:n,noRing:i,error:l,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",l&&"border-danger",l&&!i&&"focus-visible:ring-danger",t),ref:s,...o})});i.displayName="Input"},95317:function(e,s,t){"use strict";t.d(s,{Ei:function(){return v},FF:function(){return p},Tu:function(){return g},aM:function(){return c},bC:function(){return b},sw:function(){return u},ue:function(){return h},yo:function(){return d}});var a=t(57437),n=t(2265),r=t(13304),i=t(13027),l=t(74697),o=t(37440);let d=r.fC,c=r.xz,u=r.x8,f=r.h_,m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s})});m.displayName=r.aV.displayName;let x=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=n.forwardRef((e,s)=>{let{side:t="right",className:n,children:i,hideCloseButton:d,...c}=e;return(0,a.jsxs)(f,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.VY,{ref:s,className:(0,o.cn)(x({side:t}),n),...c,children:[i,!0!==d&&(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=r.VY.displayName;let g=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};g.displayName="SheetHeader";let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};p.displayName="SheetFooter";let b=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold text-foreground",t),...n})});b.displayName=r.Dx.displayName;let v=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...n})});v.displayName=r.dk.displayName},24989:function(e,s,t){"use strict";t.d(s,{ConfigKeysContextProvider:function(){return f},u:function(){return u}});var a=t(57437),n=t(2265),r=t(16463),i=t(12599),l=t(53699),o=t(76230),d=t(17647);let c=(0,n.createContext)(null),u=()=>(0,n.useContext)(c);function f(e){let{children:s,...t}=e,u=function(e){let{configKeys:s,saveConfigKeys:t,deleteConfigKeys:a}=e,c=(0,r.useRouter)(),{viewOnly:u}=(0,d.b)(),[f,m]=(0,n.useState)(s),[x,h]=(0,n.useState)(),[g,p]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)([]),{alert:C}=(0,l.s)(),{confirm:k}=(0,o.t)();(0,n.useEffect)(()=>{m(s)},[s]);let I=(0,n.useCallback)(e=>{e&&x||p(e),e||h(void 0)},[x]),D=(0,n.useCallback)(async e=>{var s;v(!0);let a=await t({data:e,broadcastAction:!0});(null===(s=a.errors)||void 0===s?void 0:s.length)?C({title:"Error",message:a.errors.join(", "),variant:"error"}):(I(!1),c.refresh(),C({title:"Success",message:"Config keys saved successfully!",variant:"success"})),v(!1)},[t,C,I,c]),F=(0,n.useCallback)(async e=>{k(async()=>{var s;let t={...f};m(s=>({...s,data:s.data.filter(s=>!e.includes(s.configKeyId))})),w([]),y(!0);let n=await a({configKeysIds:e,broadcastAction:!0});(null===(s=n.errors)||void 0===s?void 0:s.length)?C({title:"Error",message:n.errors.join(", "),variant:"error",onClose:()=>m(t)}):(I(!1),w([]),c.refresh(),C({title:"Success",message:"Config keys deleted successfully!",variant:"success"})),y(!1)},{danger:!0,title:"Delete config keys",message:"Are you sure you want to delete config keys?",positiveLabel:"Yes, delete"})},[a,k,C,c,f]),S=(0,n.useCallback)(async(e,s)=>{let a=(0,i.q)([...f.data],e,s),n=[];a.forEach((e,s)=>{if(f.data[s].position!==e.position){let t=s+1;n.push({configKeyId:e.configKeyId,position:t}),a[s].position=t}}),m(e=>({...e,data:a})),await t({data:n,broadcastAction:!0})},[t,C]),K=(0,n.useMemo)(()=>x?f.data.filter(e=>e.configKeyId===x)[0]:null,[x,f]);return{saving:b,isFormOpen:g,activeItemId:x,loading:j,selected:N,configKeys:f,activeItem:K,disabled:(0,n.useMemo)(()=>u,[u]),onSort:S,setConfigKeys:m,setSelected:w,setLoading:y,setActiveItemId:h,setSaving:v,onFormOpenChange:I,onSave:D,onDelete:F}}(t);return(0,a.jsx)(c.Provider,{value:{...t,...u},children:s})}},53699:function(e,s,t){"use strict";t.d(s,{s:function(){return r}});var a=t(39099);let n={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},r=(0,a.Ue)(e=>({isOpen:!1,...n,alert:s=>e({isOpen:!0,...n,...s}),close:()=>e({isOpen:!1,onClose:void 0,...n})}))}},function(e){e.O(0,[4868,1086,7468,6044,8472,193,638,2254,8872,6306,4380,6323,7478,7023,1744],function(){return e(e.s=62096)}),_N_E=e.O()}]);