(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{17426:function(e,t,a){Promise.resolve().then(a.bind(a,11326)),Promise.resolve().then(a.bind(a,25704))},11326:function(e,t,a){"use strict";a.d(t,{HospitalsTable:function(){return C}});var n=a(57437),s=a(2265),r=a(27776),i=a(38472),o=a(92513),l=a(75944),d=a(50495),c=a(39661),u=a(23733),f=a(76230),p=a(45188),h=a(90399),m=a(46910);function x(e){let{hospitalId:t,hospitalName:a,onDelete:s}=e,r=(0,u.l)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(d.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,n.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)(m.AW,{children:[(0,n.jsx)(m.Ju,{children:a}),(0,n.jsx)(m.VD,{}),(0,n.jsx)(m.Xi,{onClick:()=>r.push({hospitalId:t}),children:"Edit"}),(0,n.jsx)(m.VD,{}),(0,n.jsxs)(m.Xi,{onClick:s,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,n.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Delete"})]})]})]})})}var v=a(42873),y=a(20920),g=a(39343),j=a(95317),b=a(83102),N=a(67135),w=a(53699);function k(e){let{open:t,hospitalId:a,getHospital:r,onClose:o,saveHospitals:l,onSaveSuccess:f}=e,p=(0,s.useRef)(!1),{alert:h}=(0,w.s)(),{parsed:m,replace:x}=(0,u.l)(),k=a||m.hospitalId,[C,T]=(0,s.useState)(!1),[I,E]=(0,s.useState)(!1),[,Z]=(0,s.useState)(),{setValue:S,register:_,handleSubmit:O}=(0,g.cI)({defaultValues:{id:null,hospitalId:k||(0,y.Z)(),name:""}}),A=(0,s.useCallback)(async()=>{if(k){T(!0);try{var e;let{data:t,errors:a}=(await i.Z.get("/api/hospitals/"+k)).data,n=null==a?void 0:null===(e=a.join)||void 0===e?void 0:e.call(a,", ");if(n)throw n;Z(t),t&&(S("id",t.id),S("hospitalId",t.hospitalId),S("name",t.name))}catch(e){h({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>x({hospitalId:void 0})})}finally{T(!1)}}},[k,x,h,S,r]);(0,s.useEffect)(()=>{p.current||A(),p.current=!0},[A]);let L=O(e=>{(async()=>{try{E(!0);let t=[{...e,id:e.id||void 0}],{errors:a}=(await i.Z.post("/api/hospitals/save",{data:t})).data;if(null==a?void 0:a.length)throw Error(a.join(", "));f&&await f(),h({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{null==o||o(),x({hospitalId:void 0})}})}catch(e){h({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{E(!1)}})()});return C?(0,n.jsx)(c.a,{overlay:!0}):(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsx)(c.a,{overlay:!0}),(0,n.jsxs)(j.yo,{open:t||!!m.hospitalId,onOpenChange:()=>{null==o||o(),x({hospitalId:void 0})},children:[(0,n.jsx)(j.aM,{asChild:!0,children:(0,n.jsx)(d.z,{className:"md:hidden",variant:"ghost",children:(0,n.jsx)(v.Z,{className:"h-6 w-6"})})}),(0,n.jsxs)(j.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[(0,n.jsx)(j.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,n.jsxs)(j.bC,{children:[k?"Edit":"New"," Hospital"]})}),(0,n.jsx)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(N._,{htmlFor:"name",children:"Hospital Name"}),(0,n.jsx)(b.I,{..._("name",{required:!0,disabled:I}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,n.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[(0,n.jsx)(j.sw,{asChild:!0,children:(0,n.jsx)(d.z,{variant:"outline",children:"Cancel"})}),(0,n.jsx)(d.z,{onClick:L,children:"Save"})]})]})]})]})}function C(e){let{hospitals:t,getHospitals:a,deleteHospitals:p,getHospital:h,saveHospitals:m}=e,v=(0,u.l)(),[y,g]=(0,s.useState)(t),[j,b]=(0,s.useState)(!1),[N,w]=(0,s.useState)([]),[C,T]=(0,s.useState)(!1),{confirm:I}=(0,f.t)(),E=(0,s.useCallback)(async(e,t)=>{var a,n;b(!0);let s=(await i.Z.get("/api/hospitals?data="+JSON.stringify({...v.parsed}))).data,o=null===(n=s.errors)||void 0===n?void 0:null===(a=n.join)||void 0===a?void 0:a.call(n,", ");o?r.Am.error(o):(g(s),w([])),null==t||t(o,s),b(!1)},[a,v,t]),Z=(0,s.useCallback)((e,t)=>{let a=y.data.filter(t=>e.includes(t.hospitalId)).map(e=>e.name);I(()=>{(async()=>{try{b(!0),await i.Z.delete("/api/hospitals?data="+JSON.stringify({hospitalsIds:e})),await E(),null==t||t()}catch(e){r.Am.error(e.message)}finally{b(!1)}})()},{title:"Delete "+(a.length>1?"hospitals":"hospital"),message:"<p>Are you sure you want to delete:</p> ".concat(a.map(e=>'<div class="font-bold text-danger">'.concat(e,"</div>")).join("")),negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[I,p,E,y]),S=v.parsed.hospitalId||C?(0,n.jsx)(k,{open:C,getHospital:h,saveHospitals:m,onSaveSuccess:E,onClose:()=>T(!1)}):null;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(l.DataTable,{selectable:!0,title:"Hospitals",search:{inputPlaceholder:"Search hospitals"},headerActions:(0,n.jsxs)(d.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>T(e=>!e),children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,n.jsx)("span",{children:"New Hospital"})]}),selectedIndexes:N,onSelect:w,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=y.data[e.rowIndex];return(0,n.jsx)(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>Z([t.hospitalId])})}}],data:y.data.map(e=>[e.name,""])}),S,j&&(0,n.jsx)(c.a,{overlay:!0})]})}},39661:function(e,t,a){"use strict";a.d(t,{a:function(){return r}});var n=a(57437),s=a(89627);function r(e){let{overlay:t,transparent:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:a?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,n.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},25704:function(e,t,a){"use strict";a.d(t,{Title:function(){return r}});var n=a(2265),s=a(20357);function r(e){let{children:t}=e;return(0,n.useEffect)(()=>{document.title=[s.env.NEXT_PUBLIC_APP_NAME,t].filter(e=>e).join(" - ")},[t]),(0,n.useEffect)(()=>()=>{document.title="".concat(s.env.NEXT_PUBLIC_APP_NAME)},[]),null}},67135:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var n=a(57437),s=a(2265),r=a(38364),i=a(12218),o=a(37440);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,secondary:s,error:i,...d}=e;return(0,n.jsx)(r.f,{ref:t,className:(0,o.cn)(l(),s&&"text-xs",i?"text-danger":"",a),...d})});d.displayName=r.f.displayName},95317:function(e,t,a){"use strict";a.d(t,{Ei:function(){return g},FF:function(){return v},Tu:function(){return x},aM:function(){return c},bC:function(){return y},sw:function(){return u},ue:function(){return m},yo:function(){return d}});var n=a(57437),s=a(2265),r=a(13304),i=a(12218),o=a(74697),l=a(37440);let d=r.fC,c=r.xz,u=r.x8,f=r.h_,p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});p.displayName=r.aV.displayName;let h=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:i,hideCloseButton:d,...c}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(p,{}),(0,n.jsxs)(r.VY,{ref:t,className:(0,l.cn)(h({side:a}),s),...c,children:[i,!0!==d&&(0,n.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="SheetHeader";let v=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};v.displayName="SheetFooter";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",a),...s})});y.displayName=r.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=r.dk.displayName},53699:function(e,t,a){"use strict";a.d(t,{s:function(){return r}});var n=a(39099);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},r=(0,n.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},76230:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});var n=a(39099);let s={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},r=(0,n.Ue)(e=>({isOpen:!1,...s,confirm:(t,a)=>e({isOpen:!0,...s,...a,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...s})}))},89627:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},42873:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},92513:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20357:function(e,t,a){"use strict";var n,s;e.exports=(null==(n=a.g.process)?void 0:n.env)&&"object"==typeof(null==(s=a.g.process)?void 0:s.env)?a.g.process:a(88081)},88081:function(e){!function(){var t={229:function(e){var t,a,n,s=e.exports={};function r(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var l=[],d=!1,c=-1;function u(){d&&n&&(d=!1,n.length?l=n.concat(l):c=-1,l.length&&f())}function f(){if(!d){var e=o(u);d=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new p(e,t)),1!==l.length||d||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}},i=!0;try{t[e](r,r.exports,n),i=!1}finally{i&&delete a[e]}return r.exports}n.ab="//";var s=n(229);e.exports=s}()}},function(e){e.O(0,[4868,5360,8429,659,7776,9343,4199,7651,6927,8472,220,5944,7478,7023,1744],function(){return e(e.s=17426)}),_N_E=e.O()}]);