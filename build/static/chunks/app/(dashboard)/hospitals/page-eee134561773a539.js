(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{17426:function(e,t,a){Promise.resolve().then(a.bind(a,11326)),Promise.resolve().then(a.bind(a,25704))},11326:function(e,t,a){"use strict";a.d(t,{HospitalsTable:function(){return E}});var n=a(57437),s=a(2265),i=a(27776),r=a(38472),o=a(92513),l=a(76942),u=a(50495),d=a(39661),c=a(23733),f=a(76230),p=a(45188),h=a(90399),m=a(46910);function x(e){let{hospitalId:t,hospitalName:a,onDelete:s}=e,i=(0,c.l)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(u.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,n.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)(m.AW,{children:[(0,n.jsx)(m.Ju,{children:a}),(0,n.jsx)(m.VD,{}),(0,n.jsx)(m.Xi,{onClick:()=>i.push({hospitalId:t}),children:"Edit"}),(0,n.jsx)(m.VD,{}),(0,n.jsxs)(m.Xi,{onClick:s,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,n.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Delete"})]})]})]})})}var v=a(42873),y=a(20920),g=a(39343),b=a(95317),j=a(83102),w=a(67135),N=a(53699);function S(e){let{open:t,hospitalId:a,getHospital:i,onClose:o,saveHospitals:l,onSaveSuccess:f}=e,p=(0,s.useRef)(!1),{alert:h}=(0,N.s)(),{parsed:m,replace:x}=(0,c.l)(),S=a||m.hospitalId,[E,k]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[,O]=(0,s.useState)(),{setValue:D,register:Z,handleSubmit:_}=(0,g.cI)({defaultValues:{id:null,hospitalId:S||(0,y.Z)(),name:""}}),z=(0,s.useCallback)(async()=>{if(S){k(!0);try{var e;let{data:t,errors:a}=(await r.Z.get("/api/hospitals/"+S)).data,n=null==a?void 0:null===(e=a.join)||void 0===e?void 0:e.call(a,", ");if(n)throw n;O(t),t&&(D("id",t.id),D("hospitalId",t.hospitalId),D("name",t.name))}catch(e){h({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>x({hospitalId:void 0})})}finally{k(!1)}}},[S,x,h,D,i]);(0,s.useEffect)(()=>{p.current||z(),p.current=!0},[z]);let A=_(e=>{(async()=>{try{I(!0);let t=[{...e,id:e.id||void 0}],{errors:a}=(await r.Z.post("/api/hospitals/save",{data:t})).data;if(null==a?void 0:a.length)throw Error(a.join(", "));f&&await f(),h({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{null==o||o(),x({hospitalId:void 0})}})}catch(e){h({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{I(!1)}})()});return E?(0,n.jsx)(d.a,{overlay:!0}):(0,n.jsxs)(n.Fragment,{children:[C&&(0,n.jsx)(d.a,{overlay:!0}),(0,n.jsxs)(b.yo,{open:t||!!m.hospitalId,onOpenChange:()=>{null==o||o(),x({hospitalId:void 0})},children:[(0,n.jsx)(b.aM,{asChild:!0,children:(0,n.jsx)(u.z,{className:"md:hidden",variant:"ghost",children:(0,n.jsx)(v.Z,{className:"h-6 w-6"})})}),(0,n.jsxs)(b.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[(0,n.jsx)(b.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,n.jsxs)(b.bC,{children:[S?"Edit":"New"," Hospital"]})}),(0,n.jsx)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(w._,{htmlFor:"name",children:"Hospital Name"}),(0,n.jsx)(j.I,{...Z("name",{required:!0,disabled:C}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,n.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[(0,n.jsx)(b.sw,{asChild:!0,children:(0,n.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,n.jsx)(u.z,{onClick:A,children:"Save"})]})]})]})]})}function E(e){let{hospitals:t,getHospitals:a,deleteHospitals:p,getHospital:h,saveHospitals:m}=e,v=(0,c.l)(),[y,g]=(0,s.useState)(t),[b,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)([]),[E,k]=(0,s.useState)(!1),{confirm:C}=(0,f.t)(),I=(0,s.useCallback)(async(e,t)=>{var a,n;j(!0);let s=(await r.Z.get("/api/hospitals?data="+JSON.stringify({...v.parsed}))).data,o=null===(n=s.errors)||void 0===n?void 0:null===(a=n.join)||void 0===a?void 0:a.call(n,", ");o?i.Am.error(o):(g(s),N([])),null==t||t(o,s),j(!1)},[a,v,t]),O=(0,s.useCallback)((e,t)=>{let a=y.data.filter(t=>e.includes(t.hospitalId)).map(e=>e.name);C(()=>{(async()=>{try{j(!0),await r.Z.delete("/api/hospitals?data="+JSON.stringify({hospitalsIds:e})),await I(),null==t||t()}catch(e){i.Am.error(e.message)}finally{j(!1)}})()},{title:"Delete "+(a.length>1?"hospitals":"hospital"),message:"<p>Are you sure you want to delete:</p> ".concat(a.map(e=>'<div class="font-bold text-danger">'.concat(e,"</div>")).join("")),negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,p,I,y]),D=v.parsed.hospitalId||E?(0,n.jsx)(S,{open:E,getHospital:h,saveHospitals:m,onSaveSuccess:I,onClose:()=>k(!1)}):null;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(l.DataTable,{selectable:!0,title:"Hospitals",search:{inputPlaceholder:"Search hospitals"},headerActions:(0,n.jsxs)(u.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>k(e=>!e),children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,n.jsx)("span",{children:"New Hospital"})]}),selectedIndexes:w,onSelect:N,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=y.data[e.rowIndex];return(0,n.jsx)(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>O([t.hospitalId])})}}],data:y.data.map(e=>[e.name,""])}),D,b&&(0,n.jsx)(d.a,{overlay:!0})]})}},39661:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var n=a(57437),s=a(89627);function i(e){let{overlay:t,transparent:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:a?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,n.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},25704:function(e,t,a){"use strict";a.d(t,{Title:function(){return i}});var n=a(2265),s=a(20357);function i(e){let{children:t}=e;return(0,n.useEffect)(()=>{document.title=[s.env.NEXT_PUBLIC_APP_NAME,t].filter(e=>e).join(" - ")},[t]),(0,n.useEffect)(()=>()=>{document.title="".concat(s.env.NEXT_PUBLIC_APP_NAME)},[]),null}},67135:function(e,t,a){"use strict";a.d(t,{_:function(){return u}});var n=a(57437),s=a(2265),i=a(38364),r=a(13027),o=a(37440);let l=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:a,secondary:s,error:r,...u}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,o.cn)(l(),s&&"text-xs",r?"text-danger":"",a),...u})});u.displayName=i.f.displayName},95317:function(e,t,a){"use strict";a.d(t,{Ei:function(){return g},FF:function(){return v},Tu:function(){return x},aM:function(){return d},bC:function(){return y},sw:function(){return c},ue:function(){return m},yo:function(){return u}});var n=a(57437),s=a(2265),i=a(13304),r=a(13027),o=a(74697),l=a(37440);let u=i.fC,d=i.xz,c=i.x8,f=i.h_,p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});p.displayName=i.aV.displayName;let h=(0,r.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:r,hideCloseButton:u,...d}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(p,{}),(0,n.jsxs)(i.VY,{ref:t,className:(0,l.cn)(h({side:a}),s),...d,children:[r,!0!==u&&(0,n.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="SheetHeader";let v=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};v.displayName="SheetFooter";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",a),...s})});y.displayName=i.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=i.dk.displayName},53699:function(e,t,a){"use strict";a.d(t,{s:function(){return i}});var n=a(39099);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},i=(0,n.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},76230:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var n=a(39099);let s={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},i=(0,n.Ue)(e=>({isOpen:!1,...s,confirm:(t,a)=>e({isOpen:!0,...s,...a,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...s})}))},89627:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},42873:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},92513:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},46246:function(e,t,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=a(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,r=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!s(e,a)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),n=i({inst:{value:a,getSnapshot:t}}),s=n[0].inst,d=n[1];return o(function(){s.value=a,s.getSnapshot=t,u(s)&&d({inst:s})},[e,a,t]),r(function(){return u(s)&&d({inst:s}),e(function(){u(s)&&d({inst:s})})},[e]),l(a),a};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},94453:function(e,t,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=a(2265),s=a(10554),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=s.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,n,s){var c=o(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;var p=r(e,(c=u(function(){function e(e){if(!l){if(l=!0,r=e,e=n(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return o=t}return o=e}if(t=o,i(r,e))return t;var a=n(e);return void 0!==s&&s(t,a)?(r=e,t):(r=e,o=a)}var r,o,l=!1,u=void 0===a?null:a;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,a,n,s]))[0],c[1]);return l(function(){f.hasValue=!0,f.value=p},[p]),d(p),p}},10554:function(e,t,a){"use strict";e.exports=a(46246)},35006:function(e,t,a){"use strict";e.exports=a(94453)},39099:function(e,t,a){"use strict";a.d(t,{Ue:function(){return f}});let n=e=>{let t;let a=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,i={setState:n,getState:s,getInitialState:()=>r,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},r=t=e(n,s,i);return i},s=e=>e?n(e):n;var i=a(2265),r=a(35006);let{useDebugValue:o}=i,{useSyncExternalStoreWithSelector:l}=r,u=!1,d=e=>e,c=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,a=(e,a)=>(function(e,t=d,a){a&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return o(n),n})(t,e,a);return Object.assign(a,t),a},f=e=>e?c(e):c}},function(e){e.O(0,[4868,1086,7468,6044,9554,7776,9343,1072,8472,220,6942,7478,7023,1744],function(){return e(e.s=17426)}),_N_E=e.O()}]);