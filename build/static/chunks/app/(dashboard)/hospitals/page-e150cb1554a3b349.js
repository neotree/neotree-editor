(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{17426:function(e,t,n){Promise.resolve().then(n.bind(n,11326)),Promise.resolve().then(n.bind(n,25704))},11326:function(e,t,n){"use strict";n.d(t,{HospitalsTable:function(){return k}});var a=n(57437),s=n(2265),r=n(27776),i=n(38472),o=n(92513),l=n(76942),u=n(50495),c=n(39661),d=n(23733),f=n(76230),p=n(45188),h=n(90399),m=n(46910);function x(e){let{hospitalId:t,hospitalName:n,onDelete:s}=e,r=(0,d.l)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.h_,{children:[(0,a.jsx)(m.$F,{asChild:!0,children:(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(m.AW,{children:[(0,a.jsx)(m.Ju,{children:n}),(0,a.jsx)(m.VD,{}),(0,a.jsx)(m.Xi,{onClick:()=>r.push({hospitalId:t}),children:"Edit"}),(0,a.jsx)(m.VD,{}),(0,a.jsxs)(m.Xi,{onClick:s,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})]})})}var y=n(42873),v=n(20920),g=n(39343),b=n(95317),j=n(83102),w=n(67135),N=n(53699);function S(e){let{open:t,hospitalId:n,getHospital:r,onClose:o,saveHospitals:l,onSaveSuccess:f}=e,p=(0,s.useRef)(!1),{alert:h}=(0,N.s)(),{parsed:m,replace:x}=(0,d.l)(),S=n||m.hospitalId,[k,E]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[,D]=(0,s.useState)(),{setValue:Z,register:O,handleSubmit:V}=(0,g.cI)({defaultValues:{id:null,hospitalId:S||(0,v.Z)(),name:""}}),M=(0,s.useCallback)(async()=>{if(S){E(!0);try{var e;let{data:t,errors:n}=(await i.Z.get("/api/hospitals/"+S)).data,a=null==n?void 0:null===(e=n.join)||void 0===e?void 0:e.call(n,", ");if(a)throw a;D(t),t&&(Z("id",t.id),Z("hospitalId",t.hospitalId),Z("name",t.name))}catch(e){h({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>x({hospitalId:void 0})})}finally{E(!1)}}},[S,x,h,Z,r]);(0,s.useEffect)(()=>{p.current||M(),p.current=!0},[M]);let U=V(e=>{(async()=>{try{I(!0);let t=[{...e,id:e.id||void 0}],{errors:n}=(await i.Z.post("/api/hospitals/save",{data:t})).data;if(null==n?void 0:n.length)throw Error(n.join(", "));f&&await f(),h({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{null==o||o(),x({hospitalId:void 0})}})}catch(e){h({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{I(!1)}})()});return k?(0,a.jsx)(c.a,{overlay:!0}):(0,a.jsxs)(a.Fragment,{children:[C&&(0,a.jsx)(c.a,{overlay:!0}),(0,a.jsxs)(b.yo,{open:t||!!m.hospitalId,onOpenChange:()=>{null==o||o(),x({hospitalId:void 0})},children:[(0,a.jsx)(b.aM,{asChild:!0,children:(0,a.jsx)(u.z,{className:"md:hidden",variant:"ghost",children:(0,a.jsx)(y.Z,{className:"h-6 w-6"})})}),(0,a.jsxs)(b.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[(0,a.jsx)(b.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,a.jsxs)(b.bC,{children:[S?"Edit":"New"," Hospital"]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{htmlFor:"name",children:"Hospital Name"}),(0,a.jsx)(j.I,{...O("name",{required:!0,disabled:C}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,a.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[(0,a.jsx)(b.sw,{asChild:!0,children:(0,a.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,a.jsx)(u.z,{onClick:U,children:"Save"})]})]})]})]})}function k(e){let{hospitals:t,getHospitals:n,deleteHospitals:p,getHospital:h,saveHospitals:m}=e,y=(0,d.l)(),[v,g]=(0,s.useState)(t),[b,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)([]),[k,E]=(0,s.useState)(!1),{confirm:C}=(0,f.t)(),I=(0,s.useCallback)(async(e,t)=>{var n,a;j(!0);let s=(await i.Z.get("/api/hospitals?data="+JSON.stringify({...y.parsed}))).data,o=null===(a=s.errors)||void 0===a?void 0:null===(n=a.join)||void 0===n?void 0:n.call(a,", ");o?r.Am.error(o):(g(s),N([])),null==t||t(o,s),j(!1)},[n,y,t]),D=(0,s.useCallback)((e,t)=>{let n=v.data.filter(t=>e.includes(t.hospitalId)).map(e=>e.name);C(()=>{(async()=>{try{j(!0),await i.Z.delete("/api/hospitals?data="+JSON.stringify({hospitalsIds:e})),await I(),null==t||t()}catch(e){r.Am.error(e.message)}finally{j(!1)}})()},{title:"Delete "+(n.length>1?"hospitals":"hospital"),message:"<p>Are you sure you want to delete:</p> ".concat(n.map(e=>'<div class="font-bold text-danger">'.concat(e,"</div>")).join("")),negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,p,I,v]),Z=y.parsed.hospitalId||k?(0,a.jsx)(S,{open:k,getHospital:h,saveHospitals:m,onSaveSuccess:I,onClose:()=>E(!1)}):null;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(l.DataTable,{selectable:!0,title:"Hospitals",search:{inputPlaceholder:"Search hospitals"},headerActions:(0,a.jsxs)(u.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>E(e=>!e),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:"New Hospital"})]}),selectedIndexes:w,onSelect:N,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=v.data[e.rowIndex];return(0,a.jsx)(x,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>D([t.hospitalId])})}}],data:v.data.map(e=>[e.name,""])}),Z,b&&(0,a.jsx)(c.a,{overlay:!0})]})}},39661:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var a=n(57437),s=n(89627);function r(e){let{overlay:t,transparent:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:n?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,a.jsx)(s.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},25704:function(e,t,n){"use strict";n.d(t,{Title:function(){return r}});var a=n(2265),s=n(20357);function r(e){let{children:t}=e;return(0,a.useEffect)(()=>{document.title=[s.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,a.useEffect)(()=>()=>{document.title="".concat(s.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},67135:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var a=n(57437),s=n(2265),r=n(38364),i=n(13027),o=n(37440);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:n,secondary:s,error:i,...u}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,o.cn)(l(),s&&"text-xs",i?"text-danger":"",n),...u})});u.displayName=r.f.displayName},95317:function(e,t,n){"use strict";n.d(t,{Ei:function(){return g},FF:function(){return y},Tu:function(){return x},aM:function(){return c},bC:function(){return v},sw:function(){return d},ue:function(){return m},yo:function(){return u}});var a=n(57437),s=n(2265),r=n(13304),i=n(13027),o=n(74697),l=n(37440);let u=r.fC,c=r.xz,d=r.x8,f=r.h_,p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:t})});p.displayName=r.aV.displayName;let h=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=s.forwardRef((e,t)=>{let{side:n="right",className:s,children:i,hideCloseButton:u,...c}=e;return(0,a.jsxs)(f,{children:[(0,a.jsx)(p,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,l.cn)(h({side:n}),s),...c,children:[i,!0!==u&&(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};x.displayName="SheetHeader";let y=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};y.displayName="SheetFooter";let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",n),...s})});v.displayName=r.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});g.displayName=r.dk.displayName},53699:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var a=n(39099);let s={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},r=(0,a.Ue)(e=>({isOpen:!1,...s,alert:t=>e({isOpen:!0,...s,...t}),close:()=>e({isOpen:!1,onClose:void 0,...s})}))},76230:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var a=n(39099);let s={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},r=(0,a.Ue)(e=>({isOpen:!1,...s,confirm:(t,n)=>e({isOpen:!0,...s,...n,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...s})}))},45188:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},89627:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},42873:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},92513:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},90399:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},46246:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=r({inst:{value:n,getSnapshot:t}}),s=a[0].inst,c=a[1];return o(function(){s.value=n,s.getSnapshot=t,u(s)&&c({inst:s})},[e,n,t]),i(function(){return u(s)&&c({inst:s}),e(function(){u(s)&&c({inst:s})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},94453:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(2265),s=n(10554),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useSyncExternalStore,o=a.useRef,l=a.useEffect,u=a.useMemo,c=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var d=o(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var p=i(e,(d=u(function(){function e(e){if(!l){if(l=!0,i=e,e=a(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return o=t}return o=e}if(t=o,r(i,e))return t;var n=a(e);return void 0!==s&&s(t,n)?(i=e,t):(i=e,o=n)}var i,o,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,a,s]))[0],d[1]);return l(function(){f.hasValue=!0,f.value=p},[p]),c(p),p}},10554:function(e,t,n){"use strict";e.exports=n(46246)},35006:function(e,t,n){"use strict";e.exports=n(94453)},20920:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});for(var a,s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},r=new Uint8Array(16),i=[],o=0;o<256;++o)i.push((o+256).toString(16).slice(1));var l=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();var o=(e=e||{}).random||(e.rng||function(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var l=0;l<16;++l)t[n+l]=o[l];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(o)}},38364:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var a=n(2265),s=n(25171),r=n(57437),i=a.forwardRef((e,t)=>(0,r.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},39099:function(e,t,n){"use strict";n.d(t,{Ue:function(){return f}});let a=e=>{let t;let n=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,r={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(a,s,r);return r},s=e=>e?a(e):a;var r=n(2265),i=n(35006);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:l}=i,u=!1,c=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,n=(e,n)=>(function(e,t=c,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let a=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(a),a})(t,e,n);return Object.assign(n,t),n},f=e=>e?d(e):d}},function(e){e.O(0,[4868,6834,6746,1441,9527,6801,1377,7776,8472,1565,323,6942,7478,7023,1744],function(){return e(e.s=17426)}),_N_E=e.O()}]);