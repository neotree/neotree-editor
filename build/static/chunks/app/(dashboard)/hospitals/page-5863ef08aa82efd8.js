(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{17426:function(e,t,n){Promise.resolve().then(n.bind(n,11326)),Promise.resolve().then(n.bind(n,25704))},11326:function(e,t,n){"use strict";n.d(t,{HospitalsTable:function(){return E}});var a=n(57437),r=n(2265),s=n(27776),i=n(38472),o=n(92513),l=n(76942),u=n(50495),c=n(39661),d=n(23733),f=n(76230),p=n(45188),h=n(90399),m=n(46910);function v(e){let{hospitalId:t,hospitalName:n,onDelete:r}=e,s=(0,d.l)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.h_,{children:[(0,a.jsx)(m.$F,{asChild:!0,children:(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(m.AW,{children:[(0,a.jsx)(m.Ju,{children:n}),(0,a.jsx)(m.VD,{}),(0,a.jsx)(m.Xi,{onClick:()=>s.push({hospitalId:t}),children:"Edit"}),(0,a.jsx)(m.VD,{}),(0,a.jsxs)(m.Xi,{onClick:r,className:"text-danger focus:bg-danger focus:text-danger-foreground",children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})]})]})})}var x=n(42873),y=n(20920),g=n(39343),b=n(95317),j=n(83102),w=n(67135),N=n(53699);function k(e){let{open:t,hospitalId:n,getHospital:s,onClose:o,saveHospitals:l,onSaveSuccess:f}=e,p=(0,r.useRef)(!1),{alert:h}=(0,N.s)(),{parsed:m,replace:v}=(0,d.l)(),k=n||m.hospitalId,[E,S]=(0,r.useState)(!1),[C,T]=(0,r.useState)(!1),[,I]=(0,r.useState)(),{setValue:O,register:Z,handleSubmit:D}=(0,g.cI)({defaultValues:{id:null,hospitalId:k||(0,y.Z)(),name:""}}),M=(0,r.useCallback)(async()=>{if(k){S(!0);try{var e;let{data:t,errors:n}=(await i.Z.get("/api/hospitals/"+k)).data,a=null==n?void 0:null===(e=n.join)||void 0===e?void 0:e.call(n,", ");if(a)throw a;I(t),t&&(O("id",t.id),O("hospitalId",t.hospitalId),O("name",t.name))}catch(e){h({title:"",message:"Failed to load hospital: "+e.message,variant:"error",onClose:()=>v({hospitalId:void 0})})}finally{S(!1)}}},[k,v,h,O,s]);(0,r.useEffect)(()=>{p.current||M(),p.current=!0},[M]);let V=D(e=>{(async()=>{try{T(!0);let t=[{...e,id:e.id||void 0}],{errors:n}=(await i.Z.post("/api/hospitals/save",{data:t})).data;if(null==n?void 0:n.length)throw Error(n.join(", "));f&&await f(),h({variant:"success",message:"Hospital was saved successfully!",onClose:()=>{null==o||o(),v({hospitalId:void 0})}})}catch(e){h({title:"",message:"Failed to save hospital: "+e.message,variant:"error"})}finally{T(!1)}})()});return E?(0,a.jsx)(c.a,{overlay:!0}):(0,a.jsxs)(a.Fragment,{children:[C&&(0,a.jsx)(c.a,{overlay:!0}),(0,a.jsxs)(b.yo,{open:t||!!m.hospitalId,onOpenChange:()=>{null==o||o(),v({hospitalId:void 0})},children:[(0,a.jsx)(b.aM,{asChild:!0,children:(0,a.jsx)(u.z,{className:"md:hidden",variant:"ghost",children:(0,a.jsx)(x.Z,{className:"h-6 w-6"})})}),(0,a.jsxs)(b.ue,{side:"right",className:"p-0 m-0 flex flex-col",children:[(0,a.jsx)(b.Tu,{className:"py-2 px-4 border-b border-b-border",children:(0,a.jsxs)(b.bC,{children:[k?"Edit":"New"," Hospital"]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col py-2 px-4 gap-y-4 overflow-y-auto",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{htmlFor:"name",children:"Hospital Name"}),(0,a.jsx)(j.I,{...Z("name",{required:!0,disabled:C}),placeholder:"Hospital Name",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0"})]})}),(0,a.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex justify-end gap-x-2",children:[(0,a.jsx)(b.sw,{asChild:!0,children:(0,a.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,a.jsx)(u.z,{onClick:V,children:"Save"})]})]})]})]})}function E(e){let{hospitals:t,getHospitals:n,deleteHospitals:p,getHospital:h,saveHospitals:m}=e,x=(0,d.l)(),[y,g]=(0,r.useState)(t),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)([]),[E,S]=(0,r.useState)(!1),{confirm:C}=(0,f.t)(),T=(0,r.useCallback)(async(e,t)=>{var n,a;j(!0);let r=(await i.Z.get("/api/hospitals?data="+JSON.stringify({...x.parsed}))).data,o=null===(a=r.errors)||void 0===a?void 0:null===(n=a.join)||void 0===n?void 0:n.call(a,", ");o?s.Am.error(o):(g(r),N([])),null==t||t(o,r),j(!1)},[n,x,t]),I=(0,r.useCallback)((e,t)=>{let n=y.data.filter(t=>e.includes(t.hospitalId)).map(e=>e.name);C(()=>{(async()=>{try{j(!0),await i.Z.delete("/api/hospitals?data="+JSON.stringify({hospitalsIds:e})),await T(),null==t||t()}catch(e){s.Am.error(e.message)}finally{j(!1)}})()},{title:"Delete "+(n.length>1?"hospitals":"hospital"),message:"<p>Are you sure you want to delete:</p> ".concat(n.map(e=>'<div class="font-bold text-danger">'.concat(e,"</div>")).join("")),negativeLabel:"Cancel",positiveLabel:"Delete",danger:!0})},[C,p,T,y]),O=x.parsed.hospitalId||E?(0,a.jsx)(k,{open:E,getHospital:h,saveHospitals:m,onSaveSuccess:T,onClose:()=>S(!1)}):null;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(l.DataTable,{selectable:!0,title:"Hospitals",search:{inputPlaceholder:"Search hospitals"},headerActions:(0,a.jsxs)(u.z,{variant:"outline",className:"w-auto h-auto border-primary text-primary",onClick:()=>S(e=>!e),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:"New Hospital"})]}),selectedIndexes:w,onSelect:N,columns:[{name:"Name"},{name:"Action",align:"right",cellRenderer(e){let t=y.data[e.rowIndex];return(0,a.jsx)(v,{hospitalId:t.hospitalId,hospitalName:t.name,onDelete:()=>I([t.hospitalId])})}}],data:y.data.map(e=>[e.name,""])}),O,b&&(0,a.jsx)(c.a,{overlay:!0})]})}},39661:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var a=n(57437),r=n(89627);function s(e){let{overlay:t,transparent:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:n?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,a.jsx)(r.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},25704:function(e,t,n){"use strict";n.d(t,{Title:function(){return s}});var a=n(2265),r=n(20357);function s(e){let{children:t}=e;return(0,a.useEffect)(()=>{document.title=[r.env.NEXT_PUBLIC_APP_NAME,t].filter(e=>e).join(" - ")},[t]),(0,a.useEffect)(()=>()=>{document.title="".concat(r.env.NEXT_PUBLIC_APP_NAME)},[]),null}},67135:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var a=n(57437),r=n(2265),s=n(38364),i=n(12218),o=n(37440);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=r.forwardRef((e,t)=>{let{className:n,secondary:r,error:i,...u}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,o.cn)(l(),r&&"text-xs",i?"text-danger":"",n),...u})});u.displayName=s.f.displayName},95317:function(e,t,n){"use strict";n.d(t,{Ei:function(){return g},FF:function(){return x},Tu:function(){return v},aM:function(){return c},bC:function(){return y},sw:function(){return d},ue:function(){return m},yo:function(){return u}});var a=n(57437),r=n(2265),s=n(77004),i=n(12218),o=n(74697),l=n(37440);let u=s.fC,c=s.xz,d=s.x8,f=s.h_,p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})});p.displayName=s.aV.displayName;let h=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=r.forwardRef((e,t)=>{let{side:n="right",className:r,children:i,hideCloseButton:u,...c}=e;return(0,a.jsxs)(f,{children:[(0,a.jsx)(p,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)(h({side:n}),r),...c,children:[i,!0!==u&&(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let v=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};v.displayName="SheetHeader";let x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};x.displayName="SheetFooter";let y=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",n),...r})});y.displayName=s.Dx.displayName;let g=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})});g.displayName=s.dk.displayName},53699:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var a=n(39099);let r={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},s=(0,a.Ue)(e=>({isOpen:!1,...r,alert:t=>e({isOpen:!0,...r,...t}),close:()=>e({isOpen:!1,onClose:void 0,...r})}))},76230:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var a=n(39099);let r={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},s=(0,a.Ue)(e=>({isOpen:!1,...r,confirm:(t,n)=>e({isOpen:!0,...r,...n,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...r})}))},45188:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},89627:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},42873:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},92513:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},90399:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},20357:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(88081)},88081:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var l=[],u=!1,c=-1;function d(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=o(d);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,a),i=!1}finally{i&&delete n[e]}return s.exports}a.ab="//";var r=a(229);e.exports=r}()},34492:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=s({inst:{value:n,getSnapshot:t}}),r=a[0].inst,c=a[1];return o(function(){r.value=n,r.getSnapshot=t,u(r)&&c({inst:r})},[e,n,t]),i(function(){return u(r)&&c({inst:r}),e(function(){u(r)&&c({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},85107:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(2265),r=n(10554),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,o=a.useRef,l=a.useEffect,u=a.useMemo,c=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var d=o(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var p=i(e,(d=u(function(){function e(e){if(!l){if(l=!0,i=e,e=a(e),void 0!==r&&f.hasValue){var t=f.value;if(r(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var n=a(e);return void 0!==r&&r(t,n)?t:(i=e,o=n)}var i,o,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,a,r]))[0],d[1]);return l(function(){f.hasValue=!0,f.value=p},[p]),c(p),p}},10554:function(e,t,n){"use strict";e.exports=n(34492)},35006:function(e,t,n){"use strict";e.exports=n(85107)},38364:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var a=n(2265),r=n(25171),s=n(57437),i=a.forwardRef((e,t)=>(0,s.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},39099:function(e,t,n){"use strict";n.d(t,{Ue:function(){return f}});let a=e=>{let t;let n=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(a,r,s);return s},r=e=>e?a(e):a;var s=n(2265),i=n(35006);let{useDebugValue:o}=s,{useSyncExternalStoreWithSelector:l}=i,u=!1,c=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,n=(e,n)=>(function(e,t=c,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let a=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(a),a})(t,e,n);return Object.assign(n,t),n},f=e=>e?d(e):d}},function(e){e.O(0,[4868,4617,4489,9554,7776,9343,1072,6300,8472,3904,6942,7478,7023,1744],function(){return e(e.s=17426)}),_N_E=e.O()}]);