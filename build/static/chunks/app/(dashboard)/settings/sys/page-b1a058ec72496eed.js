(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2516],{94700:function(e,t,r){Promise.resolve().then(r.bind(r,86978)),Promise.resolve().then(r.bind(r,25704))},86978:function(e,t,r){"use strict";r.d(t,{Content:function(){return v}});var n=r(57437),i=r(2265),o=r(16463),s=r(17647),a=r(74421),u=r(67135),c=r(50495),l=r(53699),d=r(39661),f=r(76230);function v(e){let{_updateSys:t}=e,{sys:r,updateSys:v}=(0,s.b)(),[p,h]=(0,i.useState)(r.data),[m,b]=(0,i.useState)(!1),g=(0,o.useRouter)(),{alert:y}=(0,l.s)(),{confirm:x}=(0,f.t)(),w=(0,i.useCallback)(async()=>{try{b(!0);let{errors:e}=await v(p,{broadcastAction:!0});(null==e?void 0:e.length)?y({title:"Error",message:"Failed to load logs: "+e.join(", "),variant:"error"}):(g.refresh(),y({title:"Success",message:"System saved successfully!",variant:"success"}))}finally{b(!1)}},[v,y,g,p]),k=(0,i.useMemo)(()=>JSON.stringify(r)!==JSON.stringify(p),[r,p]);return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsx)(d.a,{overlay:!0}),(0,n.jsxs)("div",{className:"px-4 flex flex-col gap-y-4",children:[Object.keys(p).map(e=>{let t=p[e];return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(a.r,{id:e,checked:"yes"===t,onCheckedChange:t=>h(r=>({...r,[e]:t?"yes":"no"}))}),(0,n.jsx)(u._,{htmlFor:e,children:e})]},e)}),(0,n.jsxs)("div",{className:"flex gap-x-4",children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(c.z,{disabled:!k,onClick:()=>x(w,{title:"Update system",message:"Are you sure? These changes will affect everyone!",danger:!0,positiveLabel:"Save"}),children:"Save"})]})]})]})}},39661:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var n=r(57437),i=r(89627);function o(e){let{overlay:t,transparent:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:r?"transparent":"rgba(255,255,255,.6)"}:{padding:"50px 0"}},children:(0,n.jsx)(i.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},58502:function(e,t,r){"use strict";r.d(t,{SocketEventsListener:function(){return s}});var n=r(2265),i=r(16463),o=r(7752);function s(e){let{events:t}=e,r=(0,n.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,n.useRef)(new Date().getTime());let s=(0,i.useRouter)();return(0,n.useEffect)(()=>{t.forEach(e=>{let{name:t,action:n,delay:i=100,onEvent:a}=e;o.Z.on(t,function(){for(var e=arguments.length,o=Array(e),u=0;u<e;u++)o[u]=arguments[u];let c=()=>{var e,r;(!n||o[0]===n)&&(null===(e=a.callback)||void 0===e||e.call(a,...o),(null==a?void 0:a.refreshRouter)&&(console.log(t,"refreshing..."),s.refresh()),(null===(r=a.redirect)||void 0===r?void 0:r.to)&&(a.redirect.replace?s.replace(a.redirect.to):s.push(a.redirect.to)))},l=new Date().getTime();i?(clearTimeout(r.current.eventsTimeouts[t]),r.current.eventsTimeouts[t]=setTimeout(()=>{r.current.eventsTimestamps[t]=l,c()},i)):(r.current.eventsTimestamps[t]=new Date().getTime(),c())})})},[t,s]),null}},25704:function(e,t,r){"use strict";r.d(t,{Title:function(){return o}});var n=r(2265),i=r(20357);function o(e){let{children:t}=e;return(0,n.useEffect)(()=>{document.title=[i.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,n.useEffect)(()=>()=>{document.title="".concat(i.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},50495:function(e,t,r){"use strict";r.d(t,{d:function(){return u},z:function(){return c}});var n=r(57437),i=r(2265),o=r(71538),s=r(13027),a=r(37440);let u=(0,s.j)("\n    inline-flex\n    items-center\n    justify-center\n    whitespace-nowrap\n    rounded-md\n    text-sm\n    font-medium\n    transition-colors\n    focus-visible:outline-none\n    disabled:pointer-events-none\n    disabled:opacity-50\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-primary/20","primary-outline":"border border-primary text-primary bg-transparent hover:bg-primary/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-primary/20 hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:c=!1,...l}=e,d=c?o.g7:"button";return(0,n.jsx)(d,{className:(0,a.cn)(u({variant:i,size:s,className:r})),ref:t,...l})});c.displayName="Button"},67135:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(57437),i=r(2265),o=r(38364),s=r(13027),a=r(37440);let u=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:r,secondary:i,error:s,...c}=e;return(0,n.jsx)(o.f,{ref:t,className:(0,a.cn)(u(),i&&"text-xs",s?"text-danger":"",r),...c})});c.displayName=o.f.displayName},74421:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var n=r(57437),i=r(2265),o=r(9646),s=r(37440);let a=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(o.fC,{className:(0,s.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...i,ref:t,children:(0,n.jsx)(o.bU,{className:(0,s.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});a.displayName=o.fC.displayName},17647:function(e,t,r){"use strict";r.d(t,{AppContextProvider:function(){return b},b:function(){return m}});var n=r(57437),i=r(2265),o=r(79512),s=r(16463),a=r(23314),u=r(44785);let c=u.Z.get,l=u.Z.set;u.Z.remove;var d={get:c,set:l};function f(){let e=d.get("mode");return e||(e="view",d.set("mode",e,{expires:31536e7})),e}var v=r(7752),p=r(58502);let h=(0,i.createContext)(null),m=()=>(0,i.useContext)(h);function b(e){let{children:t,...r}=e,u=function(e){(0,s.useRouter)();let{isAdmin:t,isSuperUser:r,sys:n}=e,{setTheme:a}=(0,o.F)();(0,i.useEffect)(()=>{"yes"===n.data.hide_theme_toggle&&a("light")},[n]);let u=(0,i.useCallback)(()=>(t||r?f():"view")||"view",[r,t]),[c,l]=(0,i.useState)(u()),p=!t&&!r||"view"===c,h=(0,i.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=function(e){return d.set("mode",e,{expires:31536e7}),f()}(...t);return v.Z.emit("mode_changed",u()),l(u()),n},[u]),m=(0,i.useCallback)(()=>{l(u())},[u]);return{...e,mode:c,viewOnly:p,onModeChange:m,getMode:f,setMode:h}}(r),[c,l]=(0,i.useState)(!1);return((0,a.Z)(()=>{l(!0)}),c)?(0,n.jsxs)(h.Provider,{value:u,children:[t,(0,n.jsx)(p.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:u.onModeChange}}]})]}):null}},53699:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(39099);let i={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},o=(0,n.Ue)(e=>({isOpen:!1,...i,alert:t=>e({isOpen:!0,...i,...t}),close:()=>e({isOpen:!1,onClose:void 0,...i})}))},76230:function(e,t,r){"use strict";r.d(t,{t:function(){return o}});var n=r(39099);let i={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},o=(0,n.Ue)(e=>({isOpen:!1,...i,confirm:(t,r)=>e({isOpen:!0,...i,...r,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...i})}))},7752:function(e,t,r){"use strict";var n=r(45040),i=r(20357);let o=(0,n.io)(i.env.NEXT_PUBLIC_APP_URL);t.Z=o},37440:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var n=r(44839),i=r(96164);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}},20357:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(88081)},88081:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u=[],c=!1,l=-1;function d(){c&&n&&(c=!1,n.length?u=n.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(n=u,u=[];++l<t;)n&&n[l].run();l=-1,t=u.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new v(e,t)),1!==u.length||c||a(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,n),s=!1}finally{s&&delete r[e]}return o.exports}n.ab="//";var i=n(229);e.exports=i}()},38364:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var n=r(2265),i=r(25171),o=r(57437),s=n.forwardRef((e,t)=>(0,o.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var a=s},9646:function(e,t,r){"use strict";r.d(t,{bU:function(){return T},fC:function(){return k}});var n=r(2265),i=r(78149),o=r(1584),s=r(98324),a=r(91715),u=r(47250),c=r(75238),l=r(25171),d=r(57437),f="Switch",[v,p]=(0,s.b)(f),[h,m]=v(f),b=n.forwardRef((e,t)=>{let{__scopeSwitch:r,name:s,checked:u,defaultChecked:c,required:v,disabled:p,value:m="on",onCheckedChange:b,form:g,...y}=e,[k,T]=n.useState(null),j=(0,o.e)(t,e=>T(e)),C=n.useRef(!1),N=!k||g||!!k.closest("form"),[E,S]=(0,a.T)({prop:u,defaultProp:null!=c&&c,onChange:b,caller:f});return(0,d.jsxs)(h,{scope:r,checked:E,disabled:p,children:[(0,d.jsx)(l.WV.button,{type:"button",role:"switch","aria-checked":E,"aria-required":v,"data-state":w(E),"data-disabled":p?"":void 0,disabled:p,value:m,...y,ref:j,onClick:(0,i.M)(e.onClick,e=>{S(e=>!e),N&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),N&&(0,d.jsx)(x,{control:k,bubbles:!C.current,name:s,value:m,checked:E,required:v,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});b.displayName=f;var g="SwitchThumb",y=n.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,i=m(g,r);return(0,d.jsx)(l.WV.span,{"data-state":w(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});y.displayName=g;var x=n.forwardRef((e,t)=>{let{__scopeSwitch:r,control:i,checked:s,bubbles:a=!0,...l}=e,f=n.useRef(null),v=(0,o.e)(f,t),p=(0,u.D)(s),h=(0,c.t)(i);return n.useEffect(()=>{let e=f.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==s&&t){let r=new Event("click",{bubbles:a});t.call(e,s),e.dispatchEvent(r)}},[p,s,a]),(0,d.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:v,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}x.displayName="SwitchBubbleInput";var k=b,T=y},47250:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(2265);function i(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},75238:function(e,t,r){"use strict";r.d(t,{t:function(){return o}});var n=r(2265),i=r(1336);function o(e){let[t,r]=n.useState(void 0);return(0,i.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[4868,1086,1322,7478,7023,1744],function(){return e(e.s=94700)}),_N_E=e.O()}]);