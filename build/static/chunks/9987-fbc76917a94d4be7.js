"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9987],{20021:function(e,t,l){l.d(t,{M:function(){return f}});var r=l(57437),a=l(92513),n=l(90399),i=l(5192),s=l(12491),o=l(50495),d=l(76230),c=l(77605),u=l(21475);function f(e){let{image:t,disabled:l,onChange:f}=e,p=(0,u.Y)(),[h,{width:m}]=(0,i.Z)(),{confirm:v}=(0,d.t)(),x="".concat((null==t?void 0:t.data)||"").split("?").filter((e,t)=>t).join(""),{width:y,height:g}=s.Z.parse(x);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{ref:h,className:"flex flex-col gap-y-2 min-w-60 max-w-60",children:[(0,r.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-28",children:(0,r.jsx)(c.E,{alt:"",width:Number(y||"0"),height:Number(g||"0"),containerWidth:m,src:(null==t?void 0:t.data)||"/images/placeholder.png"})}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-x-4",children:[(0,r.jsx)(o.z,{size:"icon",className:"w-8 h-8 rounded-full",disabled:l,onClick:()=>p.openModal({onSelectFiles(e){let[t]=e;f({data:t.url,fileId:t.fileId,filename:t.filename,size:t.size,contentType:t.contentType})}}),children:(0,r.jsx)(a.Z,{className:"h-4 w-4"})}),!!t&&(0,r.jsx)(o.z,{variant:"destructive",size:"icon",className:"w-8 h-8 rounded-full",disabled:l,onClick:()=>v(()=>f(null),{title:"Delete image",message:"Are you sure you want to delete this image?",danger:!0}),children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})]})]})})}},77605:function(e,t,l){l.d(t,{E:function(){return n}});var r=l(57437),a=l(48625);function n(e){let{width:t=0,height:l=0,containerWidth:n,...i}=e;i.sizes;let s={width:"100%",height:"auto"};if(l&&t&&n){let e=(0,a.a)({imageWidth:t,imageHeight:l,containerWidth:n});s.width=e.imageWidth,s.height=e.imageHeight}return(0,r.jsx)("img",{...i,src:i.src,style:{...s,...i.style}})}},80852:function(e,t,l){l.d(t,{L:function(){return s}});var r=l(57437),a=l(2265),n=l(84492),i=l(23920);function s(e){let{value:t,type:l,disabled:s,modal:o,multiple:d,placeholder:c,error:u,onChange:f,filterDataKeys:p}=e,{allDataKeys:h,extractDataKeys:m}=(0,i.M)(),v=(0,a.useMemo)(()=>{let e=h;return l&&""!==l.trim()&&(e=e.filter(e=>e.dataType===l)),p&&(e=e.filter(p)),e.map(e=>({label:e.name,value:e.uniqueKey,caption:e.dataType||"",description:e.label}))},[h,l,p]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.V,{multiple:d,modal:o,error:u,placeholder:"".concat(t||"")||c||"Select key",search:{placeholder:"Search data keys"},options:v,onSelect:e=>{let t=m(e.map(e=>e.value)).map(e=>({...e,children:m(e.options)}));null==f||f(t)}})})}},84492:function(e,t,l){l.d(t,{V:function(){return f}});var r=l(57437),a=l(2265),n=l(1282),i=l(22468),s=l(50495),o=l(83102),d=l(90837),c=l(37440),u=l(85937);function f(e){let{options:t,selected:l,...a}=e;l=Array.isArray(l)?l:l?[l]:[];let n=t.map(e=>({...e,value:"".concat(e.value)})),i=l.map(e=>"".concat(e));if(!a.multiple){let[e]=Array.isArray(i)?i:[i];e&&n.find(t=>t.value===e)}return(0,r.jsx)(p,{...a,options:n,selected:i})}function p(e){var t;let{modal:l,header:f,placeholder:p,search:h,multiple:m=!1,error:v=!1,disabled:x=!1,selected:y,options:g=[],trigger:j,onTrigger:b,onSelect:w}=e,[N,k]=(0,a.useState)(""),C=(0,u.N)(N),[S,E]=(0,a.useState)([]),I=(0,a.useMemo)(()=>y?Array.isArray(y)?y.map(e=>g.find(t=>(null==t?void 0:t.value)===e)).map(e=>e):g.filter(e=>(null==e?void 0:e.value)===y)||[]:[],[y,g]),M=(0,a.useMemo)(()=>g.map(e=>{let t=I.map(e=>null==e?void 0:e.value).map(e=>"".concat(e||"")).filter(e=>e).includes("".concat(null==e?void 0:e.value));return t=t||S.includes(e.value),{...e,isSelected:t}}).sort((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)).sort((e,t)=>{let l=e.isSelected?1:0;return(t.isSelected?1:0)-l}).filter(e=>JSON.stringify([e.value||"",e.label||"",e.description||""]).toLowerCase().match(C.toLowerCase())),[g,C,I,S]);return(0,a.useEffect)(()=>()=>k(""),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.Vq,{modal:l,onOpenChange:()=>{k(""),E([])},children:[(0,r.jsx)(d.hg,{asChild:!0,children:j||(0,r.jsxs)(s.z,{disabled:x,variant:"outline",className:(0,c.cn)("justify-between w-full",v&&"border border-destructive hover:bg-destructive/10"),onClick:b,children:[(0,r.jsx)("span",{className:I.length?"":"opacity-50",children:(null===(t=I[0])||void 0===t?void 0:t.label)||p||""}),(0,r.jsx)(n.Z,{className:"size-4 opacity-50"})]})}),(0,r.jsxs)(d.cZ,{hideCloseButton:!0,className:"flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",children:[(0,r.jsxs)(d.fK,{className:"border-b border-b-border px-4 py-4",children:[(0,r.jsx)(d.$N,{className:"hidden",children:""}),(0,r.jsx)(d.Be,{className:"hidden",children:""}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4",children:[h?(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(o.I,{type:"search",placeholder:h.placeholder||"",value:N,onChange:e=>k(e.target.value)})}):null,f]})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col gap-y-1 overflow-y-auto px-4 py-2 overflow-x-hidden",children:M.map(e=>{let t=m?"button":d.GG;return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(t,{onClick:()=>{e.disabled||(e.isSelected?m?E(t=>t.filter(t=>t!==e.value)):null==w||w(I.filter(t=>t.value!==e.value)):m?E(t=>[...t,e.value]):null==w||w([e]))},className:(0,c.cn)("flex flex-col gap-y-1 border border-border p-2 rounded-md items-start text-left",e.disabled?"opacity-50 cursor-not-allowed":"transition-colors hover:bg-primary/20",e.isSelected&&"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[e.isSelected?(0,r.jsx)(i.Z,{className:"size-4 mr-2"}):null,(0,r.jsxs)("div",{children:[e.caption?(0,r.jsx)("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.caption||""}}):null,(0,r.jsx)("p",{children:e.label}),e.description?(0,r.jsx)("div",{className:"text-xs opacity-60",dangerouslySetInnerHTML:{__html:e.description||""}}):null]})]})})},e.value)})}),(0,r.jsxs)(d.cN,{className:"border-t border-t-border px-4 py-2 items-center w-full gap-x-2",children:[(0,r.jsx)(d.GG,{asChild:!0,children:(0,r.jsx)(s.z,{variant:"ghost",children:"Close"})}),!!S.length&&(0,r.jsx)(d.GG,{asChild:!0,children:(0,r.jsx)(s.z,{onClick:()=>{null==w||w(S.map(e=>M.find(t=>t.value===e)).filter(e=>e))},children:"Save"})})]})]})]})})}},64344:function(e,t,l){l.d(t,{Separator:function(){return s}});var r=l(57437),a=l(2265),n=l(48484),i=l(37440);let s=a.forwardRef((e,t)=>{let{className:l,orientation:a="horizontal",decorative:s=!0,...o}=e;return(0,r.jsx)(n.f,{ref:t,decorative:s,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",l),...o})});s.displayName=n.f.displayName},21475:function(e,t,l){l.d(t,{Y:function(){return n}});var r=l(39099),a=l(38472);let n=(0,r.Ue)((e,t)=>{let l=async l=>{try{let{reset:r,...n}={...l};r&&(n.page=1),e({loading:!0,unhandledErrors:[]});let{data:i,errors:s,totalPages:o,totalRows:d,page:c}=(await a.Z.get("/api/files?data=".concat(JSON.stringify({...n,limit:n.limit||t().limit,page:n.page||t().page})))).data;if(null==s?void 0:s.length)e({unhandledErrors:s});else{let l=r?i:[...t().files,...i];l=l.filter((e,t)=>t===l.map(e=>e.fileId).indexOf(e.fileId)),n.siteId&&n.siteId!==t().siteId&&(l=i),e({files:l,totalPages:o,totalRows:d,page:c,siteId:n.siteId||t().siteId,lastFilesQueryDate:i.length?new Date:null})}}catch(t){e({unhandledErrors:[t.message]})}finally{e({loading:!1})}};return{isModalOpen:!1,loading:!1,siteId:"",files:[],unhandledErrors:[],lastFilesQueryDate:null,page:1,limit:15,totalPages:1,totalRows:0,onSelectFiles:null,selectMultiple:!1,getFiles:l,openModal(r){e({onSelectFiles:(null==r?void 0:r.onSelectFiles)||null,isModalOpen:!0}),t().lastFilesQueryDate||l()},closeModal:()=>e({isModalOpen:!1})}})},48625:function(e,t,l){async function r(e){return new Promise((t,l)=>{let r=new Image;r.onload=function(){t({width:r.width,height:r.height})},r.onerror=function(e,t,r,a,n){l(n||Error("Failed to load image"))},r.src=e})}function a(e){let{imageWidth:t,imageHeight:l,containerWidth:r}=e;return t>r&&(l=r/t*l,t=r),{imageWidth:t,imageHeight:l}}l.d(t,{a:function(){return a},p:function(){return r}})},92513:function(e,t,l){l.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,l(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99497:function(e,t,l){l.d(t,{ck:function(){return G},fC:function(){return Z},z$:function(){return O}});var r=l(2265),a=l(78149),n=l(1584),i=l(98324),s=l(25171),o=l(53398),d=l(91715),c=l(87513),u=l(75238),f=l(47250),p=l(31383),h=l(57437),m="Radio",[v,x]=(0,i.b)(m),[y,g]=v(m),j=r.forwardRef((e,t)=>{let{__scopeRadio:l,name:i,checked:o=!1,required:d,disabled:c,value:u="on",onCheck:f,form:p,...m}=e,[v,x]=r.useState(null),g=(0,n.e)(t,e=>x(e)),j=r.useRef(!1),b=!v||p||!!v.closest("form");return(0,h.jsxs)(y,{scope:l,checked:o,disabled:c,children:[(0,h.jsx)(s.WV.button,{type:"button",role:"radio","aria-checked":o,"data-state":k(o),"data-disabled":c?"":void 0,disabled:c,value:u,...m,ref:g,onClick:(0,a.M)(e.onClick,e=>{o||null==f||f(),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),b&&(0,h.jsx)(N,{control:v,bubbles:!j.current,name:i,value:u,checked:o,required:d,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});j.displayName=m;var b="RadioIndicator",w=r.forwardRef((e,t)=>{let{__scopeRadio:l,forceMount:r,...a}=e,n=g(b,l);return(0,h.jsx)(p.z,{present:r||n.checked,children:(0,h.jsx)(s.WV.span,{"data-state":k(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})})});w.displayName=b;var N=r.forwardRef((e,t)=>{let{__scopeRadio:l,control:a,checked:i,bubbles:o=!0,...d}=e,c=r.useRef(null),p=(0,n.e)(c,t),m=(0,f.D)(i),v=(0,u.t)(a);return r.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==i&&t){let l=new Event("click",{bubbles:o});t.call(e,i),e.dispatchEvent(l)}},[m,i,o]),(0,h.jsx)(s.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...d,tabIndex:-1,ref:p,style:{...d.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function k(e){return e?"checked":"unchecked"}N.displayName="RadioBubbleInput";var C=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[E,I]=(0,i.b)(S,[o.Pc,x]),M=(0,o.Pc)(),R=x(),[z,F]=E(S),A=r.forwardRef((e,t)=>{let{__scopeRadioGroup:l,name:r,defaultValue:a,value:n,required:i=!1,disabled:u=!1,orientation:f,dir:p,loop:m=!0,onValueChange:v,...x}=e,y=M(l),g=(0,c.gm)(p),[j,b]=(0,d.T)({prop:n,defaultProp:null!=a?a:null,onChange:v,caller:S});return(0,h.jsx)(z,{scope:l,name:r,required:i,disabled:u,value:j,onValueChange:b,children:(0,h.jsx)(o.fC,{asChild:!0,...y,orientation:f,dir:g,loop:m,children:(0,h.jsx)(s.WV.div,{role:"radiogroup","aria-required":i,"aria-orientation":f,"data-disabled":u?"":void 0,dir:g,...x,ref:t})})})});A.displayName=S;var L="RadioGroupItem",D=r.forwardRef((e,t)=>{let{__scopeRadioGroup:l,disabled:i,...s}=e,d=F(L,l),c=d.disabled||i,u=M(l),f=R(l),p=r.useRef(null),m=(0,n.e)(t,p),v=d.value===s.value,x=r.useRef(!1);return r.useEffect(()=>{let e=e=>{C.includes(e.key)&&(x.current=!0)},t=()=>x.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,h.jsx)(o.ck,{asChild:!0,...u,focusable:!c,active:v,children:(0,h.jsx)(j,{disabled:c,required:d.required,checked:v,...f,...s,name:d.name,ref:m,onCheck:()=>d.onValueChange(s.value),onKeyDown:(0,a.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,a.M)(s.onFocus,()=>{var e;x.current&&(null===(e=p.current)||void 0===e||e.click())})})})});D.displayName=L;var V=r.forwardRef((e,t)=>{let{__scopeRadioGroup:l,...r}=e,a=R(l);return(0,h.jsx)(w,{...a,...r,ref:t})});V.displayName="RadioGroupIndicator";var Z=A,G=D,O=V},48484:function(e,t,l){l.d(t,{f:function(){return d}});var r=l(2265),a=l(25171),n=l(57437),i="horizontal",s=["horizontal","vertical"],o=r.forwardRef((e,t)=>{let{decorative:l,orientation:r=i,...o}=e,d=s.includes(r)?r:i;return(0,n.jsx)(a.WV.div,{"data-orientation":d,...l?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:t})});o.displayName="Separator";var d=o}}]);