"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4401],{84760:function(e,t,a){a.d(t,{D:function(){return r}});var s=a(57437),l=a(37440);function r(e){let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("pb-1 border-b border-b-primary",a),children:(0,s.jsx)("span",{className:"uppercase text-primary text-sm",children:t})})}},74709:function(e,t,a){a.d(t,{u:function(){return i}});var s=a(57437),l=a(2265),r=a(90837),n=a(37440);let o=(0,a(39099).Ue)((e,t)=>({modals:{},open(t){e(e=>({modals:{...e.modals,[t]:!0}}))},toggle(a){let s=t().modals;e(e=>({modals:{...e.modals,[a]:!s[a]}}))},close(t){e(e=>({modals:{...e.modals,[t]:!1}}))},isOpen:e=>!!t().modals[e],set(t){e(e=>({modals:{...e.modals,...t}}))}}));function i(e){let{id:t,children:a,title:i,description:d,actions:c,trigger:u,contentProps:f,footerProps:x,...m}=e,{close:h,isOpen:p,set:g}=o();return(0,l.useEffect)(()=>{t&&g({[t]:!1})},[t]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...m,open:(t?p(t):void 0)||m.open,onOpenChange:e=>{var a;t&&g({[t]:e}),null==m||null===(a=m.onOpenChange)||void 0===a||a.call(m,e)},children:[u,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,n.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",null==f?void 0:f.className),...f,children:[(0,s.jsxs)(r.fK,{className:(0,n.cn)(i||d?"":"hidden","border-b border-b-border px-4 py-4"),children:[(0,s.jsx)(r.$N,{className:(0,n.cn)(i?"":"hidden"),children:i}),(0,s.jsx)(r.Be,{className:(0,n.cn)(d?"":"hidden"),children:d})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:a}),(0,s.jsx)(r.cN,{className:(0,n.cn)("border-t border-t-border px-4 py-2 items-center w-full",c?"":"hidden",null==x?void 0:x.className),...x,children:c})]})]})})}},87861:function(e,t,a){a.d(t,{w:function(){return x}});var s=a(57437),l=a(2265),r=a(39343),n=a(83146),o=a(95317),i=a(46294),d=a(67135),c=a(86466),u=a(50495),f=a(37440);function x(e){let{id:t,label:a,hide:x,title:m,description:h,data:p,disabled:g,onSave:b}=e,v=(0,l.useMemo)(()=>{let e=!1;return Object.values(p).forEach(a=>{a[t]&&(e=!0)}),e},[p,t]),{reset:j,watch:y,setValue:N,handleSubmit:C}=(0,r.cI)({defaultValues:{...n.$7,...p}}),w=y("fontSize"),k=y("fontWeight"),S=y("fontStyle"),E=y("textColor"),D=C(b),[F,z]=(0,l.useState)(!1);return x?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.yo,{onOpenChange:e=>{j({...n.$7,...p}),z(e)},children:[(0,s.jsx)(o.aM,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"link",className:(0,f.cn)("p-0 text-xs",!v&&"text-muted-foreground/80 hover:text-muted-foreground"),children:a||"".concat(v?"Update":"Set"," preferences")})}),(0,s.jsxs)(o.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,s.jsxs)(o.Tu,{className:"px-4 py-4 border-b border-b-border",children:[(0,s.jsx)(o.bC,{children:m}),(0,s.jsx)(o.Ei,{className:h?"":"hidden",children:h})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)(d._,{secondary:!0,htmlFor:"fontSize.".concat(t),children:"Font size"}),(0,s.jsx)("div",{children:(0,s.jsxs)(i.Ph,{value:w[t]||"default",required:!0,name:"fontSize.".concat(t),disabled:g,onValueChange:e=>{let a=e||void 0;"default"===a&&(a=void 0),N("fontSize.".concat(t),a,{shouldDirty:!0})},children:[(0,s.jsx)(i.i4,{children:(0,s.jsx)(i.ki,{placeholder:"Default"})}),(0,s.jsx)(i.Bw,{children:(0,s.jsx)(i.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>(0,s.jsx)(i.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[!!E[t]&&(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)(d._,{secondary:!0,htmlFor:"textColor.".concat(t),children:"Text color"}),(0,s.jsx)("input",{type:"color",value:E[t],onChange:e=>N("textColor.".concat(t),e.target.value,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{id:"defaultTextColor.".concat(t),name:"defaultTextColor.".concat(t),disabled:g,checked:!E[t],onCheckedChange:()=>{let e=E[t]?void 0:"#000000";N("textColor.".concat(t),e,{shouldDirty:!0})}}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"defaultTextColor.".concat(t),children:"Default text color"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{name:"bold",id:"bold",disabled:g,checked:"bold"===k[t],onCheckedChange:()=>N("fontWeight.".concat(t),k[t]?void 0:"bold",{shouldDirty:!0})}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{name:"italic",id:"italic",disabled:g,checked:(S[t]||[]).includes("italic"),onCheckedChange:()=>{let e=S[t]||[];e.includes("italic")?e=e.filter(e=>"italic"!==e):e.push("italic"),e.length||(e=void 0),N("fontStyle.".concat(t),e,{shouldDirty:!0})}}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,s.jsxs)(o.FF,{className:"px-4 py-4 border-t border-t-border",children:[(0,s.jsx)("div",{className:"ml-auto"}),(0,s.jsx)(o.sw,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(o.sw,{asChild:!0,children:(0,s.jsx)(u.z,{disabled:g,onClick:()=>D(),children:"Save"})})]})]})]})})}},85070:function(e,t,a){a.d(t,{E:function(){return i},m:function(){return d}});var s=a(57437),l=a(2265),r=a(99497),n=a(28165),o=a(37440);let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.fC,{className:(0,o.cn)("grid gap-2",a),...l,ref:t})});i.displayName=r.fC.displayName;let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.ck,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:(0,s.jsx)(r.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(n.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=r.ck.displayName},95317:function(e,t,a){a.d(t,{Ei:function(){return v},FF:function(){return g},Tu:function(){return p},aM:function(){return c},bC:function(){return b},sw:function(){return u},ue:function(){return h},yo:function(){return d}});var s=a(57437),l=a(2265),r=a(13304),n=a(13027),o=a(74697),i=a(37440);let d=r.fC,c=r.xz,u=r.x8,f=r.h_,x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});x.displayName=r.aV.displayName;let m=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=l.forwardRef((e,t)=>{let{side:a="right",className:l,children:n,hideCloseButton:d,...c}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,i.cn)(m({side:a}),l),...c,children:[n,!0!==d&&(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=r.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};p.displayName="SheetHeader";let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="SheetFooter";let b=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",a),...l})});b.displayName=r.Dx.displayName;let v=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});v.displayName=r.dk.displayName},93146:function(e,t,a){a.d(t,{g:function(){return n}});var s=a(57437),l=a(2265),r=a(37440);let n=l.forwardRef((e,t)=>{let{className:a,noRing:l,...n}=e;return(0,s.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",a),ref:t,...n})});n.displayName="Textarea"},15701:function(e,t,a){a.d(t,{ScriptsContextProvider:function(){return u},h:function(){return c}});var s=a(57437),l=a(2265),r=a(16463),n=a(12491),o=a(38472),i=a(23733);let d=(0,l.createContext)(null),c=()=>(0,l.useContext)(d);function u(e){let{children:t,...a}=e,c=function(e){let{}=e,t=(0,r.useRouter)(),{scriptId:a}=(0,r.useParams)(),{parsed:s}=(0,i.l)(),[d,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)({data:[]}),[x,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),g=(0,l.useCallback)(()=>{t.push("/")},[t]),b=(0,l.useCallback)(()=>{t.push("/script/".concat(a,"?").concat(n.Z.stringify({...s,section:"screens"})))},[t,s,a]),v=(0,l.useCallback)(()=>{t.push("/script/".concat(a,"?").concat(n.Z.stringify({...s,section:"diagnoses"})))},[t,s,a]),j=(0,l.useCallback)(async()=>{try{var e,t;c(!0);let s=await o.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null===(t=s.data)||void 0===t?void 0:null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(s.data.errors.join(", "));f(s.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{c(!1)}},[a,open,alert]);return{screens:u,screensLoading:d,keys:h,keysLoading:x,loadKeys:(0,l.useCallback)(async()=>{try{var e,t;m(!0);let s=await o.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null===(t=s.data)||void 0===t?void 0:null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(s.data.errors.join(", "));let l=s.data.data.reduce((e,t)=>[...e,...t.keys],[]);p(l)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{m(!1)}},[a,open,alert]),loadScreens:j,onCancelDiagnosisForm:v,onCancelScreenForm:b,onCancelScriptForm:g}}(a);return(0,s.jsx)(d.Provider,{value:{...a,...c},children:t})}},23733:function(e,t,a){a.d(t,{l:function(){return n}});var s=a(16463),l=a(12491),r=a(2265);function n(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),a=(0,r.useMemo)(()=>t.toString(),[t]),n=(0,r.useMemo)(()=>l.Z.parse(t.toString()),[t]),o=(0,r.useCallback)(e=>l.Z.stringify({...n,...e}),[n]),i=(0,r.useCallback)(t=>{e.push("?".concat(o(t)))},[o,e]);return{parsed:n,stringified:a,replace:(0,r.useCallback)(t=>{e.replace("?".concat(o(t)))},[o,e]),push:i,toSearchParams:o}}},21453:function(e,t,a){a.d(t,{x:function(){return s}});function s(e){return null==e||""===e}}}]);