"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2481],{17501:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(57437),a=n(77606),s=n(37440);function i(e){let{children:t,className:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-16"}),(0,r.jsx)("div",{className:(0,s.cn)("\n                        fixed \n                        left-0 \n                        bottom-0 \n                        h-16 \n                        w-full \n                        border-t \n                        border-t-border \n                        z-[1] \n                        bg-primary-foreground \n                        dark:bg-background \n                        shadow-md \n                        dark:shadow-foreground/10\n                    "),children:(0,r.jsx)(a.V,{children:(0,r.jsx)("div",{className:(0,s.cn)("flex justify-end gap-x-4",n),children:t})})})]})}},77606:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(57437),a=n(37440);function s(e){let{className:t,...n}=e;return(0,r.jsx)("div",{...n,className:(0,a.cn)("w-full max-w-screen-xl mx-auto p-5",t)})}},39661:function(e,t,n){n.d(t,{a:function(){return s}});var r=n(57437),a=n(89627);function s(e){let{overlay:t,transparent:n,padding:s="50px 0"}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",...t?{height:"100%",position:"fixed",top:0,left:0,bottom:0,zIndex:999,backgroundColor:n?"transparent":"rgba(255,255,255,.6)"}:{padding:s}},children:(0,r.jsx)(a.Z,{style:{height:24,width:24},className:"animate-spin"})})})}},12832:function(e,t,n){n.d(t,{O:function(){return m}});var r=n(57437),a=n(2265),s=n(74453),i=n(19573),l=n(71239),o=n(37440),d=n(39661),c=n(38472),u=n(36013);function f(e){let{children:t,errors:n=[]}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Zb,{className:"bg-destructive/20 border-destructive text-destructive",children:(0,r.jsxs)(u.aY,{className:"flex flex-col gap-y-4 px-4 py-2",children:[t,!!n.length&&(0,r.jsx)("div",{children:n.map((e,t)=>(0,r.jsx)("p",{children:e},"".concat(t)))})]})})})}let m=(0,a.forwardRef)((e,t)=>{let{isDraft:n,userId:u,dataType:m,card:x}=e,p=(0,l.v)({isDraft:n,userId:u});(0,a.useImperativeHandle)(t,()=>({isLocked:p}),[p]);let{loading:v,error:h,user:g,getUser:j}=function(e){let{userId:t,loadOnMount:n=!1}=e,r=(0,a.useRef)(!1),[s,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(""),f=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;try{if(u(""),!s&&t){i(!0);let t=(await c.Z.get("/api/users/".concat(e))).data;o(t)}}catch(e){u(e.message)}finally{i(!1)}},[s,t]);return(0,a.useEffect)(()=>{n&&!r.current&&(r.current=!0,f())},[n,f]),{loading:s,user:l,error:d,getUser:f}}({userId:u,loadOnMount:!!x}),N=(0,a.useCallback)(async e=>{e&&!v&&!g&&u&&j()},[u,g,v]);return x&&p&&!v?(0,r.jsx)(f,{children:(0,r.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,r.jsx)(s.Z,{className:"w-4 h-4"}),g?(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:g.displayName})," is working on this ",m||""]}):null]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.J2,{onOpenChange:N,children:[(0,r.jsx)(i.xo,{asChild:!0,children:(0,r.jsx)("button",{disabled:!p,children:(0,r.jsx)(s.Z,{className:(0,o.cn)("w-4 h-4 text-destructive/80",!p&&"opacity-0")})})}),(0,r.jsx)(i.yk,{className:"p-0 text-sm max-w-[200px]",children:v?(0,r.jsx)("div",{className:"p-2 flex justify-center",children:(0,r.jsx)(d.a,{padding:0})}):h||!g?(0,r.jsx)("div",{className:"p-2 text-destructive bg-destructive/20",children:h||"Failed to load user!"}):(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("strong",{children:g.displayName})," is working on this ",m||""]})})]})})});m.displayName="LockStatus"},58502:function(e,t,n){n.d(t,{SocketEventsListener:function(){return i}});var r=n(2265),a=n(16463),s=n(7752);function i(e){let{events:t}=e,n=(0,r.useRef)({eventsTimeouts:{},eventsTimestamps:{}});(0,r.useRef)(new Date().getTime());let i=(0,a.useRouter)();return(0,r.useEffect)(()=>{t.forEach(e=>{let{name:t,action:r,delay:a=100,onEvent:l}=e;s.Z.on(t,function(){for(var e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];let d=()=>{var e,n;(!r||s[0]===r)&&(null===(e=l.callback)||void 0===e||e.call(l,...s),(null==l?void 0:l.refreshRouter)&&(console.log(t,"refreshing..."),i.refresh()),(null===(n=l.redirect)||void 0===n?void 0:n.to)&&(l.redirect.replace?i.replace(l.redirect.to):i.push(l.redirect.to)))},c=new Date().getTime();a?(clearTimeout(n.current.eventsTimeouts[t]),n.current.eventsTimeouts[t]=setTimeout(()=>{n.current.eventsTimestamps[t]=c,d()},a)):(n.current.eventsTimestamps[t]=new Date().getTime(),d())})})},[t,i]),null}},25704:function(e,t,n){n.d(t,{Title:function(){return s}});var r=n(2265),a=n(20357);function s(e){let{children:t}=e;return(0,r.useEffect)(()=>{document.title=[a.env.NEXT_PUBLIC_APP_NAME||"",t||""].filter(e=>e).join(" - ")},[t]),(0,r.useEffect)(()=>()=>{document.title="".concat(a.env.NEXT_PUBLIC_APP_NAME||"")},[]),null}},36013:function(e,t,n){n.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var r=n(57437),a=n(2265),s=n(37440);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...a})});u.displayName="CardFooter"},67135:function(e,t,n){n.d(t,{_:function(){return d}});var r=n(57437),a=n(2265),s=n(38364),i=n(13027),l=n(37440);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:n,secondary:a,error:i,...d}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),a&&"text-xs",i?"text-danger":"",n),...d})});d.displayName=s.f.displayName},19573:function(e,t,n){n.d(t,{J2:function(){return l},xo:function(){return o},yk:function(){return d}});var r=n(57437),a=n(2265),s=n(61485),i=n(37440);let l=s.fC,o=s.xz,d=a.forwardRef((e,t)=>{let{className:n,align:a="center",sideOffset:l=4,...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsx)(s.VY,{ref:t,align:a,sideOffset:l,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})})});d.displayName=s.VY.displayName},17647:function(e,t,n){n.d(t,{AppContextProvider:function(){return h},b:function(){return v}});var r=n(57437),a=n(2265),s=n(79512),i=n(16463),l=n(23314),o=n(44785);let d=o.Z.get,c=o.Z.set;o.Z.remove;var u={get:d,set:c};function f(){let e=u.get("mode");return e||(e="view",u.set("mode",e,{expires:31536e7})),e}var m=n(7752),x=n(58502);let p=(0,a.createContext)(null),v=()=>(0,a.useContext)(p);function h(e){let{children:t,...n}=e,o=function(e){(0,i.useRouter)();let{isAdmin:t,isSuperUser:n,sys:r}=e,{setTheme:l}=(0,s.F)();(0,a.useEffect)(()=>{"yes"===r.data.hide_theme_toggle&&l("light")},[r]);let o=(0,a.useCallback)(()=>(t||n?f():"view")||"view",[n,t]),[d,c]=(0,a.useState)(o()),x=!t&&!n||"view"===d,p=(0,a.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=function(e){return u.set("mode",e,{expires:31536e7}),f()}(...t);return m.Z.emit("mode_changed",o()),c(o()),r},[o]),v=(0,a.useCallback)(()=>{c(o())},[o]);return{...e,mode:d,viewOnly:x,onModeChange:v,getMode:f,setMode:p}}(n),[d,c]=(0,a.useState)(!1);return((0,l.Z)(()=>{c(!0)}),d)?(0,r.jsxs)(p.Provider,{value:o,children:[t,(0,r.jsx)(x.SocketEventsListener,{events:[{name:"mode_changed",onEvent:{callback:o.onModeChange}}]})]}):null}},76230:function(e,t,n){n.d(t,{t:function(){return s}});var r=n(39099);let a={danger:!1,title:"Confirm",message:"Are you sure?",positiveLabel:"Ok",negativeLabel:"Cancel"},s=(0,r.Ue)(e=>({isOpen:!1,...a,confirm:(t,n)=>e({isOpen:!0,...a,...n,onConfirm:t}),close:()=>e({isOpen:!1,onConfirm:void 0,...a})}))},71239:function(e,t,n){n.d(t,{v:function(){return a}});var r=n(17647);function a(e){let{isDraft:t,userId:n}=e,{authenticatedUser:a}=(0,r.b)();return!!(t&&n&&n!==(null==a?void 0:a.userId))}},7752:function(e,t,n){var r=n(45040),a=n(20357);let s=(0,r.io)(a.env.NEXT_PUBLIC_APP_URL);t.Z=s}}]);