(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1992],{31992:function(e,l,i){Promise.resolve().then(i.bind(i,62473)),Promise.resolve().then(i.bind(i,95229)),Promise.resolve().then(i.bind(i,25704)),Promise.resolve().then(i.t.bind(i,231,23))},87973:function(e,l,i){"use strict";i.d(l,{M:function(){return k}});var n=i(57437),s=i(2265),t=i(92513),a=i(90399),r=i(5192),d=i(12491),o=i(50495),c=i(76230),m=i(20920),u=i(58184),x=i(99827),h=i(9704),p=i(37440),y=i(39661),f=i(53699);async function g(e){return new Promise((l,i)=>{let n=new Image;n.onload=function(){l({width:n.width,height:n.height})},n.onerror=function(e,l,n,s,t){i(t||Error("Failed to load image"))},n.src=e})}var j=i(66648);function v(e){let{width:l=0,height:i=0,containerWidth:s,...t}=e,a=t.sizes||"100vw",r={width:"100%",height:"auto"};if(i&&l&&s){a=void 0;let e=function(e){let{imageWidth:l,imageHeight:i,containerWidth:n}=e;return l>n&&(i=n/l*i,l=n),{imageWidth:l,imageHeight:i}}({imageWidth:l,imageHeight:i,containerWidth:s});r.width=e.imageWidth,r.height=e.imageHeight}return(0,n.jsx)(j.default,{...t,width:l,height:i,sizes:a,style:{...r,...t.style}})}function b(e){let{type:l,children:i,inputProps:t,fileDetails:a,onUpload:d,...c}=e,[j,{width:b}]=(0,r.Z)(),[w,N]=(0,s.useState)(!1),[D,k]=(0,s.useState)([]),[T,S]=(0,s.useState)(!1),{alert:C}=(0,f.s)(),I=(0,s.useCallback)(async()=>{let e=(null==t?void 0:t.multiple)?D:[D[0]];try{for(let{file:l,metadata:i,fileId:n}of(S(!0),e)){let e=new FormData;e.append("file",l),e.append("fileId",n||(0,m.Z)()),e.append("filename",l.name),e.append("contentType",l.type),e.append("size","".concat(l.size)),e.append("metadata",JSON.stringify({...i})),a&&Object.keys(a).forEach(l=>{let i=a[l];e.append(l,JSON.stringify(i))}),await d(e)}N(!1),k([]),C({title:"Success",message:"File".concat(e.length>1?"s":""," uploaded successfully!"),variant:"success"})}catch(l){C({title:"Error",message:"Failed to upload file".concat(e.length>1?"s":"",": ").concat(l.message),variant:"error"})}finally{S(!1)}},[d,C,D,null==t?void 0:t.multiple,a]),_=(0,s.useCallback)(async e=>{try{var l;let i=[];if(null===(l=e.target.files)||void 0===l?void 0:l.length)for(let l=0;l<e.target.files.length;l++)i.push(e.target.files[l]);let n=[];for(let e of i){let l,i;let s=URL.createObjectURL(e),t={};if("".concat(e.type).includes("image"))try{let e=await g(s);t={...t,...e},l=s}catch(e){}n.push({fileId:(0,m.Z)(),file:e,url:s,imageURL:l,videoURL:i,metadata:t})}k(n)}catch(e){C({title:"Error",message:e.message})}},[C]);return(0,n.jsxs)(n.Fragment,{children:[T&&(0,n.jsx)(y.a,{overlay:!0}),(0,n.jsx)(h.u,{open:w,onOpenChange:e=>{N(e),k([])},title:"Upload file",trigger:i,...c,actions:(0,n.jsxs)(n.Fragment,{children:[!D.length&&(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(o.z,{variant:"ghost",onClick:()=>N(!1),children:"Cancel"}),!!D.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(o.z,{variant:"destructive",onClick:()=>k([]),children:"Clear"}),(0,n.jsxs)(o.z,{disabled:!D.length,onClick:()=>I(),className:(0,p.cn)(!D.length&&"hidden"),children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),(0,n.jsx)("span",{children:"Upload"})]})]})]}),children:(0,n.jsxs)("div",{ref:j,children:[1===D.length&&D.map(e=>{let l=(0,n.jsx)(x.Z,{className:"w-20 h-20 text-muted-foreground"});return e.imageURL&&(l=(0,n.jsx)(v,{alt:"",width:e.metadata.width||0,height:e.metadata.height||0,containerWidth:b,src:e.imageURL||"/images/placeholder.png"})),(0,n.jsxs)("div",{className:(0,p.cn)("\n                                        flex\n                                        flex-col\n                                        gap-y-2\n                                        w-full\n                                        items-center\n                                        justify-center\n                                        text-xs\n                                    ",!(e.imageURL||e.videoURL)&&""),children:[l,(0,n.jsx)("span",{children:e.file.name})]},e.fileId)}),!D.length&&(0,n.jsxs)("div",{className:(0,p.cn)("\n                                    relative\n                                    w-full\n                                    h-36\n                                    bg-primary/20\n                                    flex\n                                    flex-col\n                                    items-center\n                                    justify-center\n                                    text-primary\n                                    uppercase\n                                    font-bold\n                                    rounded-md\n                                    transition-colors\n                                    hover:bg-primary/30\n                                ",!!D.length&&"hidden"),children:[(0,n.jsx)("div",{children:(null==t?void 0:t.placeholder)||"Choose file"}),(0,n.jsx)("input",{...t,type:"file",accept:l,value:"",className:(0,p.cn)("\n                                        absolute\n                                        left-0\n                                        top-0\n                                        w-full\n                                        h-full\n                                        opacity-0\n                                    "),onChange:_})]})]})})]})}var w=i(90837),N=i(15701),D=i(20357);function k(e){let{image:l,disabled:i,onChange:m}=e,[u,{width:x}]=(0,r.Z)(),{confirm:h}=(0,c.t)(),{uploadFile:p}=(0,N.h)(),y=(0,s.useCallback)(async e=>{let{file:l,errors:i}=await p(e);if(null==i?void 0:i.length)throw Error(i.join(", "));if(l){let e=d.Z.stringify({...l.metadata});e=e?"?".concat(e):"",m({data:[D.env.NEXT_PUBLIC_APP_URL,"/files/".concat(l.fileId).concat(e)].join(""),fileId:l.fileId,filename:l.filename,size:l.size,contentType:l.contentType})}},[p,m]),f="".concat((null==l?void 0:l.data)||"").split("?").filter((e,l)=>l).join(""),{width:g,height:j}=d.Z.parse(f);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:u,className:"flex flex-col gap-y-2 min-w-60 max-w-60",children:[(0,n.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-28",children:(0,n.jsx)(v,{alt:"",width:Number(g||"0"),height:Number(j||"0"),containerWidth:x,src:(null==l?void 0:l.data)||"/images/placeholder.png"})}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-x-4",children:[(0,n.jsx)(b,{type:"image/*",onUpload:y,children:(0,n.jsx)(w.hg,{asChild:!0,children:(0,n.jsx)(o.z,{size:"icon",className:"w-8 h-8 rounded-full",disabled:i,children:(0,n.jsx)(t.Z,{className:"h-4 w-4"})})})}),!!l&&(0,n.jsx)(o.z,{variant:"destructive",size:"icon",className:"w-8 h-8 rounded-full",disabled:i,onClick:()=>h(()=>m(null),{title:"Delete image",message:"Are you sure you want to delete this image?",danger:!0}),children:(0,n.jsx)(a.Z,{className:"h-4 w-4"})})]})]})})}},62473:function(e,l,i){"use strict";i.d(l,{ScreenForm:function(){return Y}});var n=i(57437),s=i(2265),t=i(16463);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,i(78030).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var r=i(46294),d=i(19573),o=i(85070),c=i(50495),m=i(83102),u=i(93146),x=i(67135),h=i(23343),p=i(86466),y=i(39661),f=i(17647),g=i(83146),j=i(37440),v=i(76905),b=i(64344),w={zw_edliz_summary_table:[{label:"Confirmed sepsis or chorioamnionitis in mother",type:"Major criteria",subType:"Antenatal",id:"MAJC1"},{label:"Confirmed or suspected sepsis in twin",type:"Major criteria",subType:"Antenatal",id:"MAJC2"},{label:"Seizures",type:"Major criteria",subType:"Antenatal",id:"MAJC3"},{label:"Severe Respiratory Distress in a term infant",type:"Major criteria",subType:"Antenatal",id:"MAJC4"},{label:"Signs of shock",type:"Major criteria",subType:"Natal",id:"MAJC5"},{label:"ROM >18h",type:"Minor criteria",subType:"Antenatal",id:"MINC1"},{label:"Spontaneous Preterm Birth",type:"Minor criteria",subType:"Antenatal",id:"MINC2"},{label:"GBS sepsis in previous baby or documented GBS carriage in this pregnancy (urine or vaginal swab)",type:"Minor criteria",subType:"Antenatal",id:"MINC3"},{label:"Born Before Arrival",type:"Minor criteria",subType:"Natal",id:"MINC4"},{label:"Meconium Stained Liquor",type:"Minor criteria",subType:"Natal",id:"MINC5"},{label:"Respiratory distress that is not obviously related to:\n1. environmental hypothermia \n2. “delayed transition to extra-uterine life” i.e. mild to moderate respiratory distress apparent soon after birth that is improving with time. ",type:"Minor criteria",subType:"Postnatal",id:"MINC6"},{label:"Hypoxia",type:"Minor criteria",subType:"Postnatal",id:"MINC7"},{label:"Apnoea",type:"Minor criteria",subType:"Postnatal",id:"MINC8"},{label:"Hypoglycaemia/Hyperglycaemia not otherwise explained",type:"Minor criteria",subType:"Postnatal",id:"MINC9"},{label:"Temperature instability not explained by environmental factors",type:"Minor criteria",subType:"Postnatal",id:"MINC10"},{label:"Acidosis not obviously related to HIE",type:"Minor criteria",subType:"Postnatal",id:"MINC11"},{label:"Unexplained bleeding or thrombocytopenia",type:"Minor criteria",subType:"Postnatal",id:"MINC12"},{label:"Mild encephalopathy/Altered responsiveness",type:"Minor criteria",subType:"Postnatal",id:"MINC13"},{label:"Altered tone not otherwise explained",type:"Minor criteria",subType:"Postnatal",id:"MINC14"},{label:"Feed intolerance/feeding difficulty",type:"Minor criteria",subType:"Postnatal",id:"MINC15"},{label:"Abnormal heart rate (<90 or >160)",type:"Minor criteria",subType:"Postnatal",id:"MINC16"},{label:"Jaundice in first 24h",type:"Minor criteria",subType:"Postnatal",id:"MINC17"}],mwi_edliz_summary_table:[{label:"Fever >38 in mother",type:"Antenatal risk factors",subType:"",id:"ARF1"},{label:"Rupture of membranes >18h",type:"Antenatal risk factors",subType:"",id:"ARF2"},{label:"Offensive Liquor",type:"Antenatal risk factors",subType:"",id:"ARF3"},{label:"Temperature <35.5 or >37.5",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS1"},{label:"Bulging Fontanelle",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS2"},{label:"Grunting ",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS3"},{label:"nasal flaring",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS4"},{label:"fast breathing",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS5"},{label:"chest indrawing",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS6"},{label:"Crepitations in the lungs",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS7"},{label:"Umbilical redness extending to the periumbilical skin or umbilicus draining pus",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS8"},{label:"reduced movement of limbs",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS9"},{label:"Many skin pustules/big boil (abscess)",type:"Symptoms and Signs of Sepsis",subType:"",id:"SSS10"},{label:"Drowsiness",type:"Signs/symptoms of meningitis",subType:"",id:"SM1"},{label:"Lethargy/unconscious",type:"Signs/symptoms of meningitis",subType:"",id:"SM2"},{label:"Persistent irritability",type:"Signs/symptoms of meningitis",subType:"",id:"SM3"},{label:"High pitched cry",type:"Signs/symptoms of meningitis",subType:"",id:"SM4"},{label:"Convulsions",type:"Signs/symptoms of meningitis",subType:"",id:"SM5"},{label:"Cold hands and feet",type:"Shock (Danger signs)",subType:"",id:"SDS1"},{label:"Capillary refill time > 3 seconds",type:"Shock (Danger signs)",subType:"",id:"SDS2"},{label:"Fast and weak pulse",type:"Shock (Danger signs)",subType:"",id:"SDS3"}]},N=i(84760),D=i(39343),k=i(20920),T=i(15701),S=i(21453),C=i(53699),I=i(87973),_=i(12599),F=i(92513),M=i(45188),V=i(6649),R=i(90399),P=i(75944),z=i(90837),A=i(46910),L=i(76230),K=i(17501);function E(e){let{disabled:l,selected:i,onDelete:s,onCopy:t}=e;return(0,n.jsx)(n.Fragment,{children:!!i.length&&(0,n.jsx)(K.h,{children:(0,n.jsxs)(c.z,{variant:"destructive",className:"h-auto w-auto",disabled:l,onClick:()=>s(),children:[(0,n.jsx)(R.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:i.length>1?"Delete ".concat(i.length," fields"):"Delete field"})]})})})}var U=i(9704),Z=i(10738),q=i(78591),$=i(18934);function O(e){let{children:l,field:i,form:t,disabled:a,...d}=e,{data:y,index:f}={...i},[g,b]=(0,s.useState)(!!y),[w,k]=(0,s.useState)(!1),{getDefaultValues:T}=(0,$.U)(y),{reset:C,register:I,getValues:_,watch:F,setValue:M,handleSubmit:V}=(0,D.cI)({defaultValues:T()}),R=F("type"),P=F("key"),A=F("label"),L=F("optional"),K=F("printable"),E=F("confidential"),O=F("maxDate"),B=F("minDate"),H=F("maxTime"),X=F("minTime"),W=F("prePopulate"),J=F("defaultValue"),Y=F("values"),G=(0,s.useMemo)(()=>(0,q.s)(Y),[Y]),Q=(0,s.useMemo)(()=>"date"===R||"datetime"===R,[R]),ee=(0,s.useMemo)(()=>"time"===R,[R]),el=(0,s.useMemo)(()=>"text"===R,[R]),ei=(0,s.useMemo)(()=>"period"===R,[R]),en=(0,s.useMemo)(()=>"number"===R,[R]),es=(0,s.useMemo)(()=>"dropdown"===R,[R]),et=(0,s.useMemo)(()=>!!a,[a]),ea=V(e=>{!(0,S.x)(f)&&y?t.setValue("fields",t.getValues("fields").map((l,i)=>({...l,...i===f?e:null}))):t.setValue("fields",[...t.getValues("fields"),e],{shouldDirty:!0}),k(!1)});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(U.u,{open:w,title:y?"New field":"Edit field",trigger:"function"==typeof l?l({extraProps:d}):l,onOpenChange:e=>{k(e),C(T()),b(!!y)},actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,j.cn)("text-danger text-xs",et&&"hidden"),children:"* Required"}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(z.GG,{asChild:!0,children:(0,n.jsx)(c.z,{variant:"ghost",children:"Cancel"})}),(0,n.jsx)(c.z,{disabled:et||!R,onClick:()=>{g?ea():(b(!0),C({...T(),type:R}))},children:g?"Save":"Continue"})]}),children:g?(0,n.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Field type"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"type",children:"Type *"}),(0,n.jsxs)(r.Ph,{value:R,required:!0,name:"type",disabled:!0,onValueChange:e=>{M("type",e,{shouldDirty:!0})},children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{placeholder:"Select type"})}),(0,n.jsx)(r.Bw,{children:(0,n.jsxs)(r.DI,{children:[(0,n.jsx)(r.n5,{children:"User role"}),v.Uv.map(e=>(0,n.jsx)(r.Ql,{value:e.name,children:e.label},e.name))]})})]})]})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Flow control"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"condition",children:"Conditional expression"}),(0,n.jsx)(m.I,{...I("condition",{disabled:et}),name:"condition",noRing:!1}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Example: ($key = true and $key2 = false) or $key3 = 'HD'"})]})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Properties"}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{error:!et&&!P,htmlFor:"key",children:"Key *"}),(0,n.jsx)(m.I,{...I("key",{disabled:et,required:!0}),name:"key",error:!et&&!P})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(x._,{error:!et&&!A,htmlFor:"label",children:"Label *"}),(0,n.jsx)(m.I,{...I("label",{disabled:et}),name:"label",error:!et&&!A})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"refKey",children:"Reference Key"}),(0,n.jsx)(m.I,{...I("refKey",{disabled:et}),name:"refKey",noRing:!1}),(0,n.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Link this field to ",(0,n.jsx)("b",{children:"another field with this key"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(h.r,{id:"confidential",disabled:et,checked:E,onCheckedChange:e=>M("confidential",e,{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"confidential",children:"Confidential"})]}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(h.r,{id:"optional",disabled:et,checked:L,onCheckedChange:e=>M("optional",e,{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"optional",children:"Optional"})]})]}),es&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"values",className:(0,j.cn)(G.length?"text-danger":""),children:"Values"}),(0,n.jsx)(u.g,{...I("values",{disabled:et}),name:"values",rows:5,noRing:!1,className:(0,j.cn)(G.length?"border-danger":"")}),(0,n.jsx)("span",{className:"text-xs text-danger",children:G.join(", ")})]})}),(ei||en)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"calculation",children:"Reference expression"}),(0,n.jsx)(m.I,{...I("calculation",{disabled:et}),name:"calculation",noRing:!1}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Example: $key or SUM($key1,$key2...) or DIVIDE($key1,$key2...) or MULTIPLY($key1,$key2...) or SUBTRACT($key1,$key2...)"})]})}),en&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{className:"sm:flex-1",children:[(0,n.jsx)(x._,{htmlFor:"minValue",children:"Min value"}),(0,n.jsx)(m.I,{...I("minValue",{disabled:et}),name:"minValue",noRing:!1})]}),(0,n.jsxs)("div",{className:"sm:flex-1",children:[(0,n.jsx)(x._,{htmlFor:"maxValue",children:"Max value"}),(0,n.jsx)(m.I,{...I("maxValue",{disabled:et}),name:"maxValue",noRing:!1})]}),(0,n.jsxs)("div",{className:"sm:flex-1",children:[(0,n.jsx)(x._,{htmlFor:"format",children:"Format"}),(0,n.jsx)(m.I,{...I("format",{disabled:et}),name:"format",noRing:!1})]})]}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Format: Add as many # as the number of decimal digits or leave empty"})]})}),Q&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{children:"Min date"}),(0,n.jsx)(Z.x,{disabled:et||"date_now"===B,type:"datetime",value:B,onChange:e=>{let{date:l}=e;return M("minDate",(null==l?void 0:l.toISOString())||"",{shouldDirty:!0})}})]}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"minDate",disabled:et,checked:"date_now"===B,onCheckedChange:e=>M("minDate",e?"date_now":"",{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"minDate",children:"Current date"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"minDateKey",children:"Min Date Key e.g $DateOfBirth"}),(0,n.jsx)(m.I,{...I("minDateKey",{disabled:et}),name:"minDateKey",noRing:!1})]})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{children:"Max date"}),(0,n.jsx)(Z.x,{disabled:et||"date_now"===O,type:"datetime",value:O,onChange:e=>{let{date:l}=e;return M("maxDate",(null==l?void 0:l.toISOString())||"",{shouldDirty:!0})}})]}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"maxDate",disabled:et,checked:"date_now"===O,onCheckedChange:e=>M("maxDate",e?"date_now":"",{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"maxDate",children:"Current date"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{htmlFor:"maxDateKey",children:"Max Date Key e.g $DateOfBirth"}),(0,n.jsx)(m.I,{...I("maxDateKey",{disabled:et}),name:"maxDateKey",noRing:!1})]})]})]}),(0,n.jsx)(N.D,{children:"Default"}),(0,n.jsx)(o.E,{disabled:et,defaultValue:J||"empty",onValueChange:e=>M("defaultValue",("empty"===e?"":e)||"",{shouldDirty:!0}),className:"flex flex-col gap-y-4",children:[{label:"Empty",name:"empty"},{label:"Current time",name:"date_now"},{label:"Today at noon",name:"date_noon"},{label:"Today at midnight",name:"date_midnight"}].map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.m,{value:e.name,id:e.name}),(0,n.jsx)(x._,{htmlFor:e.name,children:e.label})]},e.name))})]}),ee&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{children:"Min time"}),(0,n.jsx)(Z.x,{disabled:et||"time_now"===X,type:"time",value:X,onChange:e=>{let{time:l}=e;return M("minTime",l||"",{shouldDirty:!0})}})]}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"minTime",disabled:et,checked:"time_now"===X,onCheckedChange:e=>M("minTime",e?"time_now":"",{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"minTime",children:"Current time"})]})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{children:"Max time"}),(0,n.jsx)(Z.x,{disabled:et||"time_now"===H,type:"time",value:H,onChange:e=>{let{time:l}=e;return M("maxTime",l||"",{shouldDirty:!0})}})]}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"maxTime",disabled:et,checked:"time_now"===H,onCheckedChange:e=>M("maxTime",e?"time_now":"",{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"maxTime",children:"Current time"})]})]})]})})]}),el&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Default"}),(0,n.jsx)(o.E,{disabled:et,defaultValue:J||"empty",onValueChange:e=>M("defaultValue",("empty"===e?"":e)||"",{shouldDirty:!0}),className:"flex flex-col gap-y-4",children:[{label:"Empty",name:"empty"},{label:"Generated ID",name:"uid"}].map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.m,{value:e.name,id:e.name}),(0,n.jsx)(x._,{htmlFor:e.name,children:e.label})]},e.name))})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Neotree ID Search"}),(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:v.d4.map(e=>{let l="prePopulate_".concat(e.value),i=v.d4.filter(e=>e.value!==v.d4[0].value).map(e=>e.value),s=W.includes(e.value)||W.length===i.length;return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:l,checked:s,disabled:et,onCheckedChange:l=>{let n=[];l?(n=[...W,e.value],e.value===v.d4[0].value&&(n=i)):(n=W.filter(l=>l!==e.value),e.value===v.d4[0].value&&(n=[])),M("prePopulate",n,{shouldDirty:!0})}}),(0,n.jsx)(x._,{htmlFor:l,children:e.label})]},l)})})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Print"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"printable",disabled:et,checked:K,onCheckedChange:()=>M("printable",!K,{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"printable",children:"Print"})]}),(0,n.jsx)("span",{className:"text-muted-foreground text-xs",children:"If not checked, data will not be display on the session summary and the printout."})]})]})]}):(0,n.jsx)(o.E,{defaultValue:R,onValueChange:e=>M("type",e,{shouldDirty:!0}),className:"flex flex-col gap-y-4",children:v.Uv.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.m,{value:e.name,id:e.name}),(0,n.jsx)(x._,{htmlFor:e.name,children:e.label})]},e.name))})})})}function B(e){let{form:l,disabled:i}=e,[t,a]=(0,s.useState)([]),{confirm:r}=(0,L.t)(),d=l.watch("fields"),o=(0,s.useCallback)((e,i)=>{let n=(0,_.q)([...d],e,i);l.setValue("fields",n.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0})},[l,d]),m=(0,s.useCallback)(e=>{let i=d.filter((l,i)=>e.includes(i)).map(e=>'<div class="font-bold text-danger">'.concat(e.label,"</div>")).join("");r(()=>{let i=d.filter((l,i)=>!e.includes(i));l.setValue("fields",i.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0}),a([])},{title:"Delete",message:"<p>Are you sure you want to delete ".concat(e.length>1?"".concat(e.length," fields: "):"field: ","</p> ").concat(i),danger:!0,positiveLabel:"Delete"})},[l,d,r]),u=(0,s.useCallback)(e=>{let i=d.filter((l,i)=>e.includes(i)).map(e=>'<div class="font-bold">'.concat(e.label,"</div>")).join("");r(()=>{let i=[...d,...d.filter((l,i)=>e.includes(i)).map((e,l)=>({...e,position:d.length+1+l}))];l.setValue("fields",i.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0}),a([])},{title:"Duplicate",message:"<p>Are you sure you want to duplicate ".concat(e.length>1?"".concat(e.length," fields: "):"field: ","</p> ").concat(i),positiveLabel:"Duplicate"})},[l,d,r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.DataTable,{title:"Fields",sortable:!i,selectable:!i,onSort:o,selectedIndexes:t,onSelect:a,search:{inputPlaceholder:"Search fields"},headerActions:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(O,{form:l,disabled:i,children:!i&&(0,n.jsx)(z.hg,{asChild:!0,children:(0,n.jsxs)(c.z,{className:"text-primary border-primary",variant:"outline",children:[(0,n.jsx)(F.Z,{className:"h-4 w-4 mr-1"}),"New field"]})})})}),columns:[{name:"Type"},{name:"Key"},{name:"Label"},{name:"Action",align:"right",cellRenderer(e){let{rowIndex:s}=e,t=d[s];return(0,n.jsxs)(A.h_,{children:[(0,n.jsx)(A.$F,{asChild:!0,children:(0,n.jsx)(c.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,n.jsx)(M.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)(A.AW,{children:[(0,n.jsx)(A.Xi,{asChild:!0,children:(0,n.jsx)(O,{disabled:i,form:l,field:{data:t,index:s},children:e=>{let{extraProps:l}=e;return(0,n.jsxs)(z.hg,{...l,className:(0,j.cn)(null==l?void 0:l.className,"w-full"),children:[(0,n.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),(0,n.jsx)("span",{children:i?"View":"Edit"})]})}})}),(0,n.jsxs)(A.Xi,{onClick:()=>m([s]),className:(0,j.cn)("text-danger focus:bg-danger focus:text-danger-foreground"),disabled:i,children:[(0,n.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Delete"})]})]})]})}}],data:d.map(e=>[e.type,e.key,e.label,""])}),!i&&(0,n.jsx)(E,{disabled:i,selected:t,onDelete:()=>m(t),onCopy:()=>u(t)})]})}function H(e){let{disabled:l,selected:i,onDelete:s,onCopy:t}=e;return(0,n.jsx)(n.Fragment,{children:!!i.length&&(0,n.jsx)(K.h,{children:(0,n.jsxs)(c.z,{variant:"destructive",className:"h-auto w-auto",disabled:l,onClick:()=>s(),children:[(0,n.jsx)(R.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:i.length>1?"Delete ".concat(i.length," items"):"Delete item"})]})})})}function X(e){let{children:l,item:i,form:t,disabled:a,...r}=e,{data:d,index:o}={...i},[u,h]=(0,s.useState)(!1),p=(0,s.useCallback)(()=>({itemId:(null==d?void 0:d.itemId)||(0,k.Z)(),id:(null==d?void 0:d.id)||"",label:(null==d?void 0:d.label)||"",position:(null==d?void 0:d.position)||1,subType:(null==d?void 0:d.subType)||"",type:(null==d?void 0:d.type)||"",...d}),[d]),{reset:y,watch:f,register:g,handleSubmit:v}=(0,D.cI)({defaultValues:p()}),b=f("id"),w=f("label"),N=(0,s.useMemo)(()=>!!a,[a]),T=v(e=>{!(0,S.x)(o)&&d?t.setValue("items",t.getValues("items").map((l,i)=>({...l,...i===o?e:null}))):t.setValue("items",[...t.getValues("items"),e],{shouldDirty:!0}),h(!1)});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(U.u,{open:u,title:d?"New item":"Edit item",trigger:"function"==typeof l?l({extraProps:r}):l,onOpenChange:e=>{h(e),y(p())},actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,j.cn)("text-danger text-xs",N&&"hidden"),children:"* Required"}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(z.GG,{asChild:!0,children:(0,n.jsx)(c.z,{variant:"ghost",children:"Cancel"})}),(0,n.jsx)(c.z,{disabled:N,onClick:()=>T(),children:"Save"})]}),children:(0,n.jsx)("div",{className:"flex flex-col gap-y-5",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:gap-y-0 sm:flex-row sm:gap-x-2 sm:items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{error:!N&&!b,htmlFor:"id",children:"ID *"}),(0,n.jsx)(m.I,{...g("id",{disabled:N,required:!0}),name:"id",error:!N&&!b})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(x._,{error:!N&&!w,htmlFor:"label",children:"Label *"}),(0,n.jsx)(m.I,{...g("label",{disabled:N,required:!0}),name:"label",error:!N&&!w})]})]})})})})}function W(e){let{form:l,disabled:i}=e,[t,a]=(0,s.useState)([]),{confirm:r}=(0,L.t)(),d=l.watch("items"),o=(0,s.useCallback)((e,i)=>{let n=(0,_.q)([...d],e,i);l.setValue("items",n.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0})},[l,d]),m=(0,s.useCallback)(e=>{let i=d.filter((l,i)=>e.includes(i)).map(e=>'<div class="font-bold text-danger">'.concat(e.label,"</div>")).join("");r(()=>{let i=d.filter((l,i)=>!e.includes(i));l.setValue("items",i.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0}),a([])},{title:"Delete",message:"<p>Are you sure you want to delete ".concat(e.length>1?"".concat(e.length," items: "):"item: ","</p> ").concat(i),danger:!0,positiveLabel:"Delete"})},[l,d,r]),u=(0,s.useCallback)(e=>{let i=d.filter((l,i)=>e.includes(i)).map(e=>'<div class="font-bold">'.concat(e.label,"</div>")).join("");r(()=>{let i=[...d,...d.filter((l,i)=>e.includes(i)).map((e,l)=>({...e,position:d.length+1+l}))];l.setValue("items",i.map((e,l)=>({...e,position:l+1})),{shouldDirty:!0}),a([])},{title:"Duplicate",message:"<p>Are you sure you want to duplicate ".concat(e.length>1?"".concat(e.length," items: "):"item: ","</p> ").concat(i),positiveLabel:"Duplicate"})},[l,d,r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.DataTable,{title:"Items",sortable:!i,selectable:!i,onSort:o,selectedIndexes:t,onSelect:a,search:{inputPlaceholder:"Search items"},headerActions:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(X,{form:l,disabled:i,children:!i&&(0,n.jsx)(z.hg,{asChild:!0,children:(0,n.jsxs)(c.z,{className:"text-primary border-primary",variant:"outline",children:[(0,n.jsx)(F.Z,{className:"h-4 w-4 mr-1"}),"New item"]})})})}),columns:[{name:"Key"},{name:"Label"},{name:"Action",align:"right",cellRenderer(e){let{rowIndex:s}=e,t=d[s];return(0,n.jsxs)(A.h_,{children:[(0,n.jsx)(A.$F,{asChild:!0,children:(0,n.jsx)(c.z,{variant:"ghost",size:"icon",className:"p-0 h-auto w-auto transition-colors rounded-full hover:text-primary hover:bg-transparent",children:(0,n.jsx)(M.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)(A.AW,{children:[(0,n.jsx)(A.Xi,{asChild:!0,children:(0,n.jsx)(X,{disabled:i,form:l,item:{data:t,index:s},children:e=>{let{extraProps:l}=e;return(0,n.jsxs)(z.hg,{...l,className:(0,j.cn)(null==l?void 0:l.className,"w-full"),children:[(0,n.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),(0,n.jsx)("span",{children:i?"View":"Edit"})]})}})}),(0,n.jsxs)(A.Xi,{onClick:()=>m([s]),className:(0,j.cn)("text-danger focus:bg-danger focus:text-danger-foreground"),disabled:i,children:[(0,n.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Delete"})]})]})]})}}],data:d.map(e=>[e.id,e.label,""])}),!i&&(0,n.jsx)(H,{disabled:i,selected:t,onDelete:()=>m(t),onCopy:()=>u(t)})]})}function J(e){let{form:{watch:l}}=e,i=l("items"),t=(0,s.useMemo)(()=>i.reduce((e,l)=>(l.type&&(e[l.type]=e[l.type]||[],e[l.type].push(l)),e),{}),[i]);return(0,n.jsx)(n.Fragment,{children:Object.keys(t).map(e=>{let l=t[e];return(0,n.jsxs)("div",{children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsx)(P.DataTable,{title:e,columns:[{name:"ID",cellClassName:"w-[150px]"},{name:"Sub type",cellClassName:"w-[150px]"},{name:"Label"}],data:l.map(e=>[e.id||"",e.subType||"",e.label||""])})})]},e)})})}function Y(e){let{formData:l,scriptId:i,countDiagnosesScreens:_}=e,F=(0,t.useRouter)(),[M,V]=(0,s.useState)(!!l),{viewOnly:R}=(0,f.b)(),P=function(e){let{formData:l,scriptId:i}=e,n=(0,t.useRouter)(),[a,r]=(0,s.useState)(!1),{saveScreens:d}=(0,T.h)(),{alert:o}=(0,C.s)(),{viewOnly:c}=(0,f.b)(),m=(0,s.useMemo)(()=>"/script/".concat(i,"?section=screens"),[i]),u=(0,s.useCallback)(()=>({version:(null==l?void 0:l.version)||1,scriptId:(null==l?void 0:l.scriptId)||i,screenId:(null==l?void 0:l.screenId)||(0,k.Z)(),type:(null==l?void 0:l.type)||"",sectionTitle:(null==l?void 0:l.sectionTitle)||"",previewTitle:(null==l?void 0:l.previewTitle)||"",previewPrintTitle:(null==l?void 0:l.previewPrintTitle)||"",condition:(null==l?void 0:l.condition)||"",epicId:(null==l?void 0:l.epicId)||"",storyId:(null==l?void 0:l.storyId)||"",refId:(null==l?void 0:l.refId)||"",refKey:(null==l?void 0:l.refKey)||"",step:(null==l?void 0:l.step)||"",actionText:(null==l?void 0:l.actionText)||"",contentText:(null==l?void 0:l.contentText)||"",title:(null==l?void 0:l.title)||"",title1:(null==l?void 0:l.title1)||"",title2:(null==l?void 0:l.title2)||"",title3:(null==l?void 0:l.title3)||"",title4:(null==l?void 0:l.title4)||"",text1:(null==l?void 0:l.text1)||"",text2:(null==l?void 0:l.text2)||"",text3:(null==l?void 0:l.text3)||"",image1:(null==l?void 0:l.image1)||null,image2:(null==l?void 0:l.image2)||null,image3:(null==l?void 0:l.image3)||null,instructions:(null==l?void 0:l.instructions)||"",instructions2:(null==l?void 0:l.instructions2)||"",instructions3:(null==l?void 0:l.instructions3)||"",instructions4:(null==l?void 0:l.instructions4)||"",hcwDiagnosesInstructions:(null==l?void 0:l.hcwDiagnosesInstructions)||"",suggestedDiagnosesInstructions:(null==l?void 0:l.suggestedDiagnosesInstructions)||"",notes:(null==l?void 0:l.notes)||"",dataType:(null==l?void 0:l.dataType)||"",key:(null==l?void 0:l.key)||"",label:(null==l?void 0:l.label)||"",negativeLabel:(null==l?void 0:l.negativeLabel)||"",positiveLabel:(null==l?void 0:l.positiveLabel)||"",timerValue:(null==l?void 0:l.timerValue)||"",multiplier:(null==l?void 0:l.multiplier)||"",minValue:(null==l?void 0:l.minValue)||"",maxValue:(null==l?void 0:l.maxValue)||"",exportable:!!(0,S.x)(null==l?void 0:l.exportable)||(null==l?void 0:l.exportable),skippable:!(0,S.x)(null==l?void 0:l.skippable)&&(null==l?void 0:l.skippable),confidential:!(0,S.x)(null==l?void 0:l.confidential)&&(null==l?void 0:l.confidential),printable:!!(0,S.x)(null==l?void 0:l.printable)||(null==l?void 0:l.printable),prePopulate:(null==l?void 0:l.prePopulate)||[],fields:(null==l?void 0:l.fields)||[],items:(null==l?void 0:l.items)||[]}),[l,i]),x=(0,D.cI)({defaultValues:u()}),{formState:{dirtyFields:h},handleSubmit:p}=x,y=(0,s.useMemo)(()=>!!Object.keys(h).length,[h]),g=p(async e=>{try{var l;r(!0);let i={...e,timerValue:e.timerValue?Number(e.timerValue):null,multiplier:e.multiplier?Number(e.multiplier):null,minValue:e.minValue?Number(e.minValue):null,maxValue:e.maxValue?Number(e.maxValue):null};if(!i.scriptId)throw Error("Screen is missing script reference!");let s=await d({data:[i],broadcastAction:!0});if(null===(l=s.errors)||void 0===l?void 0:l.length)throw Error(s.errors.join(", "));n.refresh(),o({variant:"success",message:"Screen draft was saved successfully!",onClose:()=>n.push(m)})}catch(e){o({title:"Error",variant:"error",message:"Failed to save draft: "+e.message})}finally{r(!1)}}),j=(0,s.useMemo)(()=>a||c,[a,c]);return{...x,formIsDirty:y,saving:a,scriptPageHref:m,disabled:j,save:g,getDefaultValues:u}}({formData:l,scriptId:i}),{formIsDirty:z,saving:A,scriptPageHref:L,disabled:K,register:E,watch:U,setValue:Z,save:q}=P,$=U("type"),O=U("skippable"),H=U("printable"),X=U("confidential"),Y=U("prePopulate"),G=U("image1"),Q=U("image2"),ee=U("image3"),el=(0,s.useCallback)(()=>{F.push(L)},[F,L]);if(!M)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 [&>*]:px-4",children:[(0,n.jsx)(N.D,{children:"Type"}),(0,n.jsx)("div",{children:(0,n.jsx)(o.E,{disabled:K,defaultValue:$,onValueChange:e=>{if(Z("type",e,{shouldDirty:!0}),Z("items",[],{shouldDirty:!0}),"mwi_edliz_summary_table"===e||"zw_edliz_summary_table"===e){let l=w[e];console.log(l),Z("items",l,{shouldDirty:!0})}},className:"flex flex-col gap-y-4",children:g.Tf.map(e=>{let l=!1,i="";return"diagnosis"===e.value&&(i=(l=!!_)?"Diagnosis is disabled because this script already contains a diagnosis script (Script can only have one diagnosis screen).":""),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.m,{value:e.value,id:e.value,disabled:l}),(0,n.jsx)(x._,{secondary:!0,htmlFor:e.value,"aria-disabled":l,className:l?"opacity-70 cursor-not-allowed":"",children:e.label}),!!i&&(0,n.jsxs)(d.J2,{children:[(0,n.jsx)(d.xo,{children:(0,n.jsx)(a,{className:"text-primary h-4 w-4"})}),(0,n.jsx)(d.yk,{className:"max-w-[200px] bg-primary text-primary-foreground",children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})})]})]},e.value)})})}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-2 py-6",children:[(0,n.jsx)(c.z,{variant:"ghost",onClick:()=>el(),children:"Cancel"}),(0,n.jsx)(c.z,{disabled:!$&&!z||K,onClick:()=>{Z("dataType",function(e){switch(e){case"yesno":return"boolean";case"timer":return"number";case"management":case"edliz_summary_table":case"mwi_edliz_summary_table":case"zw_edliz_summary_table":default:return"";case"multi_select":return"set<id>";case"single_select":return"id"}}($)),"management"===$&&Z("printable",!1),V(!0)},children:"Continue"})]})]})});let ei="diagnosis"===$,en="progress"===$,es="form"===$,et="checklist"===$,ea="management"===$,er="zw_edliz_summary_table"===$,ed="mwi_edliz_summary_table"===$,eo="yesno"===$,ec="timer"===$,em="multi_select"===$,eu="single_select"===$,ex=em||eu,eh=eo||ex||ec,ep=eo||ex||ec||ea||ei;return(0,n.jsxs)(n.Fragment,{children:[A&&(0,n.jsx)(y.a,{overlay:!0}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 [&>*]:px-4",children:[(0,n.jsx)(N.D,{children:"Type"}),(0,n.jsx)("div",{children:(0,n.jsxs)(r.Ph,{value:$||"",disabled:!0,name:"type",onValueChange:e=>{let l=e||g.Tf[0].value;Z("type",l,{shouldDirty:!0}),Z("items",[],{shouldDirty:!0}),("mwi_edliz_summary_table"===l||"zw_edliz_summary_table"===l)&&Z("items",[],{shouldDirty:!0})},children:[(0,n.jsx)(r.i4,{children:(0,n.jsx)(r.ki,{placeholder:"Select hospital"})}),(0,n.jsx)(r.Bw,{children:(0,n.jsxs)(r.DI,{children:[(0,n.jsx)(r.n5,{children:"Screen types"}),g.Tf.map(e=>(0,n.jsx)(r.Ql,{value:e.value,children:e.label},e.value))]})})]})}),(0,n.jsx)(N.D,{children:"Flow control"}),(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(h.r,{id:"skippable",checked:O,disabled:K,onCheckedChange:e=>Z("skippable",e,{shouldDirty:!0})}),(0,n.jsx)(x._,{secondary:!0,htmlFor:"skippable",children:"Allow user to skip this screen"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"condition",children:"Conditional expression"}),(0,n.jsx)(m.I,{...E("condition",{disabled:K}),name:"condition",noRing:!1}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Example: ($key = true and $key2 = false) or $key3 = 'HD'"})]}),(0,n.jsx)(N.D,{children:"Properties"}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"epicId",children:"Epic ID"}),(0,n.jsx)(m.I,{...E("epicId",{disabled:K}),name:"epicId",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"storyId",children:"Story ID"}),(0,n.jsx)(m.I,{...E("storyId",{disabled:K}),name:"storyId",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"refId",children:"Ref"}),(0,n.jsx)(m.I,{...E("refId",{disabled:K}),name:"refId",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"step",children:"Step"}),(0,n.jsx)(m.I,{...E("step",{disabled:K}),name:"step",noRing:!1})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"title",children:"Title *"}),(0,n.jsx)(m.I,{...E("title",{disabled:K,required:!0}),name:"title",noRing:!1})]}),ei&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"title2",children:"Title 2 *"}),(0,n.jsx)(m.I,{...E("title2",{disabled:K,required:!0}),name:"title2",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"title3",children:"Title 3 *"}),(0,n.jsx)(m.I,{...E("title3",{disabled:K,required:!0}),name:"title3",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"previewTitle",children:"Preview title *"}),(0,n.jsx)(m.I,{...E("previewTitle",{disabled:K,required:!0}),name:"previewTitle",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"previewPrintTitle",children:"Preview print title *"}),(0,n.jsx)(m.I,{...E("previewPrintTitle",{disabled:K,required:!0}),name:"previewPrintTitle",noRing:!1})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"sectionTitle",children:"Print section title *"}),(0,n.jsx)(m.I,{...E("sectionTitle",{disabled:K,required:!0}),name:"sectionTitle",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"actionText",children:"Action"}),(0,n.jsx)(m.I,{...E("actionText",{disabled:K}),name:"actionText",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"contentText",children:"Content"}),(0,n.jsx)(u.g,{...E("contentText",{disabled:K}),name:"contentText",noRing:!1,rows:5})]}),ea&&(0,n.jsx)(n.Fragment,{children:[["title1","text1",G],["title2","text2",Q],["title3","text3",ee]].map((e,l)=>{let[i,t,a]=e,r="image".concat(l+1);return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(x._,{secondary:!0,htmlFor:"imageTextFields.".concat(l,".title"),children:["Title ",l+1]}),(0,n.jsx)(m.I,{...E(i,{disabled:K}),name:"title".concat(l),noRing:!1})]}),(0,n.jsxs)("div",{className:"flex gap-x-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)(x._,{htmlFor:"imageTextFields.".concat(l,".text"),children:["Text ",l+1]}),(0,n.jsx)(u.g,{...E(t,{disabled:K}),name:"text".concat(l),noRing:!1,rows:5})]}),(0,n.jsx)(I.M,{disabled:K,image:a,onChange:e=>Z(r,e,{shouldDirty:!0})})]})]},"imageTextFields.".concat(l))})}),(ec||eo||ex)&&(0,n.jsxs)("div",{className:(0,j.cn)("flex flex-col gap-y-5",ec&&"sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1"),children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(x._,{secondary:!0,htmlFor:"key",children:["Input key",ec?"":" *"]}),(0,n.jsx)(m.I,{...E("key",{disabled:K,required:!ec}),name:"key",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(x._,{secondary:!0,htmlFor:"label",children:["Input label",ec?"":" *"]}),(0,n.jsx)(m.I,{...E("label",{disabled:K,required:!ec}),name:"label",noRing:!1})]})]}),eo&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"negativeLabel",children:"Negative label *"}),(0,n.jsx)(m.I,{...E("negativeLabel",{disabled:K,required:!0}),name:"negativeLabel",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"positiveLabel",children:"Positive label *"}),(0,n.jsx)(m.I,{...E("positiveLabel",{disabled:K,required:!0}),name:"positiveLabel",noRing:!1})]})]})}),ec&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"timerValue",children:"Timer value"}),(0,n.jsx)(m.I,{...E("timerValue",{disabled:K}),name:"timerValue",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"multiplier",children:"Multiplier"}),(0,n.jsx)(m.I,{...E("multiplier",{disabled:K}),name:"multiplier",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"minValue",children:"Input value min."}),(0,n.jsx)(m.I,{...E("minValue",{disabled:K}),name:"minValue",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"maxValue",children:"Input value max."}),(0,n.jsx)(m.I,{...E("maxValue",{disabled:K}),name:"maxValue",noRing:!1})]})]})}),(eo||ec||ex)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(h.r,{id:"confidential",checked:X,disabled:K,onCheckedChange:e=>Z("confidential",e,{shouldDirty:!0})}),(0,n.jsx)(x._,{secondary:!0,htmlFor:"confidential",children:"Confidential"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"instructions",children:"Instructions"}),(0,n.jsx)(u.g,{...E("instructions",{disabled:K}),name:"instructions",noRing:!1,rows:5})]}),ei&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"instructions2",children:"Instructions 2"}),(0,n.jsx)(u.g,{...E("instructions2",{disabled:K}),name:"instructions2",noRing:!1,rows:5})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"instructions3",children:"Instructions 3"}),(0,n.jsx)(u.g,{...E("instructions3",{disabled:K}),name:"instructions3",noRing:!1,rows:5})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"hcwDiagnosesInstructions",children:"HCW diagnoses instructions"}),(0,n.jsx)(u.g,{...E("hcwDiagnosesInstructions",{disabled:K}),name:"hcwDiagnosesInstructions",noRing:!1,rows:5})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"suggestedDiagnosesInstructions",children:"Suggested diagnoses instructions"}),(0,n.jsx)(u.g,{...E("suggestedDiagnosesInstructions",{disabled:K}),name:"suggestedDiagnosesInstructions",noRing:!1,rows:5})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"notes",children:"Notes"}),(0,n.jsx)(u.g,{...E("notes",{disabled:K}),name:"notes",noRing:!1,rows:5})]}),eh&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Neotree ID Search"}),(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:v.d4.map(e=>{let l="prePopulate_".concat(e.value),i=v.d4.filter(e=>e.value!==v.d4[0].value).map(e=>e.value),s=Y.includes(e.value)||Y.length===i.length;return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:l,checked:s,disabled:K,onCheckedChange:l=>{let n=[];l?(n=[...Y,e.value],e.value===v.d4[0].value&&(n=i)):(n=Y.filter(l=>l!==e.value),e.value===v.d4[0].value&&(n=[])),Z("prePopulate",n,{shouldDirty:!0})}}),(0,n.jsx)(x._,{htmlFor:l,children:e.label})]},l)})})]}),ep&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.D,{children:"Print"}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 items-end sm:flex-row sm:gap-y-0 sm:gap-x-2 sm:[&>*]:flex-1",children:[ea&&(0,n.jsxs)("div",{className:"max-w-64",children:[(0,n.jsx)(x._,{secondary:!0,htmlFor:"refKey",children:"Reference key"}),(0,n.jsx)(m.I,{...E("refKey",{disabled:K}),name:"refKey",placeholder:"$refKey",noRing:!1})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,n.jsx)(p.X,{id:"printable",checked:H,disabled:K,onCheckedChange:()=>Z("printable",!H,{shouldDirty:!0})}),(0,n.jsx)(x._,{htmlFor:"printable",children:"Print"})]}),(0,n.jsx)("span",{className:"text-muted-foreground text-xs",children:"If not checked, data will not be display on the session summary and the printout."})]})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-2 py-6 px-4",children:[(0,n.jsx)("span",{className:(0,j.cn)("text-danger text-xs",K&&"hidden"),children:"* Required"}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(c.z,{variant:"ghost",onClick:()=>el(),children:"Cancel"}),(0,n.jsx)(c.z,{disabled:!z||K,onClick:()=>q(),children:"Save Draft"})]}),(er||ed)&&(0,n.jsx)(J,{form:P,disabled:K}),es&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{className:"my-20"}),(0,n.jsx)(B,{form:P,disabled:K})]}),(eu||em||et||en||ei)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{className:"my-20"}),(0,n.jsx)(W,{form:P,disabled:K})]})]})}},18934:function(e,l,i){"use strict";i.d(l,{U:function(){return t}});var n=i(2265),s=i(20920);function t(e){return{getDefaultValues:(0,n.useCallback)(()=>({fieldId:(null==e?void 0:e.fieldId)||(0,s.Z)(),type:(null==e?void 0:e.type)||"",key:(null==e?void 0:e.key)||"",label:(null==e?void 0:e.label)||"",refKey:(null==e?void 0:e.refKey)||"",calculation:(null==e?void 0:e.calculation)||"",condition:(null==e?void 0:e.condition)||"",dataType:(null==e?void 0:e.dataType)||"",defaultValue:(null==e?void 0:e.defaultValue)||"",format:(null==e?void 0:e.format)||"",minValue:(null==e?void 0:e.minValue)||"",maxValue:(null==e?void 0:e.maxValue)||"",minDate:(null==e?void 0:e.minDate)||"",maxDate:(null==e?void 0:e.maxDate)||"",minTime:(null==e?void 0:e.minTime)||"",maxTime:(null==e?void 0:e.maxTime)||"",minDateKey:(null==e?void 0:e.minDateKey)||"",maxDateKey:(null==e?void 0:e.maxDateKey)||"",minTimeKey:(null==e?void 0:e.minTimeKey)||"",maxTimeKey:(null==e?void 0:e.maxTimeKey)||"",values:(null==e?void 0:e.values)||"",confidential:(null==e?void 0:e.confidential)||!1,optional:(null==e?void 0:e.optional)||!1,printable:(null==e?void 0:e.printable)||!1,prePopulate:(null==e?void 0:e.prePopulate)||[],...e}),[e])}}},17501:function(e,l,i){"use strict";i.d(l,{h:function(){return a}});var n=i(57437),s=i(77606),t=i(37440);function a(e){let{children:l,className:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-16"}),(0,n.jsx)("div",{className:(0,t.cn)("\n                        fixed \n                        left-0 \n                        bottom-0 \n                        h-16 \n                        w-full \n                        border-t \n                        border-t-border \n                        z-[1] \n                        bg-primary-foreground \n                        dark:bg-background \n                        shadow-md \n                        dark:shadow-foreground/10\n                    "),children:(0,n.jsx)(s.V,{children:(0,n.jsx)("div",{className:(0,t.cn)("flex justify-end gap-x-4",i),children:l})})})]})}},95229:function(e,l,i){"use strict";i.d(l,{Alert:function(){return a}});var n=i(53699),s=i(16463),t=i(2265);function a(e){let l=(0,s.useRouter)(),{alert:i}=(0,n.s)();return(0,t.useEffect)(()=>{let{redirectTo:n,onClose:s,...t}=e;i({...t,variant:t.variant||"error",buttonLabel:t.buttonLabel||"Ok",onClose:()=>{null==s||s(),n&&l.replace(n)}})},[i,l,e]),null}},77606:function(e,l,i){"use strict";i.d(l,{V:function(){return t}});var n=i(57437),s=i(37440);function t(e){let{className:l,...i}=e;return(0,n.jsx)("div",{...i,className:(0,s.cn)("w-full max-w-screen-xl mx-auto p-5",l)})}},23343:function(e,l,i){"use strict";i.d(l,{r:function(){return N}});var n=i(57437),s=i(2265),t=i(78149),a=i(1584),r=i(98324),d=i(91715),o=i(47250),c=i(75238),m=i(25171),u="Switch",[x,h]=(0,r.b)(u),[p,y]=x(u),f=s.forwardRef((e,l)=>{let{__scopeSwitch:i,name:r,checked:o,defaultChecked:c,required:u,disabled:x,value:h="on",onCheckedChange:y,...f}=e,[g,j]=s.useState(null),w=(0,a.e)(l,e=>j(e)),N=s.useRef(!1),D=!g||!!g.closest("form"),[k=!1,T]=(0,d.T)({prop:o,defaultProp:c,onChange:y});return(0,n.jsxs)(p,{scope:i,checked:k,disabled:x,children:[(0,n.jsx)(m.WV.button,{type:"button",role:"switch","aria-checked":k,"aria-required":u,"data-state":b(k),"data-disabled":x?"":void 0,disabled:x,value:h,...f,ref:w,onClick:(0,t.M)(e.onClick,e=>{T(e=>!e),D&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),D&&(0,n.jsx)(v,{control:g,bubbles:!N.current,name:r,value:h,checked:k,required:u,disabled:x,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var g="SwitchThumb",j=s.forwardRef((e,l)=>{let{__scopeSwitch:i,...s}=e,t=y(g,i);return(0,n.jsx)(m.WV.span,{"data-state":b(t.checked),"data-disabled":t.disabled?"":void 0,...s,ref:l})});j.displayName=g;var v=e=>{let{control:l,checked:i,bubbles:t=!0,...a}=e,r=s.useRef(null),d=(0,o.D)(i),m=(0,c.t)(l);return s.useEffect(()=>{let e=r.current,l=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==i&&l){let n=new Event("click",{bubbles:t});l.call(e,i),e.dispatchEvent(n)}},[d,i,t]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...a,tabIndex:-1,ref:r,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return e?"checked":"unchecked"}var w=i(37440);let N=s.forwardRef((e,l)=>{let{className:i,...s}=e;return(0,n.jsx)(f,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...s,ref:l,children:(0,n.jsx)(j,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});N.displayName=f.displayName},76905:function(e,l,i){"use strict";i.d(l,{Uv:function(){return s},d4:function(){return n},fR:function(){return a}});let n=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],s=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],t={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:""},a={admission:[{...t,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...t,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...t,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...t,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...t,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},78591:function(e,l,i){"use strict";function n(e){let l=[],i=(e||"").split("\n").map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim()}).map(e=>{let l=e.split(",");return{value:l[0],label:l[1]}}),n=i.map(e=>e.value),s=i.map(e=>e.label),t=i.filter(e=>!e.value||!e.label),a=n.filter((e,l)=>n.indexOf(e)!==l);return(s.filter((e,l)=>s.indexOf(e)!==l).length||a.length)&&l.push("Dropdown values contain duplicate data"),t.length&&l.push("Incorrect dropdown values format"),l}i.d(l,{s:function(){return n}})}}]);