"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8268],{84760:function(e,l,a){a.d(l,{D:function(){return t}});var r=a(57437),s=a(37440);function t(e){let{children:l,className:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("pb-1 border-b border-b-primary",a),children:(0,r.jsx)("span",{className:"uppercase text-primary text-sm",children:l})})}},74709:function(e,l,a){a.d(l,{u:function(){return i}});var r=a(57437),s=a(2265),t=a(90837),n=a(37440);let c=(0,a(39099).Ue)((e,l)=>({modals:{},open(l){e(e=>({modals:{...e.modals,[l]:!0}}))},toggle(a){let r=l().modals;e(e=>({modals:{...e.modals,[a]:!r[a]}}))},close(l){e(e=>({modals:{...e.modals,[l]:!1}}))},isOpen:e=>!!l().modals[e],set(l){e(e=>({modals:{...e.modals,...l}}))}}));function i(e){let{id:l,children:a,title:i,description:o,actions:d,trigger:u,contentProps:x,footerProps:h,...f}=e,{close:m,isOpen:p,set:v}=c();return(0,s.useEffect)(()=>{l&&v({[l]:!1})},[l]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(t.Vq,{...f,open:(l?p(l):void 0)||f.open,onOpenChange:e=>{var a;l&&v({[l]:e}),null==f||null===(a=f.onOpenChange)||void 0===a||a.call(f,e)},children:[u,(0,r.jsxs)(t.cZ,{hideCloseButton:!0,className:(0,n.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",null==x?void 0:x.className),...x,children:[(0,r.jsxs)(t.fK,{className:(0,n.cn)(i||o?"":"hidden","border-b border-b-border px-4 py-4"),children:[(0,r.jsx)(t.$N,{className:(0,n.cn)(i?"":"hidden"),children:i}),(0,r.jsx)(t.Be,{className:(0,n.cn)(o?"":"hidden"),children:o})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:a}),(0,r.jsx)(t.cN,{className:(0,n.cn)("border-t border-t-border px-4 py-2 items-center w-full",d?"":"hidden",null==h?void 0:h.className),...h,children:d})]})]})})}},87861:function(e,l,a){a.d(l,{w:function(){return h}});var r=a(57437),s=a(2265),t=a(39343),n=a(83146),c=a(95317),i=a(46294),o=a(67135),d=a(86466),u=a(50495),x=a(37440);function h(e){let{id:l,label:a,hide:h,title:f,description:m,data:p,disabled:v,onSave:j}=e,b=(0,s.useMemo)(()=>{let e=!1;return Object.values(p).forEach(a=>{a[l]&&(e=!0)}),e},[p,l]),{reset:g,watch:y,setValue:C,handleSubmit:N}=(0,t.cI)({defaultValues:{...n.$7,...p}}),k=y("fontSize"),w=y("fontWeight"),S=y("fontStyle"),E=y("textColor"),D=N(j),[F,z]=(0,s.useState)(!1);return h?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(c.yo,{onOpenChange:e=>{g({...n.$7,...p}),z(e)},children:[(0,r.jsx)(c.aM,{asChild:!0,children:(0,r.jsx)(u.z,{variant:"link",className:(0,x.cn)("p-0 text-xs",!b&&"text-muted-foreground/80 hover:text-muted-foreground"),children:a||"".concat(b?"Update":"Set"," preferences")})}),(0,r.jsxs)(c.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,r.jsxs)(c.Tu,{className:"px-4 py-4 border-b border-b-border",children:[(0,r.jsx)(c.bC,{children:f}),(0,r.jsx)(c.Ei,{className:m?"":"hidden",children:m})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:F&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,r.jsx)(o._,{secondary:!0,htmlFor:"fontSize.".concat(l),children:"Font size"}),(0,r.jsx)("div",{children:(0,r.jsxs)(i.Ph,{value:k[l]||"default",required:!0,name:"fontSize.".concat(l),disabled:v,onValueChange:e=>{let a=e||void 0;"default"===a&&(a=void 0),C("fontSize.".concat(l),a,{shouldDirty:!0})},children:[(0,r.jsx)(i.i4,{children:(0,r.jsx)(i.ki,{placeholder:"Default"})}),(0,r.jsx)(i.Bw,{children:(0,r.jsx)(i.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>(0,r.jsx)(i.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[!!E[l]&&(0,r.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,r.jsx)(o._,{secondary:!0,htmlFor:"textColor.".concat(l),children:"Text color"}),(0,r.jsx)("input",{type:"color",value:E[l],onChange:e=>C("textColor.".concat(l),e.target.value,{shouldDirty:!0})})]}),(0,r.jsxs)("div",{className:"flex gap-x-2",children:[(0,r.jsx)(d.X,{id:"defaultTextColor.".concat(l),name:"defaultTextColor.".concat(l),disabled:v,checked:!E[l],onCheckedChange:()=>{let e=E[l]?void 0:"#000000";C("textColor.".concat(l),e,{shouldDirty:!0})}}),(0,r.jsx)(o._,{secondary:!0,htmlFor:"defaultTextColor.".concat(l),children:"Default text color"})]})]})}),(0,r.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,r.jsxs)("div",{className:"flex gap-x-2",children:[(0,r.jsx)(d.X,{name:"bold",id:"bold",disabled:v,checked:"bold"===w[l],onCheckedChange:()=>C("fontWeight.".concat(l),w[l]?void 0:"bold",{shouldDirty:!0})}),(0,r.jsx)(o._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,r.jsxs)("div",{className:"flex gap-x-2",children:[(0,r.jsx)(d.X,{name:"italic",id:"italic",disabled:v,checked:(S[l]||[]).includes("italic"),onCheckedChange:()=>{let e=S[l]||[];e.includes("italic")?e=e.filter(e=>"italic"!==e):e.push("italic"),e.length||(e=void 0),C("fontStyle.".concat(l),e,{shouldDirty:!0})}}),(0,r.jsx)(o._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,r.jsxs)(c.FF,{className:"px-4 py-4 border-t border-t-border",children:[(0,r.jsx)("div",{className:"ml-auto"}),(0,r.jsx)(c.sw,{asChild:!0,children:(0,r.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,r.jsx)(c.sw,{asChild:!0,children:(0,r.jsx)(u.z,{disabled:v,onClick:()=>D(),children:"Save"})})]})]})]})})}},85070:function(e,l,a){a.d(l,{E:function(){return i},m:function(){return o}});var r=a(57437),s=a(2265),t=a(99497),n=a(28165),c=a(37440);let i=s.forwardRef((e,l)=>{let{className:a,...s}=e;return(0,r.jsx)(t.fC,{className:(0,c.cn)("grid gap-2",a),...s,ref:l})});i.displayName=t.fC.displayName;let o=s.forwardRef((e,l)=>{let{className:a,...s}=e;return(0,r.jsx)(t.ck,{ref:l,className:(0,c.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)(t.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(n.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=t.ck.displayName},15701:function(e,l,a){a.d(l,{ScriptsContextProvider:function(){return u},h:function(){return d}});var r=a(57437),s=a(2265),t=a(16463),n=a(12491),c=a(38472),i=a(23733);let o=(0,s.createContext)(null),d=()=>(0,s.useContext)(o);function u(e){let{children:l,...a}=e,d=function(e){let{}=e,l=(0,t.useRouter)(),{scriptId:a}=(0,t.useParams)(),{parsed:r}=(0,i.l)(),[o,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)({data:[]}),[h,f]=(0,s.useState)(!1),[m,p]=(0,s.useState)([]),v=(0,s.useCallback)(()=>{l.push("/")},[l]),j=(0,s.useCallback)(()=>{l.push("/script/".concat(a,"?").concat(n.Z.stringify({...r,section:"screens"})))},[l,r,a]),b=(0,s.useCallback)(()=>{l.push("/script/".concat(a,"?").concat(n.Z.stringify({...r,section:"diagnoses"})))},[l,r,a]),g=(0,s.useCallback)(async()=>{try{var e,l;d(!0);let r=await c.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null===(l=r.data)||void 0===l?void 0:null===(e=l.errors)||void 0===e?void 0:e.length)throw Error(r.data.errors.join(", "));x(r.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{d(!1)}},[a,open,alert]);return{screens:u,screensLoading:o,keys:m,keysLoading:h,loadKeys:(0,s.useCallback)(async()=>{try{var e,l;f(!0);let r=await c.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null===(l=r.data)||void 0===l?void 0:null===(e=l.errors)||void 0===e?void 0:e.length)throw Error(r.data.errors.join(", "));let s=r.data.data.reduce((e,l)=>[...e,...l.keys],[]);p(s)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{f(!1)}},[a,open,alert]),loadScreens:g,onCancelDiagnosisForm:b,onCancelScreenForm:j,onCancelScriptForm:v}}(a);return(0,r.jsx)(o.Provider,{value:{...a,...d},children:l})}},21453:function(e,l,a){a.d(l,{x:function(){return r}});function r(e){return null==e||""===e}}}]);