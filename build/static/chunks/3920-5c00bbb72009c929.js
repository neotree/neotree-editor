"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3920],{95229:function(e,a,l){l.d(a,{Alert:function(){return s}});var t=l(53699),r=l(16463),n=l(2265);function s(e){let a=(0,r.useRouter)(),{alert:l}=(0,t.s)();return(0,n.useEffect)(()=>{let{redirectTo:t,onClose:r,...n}=e;l({...n,variant:n.variant||"error",buttonLabel:n.buttonLabel||"Ok",onClose:()=>{null==r||r(),t&&a.replace(t)}})},[l,a,e]),null}},76905:function(e,a,l){l.d(a,{Uv:function(){return n},VO:function(){return r},d4:function(){return t},fR:function(){return i}});let t=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],r=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],n=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"multi_select",label:"Multiple choice list"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],s={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:"",editable:!1},i={admission:[{...s,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...s,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...s,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...s,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...s,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},83146:function(e,a,l){l.d(a,{$7:function(){return o},F4:function(){return v},PU:function(){return s},Tf:function(){return d},UQ:function(){return y},_S:function(){return i},m1:function(){return c},ph:function(){return b},uh:function(){return u},y0:function(){return m}});var t=l(76905),r=l(30139),n=l(28680);let s={headerFormat:"",headerFields:[],footerFields:[],sections:[]},i="Example: ($key = true and $key2 = false) or $key3 = 'HD'",o={fontSize:{},fontWeight:{},fontStyle:{},textColor:{},backgroundColor:{},highlight:{}},u=[{value:"screens",label:"Screens"},{value:"diagnoses",label:"Diagnoses"},{value:"print",label:"Print"}],c=[{label:"Admission",value:"admission"},{label:"Discharge",value:"discharge"},{label:"Neolab",value:"neolab"},{label:"Daily Record",value:"drecord"}],d=[{value:"checklist",label:"Checklist"},{value:"form",label:"Form"},{value:"management",label:"Management"},{value:"multi_select",label:"Multiple choice list"},{value:"single_select",label:"Single choice list"},{value:"progress",label:"Progress"},{value:"timer",label:"Timer"},{value:"yesno",label:"Yes/No"},{value:"drugs",label:"Drugs"},{value:"fluids",label:"Fluids"},{value:"zw_edliz_summary_table",label:"EDLIZ summary table (ZW)"},{value:"mwi_edliz_summary_table",label:"EDLIZ summary table (MWI)"},{value:"diagnosis",label:"Diagnosis"}],b=[{value:"risk",label:"Risk factor"},{value:"sign",label:"Sign/Symptom"}];({...d.reduce((e,a)=>{let l=a.value,t=a.value,r=[t,"".concat(t,"_option")];return"single_select"===l&&(r=[...r,"dropdown","dropdown_option"]),{...e,[t]:r}},{}),...t.Uv.reduce((e,a)=>{let l=a.name,t=a.name,r=[t,"".concat(t,"_option")];return"dropdown"===l&&(r=[...r,"single_select","single_select_option"]),{...e,[t]:r}},{})});let m=[{value:"checklist_option",label:"checklist_option",hasChildren:!1},{value:"multi_select",label:"multi_select",hasChildren:!0},{value:"multi_select_option",label:"multi_select_option",hasChildren:!1},{value:"single_select",label:"single_select",hasChildren:!0},{value:"single_select_option",label:"single_select_option",hasChildren:!1},{value:"yesno",label:"yesno",hasChildren:!1},{value:"zw_edliz_summary_table_option",label:"zw_edliz_summary_table_option",hasChildren:!1},{value:"mwi_edliz_summary_table_option",label:"mwi_edliz_summary_table_option",hasChildren:!1},{value:"diagnosis",label:"diagnosis",hasChildren:!1},{value:"date",label:"date",hasChildren:!1},{value:"datetime",label:"datetime",hasChildren:!1},{value:"dropdown",label:"dropdown",hasChildren:!0},{value:"dropdown_option",label:"dropdown_option",hasChildren:!1},{value:"number",label:"number",hasChildren:!1},{value:"text",label:"text",hasChildren:!1},{value:"timer",label:"timer",hasChildren:!1},{value:"period",label:"period",hasChildren:!1},{value:"ref_id",label:"ref_id",hasChildren:!1}],v=[{value:"label.asc",label:"Label (asc)",Icon:r.Z},{value:"label.desc",label:"Label (desc)",Icon:n.Z},{value:"key.asc",label:"Key (asc)",Icon:r.Z},{value:"key.desc",label:"Key (desc)",Icon:n.Z},{value:"type.asc",label:"Type (asc)",Icon:r.Z},{value:"type.desc",label:"Type (desc)",Icon:n.Z},{value:"refId.asc",label:"Ref ID (asc)",Icon:r.Z},{value:"refId.desc",label:"Ref ID (desc)",Icon:n.Z},{value:"createdAt.asc",label:"Date (asc)",Icon:r.Z},{value:"createdAt.desc",label:"Date (desc)",Icon:n.Z}],y=[{label:"Published",value:"published"},{label:"Drafts",value:"drafts"}]},23920:function(e,a,l){l.d(a,{DataKeysCtxProvider:function(){return m},M:function(){return b}});var t=l(57437),r=l(2265),n=l(38472),s=l(73741),i=l(16463),o=l(53699),u=l(95229),c=l(83146);let d=(0,r.createContext)(null),b=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useChart must be used within a <DataKeysCtxProvider />");return e};function m(e){var a,l;let{children:b,prefetchDataKeys:m=!0}=e,y=(0,r.useRef)(!1),h=(0,i.useRouter)(),{alert:f}=(0,o.s)(),[p,k]=(0,s.v1)("uuid",{clearOnDefault:!0,shallow:!0,history:"push",defaultValue:""}),[g,_]=(0,r.useState)([]),[D,w]=(0,r.useState)(c.F4[0].value),[C,I]=(0,r.useState)(""),[S,T]=(0,r.useState)(!1),[x,N]=(0,r.useState)({data:[]}),[Z,E]=(0,r.useState)(!1),F=(0,r.useCallback)(async()=>{T(!0),n.Z.get("/api/data-keys").then(e=>{e.data.data=v(e.data.data,D),N(e.data)}).catch(e=>{N({data:[],errors:[e.message]})}).finally(()=>T(!1))},[D]);(0,r.useEffect)(()=>{!y.current&&(y.current=!0,m&&F())},[m,F]);let[K,A]=(0,r.useState)(!1),U=(0,r.useCallback)(async(e,a)=>{try{var l;A(!0);let t=(await n.Z.post("/api/data-keys/save",{data:e,broadcastAction:!0})).data;(null===(l=t.errors)||void 0===l?void 0:l.length)?f({title:"Error",message:t.errors.join(", "),variant:"error"}):(await F(),h.refresh(),f({message:"Data key saved!",variant:"success",onClose:()=>null==a?void 0:a()}))}catch(e){f({title:"Error",message:"Failed to save data key: "+e.message,onClose:()=>null==a?void 0:a(e.message)})}finally{A(!1)}},[f,h.refresh,F]),[z,L]=(0,r.useState)(!1),Y=(0,r.useCallback)(async e=>{try{var a;L(!0);let l=(await n.Z.delete("/api/data-keys?data="+JSON.stringify({dataKeysIds:e,broadcastAction:!0}))).data;if(null===(a=l.errors)||void 0===a?void 0:a.length)throw Error(l.errors[0]);_([]),await F(),h.refresh(),f({title:"Success",message:"Data keys deleted successfully!",variant:"success"})}catch(e){f({title:"Error",message:e.message,variant:"error"})}finally{L(!1)}},[h.refresh,f,F]),[O,R]=(0,r.useState)(!1),P=(0,r.useCallback)(async e=>{try{var a;R(!0);let l=(await n.Z.post("/api/data-keys/export",e)).data;if(null===(a=l.errors)||void 0===a?void 0:a.length)throw Error(l.errors[0]);await F(),_([]),f({title:"Success",message:"Data exported successfully!",variant:"success"})}catch(e){f({title:"Error",message:e.message,variant:"error"})}finally{R(!1)}},[x.data,F,f]),M=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.F4[0].value;w(e),_([]),N(a=>({...a,data:v(a.data,e)}))},[]),$=(0,r.useCallback)((e,a)=>{let l=e.map(e=>x.data.find(a=>a.uniqueKey===e||a.uuid===e)).filter(e=>e);return(null==a?void 0:a.withNested)&&l.filter(e=>e.options.length).forEach(e=>{let t=$(e.options,a);l=[...l,...t]}),l.filter((e,a)=>l.map(e=>e.uniqueKey).indexOf(e.uniqueKey)===a)},[x]);return(null==x?void 0:null===(a=x.errors)||void 0===a?void 0:a.length)?(0,t.jsx)(u.Alert,{title:"Error",message:"Failed to load data keys: "+(null==x?void 0:null===(l=x.errors)||void 0===l?void 0:l.join(", ")),buttonLabel:"Try again",onClose:()=>F()}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.Provider,{value:{loadingDataKeys:S,saving:K,exporting:O,deleting:z,dataKeys:x.data,errors:x.errors,selected:g,currentDataKeyUuid:p,sort:D,filter:C,extractDataKeys:$,deleteDataKeys:Y,saveDataKeys:U,exportDataKeys:P,setCurrentDataKeyUuid:k,loadDataKeys:F,setSelected:_,setSort:w,onSort:M,setFilter:I},children:b})})}function v(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.F4[0].value,l=[...e],t=e=>{let{key1:a,key2:l,sortDirection:t}=e;a=(a||"").trim().toLowerCase(),l=(l||"").trim().toLowerCase();let r=0;return"asc"===t?(a<l&&(r=-1),a>l&&(r=1)):(a>l&&(r=-1),a<l&&(r=1)),r};switch(a){case"refId.asc":l=e.sort((e,a)=>t({sortDirection:"asc",key1:(e.refId||"").trim(),key2:(a.refId||"").trim()}));break;case"refId.desc":l=e.sort((e,a)=>t({sortDirection:"desc",key1:(e.refId||"").trim(),key2:(a.refId||"").trim()}));break;case"key.desc":l=e.sort((e,a)=>t({sortDirection:"desc",key1:e.name,key2:a.name}));break;case"label.asc":l=e.sort((e,a)=>t({sortDirection:"asc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"label.desc":l=e.sort((e,a)=>t({sortDirection:"desc",key1:(e.label||e.name||"").trim(),key2:(a.label||a.name||"").trim()}));break;case"type.asc":l=e.sort((e,a)=>t({sortDirection:"asc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"type.desc":l=e.sort((e,a)=>t({sortDirection:"desc",key1:(e.dataType||"").trim(),key2:(a.dataType||"").trim()}));break;case"createdAt.asc":l=e.sort((e,a)=>t({sortDirection:"asc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;case"createdAt.desc":l=e.sort((e,a)=>t({sortDirection:"desc",key1:new Date(e.createdAt||"").getTime().toString(),key2:new Date(a.createdAt||"").getTime().toString()}));break;default:l=e.sort((e,a)=>t({sortDirection:"asc",key1:e.name,key2:a.name}))}return l}},53699:function(e,a,l){l.d(a,{s:function(){return n}});var t=l(39099);let r={title:"",message:"",buttonLabel:"Ok",variant:"info",onClose:void 0},n=(0,t.Ue)(e=>({isOpen:!1,...r,alert:a=>e({isOpen:!0,...r,...a}),close:()=>e({isOpen:!1,onClose:void 0,...r})}))}}]);