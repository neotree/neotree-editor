"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8014],{29439:function(e,n,t){t.d(n,{M:function(){return C}});var a=t(57437),r=t(2265),l=t(92513),i=t(90399),s=t(5192),o=t(12491),d=t(38472),c=t(50495),u=t(76230),f=t(20920),h=t(58184);/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,t(78030).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var m=t(9704),g=t(37440),x=t(39661),v=t(53699);async function y(e){return new Promise((n,t)=>{let a=new Image;a.onload=function(){n({width:a.width,height:a.height})},a.onerror=function(e,n,a,r,l){t(l||Error("Failed to load image"))},a.src=e})}function j(e){let{width:n=0,height:t=0,containerWidth:r,...l}=e;l.sizes;let i={width:"100%",height:"auto"};if(t&&n&&r){let e=function(e){let{imageWidth:n,imageHeight:t,containerWidth:a}=e;return n>a&&(t=a/n*t,n=a),{imageWidth:n,imageHeight:t}}({imageWidth:n,imageHeight:t,containerWidth:r});i.width=e.imageWidth,i.height=e.imageHeight}return(0,a.jsx)("img",{...l,src:l.src,style:{...i,...l.style}})}function w(e){let{type:n,children:t,inputProps:l,fileDetails:i,onUpload:o,...d}=e,[u,{width:w}]=(0,s.Z)(),[b,k]=(0,r.useState)(!1),[N,C]=(0,r.useState)([]),[R,E]=(0,r.useState)(!1),{alert:z}=(0,v.s)(),L=(0,r.useCallback)(async()=>{let e=(null==l?void 0:l.multiple)?N:[N[0]];try{for(let{file:n,metadata:t,fileId:a}of(E(!0),e)){let e=new FormData;e.append("file",n),e.append("fileId",a||(0,f.Z)()),e.append("filename",n.name),e.append("contentType",n.type),e.append("size","".concat(n.size)),e.append("metadata",JSON.stringify({...t})),i&&Object.keys(i).forEach(n=>{let t=i[n];e.append(n,JSON.stringify(t))}),await o(e)}k(!1),C([]),z({title:"Success",message:"File".concat(e.length>1?"s":""," uploaded successfully!"),variant:"success"})}catch(n){z({title:"Error",message:"Failed to upload file".concat(e.length>1?"s":"",": ").concat(n.message),variant:"error"})}finally{E(!1)}},[o,z,N,null==l?void 0:l.multiple,i]),Z=(0,r.useCallback)(async e=>{try{var n;let t=[];if(null===(n=e.target.files)||void 0===n?void 0:n.length)for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);let a=[];for(let e of t){let n,t;let r=URL.createObjectURL(e),l={};if("".concat(e.type).includes("image"))try{let e=await y(r);l={...l,...e},n=r}catch(e){}a.push({fileId:(0,f.Z)(),file:e,url:r,imageURL:n,videoURL:t,metadata:l})}C(a)}catch(e){z({title:"Error",message:e.message})}},[z]);return(0,a.jsxs)(a.Fragment,{children:[R&&(0,a.jsx)(x.a,{overlay:!0}),(0,a.jsx)(m.u,{open:b,onOpenChange:e=>{k(e),C([])},title:"Upload file",trigger:t,...d,actions:(0,a.jsxs)(a.Fragment,{children:[!N.length&&(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(c.z,{variant:"ghost",onClick:()=>k(!1),children:"Cancel"}),!!N.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(c.z,{variant:"destructive",onClick:()=>C([]),children:"Clear"}),(0,a.jsxs)(c.z,{disabled:!N.length,onClick:()=>L(),className:(0,g.cn)(!N.length&&"hidden"),children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Upload"})]})]})]}),children:(0,a.jsxs)("div",{ref:u,children:[1===N.length&&N.map(e=>{let n=(0,a.jsx)(p,{className:"w-20 h-20 text-muted-foreground"});return e.imageURL&&(n=(0,a.jsx)(j,{alt:"",width:e.metadata.width||0,height:e.metadata.height||0,containerWidth:w,src:e.imageURL||"/images/placeholder.png"})),(0,a.jsxs)("div",{className:(0,g.cn)("\n                                        flex\n                                        flex-col\n                                        gap-y-2\n                                        w-full\n                                        items-center\n                                        justify-center\n                                        text-xs\n                                    ",!(e.imageURL||e.videoURL)&&""),children:[n,(0,a.jsx)("span",{children:e.file.name})]},e.fileId)}),!N.length&&(0,a.jsxs)("div",{className:(0,g.cn)("\n                                    relative\n                                    w-full\n                                    h-36\n                                    bg-primary/20\n                                    flex\n                                    flex-col\n                                    items-center\n                                    justify-center\n                                    text-primary\n                                    uppercase\n                                    font-bold\n                                    rounded-md\n                                    transition-colors\n                                    hover:bg-primary/30\n                                ",!!N.length&&"hidden"),children:[(0,a.jsx)("div",{children:(null==l?void 0:l.placeholder)||"Choose file"}),(0,a.jsx)("input",{...l,type:"file",accept:n,value:"",className:(0,g.cn)("\n                                        absolute\n                                        left-0\n                                        top-0\n                                        w-full\n                                        h-full\n                                        opacity-0\n                                    "),onChange:Z})]})]})})]})}var b=t(90837),k=t(15701),N=t(20357);function C(e){let{image:n,disabled:t,onChange:f}=e,[h,{width:p}]=(0,s.Z)(),{confirm:m}=(0,u.t)(),{uploadFile:g}=(0,k.h)(),x=(0,r.useCallback)(async e=>{let{file:n,errors:t}=(await d.Z.post("/api/files/upload",e)).data;if(null==t?void 0:t.length)throw Error(t.join(", "));if(n){let e=o.Z.stringify({...n.metadata});e=e?"?".concat(e):"",f({data:[N.env.NEXT_PUBLIC_APP_URL,"/files/".concat(n.fileId).concat(e)].join(""),fileId:n.fileId,filename:n.filename,size:n.size,contentType:n.contentType})}},[g,f]),v="".concat((null==n?void 0:n.data)||"").split("?").filter((e,n)=>n).join(""),{width:y,height:C}=o.Z.parse(v);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{ref:h,className:"flex flex-col gap-y-2 min-w-60 max-w-60",children:[(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-28",children:(0,a.jsx)(j,{alt:"",width:Number(y||"0"),height:Number(C||"0"),containerWidth:p,src:(null==n?void 0:n.data)||"/images/placeholder.png"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-x-4",children:[(0,a.jsx)(w,{type:"image/*",onUpload:x,children:(0,a.jsx)(b.hg,{asChild:!0,children:(0,a.jsx)(c.z,{size:"icon",className:"w-8 h-8 rounded-full",disabled:t,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})})}),!!n&&(0,a.jsx)(c.z,{variant:"destructive",size:"icon",className:"w-8 h-8 rounded-full",disabled:t,onClick:()=>m(()=>f(null),{title:"Delete image",message:"Are you sure you want to delete this image?",danger:!0}),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]})]})})}},17501:function(e,n,t){t.d(n,{h:function(){return i}});var a=t(57437),r=t(77606),l=t(37440);function i(e){let{children:n,className:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-16"}),(0,a.jsx)("div",{className:(0,l.cn)("\n                        fixed \n                        left-0 \n                        bottom-0 \n                        h-16 \n                        w-full \n                        border-t \n                        border-t-border \n                        z-[1] \n                        bg-primary-foreground \n                        dark:bg-background \n                        shadow-md \n                        dark:shadow-foreground/10\n                    "),children:(0,a.jsx)(r.V,{children:(0,a.jsx)("div",{className:(0,l.cn)("flex justify-end gap-x-4",t),children:n})})})]})}},95229:function(e,n,t){t.d(n,{Alert:function(){return i}});var a=t(53699),r=t(16463),l=t(2265);function i(e){let n=(0,r.useRouter)(),{alert:t}=(0,a.s)();return(0,l.useEffect)(()=>{let{redirectTo:a,onClose:r,...l}=e;t({...l,variant:l.variant||"error",buttonLabel:l.buttonLabel||"Ok",onClose:()=>{null==r||r(),a&&n.replace(a)}})},[t,n,e]),null}},77606:function(e,n,t){t.d(n,{V:function(){return l}});var a=t(57437),r=t(37440);function l(e){let{className:n,...t}=e;return(0,a.jsx)("div",{...t,className:(0,r.cn)("w-full max-w-screen-xl mx-auto p-5",n)})}},64344:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(57437),r=t(2265),l=t(48484),i=t(37440);let s=r.forwardRef((e,n)=>{let{className:t,orientation:r="horizontal",decorative:s=!0,...o}=e;return(0,a.jsx)(l.f,{ref:n,decorative:s,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});s.displayName=l.f.displayName},58184:function(e,n,t){t.d(n,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(78030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},99497:function(e,n,t){t.d(n,{ck:function(){return V},fC:function(){return S},z$:function(){return W}});var a=t(2265),r=t(78149),l=t(1584),i=t(98324),s=t(25171),o=t(53398),d=t(91715),c=t(87513),u=t(75238),f=t(47250),h=t(31383),p=t(57437),m="Radio",[g,x]=(0,i.b)(m),[v,y]=g(m),j=a.forwardRef((e,n)=>{let{__scopeRadio:t,name:i,checked:o=!1,required:d,disabled:c,value:u="on",onCheck:f,...h}=e,[m,g]=a.useState(null),x=(0,l.e)(n,e=>g(e)),y=a.useRef(!1),j=!m||!!m.closest("form");return(0,p.jsxs)(v,{scope:t,checked:o,disabled:c,children:[(0,p.jsx)(s.WV.button,{type:"button",role:"radio","aria-checked":o,"data-state":N(o),"data-disabled":c?"":void 0,disabled:c,value:u,...h,ref:x,onClick:(0,r.M)(e.onClick,e=>{o||null==f||f(),j&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),j&&(0,p.jsx)(k,{control:m,bubbles:!y.current,name:i,value:u,checked:o,required:d,disabled:c,style:{transform:"translateX(-100%)"}})]})});j.displayName=m;var w="RadioIndicator",b=a.forwardRef((e,n)=>{let{__scopeRadio:t,forceMount:a,...r}=e,l=y(w,t);return(0,p.jsx)(h.z,{present:a||l.checked,children:(0,p.jsx)(s.WV.span,{"data-state":N(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:n})})});b.displayName=w;var k=e=>{let{control:n,checked:t,bubbles:r=!0,...l}=e,i=a.useRef(null),s=(0,f.D)(t),o=(0,u.t)(n);return a.useEffect(()=>{let e=i.current,n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(s!==t&&n){let a=new Event("click",{bubbles:r});n.call(e,t),e.dispatchEvent(a)}},[s,t,r]),(0,p.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...l,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return e?"checked":"unchecked"}var C=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[E,z]=(0,i.b)(R,[o.Pc,x]),L=(0,o.Pc)(),Z=x(),[I,U]=E(R),F=a.forwardRef((e,n)=>{let{__scopeRadioGroup:t,name:a,defaultValue:r,value:l,required:i=!1,disabled:u=!1,orientation:f,dir:h,loop:m=!0,onValueChange:g,...x}=e,v=L(t),y=(0,c.gm)(h),[j,w]=(0,d.T)({prop:l,defaultProp:r,onChange:g});return(0,p.jsx)(I,{scope:t,name:a,required:i,disabled:u,value:j,onValueChange:w,children:(0,p.jsx)(o.fC,{asChild:!0,...v,orientation:f,dir:y,loop:m,children:(0,p.jsx)(s.WV.div,{role:"radiogroup","aria-required":i,"aria-orientation":f,"data-disabled":u?"":void 0,dir:y,...x,ref:n})})})});F.displayName=R;var P="RadioGroupItem",M=a.forwardRef((e,n)=>{let{__scopeRadioGroup:t,disabled:i,...s}=e,d=U(P,t),c=d.disabled||i,u=L(t),f=Z(t),h=a.useRef(null),m=(0,l.e)(n,h),g=d.value===s.value,x=a.useRef(!1);return a.useEffect(()=>{let e=e=>{C.includes(e.key)&&(x.current=!0)},n=()=>x.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",n),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",n)}},[]),(0,p.jsx)(o.ck,{asChild:!0,...u,focusable:!c,active:g,children:(0,p.jsx)(j,{disabled:c,required:d.required,checked:g,...f,...s,name:d.name,ref:m,onCheck:()=>d.onValueChange(s.value),onKeyDown:(0,r.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,r.M)(s.onFocus,()=>{var e;x.current&&(null===(e=h.current)||void 0===e||e.click())})})})});M.displayName=P;var O=a.forwardRef((e,n)=>{let{__scopeRadioGroup:t,...a}=e,r=Z(t);return(0,p.jsx)(b,{...r,...a,ref:n})});O.displayName="RadioGroupIndicator";var S=F,V=M,W=O}}]);