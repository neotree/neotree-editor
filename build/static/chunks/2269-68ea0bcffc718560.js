"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2269],{18934:function(e,i,a){a.d(i,{U:function(){return s}});var n=a(2265),t=a(20920);function s(e){return{getDefaultValues:(0,n.useCallback)(()=>({fieldId:(null==e?void 0:e.fieldId)||(0,t.Z)(),type:(null==e?void 0:e.type)||"",key:(null==e?void 0:e.key)||"",label:(null==e?void 0:e.label)||"",refKey:(null==e?void 0:e.refKey)||"",calculation:(null==e?void 0:e.calculation)||"",condition:(null==e?void 0:e.condition)||"",dataType:(null==e?void 0:e.dataType)||"",defaultValue:(null==e?void 0:e.defaultValue)||"",format:(null==e?void 0:e.format)||"",minValue:(null==e?void 0:e.minValue)||"",maxValue:(null==e?void 0:e.maxValue)||"",minDate:(null==e?void 0:e.minDate)||"",maxDate:(null==e?void 0:e.maxDate)||"",minTime:(null==e?void 0:e.minTime)||"",maxTime:(null==e?void 0:e.maxTime)||"",minDateKey:(null==e?void 0:e.minDateKey)||"",maxDateKey:(null==e?void 0:e.maxDateKey)||"",minTimeKey:(null==e?void 0:e.minTimeKey)||"",maxTimeKey:(null==e?void 0:e.maxTimeKey)||"",values:(null==e?void 0:e.values)||"",confidential:(null==e?void 0:e.confidential)||!1,optional:(null==e?void 0:e.optional)||!1,printable:(null==e?void 0:e.printable)||!1,prePopulate:(null==e?void 0:e.prePopulate)||[],...e}),[e])}}},80929:function(e,i,a){a.d(i,{A:function(){return x}});var n=a(57437),t=a(2265),s=a(16463),l=a(12491),r=a(20920),o=a(5192),d=a(95317),u=a(50495),m=a(83102),c=a(67135),g=a(39661),v=a(3064);let f=e=>({itemId:"".concat((null==e?void 0:e.itemId)||(0,r.Z)()),key:"".concat((null==e?void 0:e.key)||""),drug:"".concat((null==e?void 0:e.drug)||""),minGestation:"".concat((null==e?void 0:e.minGestation)||""),maxGestation:"".concat((null==e?void 0:e.maxGestation)||""),minWeight:"".concat((null==e?void 0:e.minWeight)||""),maxWeight:"".concat((null==e?void 0:e.maxWeight)||""),minAge:"".concat((null==e?void 0:e.minAge)||""),maxAge:"".concat((null==e?void 0:e.maxAge)||""),dosage:"".concat((null==e?void 0:e.dosage)||""),dosageMultiplier:"".concat((null==e?void 0:e.dosageMultiplier)||""),dayOfLife:"".concat((null==e?void 0:e.dayOfLife)||""),dosageText:"".concat((null==e?void 0:e.dosageText)||""),managementText:"".concat((null==e?void 0:e.managementText)||""),gestationKey:"".concat((null==e?void 0:e.gestationKey)||""),weightKey:"".concat((null==e?void 0:e.weightKey)||""),diagnosisKey:"".concat((null==e?void 0:e.diagnosisKey)||""),administrationFrequency:"".concat((null==e?void 0:e.administrationFrequency)||""),drugUnit:"".concat((null==e?void 0:e.drugUnit)||""),routeOfAdministration:"".concat((null==e?void 0:e.routeOfAdministration)||""),ageKey:"".concat((null==e?void 0:e.ageKey)||"")});function x(e){let{disabled:i,item:a,floating:r,onChange:x}=e,[h,b]=(0,o.Z)(),[y,p]=(0,o.Z)(),[N,j]=(0,t.useState)(!1),[K,w]=(0,t.useState)(f(a)),A=(0,s.useRouter)(),T=(0,s.useSearchParams)(),D=(0,t.useMemo)(()=>l.Z.parse(T.toString()),[T]),{itemId:C,addDrug:I}=D,{keys:k,loading:G}=(0,v.a)();(0,t.useEffect)(()=>{j(!!C||!!I)},[C,I]),(0,t.useEffect)(()=>{w(f(a))},[a]);let W=(0,t.useCallback)(()=>{x({...K,minWeight:K.minWeight?Number(K.minWeight):null,maxWeight:K.maxWeight?Number(K.maxWeight):null,minGestation:K.minGestation?Number(K.minGestation):null,maxGestation:K.maxGestation?Number(K.maxGestation):null,minAge:K.minAge?Number(K.minAge):null,maxAge:K.maxAge?Number(K.maxAge):null,dosage:K.dosage?Number(K.dosage):null,dosageMultiplier:K.dosageMultiplier?Number(K.dosageMultiplier):null})},[K,a,x]),F=(0,t.useCallback)(()=>{j(!1),w(f()),A.push("?".concat(l.Z.stringify({...D,itemId:void 0,addDrug:void 0})));let e=(null==b?void 0:b.top)||0;setTimeout(()=>window.scrollTo({top:e}),500)},[D,b,A.push]),S=(0,t.useCallback)(()=>!!(K.key&&K.drug&&K.minWeight&&K.minGestation&&K.maxWeight&&K.maxGestation&&K.minAge&&K.maxAge&&K.managementText&&K.dosageText&&K.diagnosisKey&&K.administrationFrequency&&K.drugUnit&&K.routeOfAdministration&&K.ageKey&&Number(K.minGestation||"0")<=Number(K.maxGestation||"0")&&Number(K.minWeight||"0")<=Number(K.maxWeight||"0")&&Number(K.minAge||"0")<=Number(K.maxAge||"0")),[K]),_=(0,t.useCallback)(()=>!S()||G||i,[S,G,i]),M=(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"drug",children:"Drug *"}),(0,n.jsx)(m.I,{name:"drug",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.drug,disabled:i,onChange:e=>w(i=>({...i,drug:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"key",children:"Key *"}),(0,n.jsx)(m.I,{name:"key",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.key,disabled:i,onChange:e=>w(i=>({...i,key:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"diagnosisKey",children:"Diagnosis Key *"}),(0,n.jsx)(m.I,{name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.diagnosisKey,disabled:i,onChange:e=>w(i=>({...i,diagnosisKey:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"gestationKey",children:"Gestation Key *"}),(0,n.jsx)(m.I,{name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.gestationKey,disabled:i,onChange:e=>w(i=>({...i,gestationKey:e.target.value}))})]}),(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"minGestation",children:"Min Gestation (weeks) *"}),(0,n.jsx)(m.I,{name:"minGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.minGestation,type:"number",disabled:i,onChange:e=>{let i=e.target.value,a=K.maxGestation;i||(a=""),w(e=>({...e,minGestation:i,maxGestation:a}))}})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"maxGestation",error:Number(K.minGestation||"0")>Number(K.maxGestation||"0"),children:"Max Gestation (weeks) *"}),(0,n.jsx)(m.I,{name:"maxGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.maxGestation,type:"number",disabled:i||!K.minGestation,min:K.minGestation,error:Number(K.minGestation||"0")>Number(K.maxGestation||"0"),onChange:e=>w(i=>({...i,maxGestation:e.target.value}))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"weightKey",children:"Weight Key *"}),(0,n.jsx)(m.I,{name:"weightKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.weightKey,disabled:i,onChange:e=>w(i=>({...i,weightKey:e.target.value}))})]}),(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"minWeight",children:"Min Weight (grams) *"}),(0,n.jsx)(m.I,{name:"minWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.minWeight,type:"number",disabled:i,onChange:e=>{let i=e.target.value,a=K.maxWeight;i||(a=""),w(e=>({...e,minWeight:i,maxWeight:a}))}})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"maxWeight",error:Number(K.minWeight||"0")>Number(K.maxWeight||"0"),children:"Max Weight (grams) *"}),(0,n.jsx)(m.I,{name:"maxWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.maxWeight,type:"number",disabled:i||!K.minWeight,min:K.minWeight,error:Number(K.minWeight||"0")>Number(K.maxWeight||"0"),onChange:e=>w(i=>({...i,maxWeight:e.target.value}))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"ageKey",children:"Day of Life (Age) Key *"}),(0,n.jsx)(m.I,{name:"ageKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.ageKey,disabled:i,onChange:e=>w(i=>({...i,ageKey:e.target.value}))})]}),(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"minAge",children:"Min Day of Life (Age - days) *"}),(0,n.jsx)(m.I,{name:"minAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.minAge,type:"number",disabled:i,onChange:e=>{let i=e.target.value,a=K.maxAge;i||(a=""),w(e=>({...e,minAge:i,maxAge:a}))}})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"maxAge",error:Number(K.minAge||"0")>Number(K.maxAge||"0"),children:"Max Day of Life (Age - days) *"}),(0,n.jsx)(m.I,{name:"maxAge",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.maxAge,type:"number",disabled:i||!K.minAge,min:K.minAge,error:Number(K.minAge||"0")>Number(K.maxAge||"0"),onChange:e=>w(i=>({...i,maxAge:e.target.value}))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"dosageMultiplier",children:"Drug Dose Multiplier *"}),(0,n.jsx)(m.I,{name:"dosageMultiplier",type:"number",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.dosageMultiplier,disabled:i,onChange:e=>w(i=>({...i,dosageMultiplier:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"weight",children:"Dosage text *"}),(0,n.jsx)(m.I,{name:"dosageText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.dosageText,disabled:i,onChange:e=>w(i=>({...i,dosageText:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"administrationFrequency",children:"Administration Frequency *"}),(0,n.jsx)(m.I,{name:"administrationFrequency",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.administrationFrequency,disabled:i,onChange:e=>w(i=>({...i,administrationFrequency:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"drugUnit",children:"Drug Unit *"}),(0,n.jsx)(m.I,{name:"drugUnit",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.drugUnit,disabled:i,onChange:e=>w(i=>({...i,drugUnit:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"routeOfAdministration",children:"Route of Administration *"}),(0,n.jsx)(m.I,{name:"routeOfAdministration",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.routeOfAdministration,disabled:i,onChange:e=>w(i=>({...i,routeOfAdministration:e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c._,{secondary:!0,htmlFor:"managementText",children:"Management text *"}),(0,n.jsx)(m.I,{name:"managementText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:K.managementText,disabled:i,onChange:e=>w(i=>({...i,managementText:e.target.value}))})]})]});return(0,n.jsxs)(n.Fragment,{children:[G&&(0,n.jsx)(g.a,{overlay:!0}),(0,n.jsx)("div",{ref:h,children:!1===r?M:(0,n.jsx)(d.yo,{open:N,onOpenChange:e=>{e||F()},children:(0,n.jsxs)(d.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col w-full max-w-full sm:max-w-[80%] md:max-w-[80%] lg:max-w-[50%]",children:[(0,n.jsxs)(d.Tu,{className:"flex flex-row items-center py-2 px-4 border-b border-b-border text-left sm:text-left",children:[(0,n.jsxs)(d.bC,{children:[I?"Add":"",C?"Edit":""," drug"]}),(0,n.jsx)(d.Ei,{className:"hidden"})]}),(0,n.jsx)("div",{ref:y,className:"flex-1 py-2 px-0 overflow-y-auto",children:(0,n.jsx)("div",{className:"px-4",children:M})}),(0,n.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex gap-x-2",children:[(0,n.jsx)("span",{className:"text-danger text-xs my-auto",children:"* Required"}),(0,n.jsx)("div",{className:"ml-auto"}),(0,n.jsx)(d.sw,{asChild:!0,children:(0,n.jsx)(u.z,{variant:"ghost",onClick:()=>{},children:"Cancel"})}),(0,n.jsx)(d.sw,{asChild:!0,children:(0,n.jsx)(u.z,{onClick:()=>W(),disabled:_(),children:"Save"})})]})]})})})]})}},76905:function(e,i,a){a.d(i,{Uv:function(){return s},VO:function(){return t},d4:function(){return n},fR:function(){return r}});let n=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],t=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],s=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],l={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:""},r={admission:[{...l,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...l,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...l,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...l,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...l,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},3064:function(e,i,a){a.d(i,{R:function(){return m},a:function(){return c}});var n=a(2265),t=a(16463),s=a(12491),l=a(38472),r=a(39099),o=a(53699);let d={initialised:!1,loading:!1,keys:[],drugs:[]},u=(0,r.Ue)(e=>d);function m(){u.setState(d)}function c(){let e=u(),{drugs:i}=e,a=(0,t.useSearchParams)(),r=(0,n.useMemo)(()=>s.Z.parse(a.toString()),[a]),{itemId:m}=r,{alert:c}=(0,o.s)(),g=(0,n.useCallback)(async()=>{try{var e,i;u.setState({loading:!0});let a=await l.Z.get("/api/drugs-library?data="+JSON.stringify({returnDraftsIfExist:!0}));if(null===(e=a.data.errors)||void 0===e?void 0:e.length)throw Error(null===(i=a.data.errors)||void 0===i?void 0:i.join(", "));u.setState({drugs:a.data.data})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[c]),v=(0,n.useCallback)(async e=>{try{var i,a;u.setState(i=>({loading:!0,drugs:i.drugs.filter(i=>!e.includes(i.itemId))}));let n=await l.Z.delete("/api/drugs-library?data="+JSON.stringify({itemsIds:e}));if(null===(i=n.data.errors)||void 0===i?void 0:i.length)throw Error(null===(a=n.data.errors)||void 0===a?void 0:a.join(", "));c({title:"",message:"Drug deleted successfully!",variant:"success"})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[c]),f=(0,n.useCallback)(async e=>{try{var a,n;u.setState({loading:!0});let t=i;u.setState(i=>(t=!m&&e?[...i.drugs,e]:i.drugs.map(i=>i.itemId!==(null==e?void 0:e.itemId)?i:{...i,...e}),{loading:!0,drugs:t}));let s={data:e?[e]:t},r=await l.Z.post("/api/drugs-library/save",s);if(null===(a=r.data.errors)||void 0===a?void 0:a.length)throw Error(null===(n=r.data.errors)||void 0===n?void 0:n.join(", "));await g(),c({title:"",message:"Drug".concat(e?"":"s"," saved successfully!"),variant:"success"})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[i,m]);return(0,n.useEffect)(()=>{u.getState().initialised||(g(),u.setState({initialised:!0}))},[g]),(0,n.useCallback)(()=>{u.setState(d)},[]),{...e,selectedItemId:m,addLink:"?".concat(s.Z.stringify({...r,addDrug:1})),editLink:e=>"?".concat(s.Z.stringify({...r,itemId:e})),getDrugs:g,deleteDrugs:v,saveDrugs:f}}},78591:function(e,i,a){a.d(i,{s:function(){return n}});function n(e){let i=[],a=(e||"").split("\n").map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim()}).map(e=>{let i=e.split(",");return{value:i[0],label:i[1]}}),n=a.map(e=>e.value),t=a.map(e=>e.label),s=a.filter(e=>!e.value||!e.label),l=n.filter((e,i)=>n.indexOf(e)!==i);return(t.filter((e,i)=>t.indexOf(e)!==i).length||l.length)&&i.push("Dropdown values contain duplicate data"),s.length&&i.push("Incorrect dropdown values format"),i}}}]);