"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2269],{18934:function(e,a,i){i.d(a,{U:function(){return l}});var t=i(2265),n=i(20920);function l(e){return{getDefaultValues:(0,t.useCallback)(()=>({fieldId:(null==e?void 0:e.fieldId)||(0,n.Z)(),type:(null==e?void 0:e.type)||"",key:(null==e?void 0:e.key)||"",label:(null==e?void 0:e.label)||"",refKey:(null==e?void 0:e.refKey)||"",calculation:(null==e?void 0:e.calculation)||"",condition:(null==e?void 0:e.condition)||"",dataType:(null==e?void 0:e.dataType)||"",defaultValue:(null==e?void 0:e.defaultValue)||"",format:(null==e?void 0:e.format)||"",minValue:(null==e?void 0:e.minValue)||"",maxValue:(null==e?void 0:e.maxValue)||"",minDate:(null==e?void 0:e.minDate)||"",maxDate:(null==e?void 0:e.maxDate)||"",minTime:(null==e?void 0:e.minTime)||"",maxTime:(null==e?void 0:e.maxTime)||"",minDateKey:(null==e?void 0:e.minDateKey)||"",maxDateKey:(null==e?void 0:e.maxDateKey)||"",minTimeKey:(null==e?void 0:e.minTimeKey)||"",maxTimeKey:(null==e?void 0:e.maxTimeKey)||"",values:(null==e?void 0:e.values)||"",confidential:(null==e?void 0:e.confidential)||!1,optional:(null==e?void 0:e.optional)||!1,printable:(null==e?void 0:e.printable)||!1,prePopulate:(null==e?void 0:e.prePopulate)||[],...e}),[e])}}},80929:function(e,a,i){i.d(a,{A:function(){return x}});var t=i(57437),n=i(2265),l=i(16463),s=i(12491),r=i(20920),o=i(5192),d=i(95317),u=i(50495),m=i(83102),c=i(67135),g=i(39661),v=i(3064);let f=e=>({itemId:"".concat((null==e?void 0:e.itemId)||(0,r.Z)()),key:"".concat((null==e?void 0:e.key)||""),drug:"".concat((null==e?void 0:e.drug)||""),minGestation:"".concat((null==e?void 0:e.minGestation)||""),maxGestation:"".concat((null==e?void 0:e.maxGestation)||""),minWeight:"".concat((null==e?void 0:e.minWeight)||""),maxWeight:"".concat((null==e?void 0:e.maxWeight)||""),dayOfLife:"".concat((null==e?void 0:e.dayOfLife)||""),dosageText:"".concat((null==e?void 0:e.dosageText)||""),managementText:"".concat((null==e?void 0:e.managementText)||""),gestationKey:"".concat((null==e?void 0:e.gestationKey)||""),weightKey:"".concat((null==e?void 0:e.weightKey)||"")});function x(e){let{disabled:a,item:i,floating:r,onChange:x}=e,[h,b]=(0,o.Z)(),[y,p]=(0,o.Z)(),[N,j]=(0,n.useState)(!1),[w,T]=(0,n.useState)(f(i)),k=(0,l.useRouter)(),D=(0,l.useSearchParams)(),K=(0,n.useMemo)(()=>s.Z.parse(D.toString()),[D]),{itemId:C,addDrug:G}=K,{keys:I,loading:W}=(0,v.a)();(0,n.useEffect)(()=>{j(!!C||!!G)},[C,G]),(0,n.useEffect)(()=>{T(f(i))},[i]);let S=(0,n.useCallback)(()=>{x({...w,minWeight:Number(w.minWeight),maxWeight:Number(w.maxWeight),minGestation:Number(w.minGestation),maxGestation:Number(w.maxGestation)})},[w,i,x]),_=(0,n.useCallback)(()=>{j(!1),T(f()),k.push("?".concat(s.Z.stringify({...K,itemId:void 0,addDrug:void 0})));let e=(null==b?void 0:b.top)||0;setTimeout(()=>window.scrollTo({top:e}),500)},[K,b,k.push]),E=(0,n.useCallback)(()=>!!(w.key&&w.drug&&w.minWeight&&w.minGestation&&w.maxWeight&&w.maxGestation&&w.managementText&&w.dosageText&&Number(w.minGestation||"0")<=Number(w.maxGestation||"0")&&Number(w.minWeight||"0")<=Number(w.maxWeight||"0")),[w]),F=(0,n.useCallback)(()=>!E()||W||a,[E,W,a]),Z=(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"drug",children:"Drug *"}),(0,t.jsx)(m.I,{name:"drug",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.drug,disabled:a,onChange:e=>T(a=>({...a,drug:e.target.value}))})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"key",children:"Key *"}),(0,t.jsx)(m.I,{name:"key",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.key,disabled:a,onChange:e=>T(a=>({...a,key:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"minGestation",children:"Min Gestation (weeks) *"}),(0,t.jsx)(m.I,{name:"minGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.minGestation,type:"number",disabled:a,onChange:e=>{let a=e.target.value,i=w.maxGestation;a||(i=""),T(e=>({...e,minGestation:a,maxGestation:i}))}})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"maxGestation",error:Number(w.minGestation||"0")>Number(w.maxGestation||"0"),children:"Max Gestation (weeks) *"}),(0,t.jsx)(m.I,{name:"maxGestation",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.maxGestation,type:"number",disabled:a||!w.minGestation,min:w.minGestation,error:Number(w.minGestation||"0")>Number(w.maxGestation||"0"),onChange:e=>T(a=>({...a,maxGestation:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"gestationKey",children:"Gestation Key *"}),(0,t.jsx)(m.I,{name:"gestationKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.gestationKey,disabled:a,onChange:e=>T(a=>({...a,gestationKey:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"minWeight",children:"Min Weight (weeks) *"}),(0,t.jsx)(m.I,{name:"minWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.minWeight,type:"number",disabled:a,onChange:e=>{let a=e.target.value,i=w.maxWeight;a||(i=""),T(e=>({...e,minWeight:a,maxWeight:i}))}})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"maxWeight",error:Number(w.minWeight||"0")>Number(w.maxWeight||"0"),children:"Max Weight (weeks) *"}),(0,t.jsx)(m.I,{name:"maxWeight",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.maxWeight,type:"number",disabled:a||!w.minWeight,min:w.minWeight,error:Number(w.minWeight||"0")>Number(w.maxWeight||"0"),onChange:e=>T(a=>({...a,maxWeight:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"weightKey",children:"Weight Key *"}),(0,t.jsx)(m.I,{name:"weightKey",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.weightKey,disabled:a,onChange:e=>T(a=>({...a,weightKey:e.target.value}))})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"managementText",children:"Management text *"}),(0,t.jsx)(m.I,{name:"managementText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.managementText,disabled:a,onChange:e=>T(a=>({...a,managementText:e.target.value}))})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(c._,{secondary:!0,htmlFor:"weight",children:"Dosage text *"}),(0,t.jsx)(m.I,{name:"dosageText",className:"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",value:w.dosageText,disabled:a,onChange:e=>T(a=>({...a,dosageText:e.target.value}))})]})]});return(0,t.jsxs)(t.Fragment,{children:[W&&(0,t.jsx)(g.a,{overlay:!0}),(0,t.jsx)("div",{ref:h,children:!1===r?Z:(0,t.jsx)(d.yo,{open:N,onOpenChange:e=>{e||_()},children:(0,t.jsxs)(d.ue,{hideCloseButton:!0,side:"right",className:"p-0 m-0 flex flex-col w-full max-w-full sm:max-w-[80%] md:max-w-[80%] lg:max-w-[50%]",children:[(0,t.jsxs)(d.Tu,{className:"flex flex-row items-center py-2 px-4 border-b border-b-border text-left sm:text-left",children:[(0,t.jsxs)(d.bC,{children:[G?"Add":"",C?"Edit":""," drug"]}),(0,t.jsx)(d.Ei,{className:"hidden"})]}),(0,t.jsx)("div",{ref:y,className:"flex-1 py-2 px-0 overflow-y-auto",children:(0,t.jsx)("div",{className:"px-4",children:Z})}),(0,t.jsxs)("div",{className:"border-t border-t-border px-4 py-2 flex gap-x-2",children:[(0,t.jsx)("span",{className:"text-danger text-xs my-auto",children:"* Required"}),(0,t.jsx)("div",{className:"ml-auto"}),(0,t.jsx)(d.sw,{asChild:!0,children:(0,t.jsx)(u.z,{variant:"ghost",onClick:()=>{},children:"Cancel"})}),(0,t.jsx)(d.sw,{asChild:!0,children:(0,t.jsx)(u.z,{onClick:()=>S(),disabled:F(),children:"Save"})})]})]})})})]})}},76905:function(e,a,i){i.d(a,{Uv:function(){return l},VO:function(){return n},d4:function(){return t},fR:function(){return r}});let t=[{value:"allSearches",label:"Found in all searches"},{value:"admissionSearches",label:"Found in admission searches"},{value:"twinSearches",label:"Found in twin searches"}],n=[{label:"Days & hours",value:"days_hours"},{label:"Years & Months",value:"years_months"}],l=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],s={calculation:null,condition:"",confidential:!1,dataType:null,defaultValue:null,format:null,type:null,key:null,refKey:null,label:null,minValue:null,maxValue:null,optional:!1,minDate:null,maxDate:null,minTime:null,maxTime:null,minDateKey:"",maxDateKey:"",minTimeKey:"",maxTimeKey:"",values:""},r={admission:[{...s,type:"dropdown",key:"BabyTransfered",values:"Y,Yes\nN,No",label:"Has the baby been transfered from another facility"},{...s,type:"text",key:"patientNUID",label:"Search patient's NUID",condition:"$BabyTransfered = 'Y'"},{...s,type:"dropdown",key:"BabyTwin",values:"Y,Yes\nN,No",label:"Does the baby have a twin?"},{...s,type:"text",key:"BabyTwinNUID",label:"Search twin's NUID",condition:"$BabyTwin = 'Y'"}],other:[{...s,type:"text",key:"patientNUID",values:"Y,Yes\nN,No",label:"Search patient's NUID"}]}},3064:function(e,a,i){i.d(a,{R:function(){return m},a:function(){return c}});var t=i(2265),n=i(16463),l=i(12491),s=i(38472),r=i(39099),o=i(53699);let d={initialised:!1,loading:!1,keys:[],drugs:[]},u=(0,r.Ue)(e=>d);function m(){u.setState(d)}function c(){let e=u(),{drugs:a}=e,i=(0,n.useSearchParams)(),r=(0,t.useMemo)(()=>l.Z.parse(i.toString()),[i]),{itemId:m}=r,{alert:c}=(0,o.s)(),g=(0,t.useCallback)(async()=>{try{var e,a;u.setState({loading:!0});let i=await s.Z.get("/api/drugs-library?data="+JSON.stringify({returnDraftsIfExist:!0}));if(null===(e=i.data.errors)||void 0===e?void 0:e.length)throw Error(null===(a=i.data.errors)||void 0===a?void 0:a.join(", "));u.setState({drugs:i.data.data})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[c]),v=(0,t.useCallback)(async e=>{try{var a,i;u.setState(a=>({loading:!0,drugs:a.drugs.filter(a=>!e.includes(a.itemId))}));let t=await s.Z.delete("/api/drugs-library?data="+JSON.stringify({itemsIds:e}));if(null===(a=t.data.errors)||void 0===a?void 0:a.length)throw Error(null===(i=t.data.errors)||void 0===i?void 0:i.join(", "));c({title:"",message:"Drug deleted successfully!",variant:"success"})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[c]),f=(0,t.useCallback)(async e=>{try{var i,t;u.setState({loading:!0});let n=a;u.setState(a=>(n=!m&&e?[...a.drugs,e]:a.drugs.map(a=>a.itemId!==(null==e?void 0:e.itemId)?a:{...a,...e}),{loading:!0,drugs:n}));let l={data:e?[e]:n},r=await s.Z.post("/api/drugs-library/save",l);if(null===(i=r.data.errors)||void 0===i?void 0:i.length)throw Error(null===(t=r.data.errors)||void 0===t?void 0:t.join(", "));await g(),c({title:"",message:"Drug".concat(e?"":"s"," saved successfully!"),variant:"success"})}catch(e){c({title:"Error",message:e.message,variant:"error"})}finally{u.setState({loading:!1})}},[a,m]);return(0,t.useEffect)(()=>{u.getState().initialised||(g(),u.setState({initialised:!0}))},[g]),(0,t.useCallback)(()=>{u.setState(d)},[]),{...e,selectedItemId:m,addLink:"?".concat(l.Z.stringify({...r,addDrug:1})),editLink:e=>"?".concat(l.Z.stringify({...r,itemId:e})),getDrugs:g,deleteDrugs:v,saveDrugs:f}}},78591:function(e,a,i){i.d(a,{s:function(){return t}});function t(e){let a=[],i=(e||"").split("\n").map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim()}).map(e=>{let a=e.split(",");return{value:a[0],label:a[1]}}),t=i.map(e=>e.value),n=i.map(e=>e.label),l=i.filter(e=>!e.value||!e.label),s=t.filter((e,a)=>t.indexOf(e)!==a);return(n.filter((e,a)=>n.indexOf(e)!==a).length||s.length)&&a.push("Dropdown values contain duplicate data"),l.length&&a.push("Incorrect dropdown values format"),a}}}]);