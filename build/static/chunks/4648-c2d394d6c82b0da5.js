"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4648],{20021:function(e,t,n){n.d(t,{M:function(){return g}});var a=n(57437),r=n(2265),i=n(92513),l=n(90399),o=n(5192),s=n(12491),d=n(38472),u=n(50495),c=n(76230),f=n(15701),h=n(77605),p=n(21475),m=n(20357);function g(e){let{image:t,disabled:n,onChange:g}=e,v=(0,p.Y)(),[y,{width:w}]=(0,o.Z)(),{confirm:k}=(0,c.t)(),{uploadFile:x}=(0,f.h)();(0,r.useCallback)(async e=>{let{data:t,errors:n}=(await d.Z.post("/api/files/upload",e)).data;if(null==n?void 0:n.length)throw Error(n.join(", "));if(t){let e=s.Z.stringify({...t.metadata});e=e?"?".concat(e):"",g({data:[m.env.NEXT_PUBLIC_APP_URL,"/files/".concat(t.fileId).concat(e)].join(""),fileId:t.fileId,filename:t.filename,size:t.size,contentType:t.contentType})}},[x,g]);let b="".concat((null==t?void 0:t.data)||"").split("?").filter((e,t)=>t).join(""),{width:j,height:E}=s.Z.parse(b);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{ref:y,className:"flex flex-col gap-y-2 min-w-60 max-w-60",children:[(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-28",children:(0,a.jsx)(h.E,{alt:"",width:Number(j||"0"),height:Number(E||"0"),containerWidth:w,src:(null==t?void 0:t.data)||"/images/placeholder.png"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-x-4",children:[(0,a.jsx)(u.z,{size:"icon",className:"w-8 h-8 rounded-full",disabled:n,onClick:()=>v.openModal(),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}),!!t&&(0,a.jsx)(u.z,{variant:"destructive",size:"icon",className:"w-8 h-8 rounded-full",disabled:n,onClick:()=>k(()=>g(null),{title:"Delete image",message:"Are you sure you want to delete this image?",danger:!0}),children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})]})]})})}},95229:function(e,t,n){n.d(t,{Alert:function(){return l}});var a=n(53699),r=n(16463),i=n(2265);function l(e){let t=(0,r.useRouter)(),{alert:n}=(0,a.s)();return(0,i.useEffect)(()=>{let{redirectTo:a,onClose:r,...i}=e;n({...i,variant:i.variant||"error",buttonLabel:i.buttonLabel||"Ok",onClose:()=>{null==r||r(),a&&t.replace(a)}})},[n,t,e]),null}},77605:function(e,t,n){n.d(t,{E:function(){return i}});var a=n(57437),r=n(48625);function i(e){let{width:t=0,height:n=0,containerWidth:i,...l}=e;l.sizes;let o={width:"100%",height:"auto"};if(n&&t&&i){let e=(0,r.a)({imageWidth:t,imageHeight:n,containerWidth:i});o.width=e.imageWidth,o.height=e.imageHeight}return(0,a.jsx)("img",{...l,src:l.src,style:{...o,...l.style}})}},21475:function(e,t,n){n.d(t,{Y:function(){return i}});var a=n(39099),r=n(38472);let i=(0,a.Ue)((e,t)=>{let n=async n=>{try{let a={...n};a.siteId!==t().siteId&&(a.page=1),e({loading:!0,unhandledErrors:[]});let{data:i,errors:l,...o}=(await r.Z.get("/api/files?data=".concat(JSON.stringify({...a})))).data;if(null==l?void 0:l.length)e({unhandledErrors:l});else{let n=[...t().files,...i];a.siteId&&a.siteId!==t().siteId&&(n=i),e({files:n,siteId:a.siteId||t().siteId,limit:a.limit||t().limit,page:a.page||t().page,latestResults:o})}}catch(t){e({unhandledErrors:[t.message]})}finally{e({loading:!1})}};return{isModalOpen:!1,loading:!1,page:1,limit:25,siteId:"",files:[],unhandledErrors:[],latestResults:null,getFiles:n,openModal:()=>{e({isModalOpen:!0}),t().latestResults||n()},closeModal:()=>e({isModalOpen:!1})}})},48625:function(e,t,n){async function a(e){return new Promise((t,n)=>{let a=new Image;a.onload=function(){t({width:a.width,height:a.height})},a.onerror=function(e,t,a,r,i){n(i||Error("Failed to load image"))},a.src=e})}function r(e){let{imageWidth:t,imageHeight:n,containerWidth:a}=e;return t>a&&(n=a/t*n,t=a),{imageWidth:t,imageHeight:n}}n.d(t,{a:function(){return r},p:function(){return a}})},92513:function(e,t,n){n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6649:function(e,t,n){n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.399.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(78030).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},99497:function(e,t,n){n.d(t,{ck:function(){return D},fC:function(){return _},z$:function(){return H}});var a=n(2265),r=n(78149),i=n(1584),l=n(98324),o=n(25171),s=n(53398),d=n(91715),u=n(87513),c=n(75238),f=n(47250),h=n(31383),p=n(57437),m="Radio",[g,v]=(0,l.b)(m),[y,w]=g(m),k=a.forwardRef((e,t)=>{let{__scopeRadio:n,name:l,checked:s=!1,required:d,disabled:u,value:c="on",onCheck:f,...h}=e,[m,g]=a.useState(null),v=(0,i.e)(t,e=>g(e)),w=a.useRef(!1),k=!m||!!m.closest("form");return(0,p.jsxs)(y,{scope:n,checked:s,disabled:u,children:[(0,p.jsx)(o.WV.button,{type:"button",role:"radio","aria-checked":s,"data-state":E(s),"data-disabled":u?"":void 0,disabled:u,value:c,...h,ref:v,onClick:(0,r.M)(e.onClick,e=>{s||null==f||f(),k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),k&&(0,p.jsx)(j,{control:m,bubbles:!w.current,name:l,value:c,checked:s,required:d,disabled:u,style:{transform:"translateX(-100%)"}})]})});k.displayName=m;var x="RadioIndicator",b=a.forwardRef((e,t)=>{let{__scopeRadio:n,forceMount:a,...r}=e,i=w(x,n);return(0,p.jsx)(h.z,{present:a||i.checked,children:(0,p.jsx)(o.WV.span,{"data-state":E(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})})});b.displayName=x;var j=e=>{let{control:t,checked:n,bubbles:r=!0,...i}=e,l=a.useRef(null),o=(0,f.D)(n),s=(0,c.t)(t);return a.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==n&&t){let a=new Event("click",{bubbles:r});t.call(e,n),e.dispatchEvent(a)}},[o,n,r]),(0,p.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function E(e){return e?"checked":"unchecked"}var R=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[C,N]=(0,l.b)(I,[s.Pc,v]),M=(0,s.Pc)(),P=v(),[Z,z]=C(I),L=a.forwardRef((e,t)=>{let{__scopeRadioGroup:n,name:a,defaultValue:r,value:i,required:l=!1,disabled:c=!1,orientation:f,dir:h,loop:m=!0,onValueChange:g,...v}=e,y=M(n),w=(0,u.gm)(h),[k,x]=(0,d.T)({prop:i,defaultProp:r,onChange:g});return(0,p.jsx)(Z,{scope:n,name:a,required:l,disabled:c,value:k,onValueChange:x,children:(0,p.jsx)(s.fC,{asChild:!0,...y,orientation:f,dir:w,loop:m,children:(0,p.jsx)(o.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":f,"data-disabled":c?"":void 0,dir:w,...v,ref:t})})})});L.displayName=I;var A="RadioGroupItem",O=a.forwardRef((e,t)=>{let{__scopeRadioGroup:n,disabled:l,...o}=e,d=z(A,n),u=d.disabled||l,c=M(n),f=P(n),h=a.useRef(null),m=(0,i.e)(t,h),g=d.value===o.value,v=a.useRef(!1);return a.useEffect(()=>{let e=e=>{R.includes(e.key)&&(v.current=!0)},t=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,p.jsx)(s.ck,{asChild:!0,...c,focusable:!u,active:g,children:(0,p.jsx)(k,{disabled:u,required:d.required,checked:g,...f,...o,name:d.name,ref:m,onCheck:()=>d.onValueChange(o.value),onKeyDown:(0,r.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,r.M)(o.onFocus,()=>{var e;v.current&&(null===(e=h.current)||void 0===e||e.click())})})})});O.displayName=A;var W=a.forwardRef((e,t)=>{let{__scopeRadioGroup:n,...a}=e,r=P(n);return(0,p.jsx)(b,{...r,...a,ref:t})});W.displayName="RadioGroupIndicator";var _=L,D=O,H=W}}]);