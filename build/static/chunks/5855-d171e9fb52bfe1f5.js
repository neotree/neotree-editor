"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5855],{45617:function(e,t,a){a.d(t,{D:function(){return r}});var s=a(57437),n=a(94508);function r(e){let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("pb-1 border-b border-b-primary",a),children:(0,s.jsx)("span",{className:"uppercase text-primary text-sm",children:t})})}},82425:function(e,t,a){a.d(t,{h:function(){return l}});var s=a(57437),n=a(25994),r=a(94508);function l(e){let{children:t,className:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-16"}),(0,s.jsx)("div",{className:(0,r.cn)("\n                        fixed \n                        left-0 \n                        bottom-0 \n                        h-16 \n                        w-full \n                        border-t \n                        border-t-border \n                        z-[1] \n                        bg-primary-foreground \n                        dark:bg-background \n                        shadow-md \n                        dark:shadow-foreground/10\n                    "),children:(0,s.jsx)(n.V,{children:(0,s.jsx)("div",{className:(0,r.cn)("flex justify-end gap-x-4",a),children:t})})})]})}},25994:function(e,t,a){a.d(t,{V:function(){return r}});var s=a(57437),n=a(94508);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{...a,className:(0,n.cn)("w-full max-w-screen-xl mx-auto p-5",t)})}},60657:function(e,t,a){a.d(t,{_:function(){return l}});var s=a(57437),n=a(66070),r=a(94508);function l(e){let{color:t,children:a,errors:l=[]}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.Zb,{className:(0,r.cn)("bg-destructive/20 border-destructive text-destructive","warning"===t&&"bg-yellow-200/20 border-yellow-400 text-yellow-600"),children:(0,s.jsxs)(n.aY,{className:"flex flex-col gap-y-4 px-4 py-2",children:[a,!!l.length&&(0,s.jsx)("div",{children:l.map((e,t)=>(0,s.jsx)("p",{children:e},"".concat(t)))})]})})})}},12819:function(e,t,a){a.d(t,{O:function(){return f}});var s=a(57437),n=a(2265),r=a(66337),l=a(57054),i=a(24959),o=a(94508),d=a(69711),c=a(83464),u=a(60657);let f=(0,n.forwardRef)((e,t)=>{let{isDraft:a,userId:f,dataType:x,card:m}=e,h=(0,i.v)({isDraft:a,userId:f});(0,n.useImperativeHandle)(t,()=>({isLocked:h}),[h]);let{loading:p,error:g,user:b,getUser:v}=function(e){let{userId:t,loadOnMount:a=!1}=e,s=(0,n.useRef)(!1),[r,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null),[d,u]=(0,n.useState)(""),f=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;try{if(u(""),!r&&t){l(!0);let t=(await c.Z.get("/api/users/".concat(e))).data;o(t)}}catch(e){u(e.message)}finally{l(!1)}},[r,t]);return(0,n.useEffect)(()=>{a&&!s.current&&(s.current=!0,f())},[a,f]),{loading:r,user:i,error:d,getUser:f}}({userId:f,loadOnMount:!!m}),j=(0,n.useCallback)(async e=>{e&&!p&&!b&&f&&v()},[f,b,p]);return m&&h&&!p?(0,s.jsx)(u._,{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4"}),b?(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:b.displayName})," is working on this ",x||""]}):null]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.J2,{onOpenChange:j,children:[(0,s.jsx)(l.xo,{asChild:!0,children:(0,s.jsx)("button",{disabled:!h,children:(0,s.jsx)(r.Z,{className:(0,o.cn)("w-4 h-4 text-destructive/80",!h&&"opacity-0")})})}),(0,s.jsx)(l.yk,{className:"p-0 text-sm max-w-[200px]",children:p?(0,s.jsx)("div",{className:"p-2 flex justify-center",children:(0,s.jsx)(d.a,{padding:0})}):g||!b?(0,s.jsx)("div",{className:"p-2 text-destructive bg-destructive/20",children:g||"Failed to load user!"}):(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("strong",{children:b.displayName})," is working on this ",x||""]})})]})})});f.displayName="LockStatus"},9699:function(e,t,a){a.d(t,{u:function(){return o}});var s=a(57437),n=a(2265),r=a(26110),l=a(94508);let i=(0,a(59625).Ue)((e,t)=>({modals:{},open(t){e(e=>({modals:{...e.modals,[t]:!0}}))},toggle(a){let s=t().modals;e(e=>({modals:{...e.modals,[a]:!s[a]}}))},close(t){e(e=>({modals:{...e.modals,[t]:!1}}))},isOpen:e=>!!t().modals[e],set(t){e(e=>({modals:{...e.modals,...t}}))}}));function o(e){let{id:t,children:a,title:o,description:d,actions:c,trigger:u,contentProps:f,footerProps:x,...m}=e,{close:h,isOpen:p,set:g}=i();return(0,n.useEffect)(()=>{t&&g({[t]:!1})},[t]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.Vq,{...m,open:(t?p(t):void 0)||m.open,onOpenChange:e=>{var a;t&&g({[t]:e}),null==m||null===(a=m.onOpenChange)||void 0===a||a.call(m,e)},children:[u,(0,s.jsxs)(r.cZ,{hideCloseButton:!0,className:(0,l.cn)("flex flex-col max-h-[90%] gap-y-4 p-0 m-0 sm:max-w-xl",null==f?void 0:f.className),...f,children:[(0,s.jsxs)(r.fK,{className:(0,l.cn)(o||d?"":"hidden","border-b border-b-border px-4 py-4"),children:[(0,s.jsx)(r.$N,{className:(0,l.cn)(o?"":"hidden"),children:o}),(0,s.jsx)(r.Be,{className:(0,l.cn)(d?"":"hidden"),children:d})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto px-4 py-2",children:a}),(0,s.jsx)(r.cN,{className:(0,l.cn)("border-t border-t-border px-4 py-2 items-center w-full",c?"":"hidden",null==x?void 0:x.className),...x,children:c})]})]})})}},78968:function(e,t,a){a.d(t,{w:function(){return x}});var s=a(57437),n=a(2265),r=a(29501),l=a(32405),i=a(69304),o=a(53647),d=a(26815),c=a(19060),u=a(62869),f=a(94508);function x(e){let{id:t,label:a,hide:x,title:m,description:h,data:p,disabled:g,onSave:b}=e,v=(0,n.useMemo)(()=>{let e=!1;return Object.values(p).forEach(a=>{a[t]&&(e=!0)}),e},[p,t]),{reset:j,watch:y,setValue:N,handleSubmit:w}=(0,r.cI)({defaultValues:{...l.$7,...p}}),C=y("fontSize"),k=y("fontWeight"),S=y("fontStyle"),F=y("textColor"),z=w(b),[E,D]=(0,n.useState)(!1);return x?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.yo,{onOpenChange:e=>{j({...l.$7,...p}),D(e)},children:[(0,s.jsx)(i.aM,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"link",className:(0,f.cn)("p-0 text-xs",!v&&"text-muted-foreground/80 hover:text-muted-foreground"),children:a||"".concat(v?"Update":"Set"," preferences")})}),(0,s.jsxs)(i.ue,{hideCloseButton:!0,className:"px-0 py-0 flex flex-col gap-y-4 h-full",children:[(0,s.jsxs)(i.Tu,{className:"px-4 py-4 border-b border-b-border",children:[(0,s.jsx)(i.bC,{children:m}),(0,s.jsx)(i.Ei,{className:h?"":"hidden",children:h})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-y-6",children:E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)(d._,{secondary:!0,htmlFor:"fontSize.".concat(t),children:"Font size"}),(0,s.jsx)("div",{children:(0,s.jsxs)(o.Ph,{value:C[t]||"default",required:!0,name:"fontSize.".concat(t),disabled:g,onValueChange:e=>{let a=e||void 0;"default"===a&&(a=void 0),N("fontSize.".concat(t),a,{shouldDirty:!0})},children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Default"})}),(0,s.jsx)(o.Bw,{children:(0,s.jsx)(o.DI,{children:[{label:"Default",value:"default"},{label:"Extra small",value:"xs"},{label:"Small",value:"sm"},{label:"Large",value:"lg"},{label:"Extra large",value:"xl"}].map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})})]})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[!!F[t]&&(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)(d._,{secondary:!0,htmlFor:"textColor.".concat(t),children:"Text color"}),(0,s.jsx)("input",{type:"color",value:F[t],onChange:e=>N("textColor.".concat(t),e.target.value,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{id:"defaultTextColor.".concat(t),name:"defaultTextColor.".concat(t),disabled:g,checked:!F[t],onCheckedChange:()=>{let e=F[t]?void 0:"#000000";N("textColor.".concat(t),e,{shouldDirty:!0})}}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"defaultTextColor.".concat(t),children:"Default text color"})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{name:"bold",id:"bold",disabled:g,checked:"bold"===k[t],onCheckedChange:()=>N("fontWeight.".concat(t),k[t]?void 0:"bold",{shouldDirty:!0})}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"bold",children:"Bold"})]}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.X,{name:"italic",id:"italic",disabled:g,checked:(S[t]||[]).includes("italic"),onCheckedChange:()=>{let e=S[t]||[];e.includes("italic")?e=e.filter(e=>"italic"!==e):e.push("italic"),e.length||(e=void 0),N("fontStyle.".concat(t),e,{shouldDirty:!0})}}),(0,s.jsx)(d._,{secondary:!0,htmlFor:"italic",children:"Italic"})]})]})]})}),(0,s.jsxs)(i.FF,{className:"px-4 py-4 border-t border-t-border",children:[(0,s.jsx)("div",{className:"ml-auto"}),(0,s.jsx)(i.sw,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"outline",children:"Cancel"})}),(0,s.jsx)(i.sw,{asChild:!0,children:(0,s.jsx)(u.z,{disabled:g,onClick:()=>z(),children:"Save"})})]})]})]})})}},57054:function(e,t,a){a.d(t,{J2:function(){return i},xo:function(){return o},yk:function(){return d}});var s=a(57437),n=a(2265),r=a(51777),l=a(94508);let i=r.fC,o=r.xz,d=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:i=4,...o}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsx)(r.VY,{ref:t,align:n,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});d.displayName=r.VY.displayName},74991:function(e,t,a){a.d(t,{E:function(){return o},m:function(){return d}});var s=a(57437),n=a(2265),r=a(42325),l=a(40519),i=a(94508);let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.fC,{className:(0,i.cn)("grid gap-2",a),...n,ref:t})});o.displayName=r.fC.displayName;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.ck,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:(0,s.jsx)(r.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=r.ck.displayName},69304:function(e,t,a){a.d(t,{Ei:function(){return v},FF:function(){return g},Tu:function(){return p},aM:function(){return c},bC:function(){return b},sw:function(){return u},ue:function(){return h},yo:function(){return d}});var s=a(57437),n=a(2265),r=a(70001),l=a(90535),i=a(32489),o=a(94508);let d=r.fC,c=r.xz,u=r.x8,f=r.h_,x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});x.displayName=r.aV.displayName;let m=(0,l.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=n.forwardRef((e,t)=>{let{side:a="right",className:n,children:l,hideCloseButton:d,...c}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)(m({side:a}),n),...c,children:[l,!0!==d&&(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=r.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};p.displayName="SheetHeader";let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="SheetFooter";let b=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...n})});b.displayName=r.Dx.displayName;let v=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});v.displayName=r.dk.displayName},76818:function(e,t,a){a.d(t,{g:function(){return l}});var s=a(57437),n=a(2265),r=a(94508);let l=n.forwardRef((e,t)=>{let{className:a,noRing:n,...l}=e;return(0,s.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n&&"focus-visible:ring-0 focus-visible:ring-transparent focus-visible:ring-offset-0",a),ref:t,...l})});l.displayName="Textarea"},79976:function(e,t,a){a.d(t,{ScriptsContextProvider:function(){return u},h:function(){return c}});var s=a(57437),n=a(2265),r=a(99376),l=a(78062),i=a(83464),o=a(72648);let d=(0,n.createContext)(null),c=()=>(0,n.useContext)(d);function u(e){let{children:t,...a}=e,c=function(e){let{}=e,t=(0,r.useRouter)(),{scriptId:a}=(0,r.useParams)(),{parsed:s}=(0,o.l)(),[d,c]=(0,n.useState)(!1),[u,f]=(0,n.useState)({data:[]}),[x,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),g=(0,n.useCallback)(()=>{t.push("/")},[t]),b=(0,n.useCallback)(()=>{t.push("/script/".concat(a,"?").concat(l.Z.stringify({...s,section:"screens"})))},[t,s,a]),v=(0,n.useCallback)(()=>{t.push("/script/".concat(a,"?").concat(l.Z.stringify({...s,section:"diagnoses"})))},[t,s,a]),j=(0,n.useCallback)(async()=>{try{var e,t;c(!0);let s=await i.Z.get("/api/screens/list?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null===(t=s.data)||void 0===t?void 0:null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(s.data.errors.join(", "));f(s.data)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{c(!1)}},[a,open,alert]);return{screens:u,screensLoading:d,keys:h,keysLoading:x,loadKeys:(0,n.useCallback)(async()=>{try{var e;m(!0);let{data:t}=await i.Z.get("/api/scripts/keys?data="+JSON.stringify({returnDraftsIfExist:!0,scriptsIds:[a]}));if(null==t?void 0:null===(e=t.errors)||void 0===e?void 0:e.length)throw Error(t.errors.join(", "));let s=t.data.reduce((e,t)=>[...e,...t.dataKeys],[]);p(s)}catch(e){alert({title:"",message:"Error: "+e.message,variant:"error"})}finally{m(!1)}},[a,open,alert]),loadScreens:j,onCancelDiagnosisForm:v,onCancelScreenForm:b,onCancelScriptForm:g}}(a);return(0,s.jsx)(d.Provider,{value:{...a,...c},children:t})}},72648:function(e,t,a){a.d(t,{l:function(){return l}});var s=a(99376),n=a(78062),r=a(2265);function l(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),a=(0,r.useMemo)(()=>t.toString(),[t]),l=(0,r.useMemo)(()=>n.Z.parse(t.toString()),[t]),i=(0,r.useCallback)(e=>n.Z.stringify({...l,...e}),[l]),o=(0,r.useCallback)(t=>{e.push("?".concat(i(t)))},[i,e]);return{parsed:l,stringified:a,replace:(0,r.useCallback)(t=>{e.replace("?".concat(i(t)))},[i,e]),push:o,toSearchParams:i}}},94790:function(e,t,a){a.d(t,{x:function(){return s}});function s(e){return null==e||""===e}}}]);