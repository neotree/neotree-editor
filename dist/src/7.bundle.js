(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{124:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(10),i=n.n(a),r=n(16),o=n.n(r),s=n(19),c=n.n(s),l=n(20),u=n.n(l),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(25),g=n.n(h),v=n(23),y=n.n(v),E=n(24),S=n.n(E),b=n(0),C=n.n(b),_=n(2),k=n.n(_),w=n(34),D=n.n(w),T=n(120),I=n(121),N=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i))),S()(g()(n),"handleLeftNavClick",function(){n.props.onLeftNavItemClicked&&n.props.onLeftNavItemClicked()}),n}return y()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.hideSpacer,r=e.leftNavIcon,s=(e.onLeftNavItemClicked,e.title),c=(e.transparent,o()(e,["children","className","hideSpacer","leftNavIcon","onLeftNavItemClicked","title","transparent"])),l=D()(n,"mdl-toolbar__header","mdl-layout__header","mdl-layout__header--transparent"),u=D()("mdl-toolbar__header-row",{"mdl-toolbar__header-row-with-left-icon":r}),d=D()("mdl-toolbar__left-nav"),p=D()("mdl-toolbar__right-nav");return C.a.createElement("header",i()({className:l},c),r?C.a.createElement("div",{className:D()(d,"ui__cursor_pointer"),style:{fontSize:"24px"},onClick:this.handleLeftNavClick},C.a.createElement(I.b,null)):C.a.createElement("div",{style:{width:"24px"}}),C.a.createElement(T.HeaderRow,{className:u,title:s||"",hideSpacer:a},t?C.a.createElement(T.Navigation,{className:p},t):null))}}]),t}(b.Component);N.propTypes={className:k.a.string,title:k.a.node,leftNavIcon:k.a.string,onLeftNavItemClicked:k.a.func,hideSpacer:k.a.bool}},128:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var a=n(10),i=n.n(a),r=n(16),o=n.n(r),s=n(19),c=n.n(s),l=n(20),u=n.n(l),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(23),g=n.n(h),v=n(0),y=n.n(v),E=function(e){function t(){return c()(this,t),p()(this,f()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=o()(e,["children"]);return y.a.createElement("div",i()({style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"16px",marginBottom:"8px"}},n),t)}}]),t}(v.Component)},129:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return c});var a={COMPUTE:"compute",DATE_NOW:"date_now",DATE_NOON:"date_noon",DATE_MIDNIGHT:"date_midnight",EMPTY:"",UID:"uid"},i={BOOLEAN:"boolean",DATETIME:"datetime",DATE:"date",ID:"id",NUMBER:"number",PERIOD:"period",SET_ID:"set<id>",STRING:"string",TIME:"time",VOID:"void"},r={DATE:"date",DATETIME:"datetime",DROPDOWN:"dropdown",NUMBER:"number",PERIOD:"period",TEXT:"text",TIME:"time"},o={CHECKLIST:"checklist",FORM:"form",LIST:"list",MANAGEMENT:"management",MULTI_SELECT:"multi_select",PROGRESS:"progress",SINGLE_SELECT:"single_select",TIMER:"timer",YESNO:"yesno"},s={SIGN:"sign",RISK:"risk"},c=o.CHECKLIST},138:function(e,t,n){"use strict";var a=n(10),i=n.n(a),r=n(16),o=n.n(r),s=n(19),c=n.n(s),l=n(20),u=n.n(l),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(25),g=n.n(h),v=n(23),y=n.n(v),E=n(24),S=n.n(E),b=n(0),C=n.n(b),_=n(2),k=n.n(_),w=n(34),D=n.n(w),T=n(121),I=n(41),N=(n(144),function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i))),S()(g()(n),"onCopy",function(){n.input.select(),document.execCommand("copy"),n.input.blur()}),n}return y()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.data,r=t.host,s=t.children,c=o()(t,["className","data","host","children"]);return C.a.createElement("div",i()({},c,{className:D()(n,"ui__copyToClipBoard"),style:Object.assign({},c.style,{position:"relative"})}),C.a.createElement("input",{ref:function(t){return e.input=t},value:JSON.stringify({neotree:{data:a,host:r}}),onChange:function(){return{}},style:{position:"absolute",zIndex:-1}}),C.a.createElement("div",{onClick:this.onCopy,className:"ui__copyToClipBoardBtn"},s||C.a.createElement(T.e,null)))}}]),t}(C.a.Component));N.propTypes={children:k.a.node,className:k.a.string,data:k.a.string.isRequired,style:k.a.object,host:k.a.string.isRequired},t.a=Object(I.a)(N,function(e){return{host:e.$APP.host}})},141:function(e,t,n){"use strict";var a=n(10),i=n.n(a),r=n(19),o=n.n(r),s=n(20),c=n.n(s),l=n(21),u=n.n(l),d=n(22),p=n.n(d),m=n(25),f=n.n(m),h=n(23),g=n.n(h),v=n(24),y=n.n(v),E=n(0),S=n.n(E),b=n(2),C=n.n(b),_=n(3),k=n.n(_),w=n(16),D=n.n(w),T=n(34),I=n.n(T),N=n(12),x=n(120),R=n(52),A=n(41),M=function(e){return new Promise(function(t,n){if(e){var a="Ooops! Seems like you pasted invalid content.";try{var i=JSON.parse(e);i.neotree&&i.neotree.data&&i.neotree.host?t(i.neotree):n(a)}catch(e){n(a)}}else n("No data copied to clipboard")})},j=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),y()(f()(n),"state",{content:""}),y()(f()(n),"onClose",function(){n.setState({error:null}),n.props.onClose()}),y()(f()(n),"validateAndSave",function(e){if(n.setState({error:null}),e){var t=n.props,a=t.actions,i=t.host,r=t.destination,o=t.history,s=t.redirectTo,c=t.onSuccess,l=t.accept;M(e).then(function(e){var t=e.data,u=D()(e,["data"]),d=(t=JSON.parse(t)).dataType===l;if(!d)return alert("You can only paste a '".concat(l,"' here, you pasted a '").concat(t.dataType,"' instead."));n.setState({saving:!0},d?function(){a.post("copy-data",{destination:k()({host:i},r),source:k()({},u,{},t),onResponse:function(){return n.setState({saving:!1})},onFailure:function(e){return n.setState({error:e})},onSuccess:function(e){var t=e.payload;o.push(s(t)),c&&c(t)}})}:void 0)}).catch(function(e){return n.setState({error:{msg:e.msg||e.message||JSON.stringify(e)}})})}}),n}return g()(t,e),c()(t,[{key:"componentWillUpdate",value:function(e){e.clipboardData!==this.props.clipboardData&&this.validateAndSave(e.clipboardData)}},{key:"render",value:function(){var e=this,t=this.props.open,n=this.state,a=n.saving,i=n.content,r=n.error;return S.a.createElement(x.Dialog,{open:t||!1,style:{width:"260px"}},a?S.a.createElement(x.DialogContent,null,S.a.createElement("div",{className:I()("ui__flex ui__alignItems_center ui__justifyContent_center")},S.a.createElement(R.a,null))):S.a.createElement(S.a.Fragment,null,S.a.createElement(x.DialogContent,{className:I()("ui__flex ui__alignItems_center ui__justifyContent_center uiBg__faintGreyColor"),style:{border:"1px dotted #ccc",position:"relative"}},S.a.createElement("span",null,"Paste here"),S.a.createElement("textarea",{autoFocus:!0,ref:function(t){return e.input=t},onChange:function(t){return e.validateAndSave(t.target.value)},value:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,opacity:0}})),S.a.createElement(x.DialogActions,null,r?S.a.createElement("span",{className:"ui__dangerColor ui__smallFontSize",style:{marginRight:"auto"}},r.msg||r.message||JSON.stringify(r)):null,S.a.createElement(x.Button,{type:"button",onClick:this.onClose},"Cancel"))))}}]),t}(S.a.Component);j.propTypes={open:C.a.bool,onClose:C.a.func.isRequired,options:C.a.object,actions:C.a.object.isRequired,destination:C.a.object.isRequired,host:C.a.string.isRequired,redirectTo:C.a.func.isRequired,onSuccess:C.a.func,accept:C.a.string.isRequired};var O=Object(N.f)(Object(A.a)(j,function(e){return{host:e.$APP.host}})),B=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),y()(f()(n),"state",{}),y()(f()(n),"onPaste",function(e){var t=e.clipboardData.getData("text/plain");M(t).then(function(){return n.setState({togglePasteBoard:!0,clipboardData:t})})}),n}return g()(t,e),c()(t,[{key:"componentDidMount",value:function(){window.addEventListener("paste",this.onPaste,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("paste",this.onPaste,!0)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.modal,a=e.data,r=e.redirectTo,o=e.onSuccess,s=e.accept;return S.a.createElement("div",null,t,S.a.createElement(O,i()({},n,{accept:s,onSuccess:o,clipboardData:this.state.clipboardData,destination:a,redirectTo:r})))}}]),t}(E.Component);B.propTypes={children:C.a.node,modal:C.a.shape({onClose:C.a.func.isRequired,open:C.a.bool}).isRequired,data:C.a.shape({dataId:C.a.string,dataType:C.a.string}).isRequired,redirectTo:C.a.func.isRequired,onSuccess:C.a.func,accept:C.a.string.isRequired};t.a=B},144:function(e,t,n){var a=n(145);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,i);a.locals&&(e.exports=a.locals)},145:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".ui__copyToClipBoard {\n  display: inline-block; }\n  .ui__copyToClipBoard input {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  .ui__copyToClipBoard .ui__copyToClipBoardBtn {\n    display: inline;\n    position: relative; }\n",""])},161:function(e,t,n){"use strict";var a=n(10),i=n.n(a),r=n(16),o=n.n(r),s=n(19),c=n.n(s),l=n(20),u=n.n(l),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(23),g=n.n(h),v=n(24),y=n.n(v),E=n(0),S=n.n(E),b=n(2),C=n.n(b),_=n(34),k=n.n(_),w=function(e){function t(){return c()(this,t),p()(this,f()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=(e.name,e.numeric),a=e.children,r=(e.cellFormatter,o()(e,["className","name","numeric","children","cellFormatter"])),s=k()({"mdl-data-table__cell--non-numeric":!n},t);return S.a.createElement("th",i()({className:s},r),a)}}]),t}(E.Component);y()(w,"propTypes",{cellFormatter:C.a.func,className:C.a.string,name:C.a.string.isRequired,numeric:C.a.bool});var D=n(25),T=n.n(D),I=n(136),N=n.n(I),x=n(121),R=n(207),A=n(208),M=n.n(A),j=[2,3,4,6,8,16,24].map(function(e){return"mdl-shadow--".concat(e,"dp")}),O=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i))),y()(T()(n),"renderCell",function(e,t,n){var a=e.numeric?"":"mdl-data-table__cell--non-numeric";return S.a.createElement("td",{key:e.name,className:a},e.cellFormatter?e.cellFormatter(t[e.name],t,n):t[e.name])}),y()(T()(n),"sortAdapterFn",function(e){var t=e.oldIndex,a=e.newIndex,i=n.props.onSort;i&&i(t,a)}),n}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.shadow,r=t.children,s=(t.onSort,t.rowKeyColumn,t.rows),c=o()(t,["className","shadow","children","onSort","rowKeyColumn","rows"]),l=void 0!==a,u=N()(a||0,0,j.length-1),d=k()("mdl-data-table",y()({},j[u],l),n),p=r?S.a.Children.toArray(r):null,m=Object(R.SortableHandle)(function(){return S.a.createElement(x.i,{style:{fontSize:"24px"},className:"ui__cursor_pointer"})}),f=Object(R.SortableElement)(function(t){var n=t.row,a=t.index;return S.a.createElement("tr",{className:n.className},S.a.createElement("td",null,S.a.createElement(m,null)),p.map(function(t){return e.renderCell(t.props,n,a)}))}),h=Object(R.SortableContainer)(function(e){var t=e.rows;return S.a.createElement("tbody",null,t.map(function(e,t){return S.a.createElement(f,{key:M.a.generate(),index:t,row:e})}))});return S.a.createElement("table",i()({className:d},c),S.a.createElement("thead",null,S.a.createElement("tr",null,S.a.createElement("th",null," "),p)),S.a.createElement(h,{rows:s,onSortEnd:this.sortAdapterFn,useDragHandle:!0}))}}]),t}(E.Component);y()(O,"propTypes",{className:C.a.string,onSort:C.a.func,rowKeyColumn:C.a.string,rows:C.a.arrayOf(C.a.object).isRequired,shadow:C.a.number}),n.d(t,"b",function(){return w}),n.d(t,"a",function(){return O})},213:function(e,t){},230:function(e,t){},232:function(e,t){},400:function(e,t,n){"use strict";n.r(t);var a=n(19),i=n.n(a),r=n(20),o=n.n(r),s=n(21),c=n.n(s),l=n(22),u=n.n(l),d=n(25),p=n.n(d),m=n(23),f=n.n(m),h=n(24),g=n.n(h),v=n(0),y=n.n(v),E=n(2),S=n.n(E),b=n(26),C=n(12),_=n(41),k=n(52),w=n(3),D=n.n(w),T=n(120),I=n(128),N=n(124),x=n(42),R=n.n(x),A=n(121),M=n(129),j=n(138),O=n(141),B=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},q=n(161),P=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),g()(p()(n),"state",{openSelectScreenTypeDialog:!1,screens:[],addScreenType:M.a}),g()(p()(n),"togglePasteBoard",function(){return n.setState({openPasteBoard:!n.state.openPasteBoard})}),g()(p()(n),"handleAddScreenClick",function(){var e=n.props,t=e.actions,a=e.scriptId,i=e.history,r=n.state.addScreenType;n.setState({addingScreen:!1}),t.post("create-screen",{script_id:a,type:r,onResponse:function(){return n.setState({addingScreen:!1})},onFailure:function(e){return n.setState({addScreenError:e})},onSuccess:function(e){var r=e.payload;t.updateApiData({screen:r.screen}),i.push("/dashboard/scripts/".concat(a,"/screens/").concat(r.screen.id)),n.closeSelectScreenTypeDialog()}})}),g()(p()(n),"handleDeleteScreenClick",function(e){return function(){var t=n.props,a=t.actions,i=t.scriptId;n.setState({deletingScreen:!1}),a.post("delete-screen",{id:e,scriptId:i,onResponse:function(){return n.setState({deletingScreen:!1})},onFailure:function(e){return n.setState({deleteScreenError:e})},onSuccess:function(){a.updateApiData(function(t){return{screens:t.screens.filter(function(t){return t.id!==e}).map(function(e,t){return D()({},e,{position:t+1})})}})}})}}),g()(p()(n),"handleEditScreenClick",function(e){return function(){return n.props.onEditScreenClick(e)}}),g()(p()(n),"handleInputChange",function(e,t){return n.setState(g()({},e,t.target.value))}),g()(p()(n),"openSelectScreenTypeDialog",function(){return n.setState({openSelectScreenTypeDialog:!0})}),g()(p()(n),"closeSelectScreenTypeDialog",function(){return n.setState({openSelectScreenTypeDialog:!1,addScreenTitle:null,addScreenType:M.a})}),g()(p()(n),"swapScreenItems",function(e,t){var a=n.props,i=a.actions,r=a.screens,o=Object.assign([],r),s=o[e];o.splice(e,1),o.splice(t,0,s),o=o.map(function(e,t){return D()({},e,{position:t+1})}),i.updateApiData({screens:o}),n.setState({sortingScreens:!1}),i.post("update-screens",{returnUpdated:!1,screens:o.map(function(e){return{id:e.id,position:e.position}}),onResponse:function(){return n.setState({sortingScreens:!1})},onFailure:function(e){return n.setState({deleteScriptError:e})}})}),g()(p()(n),"handleDuplicateScreen",function(e){var t=n.props.actions;n.setState({duplicatingScreen:!0}),t.post("duplicate-screen",{id:e,onResponse:function(){return n.setState({duplicatingScreen:!1})},onFailure:function(e){return n.setState({duplicateScreenError:e})},onSuccess:function(n){var a=n.payload;t.updateApiData(function(t){var n=R()(t.screens),i=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(i+1,0,a.screen),{screens:n.map(function(e,t){return D()({},e,{position:t+1})})}})}})}),n}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.screens,a=t.scriptId,i=this.state.addScreenType,r={screens:{overflow:"unset",width:"100%",minWidth:"700px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"}},o=y.a.createElement(T.Dialog,{open:this.state.openSelectScreenTypeDialog,style:{width:"260px"}},y.a.createElement(T.DialogContent,null,y.a.createElement("p",null,"Select screen type:"),y.a.createElement(T.RadioGroup,{container:"div",childContainer:"div",name:"addScreenType",value:i||M.a,onChange:this.handleInputChange.bind(this,"addScreenType")},y.a.createElement(T.Radio,{value:M.e.CHECKLIST,ripple:!0},"Checklist"),y.a.createElement(T.Radio,{value:M.e.FORM,ripple:!0},"Form"),y.a.createElement(T.Radio,{value:M.e.MANAGEMENT,ripple:!0},"Management"),y.a.createElement(T.Radio,{value:M.e.MULTI_SELECT,ripple:!0},"Multiple choice list"),y.a.createElement(T.Radio,{value:M.e.LIST,ripple:!0},"Simple list"),y.a.createElement(T.Radio,{value:M.e.SINGLE_SELECT,ripple:!0},"Single choice list"),y.a.createElement(T.Radio,{value:M.e.PROGRESS,ripple:!0},"Progress"),y.a.createElement(T.Radio,{value:M.e.TIMER,ripple:!0},"Timer"),y.a.createElement(T.Radio,{value:M.e.YESNO,ripple:!0},"Yes/No"))),y.a.createElement(T.DialogActions,null,y.a.createElement(T.Button,{type:"button",onClick:this.handleAddScreenClick,accent:!0},"Create"),y.a.createElement(T.Button,{type:"button",onClick:this.closeSelectScreenTypeDialog},"Cancel")));return y.a.createElement(O.a,{modal:{onClose:this.togglePasteBoard,open:this.state.openPasteBoard},accept:"screen",data:{dataId:a,dataType:"script"},redirectTo:function(e){return"/dashboard/scripts/".concat(a,"/screens/").concat(e.screen.id)}},y.a.createElement(T.Card,{shadow:0,style:r.screens},y.a.createElement(N.a,{title:"Screens"},y.a.createElement("div",null,y.a.createElement("div",{id:"add_new",className:"ui__cursor_pointer"},y.a.createElement(A.j,{style:{fontSize:"24px"}})),y.a.createElement(T.Menu,{target:"add_new",align:"right"},y.a.createElement(T.MenuItem,{onClick:this.openSelectScreenTypeDialog},"Add new"),B()?y.a.createElement(T.MenuItem,{onClick:this.togglePasteBoard},"Paste"):null))),n&&n.length>0?y.a.createElement(q.a,{style:r.table,rows:n.map(function(e){return D()({},e.data,{id:e.id,position:e.position})}),rowKeyColumn:"position",onSort:this.swapScreenItems},y.a.createElement(q.b,{name:"position"},"Pos"),y.a.createElement(q.b,{name:"epicId"},"Epic"),y.a.createElement(q.b,{name:"storyId"},"Story"),y.a.createElement(q.b,{name:"refId"},"Ref."),y.a.createElement(q.b,{name:"title",style:{width:"100%"},cellFormatter:function(e,t){var n=t.title;return n?n.length<=30?n:"".concat(n.substring(0,29),"..."):""}},"Title"),y.a.createElement(q.b,{name:"id",style:{width:"48px"},cellFormatter:function(t){return y.a.createElement("div",{className:"ui__flex ui__alignItems_center",style:{color:"#999999"}},y.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditScreenClick(t)},y.a.createElement(A.f,{style:{fontSize:"24px"}}))," ",y.a.createElement("div",{style:{position:"relative"}},y.a.createElement("div",{id:"menu_".concat(t),className:"ui__cursor_pointer"},y.a.createElement(A.j,{style:{fontSize:"24px"}})),y.a.createElement(T.Menu,{target:"menu_".concat(t),align:"right"},y.a.createElement(T.MenuItem,{onClick:function(){return e.handleDuplicateScreen(t)}},"Duplicate"),y.a.createElement(T.MenuItem,null,y.a.createElement(j.a,{data:JSON.stringify({dataId:t,dataType:"screen"})},y.a.createElement("span",null,"Copy"))),y.a.createElement(T.MenuItem,{onClick:e.handleDeleteScreenClick(t)},"Delete"))))}})):y.a.createElement(T.CardText,null,y.a.createElement("div",{style:r.emptyMessageContainer},y.a.createElement("div",null,"The list of screens is empty")))),o)}}]),t}(v.Component);P.propTypes={screens:S.a.array.isRequired,actions:S.a.object.isRequired,scriptId:S.a.string.isRequired,onEditScreenClick:S.a.func.isRequired};var L=P,F=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),g()(p()(n),"state",{}),n}return f()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.actions,a=t.scriptId;this.setState({loadingScreens:!0}),n.get("get-screens",{script_id:a,onResponse:function(){return e.setState({loadingScreens:!1})},onFailure:function(t){return e.setState({loadScreensError:t})},onSuccess:function(t){var a=t.payload;e.setState({screens:a.screens}),n.updateApiData({screens:a.screens})}})}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({screens:[]})}},{key:"render",value:function(){return this.state.loadingScreens?y.a.createElement(k.a,{className:"ui__flex ui__justifyContent_center"}):y.a.createElement(L,this.props)}}]),t}(y.a.Component);F.propTypes={actions:S.a.object};var z=Object(b.hot)(Object(C.f)(Object(_.a)(F,function(e){return{screens:e.apiData.screens||[]}}))),U=function(e){function t(e){var n;return i()(this,t),n=c()(this,u()(t).call(this,e)),g()(p()(n),"togglePasteBoard",function(){return n.setState({openPasteBoard:!n.state.openPasteBoard})}),g()(p()(n),"handleAddDiagnosisClick",function(){var e=n.props,t=e.history,a=e.scriptId;t.push("/dashboard/scripts/".concat(a,"/diagnosis/new"))}),g()(p()(n),"handleDeleteDiagnosisClick",function(e){return function(){var t=n.props,a=t.actions,i=t.scriptId;n.setState({deletingDiagnosis:!0}),a.post("delete-diagnosis",{id:e,scriptId:i,onResponse:function(){return n.setState({deletingDiagnosis:!1})},onFailure:function(e){return n.setState({deleteDiagnosisError:e})},onSuccess:function(){a.updateApiData(function(t){return{diagnoses:t.diagnoses.filter(function(t){return t.id!==e})}}),n.closeDeleteConfirmDialog()}})}}),g()(p()(n),"handleEditDiagnosisClick",function(e){return function(){return n.props.onEditDiagnosisClick(e)}}),g()(p()(n),"handleInputChange",function(e,t){return n.setState(D()({},n.state,g()({},e,t.target.value)))}),g()(p()(n),"handleDuplicateDiagnosis",function(e){var t=n.props.actions;n.setState({duplicatingDiagnosis:!0}),t.post("duplicate-diagnosis",{id:e,onResponse:function(){return n.setState({duplicatingDiagnosis:!1})},onFailure:function(e){return n.setState({duplicateDiagnosisError:e})},onSuccess:function(n){var a=n.payload;t.updateApiData(function(t){var n=R()(t.diagnoses),i=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(i+1,0,a.diagnosis),{diagnoses:n}})}})}),n.state={openDeleteConfirmDialog:!1,scriptIdForAction:null},n}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.diagnoses,a=t.scriptId,i={diagnosis:{overflow:"unset",width:"100%",minWidth:"700px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"}};return y.a.createElement(O.a,{modal:{onClose:this.togglePasteBoard,open:this.state.openPasteBoard},accept:"diagnosis",data:{dataId:a,dataType:"diagnosis"},redirectTo:function(e){return"/dashboard/scripts/".concat(a,"/diagnosis/").concat(e.diagnosis.id)}},y.a.createElement(T.Card,{shadow:0,style:i.diagnosis},y.a.createElement(N.a,{title:"Diagnosis"},y.a.createElement("div",{style:{position:"relative"}},y.a.createElement("div",{id:"add_new",className:"ui__cursor_pointer"},y.a.createElement(A.j,{style:{fontSize:"24px"}})),y.a.createElement("div",null,y.a.createElement(T.Menu,{target:"add_new",align:"right"},y.a.createElement(T.MenuItem,{onClick:this.handleAddDiagnosisClick},"Add new"),B()?y.a.createElement(T.MenuItem,{onClick:this.togglePasteBoard},"Paste"):null)))),n.length>0?y.a.createElement(T.DataTable,{style:{width:"780px"},shadow:0,rows:n.map(function(e){return D()({id:e.id},e.data)})},y.a.createElement(T.TableHeader,{name:"name"},"Name"),y.a.createElement(T.TableHeader,{name:"description"},"Description"),y.a.createElement(T.TableHeader,{name:"id",style:{width:"48px"},cellFormatter:function(t){return y.a.createElement("div",{className:"ui__flex ui__alignItems_center",style:{color:"#999999"}},y.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditDiagnosisClick(t)},y.a.createElement(A.f,{style:{fontSize:"24px"}}))," ",y.a.createElement("div",{style:{position:"relative"}},y.a.createElement("div",{id:"menu_".concat(t),className:"ui__cursor_pointer"},y.a.createElement(A.j,{style:{fontSize:"24px"}})),y.a.createElement(T.Menu,{target:"menu_".concat(t),align:"right"},y.a.createElement(T.MenuItem,{onClick:function(){return e.handleDuplicateDiagnosis(t)}},"Duplicate"),y.a.createElement(T.MenuItem,null,y.a.createElement(j.a,{data:JSON.stringify({dataId:t,dataType:"diagnosis"})},y.a.createElement("span",null,"Copy"))),y.a.createElement(T.MenuItem,{onClick:e.handleDeleteDiagnosisClick(t)},"Delete"))))}})):y.a.createElement(T.CardText,null,y.a.createElement("div",{style:i.emptyMessageContainer},y.a.createElement("div",null,"The list of screens is empty")))))}}]),t}(v.Component);U.propTypes={scriptId:S.a.string.isRequired,onEditDiagnosisClick:S.a.func.isRequired};var W=U,G=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),g()(p()(n),"state",{}),n}return f()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.actions,a=t.scriptId;this.setState({loadingDiagnoses:!0}),n.get("get-diagnoses",{script_id:a,onResponse:function(){return e.setState({loadingDiagnoses:!1})},onFailure:function(t){return e.setState({loadDiagnosesError:t})},onSuccess:function(t){var a=t.payload;e.setState({diagnoses:a.diagnoses}),n.updateApiData({diagnoses:a.diagnoses})}})}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({diagnoses:[]})}},{key:"render",value:function(){return this.state.loadingDiagnosess?y.a.createElement(k.a,{className:"ui__flex ui__justifyContent_center"}):y.a.createElement(W,this.props)}}]),t}(y.a.Component);G.propTypes={actions:S.a.object};var H=Object(b.hot)(Object(C.f)(Object(_.a)(G,function(e){return{diagnoses:e.apiData.diagnoses||[]}}))),J=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),g()(p()(n),"state",{activeTab:0,script:D()({title:"",description:""},(n.props.script||{}).data)}),g()(p()(n),"setScriptAsState",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;e.script&&n.setState({script:e.script.data})}),g()(p()(n),"handleBackClick",function(){return n.props.history.goBack()}),g()(p()(n),"handleEditScreenClick",function(e){var t=n.props,a=t.scriptId;t.history.push("/dashboard/scripts/".concat(a,"/screens/").concat(e))}),g()(p()(n),"handleEditDiagnosisClick",function(e){var t=n.props,a=t.scriptId;t.history.push("/dashboard/scripts/".concat(a,"/diagnosis/").concat(e))}),g()(p()(n),"handleInputChange",function(e,t){return n.setState({script:D()({},n.state.script,g()({},e,t.target.value))})}),g()(p()(n),"handleSubmitClick",function(){var e=n.props,t=e.isEditMode,a=e.history,i=e.actions,r=e.scriptId,o=n.state.script;n.setState({savingScript:!0}),i.post(t?"update-script":"create-script",D()({},t?{id:r}:{},{data:JSON.stringify({title:o.title,description:o.description}),onResponse:function(){return n.setState({savingScript:!0})},onFailure:function(e){return n.setState({saveScriptError:e})},onSuccess:function(e){var t=e.payload;i.updateApiData({script:t.script}),a.goBack()}}))}),n}return f()(t,e),o()(t,[{key:"componentWillUpdate",value:function(e){e.script!==this.props.script&&this.setScriptAsState(e)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.isEditMode,i=n.scriptId,r=this.state,o=r.activeTab,s=r.script,c="".concat(a?"Edit":"Add"," script"),l=a?"Update":"Create",u={container:{display:"flex",boxSizing:"border-box",justifyContent:"center"},form:{width:"780px"},fieldLeft:{marginRight:"12px"},fieldRight:{marginLeft:"12px"}};switch(o){case 0:e=y.a.createElement(z,{scriptId:i,onEditScreenClick:this.handleEditScreenClick});break;case 1:e=y.a.createElement(H,{scriptId:i,onEditDiagnosisClick:this.handleEditDiagnosisClick});break;default:e=null}var d=y.a.createElement("div",{style:{marginTop:"24px"}},y.a.createElement(T.Tabs,{activeTab:o,onChange:function(e){return t.setState({activeTab:e})},ripple:!0},y.a.createElement(T.Tab,null,"Screens"),y.a.createElement(T.Tab,null,"Diagnosis")),y.a.createElement("section",null,e));return y.a.createElement("div",{style:u.container},y.a.createElement("div",null,y.a.createElement(T.Card,{shadow:0,style:u.form},y.a.createElement(N.a,{leftNavIcon:"arrow_back",title:c,onLeftNavItemClicked:this.handleBackClick}),y.a.createElement(T.CardText,null,y.a.createElement(T.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title",required:!0,onChange:this.handleInputChange.bind(this,"title"),value:s.title}),y.a.createElement(T.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Description",value:s.description,onChange:this.handleInputChange.bind(this,"description")}),y.a.createElement(I.a,null,a?y.a.createElement(T.Button,{style:D()({},u.fieldLeft),onClick:this.handleSubmitClick.bind(this,"apply"),raised:!0,ripple:!0},"Apply"):null,y.a.createElement(T.Button,{style:D()({},u.fieldRight),onClick:this.handleSubmitClick.bind(this,"update"),raised:!0,accent:!0,ripple:!0},l)))),a?d:null))}}]),t}(v.Component);J.propTypes={actions:S.a.object.isRequired,history:S.a.object.isRequired,isEditMode:S.a.bool.isRequired,scriptId:S.a.string.isRequired,script:S.a.object},n.d(t,"ScriptEditor",function(){return K});var K=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),g()(p()(n),"state",{}),n}return f()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.scriptId,a=t.actions;n&&"new"!==n&&(this.setState({loadingScript:!0}),a.get("get-script",{id:n,onResponse:function(){return e.setState({loadingScript:!1})},onFailure:function(t){return e.setState({loadScriptError:t})},onSuccess:function(t){var n=t.payload;e.setState({script:n.script}),a.updateApiData({script:n.script})}}))}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({script:null})}},{key:"render",value:function(){return this.state.loadingScript?y.a.createElement(k.a,{className:"ui__flex ui__justifyContent_center"}):y.a.createElement(J,this.props)}}]),t}(y.a.Component);K.propTypes={actions:S.a.object,scriptId:S.a.string.isRequired,isEditMode:S.a.bool.isRequired};t.default=Object(b.hot)(Object(C.f)(Object(_.a)(K,function(e,t){return{script:e.apiData.script,scriptId:t.match.params.scriptId,isEditMode:!!e.apiData.script}})))}}]);