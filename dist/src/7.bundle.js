(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{129:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a=n(11),i=n.n(a),l=n(16),o=n.n(l),s=n(18),r=n.n(s),d=n(19),c=n.n(d),m=n(20),p=n.n(m),u=n(21),h=n.n(u),f=n(24),g=n.n(f),y=n(22),E=n.n(y),I=n(23),v=n.n(I),x=n(0),C=n.n(x),D=n(2),b=n.n(D),w=n(34),S=n.n(w),k=n(125),T=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=p()(this,(e=h()(t)).call.apply(e,[this].concat(i))),v()(g()(n),"handleLeftNavClick",function(){n.props.onLeftNavItemClicked&&n.props.onLeftNavItemClicked()}),n}return E()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.hideSpacer,l=e.leftNavIcon,s=(e.onLeftNavItemClicked,e.title),r=(e.transparent,o()(e,["children","className","hideSpacer","leftNavIcon","onLeftNavItemClicked","title","transparent"])),d=S()(n,"mdl-toolbar__header","mdl-layout__header","mdl-layout__header--transparent"),c=S()("mdl-toolbar__header-row",{"mdl-toolbar__header-row-with-left-icon":l}),m=S()("mdl-toolbar__left-nav"),p=S()("mdl-toolbar__right-nav");return C.a.createElement("header",i()({className:d},r),l?C.a.createElement(k.IconButton,{className:m,name:l,onClick:this.handleLeftNavClick}):C.a.createElement("div",{style:{width:"24px"}}),C.a.createElement(k.HeaderRow,{className:c,title:s||"",hideSpacer:a},t?C.a.createElement(k.Navigation,{className:p},t):null))}}]),t}(x.Component);T.propTypes={className:b.a.string,title:b.a.node,leftNavIcon:b.a.string,onLeftNavItemClicked:b.a.func,hideSpacer:b.a.bool}},130:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return r});var a={COMPUTE:"compute",DATE_NOW:"date_now",DATE_NOON:"date_noon",DATE_MIDNIGHT:"date_midnight",EMPTY:"",UID:"uid"},i={BOOLEAN:"boolean",DATETIME:"datetime",DATE:"date",ID:"id",NUMBER:"number",PERIOD:"period",SET_ID:"set<id>",STRING:"string",TIME:"time",VOID:"void"},l={DATE:"date",DATETIME:"datetime",DROPDOWN:"dropdown",NUMBER:"number",PERIOD:"period",TEXT:"text",TIME:"time"},o={CHECKLIST:"checklist",FORM:"form",LIST:"list",MANAGEMENT:"management",MULTI_SELECT:"multi_select",PROGRESS:"progress",SINGLE_SELECT:"single_select",TIMER:"timer",YESNO:"yesno"},s={SIGN:"sign",RISK:"risk"},r=o.CHECKLIST},134:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n(11),i=n.n(a),l=n(16),o=n.n(l),s=n(18),r=n.n(s),d=n(19),c=n.n(d),m=n(20),p=n.n(m),u=n(21),h=n.n(u),f=n(22),g=n.n(f),y=n(0),E=n.n(y),I=function(e){function t(){return r()(this,t),p()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=o()(e,["children"]);return E.a.createElement("div",i()({style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"16px",marginBottom:"8px"}},n),t)}}]),t}(y.Component)},141:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var a=n(11),i=n.n(a),l=n(16),o=n.n(l),s=n(18),r=n.n(s),d=n(19),c=n.n(d),m=n(20),p=n.n(m),u=n(21),h=n.n(u),f=n(22),g=n.n(f),y=n(0),E=n.n(y),I=n(2),v=n.n(I),x=n(34),C=n.n(x),D=function(e){function t(){return r()(this,t),p()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,a=e.style,l=e.topSpace,s=o()(e,["className","label","style","topSpace"]),r=C()(t,"mdl-form-section",{"mdl-form-section-top-space":l});return E.a.createElement("div",i()({className:r,style:a},s),n)}}]),t}(y.Component);D.propTypes={className:v.a.string,style:v.a.object,label:v.a.node,topSpace:v.a.bool}},142:function(e,t,n){"use strict";function a(e,t,n){if(n>=e.length)for(var a=n-e.length;1+a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}n.d(t,"a",function(){return a})},165:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(3),i=n.n(a),l=n(18),o=n.n(l),s=n(19),r=n.n(s),d=n(20),c=n.n(d),m=n(21),p=n.n(m),u=n(24),h=n.n(u),f=n(22),g=n.n(f),y=n(23),E=n.n(y),I=n(0),v=n.n(I),x=n(2),C=n.n(x),D=n(125),b=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=c()(this,(e=p()(t)).call.apply(e,[this].concat(l))),E()(h()(n),"handleFormSubmit",function(e){e.preventDefault()}),E()(h()(n),"handleFileUploadRequest",function(e){console.log(e),n.uploadFileInput.click()}),E()(h()(n),"handleFileUploaded",function(e){var t=h()(n),a=e.target.files[0],l=new FileReader,o=n.props.onFileUploaded;l.onload=function(e){if(a.size<204800){var n={filename:a.name,size:a.size,type:a.type,data:e.target.result};t.setState(i()({},t.state,{fileInfo:n})),o(t.props.name,n)}},l.readAsDataURL(a)}),E()(h()(n),"handleFileDelete",function(e){var t=n.props.onFileDeleted;n.setState({fileInfo:null}),t(n.props.name)}),n}return g()(t,e),r()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.fileInfo;this.setState(i()({},this.state,{fileInfo:t}))}},{key:"render",value:function(){var e=this,t=(this.state||{}).fileInfo,n={container:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},imagePreview:{display:"block",maxWidth:"90px",maxHeight:"90px",width:"auto",height:"auto",marginBottom:"12px"},imagePreviewEmpty:{display:"flex",width:"90px",height:"90px",justifyContent:"center",alignItems:"center",marginBottom:"12px"},caption:{fontSize:"12px",fontWeight:"bold",fontStyle:"italic",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},iconLeft:{marginRight:"12px"},iconRight:{marginLeft:"12px"}},a=v.a.createElement("div",{style:n.imagePreviewEmpty},"No Image");return t&&t.data&&(a=v.a.createElement("img",{style:n.imagePreview,src:t.data})),v.a.createElement("div",{style:n.container},v.a.createElement("form",{style:{display:"none"},encType:"multipart-formdata",onSubmit:this.handleFormSubmit},v.a.createElement("input",{ref:function(t){return e.uploadFileInput=t},type:"file",onChange:this.handleFileUploaded})),v.a.createElement("div",null,a),v.a.createElement("div",{style:n.flexContainer},v.a.createElement("div",{style:n.iconLeft},v.a.createElement(D.FABButton,{mini:!0,colored:!0,onClick:this.handleFileUploadRequest.bind(this,"upload")},v.a.createElement(D.Icon,{name:"add"}))),v.a.createElement("div",{style:n.iconRight},v.a.createElement(D.FABButton,{mini:!0,onClick:this.handleFileDelete.bind(this,"delete")},v.a.createElement(D.Icon,{name:"delete"})))),v.a.createElement("div",{style:n.caption},"Max size 200 KB"))}}]),t}(I.Component);b.propTypes={name:C.a.string.isRequired,fileInfo:C.a.object,onFileUploaded:C.a.func.isRequired,onFileDeleted:C.a.func.isRequired}},399:function(e,t,n){"use strict";n.r(t);var a=n(18),i=n.n(a),l=n(19),o=n.n(l),s=n(20),r=n.n(s),d=n(21),c=n.n(d),m=n(24),p=n.n(m),u=n(22),h=n.n(u),f=n(23),g=n.n(f),y=n(0),E=n.n(y),I=n(2),v=n.n(I),x=n(25),C=n(12),D=n(42),b=n(3),w=n.n(b),S=n(125),k=n(165),T=n(134),N=(n(141),n(129)),R=n(130),L=(n(142),{openNewItemDialog:!1,openEditItemDialog:!1,openConfirmDeleteItemDialog:!1,actionItemIndex:null,itemType:null,itemName:null,itemExpression:null}),A=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=c()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",w()({},L)),g()(p()(n),"collectItemData",function(){var e=n.state,t=e.itemType,a=e.itemName,i=e.itemWeight,l=e.itemExpression;return{type:t||null,name:a||null,weight:i||null,expression:l||null}}),g()(p()(n),"handleInputChange",function(e,t){n.setState(w()({},n.state,g()({},e,t.target.value)))}),g()(p()(n),"handleItemActionClick",function(e){var t=n.state,a=t.actionItemIndex,i=t.items,l=(t.selectedIndex,t.swapIndex0,t.swapIndex1,n.collectItemData()),o=i||[],s=function(){};switch(e){case"add":o.push(l),s=n.closeNewItemDialog;break;case"delete":o.splice(a,1),s=n.closeConfirmDeleteItemDialog;break;case"update":o[a]=l,s=n.closeEditItemDialog}n.setState(w()({},n.state,{actionItemIndex:null,items:o})),n.props.onUpdateSymptoms({symptoms:o}),s()}),g()(p()(n),"openNewItemDialog",function(){console.log("openNewItemDialog()"),n.setState(w()({},n.state,{openNewItemDialog:!0}))}),g()(p()(n),"closeNewItemDialog",function(){console.log("closeNewItemDialog()"),n.setState(w()({},n.state,{},L))}),g()(p()(n),"openEditItemDialog",function(e){return function(){var t=n.state.items[e];n.setState(w()({},n.state,{openEditItemDialog:!0,actionItemIndex:e,itemType:t.type,itemName:t.name,itemWeight:t.weight,itemExpression:t.expression}))}}),g()(p()(n),"closeEditItemDialog",function(){n.setState(w()({},n.state,{},L))}),g()(p()(n),"openConfirmDeleteItemDialog",function(e){return function(){n.setState(w()({},n.state,{openConfirmDeleteItemDialog:!0,actionItemIndex:e}))}}),g()(p()(n),"closeConfirmDeleteItemDialog",function(){n.setState(w()({},n.state,{openConfirmDeleteItemDialog:!1,actionItemIndex:null}))}),n}return h()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){var t={items:e.items||[]};this.setState(t)}},{key:"render",value:function(){var e=this,t={dialog:{width:"460px"},container:{marginTop:"24px",width:"780px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"},flexRow:{display:"flex",flexDirection:"row"}},n=this.state,a=n.openNewItemDialog,i=n.openEditItemDialog,l=n.openConfirmDeleteItemDialog,o=n.itemType,s=n.itemName,r=n.itemWeight,d=n.itemExpression,c=n.items,m=E.a.createElement("div",null,E.a.createElement("p",null,"Type:"),E.a.createElement(S.RadioGroup,{container:"div",childContainer:"div",name:"itemType",value:o||"",onChange:this.handleInputChange.bind(this,"itemType")},E.a.createElement(S.Radio,{value:R.f.RISK,ripple:!0},"Risk factor"),E.a.createElement(S.Radio,{value:R.f.SIGN,ripple:!0},"Sign/Symptom")),E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Name",required:!0,onChange:this.handleInputChange.bind(this,"itemName"),value:s||""}),E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Weight",required:!1,pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"itemWeight"),value:r||""}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Must be in the range: 0.0 - 1.0 (",E.a.createElement("span",{style:{fontWeight:"bold"}},"default 1.0"),")"),E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Sign/Risk Expression",required:!0,value:d||"",onChange:this.handleInputChange.bind(this,"itemExpression")}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Example: ",E.a.createElement("span",{style:{fontWeight:"bold"}},"($key = true and $key2 = false) or $key3 = 'HD'"))),p=a||i,u=E.a.createElement(S.Dialog,{open:p,style:t.dialog},E.a.createElement(S.DialogContent,null,m),E.a.createElement(S.DialogActions,null,a?E.a.createElement("div",null,E.a.createElement(S.Button,{type:"button",onClick:this.closeNewItemDialog},"Cancel"),E.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"add"),accent:!0},"Create")):null,i?E.a.createElement("div",null,E.a.createElement(S.Button,{type:"button",onClick:this.closeEditItemDialog},"Cancel"),E.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"update"),accent:!0},"Update")):null)),h=E.a.createElement(S.Dialog,{open:l},E.a.createElement(S.DialogContent,null,E.a.createElement("p",null,"Are you sure you want to delete this item?")),E.a.createElement(S.DialogActions,null,E.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"delete"),accent:!0},"Delete"),E.a.createElement(S.Button,{type:"button",onClick:this.closeConfirmDeleteItemDialog},"Cancel")));return E.a.createElement("div",null,E.a.createElement(S.Card,{shadow:0,style:t.container},E.a.createElement(N.a,{title:"Signs/Risks"},E.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},E.a.createElement(S.IconButton,{name:"add",onClick:this.openNewItemDialog}))),c&&c.length>0?E.a.createElement(S.DataTable,{style:t.table,shadow:0,rows:c||[]},E.a.createElement(S.TableHeader,{name:"type"},"Type"),E.a.createElement(S.TableHeader,{name:"name"},"Name"),E.a.createElement(S.TableHeader,{name:"diagnosisId",style:{width:"48px"},cellFormatter:function(t,n,a){return E.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"end",color:"#999999"}},E.a.createElement(S.IconButton,{name:"edit",onClick:e.openEditItemDialog(a)}),E.a.createElement(S.IconButton,{name:"delete",onClick:e.openConfirmDeleteItemDialog(a)}))}})):E.a.createElement(S.CardText,null,E.a.createElement("div",{style:t.emptyMessageContainer},E.a.createElement("div",null,"The list of items is empty")))),u,h)}}]),t}(y.Component);A.propTypes={items:v.a.array,onUpdateSymptoms:v.a.func.isRequired};var _=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=c()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",{diagnosis:n.props.diagnosis?n.props.diagnosis.data:{name:null,description:null,expression:null,text1:null,image1:null,text2:null,image2:null,text3:null,image3:null,symptoms:null}}),g()(p()(n),"setDiagnosisAsState",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;e.diagnosis&&n.setState({diagnosis:e.diagnosis.data})}),g()(p()(n),"handleInputChange",function(e,t){return n.setState({isModified:!0,diagnosis:w()({},n.state.diagnosis,g()({},e,t.target.value))})}),g()(p()(n),"handleImageUpload",function(e,t){return n.setState({diagnosis:w()({},n.state.diagnosis,g()({},e,t))})}),g()(p()(n),"handleImageDelete",function(e){return n.setState({diagnosis:w()({},n.state.diagnosis,g()({},e,null))})}),g()(p()(n),"handleBackClick",function(){return n.props.history.goBack()}),g()(p()(n),"handleSubmitClick",function(){var e=n.props,t=e.isEditMode,a=e.history,i=e.actions,l=e.diagnosisId,o=e.scriptId,s=n.state.diagnosis;n.setState({savingDiagnosis:!0}),i.post(t?"update-diagnosis":"create-diagnosis",w()({},t?{id:l}:{},{script_id:o,data:JSON.stringify(s),onResponse:function(){return n.setState({savingDiagnosis:!0})},onFailure:function(e){return n.setState({saveDiagnosisError:e})},onSuccess:function(e){var t=e.payload;i.updateApiData({diagnosis:t.diagnosis}),a.goBack()}}))}),g()(p()(n),"handleUpdateSymptoms",function(e){return n.setState({diagnosis:w()({},n.state.diagnosis,{symptoms:e.symptoms})})}),n}return h()(t,e),o()(t,[{key:"componentWillUpdate",value:function(e){e.diagnosis!==this.props.diagnosis&&this.setDiagnosisAsState(e)}},{key:"render",value:function(){var e=this.props.isEditMode,t=this.state.diagnosis,n=e?"Edit Diagnosis":"Add Diagnosis",a=e?"Update":"Create",i={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},form:{width:"780px"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},fieldLeft:{marginRight:"12px"},fieldMiddle:{marginLeft:"12px",marginRight:"12px"},fieldRight:{marginLeft:"12px"}};return E.a.createElement("div",{style:i.container},E.a.createElement("div",null,E.a.createElement(S.Card,{shadow:1,style:i.form},E.a.createElement(N.a,{leftNavIcon:"arrow_back",title:n,onLeftNavItemClicked:this.handleBackClick}),E.a.createElement(S.CardText,null,E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Name",required:!0,onChange:this.handleInputChange.bind(this,"name"),value:t.name||""}),E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Description",value:t.description||"",onChange:this.handleInputChange.bind(this,"description")}),e?E.a.createElement("div",null,E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Diagnosis expression",required:!0,value:t.expression||"",onChange:this.handleInputChange.bind(this,"expression")}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Note: Usual expression syntax plus ",E.a.createElement("span",{style:{fontWeight:"bold"}},"$riskCount")," and ",E.a.createElement("span",{style:{fontWeight:"bold"}},"$signCount")," containing the number of expressions that match a risk factor or a sign/symptom"),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 1",rows:6,onChange:this.handleInputChange.bind(this,"text1"),value:t.text1||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(k.a,{name:"image1",fileInfo:t.image1,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 2",rows:6,onChange:this.handleInputChange.bind(this,"text2"),value:t.text2||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(k.a,{name:"image2",fileInfo:t.image2,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 3",rows:6,onChange:this.handleInputChange.bind(this,"text3"),value:t.text3||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(k.a,{name:"image3",fileInfo:t.image3,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete})))):null,E.a.createElement(T.a,null,e?E.a.createElement(S.Button,{style:w()({},i.fieldLeft),onClick:this.handleSubmitClick.bind(this,"apply"),raised:!0,ripple:!0},"Apply"):null,E.a.createElement(S.Button,{style:w()({},i.fieldRight),onClick:this.handleSubmitClick.bind(this,"update"),raised:!0,accent:!0,ripple:!0},a)))),E.a.createElement(A,{items:t.symptoms,onUpdateSymptoms:this.handleUpdateSymptoms})))}}]),t}(E.a.Component);_.propTypes={router:v.a.object.isRequired,store:v.a.object.isRequired};var B=_,U=n(52);n.d(t,"DiagnosisEditor",function(){return F});var F=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=c()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",{}),n}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.diagnosisId,a=t.actions;n&&"new"!==n&&(this.setState({loadingDiagnosis:!0}),a.get("get-diagnosis",{id:n,onResponse:function(){return e.setState({loadingDiagnosis:!1})},onFailure:function(t){return e.setState({loadDiagnosisError:t})},onSuccess:function(t){var n=t.payload;e.setState({diagnosis:n.diagnosis}),a.updateApiData({diagnosis:n.diagnosis})}}))}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({diagnosis:null})}},{key:"render",value:function(){return this.state.loadingDiagnosis?E.a.createElement(U.a,{className:"ui__flex ui__justifyContent_center"}):E.a.createElement(B,this.props)}}]),t}(E.a.Component);F.propTypes={actions:v.a.object,diagnosisId:v.a.string.isRequired,isEditMode:v.a.bool.isRequired};t.default=Object(x.hot)(Object(C.f)(Object(D.a)(F,function(e,t){return{diagnosis:e.apiData.diagnosis,diagnosisId:t.match.params.diagnosisId,scriptId:t.match.params.scriptId,isEditMode:!!e.apiData.diagnosis}})))}}]);