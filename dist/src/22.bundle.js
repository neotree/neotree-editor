(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{397:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),c=n(14),o=n.n(c),l=n(25),i=n.n(l),u=n(34),s=n.n(u),p=n(0),f=n.n(p),m="Settings",b=n(31),g=n(330),y=n(331),O=n(311),d=n(299),E=n(62),h=n(142),v=n(390),j=n(143),w=n(254),k=n(356),P=n.n(k),S=n(329),D=n(231),_=n(229),x=n(228),C=n(225);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(){var e=f.a.useRef(null),t=f.a.useState(!1),n=i()(t,2),a=n[0],r=n[1],c=f.a.useState(null),o=i()(c,2),l=o[0],u=o[1],s=f.a.useState(null),p=i()(s,2),m=p[0],b=p[1],g=f.a.useState(!1),y=i()(g,2),O=y[0],d=y[1],k=f.a.useState(!1),F=i()(k,2),z=F[0],A=F[1],I=f.a.useState(""),J=i()(I,2),N=J[0],T=J[1];f.a.useEffect((function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(E.a)("/api/key",K({body:e},t))})().then((function(e){var t=e.apiKey;r(!0),T(t||"")})).catch((function(e){r(!0),u(e)}))}),[]);var R=function(){A(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(E.a)("/api/generate-key",K({method:"POST",body:e},t))}({apiKey:N}).then((function(e){var t=e.apiKey;A(!1),T(t)})).catch((function(e){A(!1),b(e)}))};return f.a.createElement(f.a.Fragment,null,f.a.createElement(h.a,{variant:"h6"},"Api keys"),f.a.createElement("br",null),a?f.a.createElement(f.a.Fragment,null,l?f.a.createElement(h.a,{color:"error"},l.msg||l.message||JSON.stringify(l)):f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{container:!0,spacing:2,alignItems:"center"},f.a.createElement(S.a,{item:!0,xs:12,sm:4},f.a.createElement(v.a,{inputRef:e,value:N?N.key:"",disabled:!N||z,placeholder:"API KEY",fullWidth:!0,onChange:function(){},onFocus:function(e){e.target.select(),document.execCommand("copy")}})),f.a.createElement(S.a,{item:!0,xs:12,sm:8},N?f.a.createElement(f.a.Fragment,null,f.a.createElement(w.a,{size:"small",onClick:function(){return e.current.focus()}},f.a.createElement(P.a,{fontSize:"small"})),"  ",f.a.createElement("a",{href:"/api/download-api-config",target:"__blank",style:{textDecoration:"none",outline:"none !important"}},f.a.createElement(j.a,{size:"small",color:"primary"},"Download api config file")),"  "):null,N?null:f.a.createElement(j.a,{variant:"contained",color:"primary",disabled:z,onClick:function(){b(null),N?d(!0):R()}},"Genarate Api Key")),m?f.a.createElement(h.a,{color:"error",variant:"caption"},m.msg||m.message||JSON.stringify(m)):null))):f.a.createElement(C.a,{size:20}),f.a.createElement(D.a,{open:O,onClose:function(){return d(!1)}},f.a.createElement(x.a,null,f.a.createElement(h.a,null,"Are you sure you want to change the existing api key?")),f.a.createElement(_.a,null,f.a.createElement(j.a,{onClick:function(){d(!1)}},"No"),f.a.createElement(j.a,{color:"primary",onClick:function(){R(),d(!1)}},"Yes"))))};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){Object(b.b)(m),Object(b.c)("settings");var e=Object(b.d)(),t=e.state.appInfo,n=e.setState,a=f.a.useState(I({should_track_usage:!1},t)),c=i()(a,2),o=c[0],l=c[1];function u(){return(u=r()(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return I(I({},e),t)})),e.prev=1,e.next=4,Object(E.a)("/update-app-info",{method:"POST",body:I({id:o.id},t)});case 4:a=e.sent,n({appInfo:a}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return f.a.useEffect((function(){l((function(e){return I(I({},e),t)}))}),[t]),f.a.createElement(f.a.Fragment,null,f.a.createElement("div",null,f.a.createElement(g.a,null,f.a.createElement(y.a,null,f.a.createElement("div",null,f.a.createElement(O.a,{label:"Track app usage",control:f.a.createElement(d.a,{checked:o.should_track_usage,onChange:function(){return function(e){return u.apply(this,arguments)}({should_track_usage:!o.should_track_usage})}})})),f.a.createElement("br",null),f.a.createElement(z,null)))))}}}]);