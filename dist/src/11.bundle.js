(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{141:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(3),c=n.n(i),o=n(124),l=n.n(o),s=n(16),u=n.n(s),p=n(0),d=n.n(p),f=n(2),m=n.n(f),h=n(132),E=n(41),S=function(e){var t=e.container,n=e.data,a=e.children,i=e.host,o=(e.actions,u()(e,["container","data","children","host","actions"])),s=Object(h.a)(),p=l()(s,3),f=(p[0],p[1]),m=p[2],E=m.copyToClipboard,S=u()(m,["copyToClipboard"]),b=t||d.a.Fragment;return d.a.createElement(b,null,d.a.createElement("div",r()({},o,{onClick:function(e){var t=c()({},n,{host:i});E(t),f(S.updateState({copiedData:t})),o.onClick&&o.onClick(e)}}),a))};S.propTypes={children:m.a.node,data:m.a.object.isRequired,onClick:m.a.func},t.a=Object(E.a)(S,function(e){return{host:e.$APP.host}})},146:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(124),c=n.n(i),o=n(16),l=n.n(o),s=n(0),u=n.n(s),p=n(2),d=n.n(p),f=n(132),m=n(41),h=n(12),E=function(e){var t=e.children,n=l()(e,["children"]),a=n.data,i=n.accept,o=n.onSuccess,s=n.onFailure,p=n.host,d=Object(f.a)(),m=c()(d,3),h=(m[0],m[1]),E=m[2],S=E.getClipboardData,b=E.clearClipboardData,g=l()(E,["getClipboardData","clearClipboardData"]),C=function(e){o&&o(e),b(),h(g.updateState({copiedData:null}))};return u.a.useEffect(function(){return S()&&h(g.updateState({copiedData:S()})),function(){h(g.updateState({destination:void 0,accept:void 0,onSuccess:void 0,onFailure:void 0}))}},[]),u.a.useEffect(function(){h(g.updateState({destination:r()({},a,{host:p}),accept:i,onSuccess:C,onFailure:function(e){return s&&s(e)}}))},[o,s,a,i]),t};E.propTypes={data:d.a.object.isRequired,accept:d.a.array.isRequired,children:d.a.node},t.a=Object(h.f)(Object(m.a)(E,function(e){return{host:e.$APP.host}}))},147:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(2),c=function(e){var t=e.children,n=e.options;n=n||{allScripts:!0,allConfigKeys:!0};var a="";return Object.keys(n).forEach(function(e,t){a+="".concat(e,"=").concat(n[e]),t<Object.keys(n).length-1&&(a+="&")}),r.a.createElement("a",{target:"_blank",style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},rel:"noopener noreferrer",href:"/export-data?".concat(a)},t||"Export")};c.propTypes={options:n.n(i).a.object},t.a=c},194:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(140),c={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},o={scripts:[]};t.a=Object(i.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;if(t.type===c.UPDATE){var n=r()({},e);return r()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},o,c)},413:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),i=n(124),c=n.n(i),o=n(0),l=n.n(o),s=n(2),u=n.n(s),p=n(26),d=n(12),f=n(194),m=n(42),h=n(52),E=n(3),S=n.n(E),b=n(43),g=n.n(b),C=n(19),y=n.n(C),D=n(20),v=n.n(D),k=n(21),_=n.n(k),j=n(22),T=n.n(j),x=n(25),w=n.n(x),A=n(23),O=n.n(A),I=n(24),P=n.n(I),F=n(120),B=n(122),N=n(141),q=n(146),M=n(147),R=function(e){function t(e){var n;return y()(this,t),n=_()(this,T()(t).call(this,e)),P()(w()(n),"toggleClipboardPasteBox",function(){return n.setState({openClipboardPasteBox:!n.state.openClipboardPasteBox})}),P()(w()(n),"handleAddScriptClick",function(){return n.props.history.push("/dashboard/scripts/new")}),P()(w()(n),"handleEditScriptClick",function(e){return n.props.history.push("/dashboard/scripts/".concat(e))}),P()(w()(n),"handleDeleteClick",function(){var e=n.props.updateState,t=n.state.scriptIdForAction;n.setState({deletingScript:!0}),m.a.post("/delete-script",{id:t}).catch(function(e){return n.setState({deleteScriptError:e,deletingScript:!1})}).then(function(){n.setState({deletingScript:!1}),e(function(e){return{scripts:e.scripts.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()})}),P()(w()(n),"handleDuplicateScript",function(e){var t=n.props.updateState;n.setState({duplicatingScript:!0}),m.a.post("/duplicate-script",{id:e}).catch(function(e){return n.setState({duplicateScriptError:e,duplicatingScript:!1})}).then(function(a){var r=a.payload;n.setState({duplicatingScript:!1}),t(function(t){var n=g()(t.scripts),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,r.script),{scripts:n}})})}),P()(w()(n),"openDeleteConfirmDialog",function(e){return n.setState(S()({},n.state,{openDeleteConfirmDialog:!0,scriptIdForAction:e}))}),P()(w()(n),"closeDeleteConfirmDialog",function(){return n.setState(S()({},n.state,{openDeleteConfirmDialog:!1,scriptIdForAction:null,deleteScriptError:null}))}),n.state={openDeleteConfirmDialog:!1,scriptIdForAction:null},n}return O()(t,e),v()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.scripts,a=(t.updateState,this.state),r=a.deletingScript,i=a.deleteScriptError,c={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"640px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},o=l.a.createElement(F.Dialog,{open:this.state.openDeleteConfirmDialog},[l.a.createElement(F.DialogTitle,null,"Delete"),l.a.createElement(F.DialogContent,null,r?l.a.createElement(h.a,{className:"ui__flex ui__justifyContent_center"}):l.a.createElement("div",null,i?l.a.createElement("div",{className:"ui__dangerColor"},i.msg||i.message||JSON.stringify(i)):l.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),r?null:l.a.createElement(F.DialogActions,null,l.a.createElement(F.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),l.a.createElement(F.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&l.a.cloneElement(e,{key:t})})),s=l.a.createElement("div",null,l.a.createElement(F.DataTable,{style:{width:"780px"},shadow:0,rows:n.map(function(e){return S()({id:e.id},e.data)})},l.a.createElement(F.TableHeader,{name:"title"},"Title"),l.a.createElement(F.TableHeader,{name:"description"},"Description"),l.a.createElement(F.TableHeader,{name:"id",style:{width:"64px"},cellFormatter:function(t,n,a){var r="more-user-action-menu".concat(a);return l.a.createElement("div",null,l.a.createElement("div",{style:{position:"relative",color:"#999999"},className:"ui__flex ui__alignItems_center"},l.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditScriptClick.bind(e,t)},l.a.createElement(B.f,{style:{fontSize:"24px"}})),"Â ",l.a.createElement("div",{id:r,className:"ui__cursor_pointer"},l.a.createElement(B.j,{style:{fontSize:"24px"}})),l.a.createElement(F.Menu,{target:r,align:"right"},l.a.createElement(F.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),l.a.createElement(F.MenuItem,{onClick:function(){return e.handleDuplicateScript(t)}},"Duplicate"),l.a.createElement(F.MenuItem,null,l.a.createElement(N.a,{data:{dataId:t,dataType:"script"}},l.a.createElement("span",null,"Copy"))),l.a.createElement(F.MenuItem,null,l.a.createElement(M.a,{options:{script:t}})))))}}))),u=l.a.createElement(F.Card,{shadow:0,style:{width:"320px"}},l.a.createElement(F.CardTitle,null,"There are no scripts"),l.a.createElement(F.CardText,null,l.a.createElement("span",null,"To create your first script click on the orange icon at the bottom right of the window."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)));return l.a.createElement(q.a,{accept:["script"],data:{},onSuccess:function(t){var n=t.payload;e.handleEditScriptClick(n.script.id)}},l.a.createElement(F.FABButton,{style:c.fab,colored:!0,ripple:!0,onClick:this.handleAddScriptClick},l.a.createElement(B.a,null)),l.a.createElement("div",{style:c.container},n.length?s:u),o)}}]),t}(o.Component);R.propTypes={scripts:u.a.array.isRequired,actions:u.a.object.isRequired};var z=R,U=function(e){var t=Object(o.useState)(!1),n=c()(t,2),a=n[0],i=n[1],s=Object(o.useState)(null),u=c()(s,2),p=(u[0],u[1]),d=Object(f.a)(),E=c()(d,3),S=E[0].scripts,b=E[1],g=E[2];return Object(o.useEffect)(function(){i(!0),m.a.get("/get-scripts").then(function(e){return i(!1),e}).then(function(e){var t=e.payload;i(!1),b(g.updateState({scripts:t.scripts||[]}))}).catch(function(e){i(!1),p(e)})},[]),l.a.createElement("div",null,!S.length&&a&&l.a.createElement(h.a,{className:"ui__flex ui__justifyContent_center"}),!S.length&&a?null:l.a.createElement(z,r()({},e,{scripts:S,updateState:function(e){return b(g.updateState(e))}})))};U.propTypes={match:u.a.object};t.default=Object(p.hot)(Object(d.f)(U))}}]);