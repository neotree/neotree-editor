(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{400:function(e,t,n){"use strict";n.r(t);var r=n(18),i=n.n(r),a=n(19),l=n.n(a),o=n(20),c=n.n(o),s=n(21),u=n.n(s),p=n(24),d=n.n(p),m=n(22),f=n.n(m),h=n(23),E=n.n(h),g=n(0),D=n.n(g),S=n(2),y=n.n(S),C=n(25),b=n(12),v=n(42),k=n(52),w=n(3),A=n.n(w),_=n(43),x=n.n(_),T=n(125),I=function(e){function t(e){var n;return i()(this,t),n=c()(this,u()(t).call(this,e)),E()(d()(n),"handleAddScriptClick",function(){return n.props.history.push("/dashboard/scripts/new")}),E()(d()(n),"handleEditScriptClick",function(e){return n.props.history.push("/dashboard/scripts/".concat(e))}),E()(d()(n),"handleDeleteClick",function(){var e=n.props.actions,t=n.state.scriptIdForAction;n.setState({deletingScript:!0}),e.post("delete-script",{id:t,onResponse:function(){return n.setState({deletingScript:!1})},onFailure:function(e){return n.setState({deleteScriptError:e})},onSuccess:function(){e.updateApiData(function(e){return{scripts:e.scripts.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()}})}),E()(d()(n),"handleDuplicateScript",function(e){var t=n.props.actions;n.setState({duplicatingScript:!0}),t.post("duplicate-script",{id:e,onResponse:function(){return n.setState({duplicatingScript:!1})},onFailure:function(e){return n.setState({duplicateScriptError:e})},onSuccess:function(n){var r=n.payload;t.updateApiData(function(t){var n=x()(t.scripts),i=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(i+1,0,r.script),{scripts:n}})}})}),E()(d()(n),"openDeleteConfirmDialog",function(e){return n.setState(A()({},n.state,{openDeleteConfirmDialog:!0,scriptIdForAction:e}))}),E()(d()(n),"closeDeleteConfirmDialog",function(){return n.setState(A()({},n.state,{openDeleteConfirmDialog:!1,scriptIdForAction:null,deleteScriptError:null}))}),n.state={openDeleteConfirmDialog:!1,scriptIdForAction:null},n}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.scripts,n=this.state,r=n.deletingScript,i=n.deleteScriptError,a={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"640px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},l=D.a.createElement(T.Dialog,{open:this.state.openDeleteConfirmDialog},[D.a.createElement(T.DialogTitle,null,"Delete"),D.a.createElement(T.DialogContent,null,r?D.a.createElement(k.a,{className:"ui__flex ui__justifyContent_center"}):D.a.createElement("div",null,i?D.a.createElement("div",{className:"ui__dangerColor"},i.msg||i.message||JSON.stringify(i)):D.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),r?null:D.a.createElement(T.DialogActions,null,D.a.createElement(T.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),D.a.createElement(T.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&D.a.cloneElement(e,{key:t})})),o=D.a.createElement("div",null,D.a.createElement(T.DataTable,{style:{width:"780px"},shadow:0,rows:t.map(function(e){return A()({id:e.id},e.data)})},D.a.createElement(T.TableHeader,{name:"title"},"Title"),D.a.createElement(T.TableHeader,{name:"description"},"Description"),D.a.createElement(T.TableHeader,{name:"id",style:{width:"64px"},cellFormatter:function(t,n,r){var i="more-user-action-menu".concat(r);return D.a.createElement("div",null,D.a.createElement("div",{style:{position:"relative",color:"#999999"}},D.a.createElement(T.IconButton,{name:"edit",onClick:e.handleEditScriptClick.bind(e,t)}),D.a.createElement(T.IconButton,{name:"more_vert",id:i}),D.a.createElement(T.Menu,{target:i,align:"right"},D.a.createElement(T.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),D.a.createElement(T.MenuItem,{onClick:function(){return e.handleDuplicateScript(t)}},"Duplicate"))))}}))),c=D.a.createElement(T.Card,{shadow:0,style:{width:"320px"}},D.a.createElement(T.CardTitle,null,"There are no scripts"),D.a.createElement(T.CardText,null,D.a.createElement("span",null,"To create your first script click on the orange icon at the bottom right of the window."),D.a.createElement("br",null),D.a.createElement("br",null),D.a.createElement("br",null)));return D.a.createElement("div",null,D.a.createElement(T.FABButton,{style:a.fab,colored:!0,ripple:!0,onClick:this.handleAddScriptClick},D.a.createElement(T.Icon,{name:"add"})),D.a.createElement("div",{style:a.container},t.length?o:c),l)}}]),t}(g.Component);I.propTypes={scripts:y.a.array.isRequired,actions:y.a.object.isRequired};var F=I;n.d(t,"List",function(){return j});var j=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(a))),E()(d()(n),"state",{}),n}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.actions;this.setState({loadingScripts:!0}),t.get("get-scripts",{onResponse:function(){return e.setState({loadingScripts:!1})},onFailure:function(t){return e.setState({loadScriptsError:t})},onSuccess:function(n){var r=n.payload;e.setState({scripts:r.scripts}),t.updateApiData({scripts:r.scripts})}})}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({scripts:[]})}},{key:"render",value:function(){return this.state.loadingScripts?D.a.createElement(k.a,{className:"ui__flex ui__justifyContent_center"}):D.a.createElement(F,this.props)}}]),t}(D.a.Component);j.propTypes={scripts:y.a.array};t.default=Object(C.hot)(Object(b.f)(Object(v.a)(j,function(e){return{scripts:e.apiData.scripts||[]}})))}}]);