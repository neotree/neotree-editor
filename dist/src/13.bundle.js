(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{246:function(t,e,r){"use strict";r.d(e,"b",(function(){return v})),r.d(e,"a",(function(){return y}));var n={};r.r(n),r.d(n,"defaultState",(function(){return d}));var c=r(92),o=r.n(c),i=r(12),a=r.n(i),s=r(20),u=r.n(s),p=r(0),f=r.n(p),O=r(256),d={scriptSection:"screens",form:{}};function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h=f.a.createContext(null),v=function(){return f.a.useContext(h)},y=function(t){return function(e){var c=Object(O.a)(),i=c.match.params,s=i.scriptId,p=i.scriptSection,b=f.a.useState(l(l({},d),{},{scriptSection:p||d.scriptSection})),v=u()(b,2),y=v[0],g=v[1],j=new function t(){var e=this;o()(this,t),a()(this,"setState",(function(t){return g((function(e){return l(l({},e),"function"==typeof t?t(e):t)}))})),a()(this,"setForm",(function(t){return g((function(e){return l(l({},e),{},{form:l(l({},e.form),"function"==typeof t?t(e.form):t)})}))})),a()(this,"canSaveScript",(function(){return e.state.form.title&&!e.state.savingScript})),a()(this,"isFormReady",(function(){return"new"===s||!!e.state.script})),a()(this,"setFormAndSave",(function(t){e.setForm(t),e.setState({shouldSaveForm:!0})})),a()(this,"getScript",r(358).default.bind(this)),a()(this,"saveScript",r(359).default.bind(this)),this._setState=g,this.state=y,this.router=c,this.defaults=n};f.a.useEffect((function(){var t="new"!==s;j.setState({scriptInitialised:t,script:null,form:d.form}),"new"!==s&&j.getScript({id:s})}),[s]);var m=j.state.shouldSaveForm;return f.a.useEffect((function(){m&&(j.saveScript({redirectOnSuccess:!1}),j.setState({shouldSaveForm:!1}))}),[m]),f.a.createElement(h.Provider,{value:j},f.a.createElement(t,e))}}},253:function(t,e,r){"use strict";r.d(e,"g",(function(){return s})),r.d(e,"i",(function(){return u})),r.d(e,"d",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return O})),r.d(e,"h",(function(){return d})),r.d(e,"c",(function(){return b})),r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return h}));var n=r(12),c=r.n(n),o=r(55);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/get-scripts",a({body:t},e))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/update-scripts",a({method:"POST",body:t},e))},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/delete-script",a({method:"POST",body:t},e))},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/duplicate-script",a({method:"POST",body:t},e))},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/get-script",a({body:t},e))},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/update-script",a({method:"POST",body:t},e))},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/create-script",a({method:"POST",body:t},e))},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/copy-screens",a({method:"POST",body:t},e))},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object(o.a)("/copy-diagnoses",a({method:"POST",body:t},e))}},256:function(t,e,r){"use strict";var n=r(12),c=r.n(n),o=r(13),i=r(97),a=r.n(i);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=function(){var t=Object(o.h)(),e=Object(o.g)(),r=Object(o.j)(),n=a.a.parse(t.search);return{location:t,history:e,match:r,queryStringParsed:n,objectToQueryString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"?".concat(a.a.stringify(u(u({},n),t)))}}}},357:function(t,e,r){"use strict";r.r(e);var n=r(0),c=r.n(n),o=r(246),i=r(13),a=r(39),s=Object(a.a)((function(){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(18),r.e(16)]).then(r.bind(null,388))})),u=Object(a.a)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(7)]).then(r.bind(null,384))})),p=Object(a.a)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(8)]).then(r.bind(null,386))}));e.default=Object(o.a)((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/scripts/:scriptId",component:s}),c.a.createElement(i.b,{exact:!0,path:"/scripts/:scriptId/:scriptSection",component:s}),c.a.createElement(i.b,{exact:!0,path:"/scripts/:scriptId/screens/:screenId",component:u}),c.a.createElement(i.b,{exact:!0,path:"/scripts/:scriptId/diagnoses/:diagnosisId",component:p}),c.a.createElement(i.b,{path:"*",render:function(){return c.a.createElement(i.a,{to:""})}})))}))},358:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return s}));var n=r(12),c=r.n(n),o=r(253);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loadingScript:!0});var r=function(e,r){t.setState((function(t){var n=t.form;return a(a({initialiseScriptError:e,scriptInitialised:!0,loadingScript:!1},r),{},{form:a(a({},n),e?{}:r.script?r.script.data:{})})}))};o.f(e).then((function(t){return r(t.errors,t)})).catch(r)}},359:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return f}));var n=r(12),c=r.n(n),o=r(9),i=r.n(o),a=r(253),s=r(95);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.setState,r=this.router,n=r.history,c=r.match.params.scriptId,o=this.state,u=o.script,f=o.form,O=t.redirectOnSuccess,d=i()(t,["redirectOnSuccess"]),b=!1!==O;e({savingScript:!0});var l=function(t,r){t&&alert("Error(s):\n".concat(Object(s.a)(t))),e((function(e){var n=e.form;return{saveScriptError:t,savingScript:!1,form:p(p({},n),t?{}:r.script?r.script.data:{})}}))},h=u?a.h:a.c,v=JSON.stringify(p(p({},f),d));h(p(p({script_id:c,type:f.type},u),{},{data:v})).then((function(t){b&&t.script&&n.push("/scripts".concat(u?"":"/".concat(t.script.id))),l(t.errors,t)})).catch(l)}}}]);