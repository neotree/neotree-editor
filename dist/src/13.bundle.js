(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{139:function(e,t,n){"use strict";var a=n(3),i=n.n(a),l=n(124),o=n.n(l),r=n(0),c=n.n(r),u=n(133),s=n(132),f={UPDATE:"UPDATE",updateState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"UPDATE",partialState:e}}},d=function(){var e={};try{e=__$APP__}catch(t){e={fatal_error:t}}return e}(),g=Object(s.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;if(t.type===f.UPDATE){var n=i()({},e);return n=i()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},d,f),p=n(155),y=n(119),m=n(121),h=n(12),C=n(42),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return Object(h.f)(function(n){var a=n.match,l=Object(u.a)(),r=o()(l,3),s=r[0].data,f=r[1],d=r[2],h=g(),E=o()(h,1)[0].host,b=c.a.createElement(t,n);if(!e||e&&!e.map)return b;var K=s?s[Object.keys(s)[0]]:null;return c.a.createElement(c.a.Fragment,null,K?c.a.createElement(p.a,null,c.a.createElement("div",{className:"ui__flex ui__alignItems_center"},c.a.createElement("span",null,Object.keys(s)[0]," copied (",K.ids.length,")")," ",c.a.createElement(y.Button,{disabled:!e.includes(Object.keys(s)[0]),onClick:function(){var e={};a.params.scriptId&&(e={dataId:a.params.scriptId,dataType:"script"}),C.a.post("/copy-data",{destination:i()({},e,{host:E}),source:{host:E,ids:K.ids,dataType:Object.keys(s)[0]}}).then(function(){window.location.reload()}).catch(console.log)}},"Paste"),"  ",c.a.createElement("div",{className:"ui__cursor_pointer ui__flex ui__alignItems_center",onClick:function(){f(d.updateState({data:null}))}},c.a.createElement(m.e,null)))):null,b)})}},b=n(10),K=n.n(b),v=n(24),D=n.n(v),S=n(43),_=n.n(S),k=n(16),x=n.n(k),T=n(2),j=n.n(T),w=n(41),I=function(e){var t=e.container,n=e.data,a=e.children,l=e.host,r=(e.actions,x()(e,["container","data","children","host","actions"])),s=Object(u.a)(),f=o()(s,3),d=f[0],g=f[1],p=f[2],y=t||c.a.Fragment;return c.a.createElement(y,null,c.a.createElement("div",K()({},r,{onClick:function(e){var t,a,o=(d.data?d.data[n.dataType]:null)||{host:l,ids:[]},c=(t=n.dataId?n.dataId.map?n.dataId:[n.dataId]:[],a=o.ids,t.forEach(function(e){a=a.includes(e)?a.filter(function(t){return t!==e}):[].concat(_()(a),[e])}),a);g(p.updateState({data:c.length?D()({},n.dataType,i()({},o,{ids:c})):null})),r.onClick&&r.onClick(e)}}),a))};I.propTypes={children:j.a.node,data:j.a.object.isRequired,onClick:j.a.func};Object(w.a)(I,function(e){return{host:e.$APP.host}});n.d(t,"a",function(){return E})},145:function(e,t,n){"use strict";var a=n(0),i=n.n(a),l=n(2),o=function(e){var t=e.children,n=e.options;n=n||{allScripts:!0,allConfigKeys:!0};var a="";return Object.keys(n).forEach(function(e,t){a+="".concat(e,"=").concat(n[e]),t<Object.keys(n).length-1&&(a+="&")}),i.a.createElement("a",{target:"_blank",style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},rel:"noopener noreferrer",href:"/export-data?".concat(a)},t||"Export")};o.propTypes={options:n.n(l).a.object},t.a=o},409:function(e,t,n){"use strict";n.r(t);var a=n(10),i=n.n(a),l=n(124),o=n.n(l),r=n(0),c=n.n(r),u=n(2),s=n.n(u),f=n(26),d=n(12),g=n(3),p=n.n(g),y=n(132),m={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},h={configKeys:[]},C=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;if(t.type===m.UPDATE){var n=p()({},e);return p()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},h,m),E=n(42),b=n(52),K=n(43),v=n.n(K),D=n(19),S=n.n(D),_=n(20),k=n.n(_),x=n(21),T=n.n(x),j=n(22),w=n.n(j),I=n(25),O=n.n(I),A=n(23),P=n.n(A),N=n(24),B=n.n(N),F=(n(41),n(119)),U=n(121),z=n(139),J=n(145),L=function(e){function t(e){var n;return S()(this,t),n=T()(this,w()(t).call(this,e)),B()(O()(n),"toggleClipboardPasteBox",function(){return n.setState({openClipboardPasteBox:!n.state.openClipboardPasteBox})}),B()(O()(n),"handleInputChange",function(e,t){return n.setState(p()({},n.state,B()({},e,t.target.value)))}),B()(O()(n),"handleCreateClick",function(){var e=n.props.updateState,t=n.state,a=t.configKey,i=t.label,l=t.summary;n.setState({creatingConfigKey:!0}),E.a.post("/create-config-key",{data:JSON.stringify({configKey:a,label:i,summary:l})}).then(function(t){var a=t.payload;n.setState({creatingConfigKey:!1}),e(function(e){return{configKeys:[a.configKey].concat(v()(e.configKeys))}}),n.closeCreateConfigKeyDialog()}).catch(function(e){return n.setState({createConfigKeyError:e,creatingConfigKey:!1})})}),B()(O()(n),"handleDeleteClick",function(){var e=n.props.updateState,t=n.state.configKeyIdForAction;n.setState({deletingConfigKey:!0}),E.a.post("/delete-config-key",{id:t}).then(function(){n.setState({deletingConfigKey:!1}),e(function(e){return{configKeys:e.configKeys.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()}).catch(function(e){return n.setState({deleteConfigKeyError:e,deletingConfigKey:!1})})}),B()(O()(n),"openCreateConfigKeyDialog",function(){return n.setState(p()({},n.state,{openCreateConfigKeyDialog:!0}))}),B()(O()(n),"closeCreateConfigKeyDialog",function(){return n.setState(p()({},n.state,{openCreateConfigKeyDialog:!1,configKey:"",label:"",summary:""}))}),B()(O()(n),"openDeleteConfirmDialog",function(e){return n.setState(p()({},n.state,{openDeleteConfirmDialog:!0,configKeyIdForAction:e}))}),B()(O()(n),"closeDeleteConfirmDialog",function(){return n.setState(p()({},n.state,{openDeleteConfirmDialog:!1,configKeyIdForAction:null,deleteConfigKeyError:null,createConfigKeyError:null}))}),B()(O()(n),"handleDuplicateKey",function(e){var t=n.props.updateState;n.setState({duplicatingConfigKey:!0}),E.a.post("/duplicate-config-key",{id:e}).then(function(a){var i=a.payload;n.setState({duplicatingConfigKey:!1}),t(function(t){var n=v()(t.configKeys),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,i.configKey),{configKeys:n}})}).catch(function(e){return n.setState({duplicateConfigKeyError:e,duplicatingConfigKey:!1})})}),n.state={openDeleteConfirmDialog:!1,openCreateConfigKeyDialog:!1,configKeyIdForAction:"",configKey:"",label:"",summary:""},n}return P()(t,e),k()(t,[{key:"render",value:function(){var e=this,t=this.props.configKeys,n=this.state,a=n.configKey,i=n.label,l=n.summary,o=n.deletingConfigKey,r=n.deleteConfigKeyError,u=n.creatingConfigKey,s=n.createConfigKeyError,f={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"780px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},d=c.a.createElement(F.Dialog,{open:this.state.openCreateConfigKeyDialog,style:{width:"540px"}},c.a.createElement(F.DialogContent,null,c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",onChange:this.handleInputChange.bind(this,"configKey"),value:a}),c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Label",onChange:this.handleInputChange.bind(this,"label"),value:i}),c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Summary",onChange:this.handleInputChange.bind(this,"summary"),value:l}),s?c.a.createElement("div",{className:"ui__dangerColor ui__textAlign_center"},s.msg||s.message||JSON.stringify(s)):null),c.a.createElement(F.DialogActions,null,[u?null:c.a.createElement(F.Button,{type:"button",onClick:this.handleCreateClick,accent:!0},"Create"),u?null:c.a.createElement(F.Button,{type:"button",onClick:this.closeCreateConfigKeyDialog},"Cancel"),u?c.a.createElement(b.a,{size:25}):null].map(function(e,t){return e&&c.a.cloneElement(e,{key:t})}))),g=c.a.createElement(F.Dialog,{open:this.state.openDeleteConfirmDialog},[c.a.createElement(F.DialogContent,null,o?c.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}):c.a.createElement("div",null,r?c.a.createElement("div",{className:"ui__dangerColor"},r.msg||r.message||JSON.stringify(r)):c.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),o?null:c.a.createElement(F.DialogActions,null,c.a.createElement(F.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),c.a.createElement(F.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&c.a.cloneElement(e,{key:t})})),y=c.a.createElement("div",null,c.a.createElement(F.DataTable,{style:{width:"780px"},shadow:0,rows:t.map(function(e){return p()({id:e.id},e.data)})},c.a.createElement(F.TableHeader,{name:"configKey"},"Key"),c.a.createElement(F.TableHeader,{name:"label"},"Label"),c.a.createElement(F.TableHeader,{name:"summary"},"Summary"),c.a.createElement(F.TableHeader,{name:"id",style:{width:"32px"},cellFormatter:function(t,n,a){var i="more-user-action-menu".concat(a);return c.a.createElement("div",null,c.a.createElement("div",{style:{position:"relative",color:"#999999"},className:"ui__flex ui__alignItems_center"}," ",c.a.createElement("div",{id:i,className:"ui__cursor_pointer"},c.a.createElement(U.j,{style:{fontSize:"24px"}})),c.a.createElement(F.Menu,{target:i,align:"right"},c.a.createElement(F.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),c.a.createElement(F.MenuItem,{onClick:function(){return e.handleDuplicateKey(t)}},"Duplicate"),c.a.createElement(F.MenuItem,null,c.a.createElement(J.a,{options:{configKey:t}})))))}}))),m=c.a.createElement(F.Card,{shadow:0,style:{width:"420px"}},c.a.createElement(F.CardTitle,null,"There are no configuration keys"),c.a.createElement(F.CardText,null,c.a.createElement("span",null,"To create your first configuration key click on the orange icon at the bottom right of the window."),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null)));return c.a.createElement("div",null,c.a.createElement(F.FABButton,{style:f.fab,colored:!0,ripple:!0,onClick:this.openCreateConfigKeyDialog},c.a.createElement(U.a,{style:{fontSize:"24px"}})),c.a.createElement("div",{style:f.container},t&&t.length>0?y:m),d,g)}}]),t}(r.Component),H=Object(z.a)(["configKey"])(L),M=function(e){var t=Object(r.useState)(!1),n=o()(t,2),a=n[0],l=n[1],u=Object(r.useState)(null),s=o()(u,2),f=(s[0],s[1]),d=C(),g=o()(d,3),p=g[0].configKeys,y=g[1],m=g[2];return Object(r.useEffect)(function(){l(!0),E.a.get("/get-config-keys").then(function(e){var t=e.payload;l(!1),y(m.updateState({configKeys:t.configKeys||[]}))}).catch(function(e){l(!1),f(e)})},[]),c.a.createElement("div",null,!p.length&&a&&c.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}),!p.length&&a?null:c.a.createElement(H,i()({},e,{configKeys:p,updateState:function(e){return y(m.updateState(e))}})))};M.propTypes={match:s.a.object};t.default=Object(f.hot)(Object(d.f)(M))}}]);