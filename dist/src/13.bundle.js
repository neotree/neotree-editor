(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{267:function(e,t,n){"use strict";var a=n(37),r=n(146);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),i=(0,a(n(147)).default)(c.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=i},316:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Diagnoses"}},319:function(e,t,n){"use strict";var a=n(45),r=n.n(a),c=n(15),i=n.n(c),s=n(25),o=n.n(s),l=n(16),u=n.n(l),d=n(34),p=n.n(d),m=n(0),f=n.n(m),g=n(4),v=n.n(g),E=n(231),y=n(229),h=n(228),w=n(227),b=n(143),O=n(142),k=n(225),S=n(14),C=n.n(S),j=n(62);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=["children","items","type","onClick","onSuccess"],T=f.a.forwardRef((function(e,t){var n=e.children,a=e.items,c=e.type,s=e.onClick,l=e.onSuccess,d=u()(e,P),m=a.length>1,g=f.a.useState(!1),v=o()(g,2),S=v[0],C=v[1],x=f.a.useState(!1),T=o()(x,2),R=T[0],D=T[1],F=f.a.useState(!1),N=o()(F,2),q=N[0],A=N[1],J=f.a.useState([]),M=o()(J,2),W=M[0],_=M[1],z=f.a.useState(null),G=o()(z,2),L=G[0],V=G[1],B=f.a.useState(!1),H=o()(B,2),K=H[0],Q=H[1],U=f.a.useState(""),X=o()(U,2),Y=X[0],Z=X[1],$=f.a.useState(!1),ee=o()($,2),te=ee[0],ne=ee[1];f.a.useEffect((function(){V(null),Z(null),S&&!q&&(D(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(j.a)("/get-scripts",I({body:e},t))}().then((function(e){var t=e.error,n=e.scripts;if(t)return V(t);_(n),A(!0),D(!1)})).then((function(e){V(e),D(!1)})))}),[S]);var ae=m?"diagnosis"===c?"diagnoses":"screens":c;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",i()({},d,{ref:t,onClick:function(e){C(!0),s&&s(e)}}),n),f.a.createElement(E.a,{open:S,onClose:function(){return C(!1)},fullWidth:!0,maxWidth:"sm"},f.a.createElement(w.a,null,"Copy ",ae),R?f.a.createElement(h.a,null,f.a.createElement("div",{style:{textAlign:"center"}},f.a.createElement(k.a,null))):f.a.createElement(f.a.Fragment,null,f.a.createElement(h.a,null,f.a.createElement(O.a,null,"Copy to"),f.a.createElement("select",{value:Y||"",style:{maxWidth:200,background:"transparent",border:"1px solid #ddd",padding:10,outline:"none !important"},onChange:function(e){return Z(e.target.value)}},f.a.createElement("option",{value:""},"Select script"),W.map((function(e,t){return f.a.createElement("option",{key:t,value:e.scriptId},e.title)})))),f.a.createElement(y.a,null,f.a.createElement(b.a,{disabled:K,onClick:function(){return C(!1)}},"Cancel"),f.a.createElement(b.a,{color:"primary",variant:"contained",disabled:K||!Y,onClick:function(){var e=null;switch(c){case"screen":e="/copy-screens";break;case"diagnosis":e="/copy-diagnoses"}e&&r()(p.a.mark((function t(){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q(!0),t.prev=1,t.next=4,fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({items:a,targetScriptId:Y})});case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,(c=r.errors)&&c.length?alert(JSON.stringify(c)):(ne(!0),l&&l(a,Y)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),alert(t.t0.message);case 15:Q(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()}},"Copy"),L?f.a.createElement(O.a,{variant:"caption",color:"error"},L.msg||L.message||JSON.stringify(L)):null))),f.a.createElement(E.a,{open:te,onClose:function(){return ne(!1)},fullWidth:!0,maxWidth:"sm"},f.a.createElement(h.a,null,f.a.createElement("div",{style:{textAlign:"center"}},f.a.createElement(O.a,null,"Copied ",f.a.createElement("b",null,ae)," successfully."))),f.a.createElement(y.a,null,f.a.createElement(b.a,{accent:!0,onClick:function(){C(!1),ne(!1)}},"OK"))))}));T.propTypes={onClick:v.a.func,children:v.a.node,items:v.a.arrayOf(v.a.shape({diagnosisId:v.a.string,screenId:v.a.string,scriptId:v.a.string.isRequired})).isRequired,onSuccess:v.a.func,type:v.a.oneOf(["screen","diagnosis"]).isRequired};t.a=T},336:function(e,t,n){"use strict";var a=n(15),r=n.n(a),c=n(0),i=n.n(c),s=n(20),o=n(319),l=i.a.forwardRef((function(e,t){var n=Object(s.h)().scriptId;return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,r()({},e,{ref:t,type:"diagnosis",onSuccess:function(e,t){n===t&&window.location.reload()}})))}));t.a=l},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),i=n.n(c),s=n(254),o=n(268),l=n.n(o),u=n(143),d=n(20),p=n(32),m=n(381),f=n(336);function g(e){var t=e.selected,n=Object(d.h)().scriptId;return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{items:t.map((function(e){var t=e.row;return{diagnosisId:t.diagnosisId,scriptId:t.scriptId,id:t.id}}))},r.a.createElement(u.a,null,"Copy"))),r.a.createElement(p.b,{to:"/scripts/".concat(n,"/diagnoses/new")},r.a.createElement(m.a,{title:"New diagnosis"},r.a.createElement(s.a,null,r.a.createElement(l.a,null)))))}g.propTypes={selected:i.a.array.isRequired},t.default=function(e){return r.a.createElement(g,e)}},366:function(e,t,n){"use strict";n.r(t);var a=n(25),r=n.n(a),c=n(0),i=n.n(c),s=n(4),o=n.n(s),l=n(254),u=n(267),d=n.n(u),p=n(367),m=n(259),f=n(142),g=n(32),v=n(31),E=n(45),y=n.n(E),h=n(15),w=n.n(h),b=n(16),O=n.n(b),k=n(34),S=n.n(k),C=n(107),j=n(60),x=["children","diagnoses","onClick"],I=i.a.forwardRef((function(e,t){var n=e.children,a=e.diagnoses,c=e.onClick,s=O()(e,x),o=a.length>1,l=Object(C.a)(),u=r()(l,2),d=u[0],p=u[1],m=i.a.useState(!1),f=r()(m,2),g=f[0],v=f[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",w()({},s,{ref:t,onClick:function(e){p(),c&&c(e)}}),n),d({title:"Delete diagnosis".concat(o?"s":""),message:"Are you sure you want to delete diagnosis".concat(o?"s":"","?"),onConfirm:function(){y()(S.a.mark((function e(){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,fetch("/delete-diagnoses",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({diagnoses:a})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,(r=n.errors)&&r.length?alert(JSON.stringify(r)):window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:v(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}),g?i.a.createElement(j.a,null):null)}));I.propTypes={onClick:o.a.func,children:o.a.node,diagnoses:o.a.arrayOf(o.a.shape({id:o.a.number.isRequired})).isRequired};var P=I,T=n(336);function R(e){var t=e.row,n=Object(v.d)().state.viewMode,a=i.a.useState(null),c=r()(a,2),s=c[0],o=c[1],u=function(){return o(null)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{onClick:function(e){return o(e.currentTarget)}},i.a.createElement(d.a,null)),i.a.createElement(p.a,{anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u},i.a.createElement(m.a,{component:g.b,to:"/scripts/".concat(t.scriptId,"/diagnoses/").concat(t.id),onClick:u},"view"===n?"View":"Edit"),"view"===n?null:i.a.createElement(m.a,{onClick:u,items:[{diagnosisId:t.diagnosisId,scriptId:t.scriptId,id:t.id}],component:T.a},"Copy"),"view"===n?null:i.a.createElement(m.a,{onClick:u,diagnoses:[{id:t.id}],component:P},i.a.createElement(f.a,{color:"error"},"Delete"))))}R.propTypes={row:o.a.object.isRequired,rowIndex:o.a.number.isRequired};t.default=function(e,t){return i.a.createElement(R,{row:e,rowIndex:t})}},390:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),c=n(25),i=n.n(c),s=n(34),o=n.n(s),l=n(0),u=n.n(l),d=n(20),p=n(269),m=n(225),f=n(316),g=n(31);t.default=function(){var e=Object(g.d)().state.viewMode,t=Object(d.h)().scriptId,a=u.a.useState([]),c=i()(a,2),s=c[0],l=c[1],v=u.a.useState(!1),E=i()(v,2),y=E[0],h=E[1],w=u.a.useState(!1),b=i()(w,2),O=b[0],k=b[1];return u.a.useEffect((function(){r()(o.a.mark((function e(){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,fetch("/get-diagnoses?scriptId=".concat(t));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.diagnoses,l(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:h(!0),k(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}),[]),u.a.createElement(u.a.Fragment,null,y?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{selectable:"view"!==e,noDataMsg:"No diagnoses",title:f.a.PAGE_TITLE,data:s,renderHeaderActions:"view"===e?null:n(361).default,renderRowAction:n(366).default,displayFields:[{key:"position",label:"Position",render:function(e){return e.row.position}},{key:"name",label:"Name"},{key:"description",label:"Description"}],onSortData:"view"===e?void 0:function(e){l(e),r()(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/update-diagnoses",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({diagnoses:e.map((function(e){return{id:e.id,position:e.position}}))})});case 3:return n=t.sent,t.next=6,n.json();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}})):null,O&&u.a.createElement("div",{style:{margin:25,textAlign:"center"}},u.a.createElement(m.a,null)))}}}]);