(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{132:function(e,t,n){var a=n(143),i=n(144),r=n(145);e.exports=function(e,t){return a(e)||i(e,t)||r()}},135:function(e,t,n){"use strict";var a=n(0),i=function(){return Object(a.useReducer)(function(e){return!e},!1)[1]};t.a=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var l=[],c=t,u=function(t){c=e(c,t),l.forEach(function(e){return e()})},f=function(){var e=i();return Object(a.useEffect)(function(){var t=function(){return e()};l.push(t),t();return function(){var e=l.indexOf(t);l.splice(e,1)}},[]),[c,u].concat(r)};return f}},143:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},144:function(e,t){e.exports=function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}},145:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},146:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(2),o=function(e){var t=e.children,n=e.options;n=n||{allScripts:!0,allConfigKeys:!0};var a="";return Object.keys(n).forEach(function(e,t){a+="".concat(e,"=").concat(n[e]),t<Object.keys(n).length-1&&(a+="&")}),i.a.createElement("a",{target:"_blank",style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},rel:"noopener noreferrer",href:"/export-data?".concat(a)},t||"Export")};o.propTypes={options:n.n(r).a.object},t.a=o},403:function(e,t,n){"use strict";n.r(t);var a=n(10),i=n.n(a),r=n(132),o=n.n(r),l=n(0),c=n.n(l),u=n(2),f=n.n(u),s=n(26),g=n(12),y=n(3),p=n.n(y),m=n(135),d={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},h={configKeys:[]},C=Object(m.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;if(t.type===d.UPDATE){var n=p()({},e);return p()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},h,d),E=n(42),b=n(52),K=n(43),v=n.n(K),D=n(19),S=n.n(D),x=n(20),k=n.n(x),_=n(21),w=n.n(_),T=n(22),A=n.n(T),j=n(25),I=n.n(j),O=n(23),B=n.n(O),N=n(24),P=n.n(N),F=(n(41),n(120)),z=n(123),J=n(146),L=function(e){function t(e){var n;return S()(this,t),n=w()(this,A()(t).call(this,e)),P()(I()(n),"toggleClipboardPasteBox",function(){return n.setState({openClipboardPasteBox:!n.state.openClipboardPasteBox})}),P()(I()(n),"handleInputChange",function(e,t){return n.setState(p()({},n.state,P()({},e,t.target.value)))}),P()(I()(n),"handleCreateClick",function(){var e=n.props.updateState,t=n.state,a=t.configKey,i=t.label,r=t.summary;n.setState({creatingConfigKey:!0}),E.a.post("/create-config-key",{data:JSON.stringify({configKey:a,label:i,summary:r})}).then(function(t){var a=t.payload;n.setState({creatingConfigKey:!1}),e(function(e){return{configKeys:[a.configKey].concat(v()(e.configKeys))}}),n.closeCreateConfigKeyDialog()}).catch(function(e){return n.setState({createConfigKeyError:e,creatingConfigKey:!1})})}),P()(I()(n),"handleDeleteClick",function(){var e=n.props.updateState,t=n.state.configKeyIdForAction;n.setState({deletingConfigKey:!0}),E.a.post("/delete-config-key",{id:t}).then(function(){n.setState({deletingConfigKey:!1}),e(function(e){return{configKeys:e.configKeys.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()}).catch(function(e){return n.setState({deleteConfigKeyError:e,deletingConfigKey:!1})})}),P()(I()(n),"openCreateConfigKeyDialog",function(){return n.setState(p()({},n.state,{openCreateConfigKeyDialog:!0}))}),P()(I()(n),"closeCreateConfigKeyDialog",function(){return n.setState(p()({},n.state,{openCreateConfigKeyDialog:!1,configKey:"",label:"",summary:""}))}),P()(I()(n),"openDeleteConfirmDialog",function(e){return n.setState(p()({},n.state,{openDeleteConfirmDialog:!0,configKeyIdForAction:e}))}),P()(I()(n),"closeDeleteConfirmDialog",function(){return n.setState(p()({},n.state,{openDeleteConfirmDialog:!1,configKeyIdForAction:null,deleteConfigKeyError:null,createConfigKeyError:null}))}),P()(I()(n),"handleDuplicateKey",function(e){var t=n.props.updateState;n.setState({duplicatingConfigKey:!0}),E.a.post("/duplicate-config-key",{id:e}).then(function(a){var i=a.payload;n.setState({duplicatingConfigKey:!1}),t(function(t){var n=v()(t.configKeys),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,i.configKey),{configKeys:n}})}).catch(function(e){return n.setState({duplicateConfigKeyError:e,duplicatingConfigKey:!1})})}),n.state={openDeleteConfirmDialog:!1,openCreateConfigKeyDialog:!1,configKeyIdForAction:"",configKey:"",label:"",summary:""},n}return B()(t,e),k()(t,[{key:"render",value:function(){var e=this,t=this.props.configKeys,n=this.state,a=n.configKey,i=n.label,r=n.summary,o=n.deletingConfigKey,l=n.deleteConfigKeyError,u=n.creatingConfigKey,f=n.createConfigKeyError,s={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"780px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},g=c.a.createElement(F.Dialog,{open:this.state.openCreateConfigKeyDialog,style:{width:"540px"}},c.a.createElement(F.DialogContent,null,c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",onChange:this.handleInputChange.bind(this,"configKey"),value:a}),c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Label",onChange:this.handleInputChange.bind(this,"label"),value:i}),c.a.createElement(F.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Summary",onChange:this.handleInputChange.bind(this,"summary"),value:r}),f?c.a.createElement("div",{className:"ui__dangerColor ui__textAlign_center"},f.msg||f.message||JSON.stringify(f)):null),c.a.createElement(F.DialogActions,null,[u?null:c.a.createElement(F.Button,{type:"button",onClick:this.handleCreateClick,accent:!0},"Create"),u?null:c.a.createElement(F.Button,{type:"button",onClick:this.closeCreateConfigKeyDialog},"Cancel"),u?c.a.createElement(b.a,{size:25}):null].map(function(e,t){return e&&c.a.cloneElement(e,{key:t})}))),y=c.a.createElement(F.Dialog,{open:this.state.openDeleteConfirmDialog},[c.a.createElement(F.DialogContent,null,o?c.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}):c.a.createElement("div",null,l?c.a.createElement("div",{className:"ui__dangerColor"},l.msg||l.message||JSON.stringify(l)):c.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),o?null:c.a.createElement(F.DialogActions,null,c.a.createElement(F.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),c.a.createElement(F.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&c.a.cloneElement(e,{key:t})})),m=c.a.createElement("div",null,c.a.createElement(F.DataTable,{style:{width:"780px"},shadow:0,rows:t.map(function(e){return p()({id:e.id},e.data)})},c.a.createElement(F.TableHeader,{name:"configKey"},"Key"),c.a.createElement(F.TableHeader,{name:"label"},"Label"),c.a.createElement(F.TableHeader,{name:"summary"},"Summary"),c.a.createElement(F.TableHeader,{name:"id",style:{width:"32px"},cellFormatter:function(t,n,a){var i="more-user-action-menu".concat(a);return c.a.createElement("div",null,c.a.createElement("div",{style:{position:"relative",color:"#999999"},className:"ui__flex ui__alignItems_center"},c.a.createElement("div",{id:i,className:"ui__cursor_pointer"},c.a.createElement(z.i,{style:{fontSize:"24px"}})),c.a.createElement(F.Menu,{target:i,align:"right"},c.a.createElement(F.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),c.a.createElement(F.MenuItem,{onClick:function(){return e.handleDuplicateKey(t)}},"Duplicate"),c.a.createElement(F.MenuItem,null,c.a.createElement(J.a,{options:{configKey:t}})))))}}))),d=c.a.createElement(F.Card,{shadow:0,style:{width:"420px"}},c.a.createElement(F.CardTitle,null,"There are no configuration keys"),c.a.createElement(F.CardText,null,c.a.createElement("span",null,"To create your first configuration key click on the orange icon at the bottom right of the window."),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null)));return c.a.createElement("div",null,c.a.createElement(F.FABButton,{style:s.fab,colored:!0,ripple:!0,onClick:this.openCreateConfigKeyDialog},c.a.createElement(z.a,{style:{fontSize:"24px"}})),c.a.createElement("div",{style:s.container},t&&t.length>0?m:d),g,y)}}]),t}(l.Component),H=function(e){var t=Object(l.useState)(!1),n=o()(t,2),a=n[0],r=n[1],u=Object(l.useState)(null),f=o()(u,2),s=(f[0],f[1]),g=C(),y=o()(g,3),p=y[0].configKeys,m=y[1],d=y[2];return Object(l.useEffect)(function(){r(!0),E.a.get("/get-config-keys").then(function(e){var t=e.payload;r(!1),m(d.updateState({configKeys:t.configKeys||[]}))}).catch(function(e){r(!1),s(e)})},[]),c.a.createElement("div",null,!p.length&&a&&c.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}),!p.length&&a?null:c.a.createElement(L,i()({},e,{configKeys:p,updateState:function(e){return m(d.updateState(e))}})))};H.propTypes={match:f.a.object};t.default=Object(s.hot)(Object(g.f)(H))}}]);