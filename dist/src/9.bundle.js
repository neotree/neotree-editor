(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{124:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a=n(10),i=n.n(a),l=n(16),o=n.n(l),s=n(19),r=n.n(s),c=n(20),d=n.n(c),m=n(21),p=n.n(m),u=n(22),h=n.n(u),f=n(25),g=n.n(f),y=n(23),E=n.n(y),v=n(24),I=n.n(v),x=n(0),C=n.n(x),D=n(2),b=n.n(D),S=n(34),w=n.n(S),N=n(120),k=n(123),T=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=p()(this,(e=h()(t)).call.apply(e,[this].concat(i))),I()(g()(n),"handleLeftNavClick",function(){n.props.onLeftNavItemClicked&&n.props.onLeftNavItemClicked()}),n}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.hideSpacer,l=e.leftNavIcon,s=(e.onLeftNavItemClicked,e.title),r=(e.transparent,o()(e,["children","className","hideSpacer","leftNavIcon","onLeftNavItemClicked","title","transparent"])),c=w()(n,"mdl-toolbar__header","mdl-layout__header","mdl-layout__header--transparent"),d=w()("mdl-toolbar__header-row",{"mdl-toolbar__header-row-with-left-icon":l}),m=w()("mdl-toolbar__left-nav"),p=w()("mdl-toolbar__right-nav");return C.a.createElement("header",i()({className:c},r),l?C.a.createElement("div",{className:w()(m,"ui__cursor_pointer"),style:{fontSize:"24px"},onClick:this.handleLeftNavClick},C.a.createElement(k.b,null)):C.a.createElement("div",{style:{width:"24px"}}),C.a.createElement(N.HeaderRow,{className:d,title:s||"",hideSpacer:a},t?C.a.createElement(N.Navigation,{className:p},t):null))}}]),t}(x.Component);T.propTypes={className:b.a.string,title:b.a.node,leftNavIcon:b.a.string,onLeftNavItemClicked:b.a.func,hideSpacer:b.a.bool}},126:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return r});var a={COMPUTE:"compute",DATE_NOW:"date_now",DATE_NOON:"date_noon",DATE_MIDNIGHT:"date_midnight",EMPTY:"",UID:"uid"},i={BOOLEAN:"boolean",DATETIME:"datetime",DATE:"date",ID:"id",NUMBER:"number",PERIOD:"period",SET_ID:"set<id>",STRING:"string",TIME:"time",VOID:"void"},l={DATE:"date",DATETIME:"datetime",DROPDOWN:"dropdown",NUMBER:"number",PERIOD:"period",TEXT:"text",TIME:"time"},o={CHECKLIST:"checklist",FORM:"form",LIST:"list",MANAGEMENT:"management",MULTI_SELECT:"multi_select",PROGRESS:"progress",SINGLE_SELECT:"single_select",TIMER:"timer",YESNO:"yesno"},s={SIGN:"sign",RISK:"risk"},r=o.CHECKLIST},129:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(10),i=n.n(a),l=n(16),o=n.n(l),s=n(19),r=n.n(s),c=n(20),d=n.n(c),m=n(21),p=n.n(m),u=n(22),h=n.n(u),f=n(23),g=n.n(f),y=n(0),E=n.n(y),v=function(e){function t(){return r()(this,t),p()(this,h()(t).apply(this,arguments))}return g()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=o()(e,["children"]);return E.a.createElement("div",i()({style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"16px",marginBottom:"8px"}},n),t)}}]),t}(y.Component)},131:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var a=n(10),i=n.n(a),l=n(16),o=n.n(l),s=n(19),r=n.n(s),c=n(20),d=n.n(c),m=n(21),p=n.n(m),u=n(22),h=n.n(u),f=n(23),g=n.n(f),y=n(0),E=n.n(y),v=n(2),I=n.n(v),x=n(34),C=n.n(x),D=function(e){function t(){return r()(this,t),p()(this,h()(t).apply(this,arguments))}return g()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,a=e.style,l=e.topSpace,s=o()(e,["className","label","style","topSpace"]),r=C()(t,"mdl-form-section",{"mdl-form-section-top-space":l});return E.a.createElement("div",i()({className:r,style:a},s),n)}}]),t}(y.Component);D.propTypes={className:I.a.string,style:I.a.object,label:I.a.node,topSpace:I.a.bool}},138:function(e,t,n){"use strict";function a(e,t,n){if(n>=e.length)for(var a=n-e.length;1+a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}n.d(t,"a",function(){return a})},174:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var a=n(3),i=n.n(a),l=n(19),o=n.n(l),s=n(20),r=n.n(s),c=n(21),d=n.n(c),m=n(22),p=n.n(m),u=n(25),h=n.n(u),f=n(23),g=n.n(f),y=n(24),E=n.n(y),v=n(0),I=n.n(v),x=n(2),C=n.n(x),D=n(120),b=n(123),S=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=d()(this,(e=p()(t)).call.apply(e,[this].concat(l))),E()(h()(n),"handleFormSubmit",function(e){e.preventDefault()}),E()(h()(n),"handleFileUploadRequest",function(e){console.log(e),n.uploadFileInput.click()}),E()(h()(n),"handleFileUploaded",function(e){var t=h()(n),a=e.target.files[0],l=new FileReader,o=n.props.onFileUploaded;l.onload=function(e){if(a.size<204800){var n={filename:a.name,size:a.size,type:a.type,data:e.target.result};t.setState(i()({},t.state,{fileInfo:n})),o(t.props.name,n)}},l.readAsDataURL(a)}),E()(h()(n),"handleFileDelete",function(e){var t=n.props.onFileDeleted;n.setState({fileInfo:null}),t(n.props.name)}),n}return g()(t,e),r()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.fileInfo;this.setState(i()({},this.state,{fileInfo:t}))}},{key:"render",value:function(){var e=this,t=(this.state||{}).fileInfo,n={container:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},imagePreview:{display:"block",maxWidth:"90px",maxHeight:"90px",width:"auto",height:"auto",marginBottom:"12px"},imagePreviewEmpty:{display:"flex",width:"90px",height:"90px",justifyContent:"center",alignItems:"center",marginBottom:"12px"},caption:{fontSize:"12px",fontWeight:"bold",fontStyle:"italic",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},iconLeft:{marginRight:"12px"},iconRight:{marginLeft:"12px"}},a=I.a.createElement("div",{style:n.imagePreviewEmpty},"No Image");return t&&t.data&&(a=I.a.createElement("img",{style:n.imagePreview,src:t.data})),I.a.createElement("div",{style:n.container},I.a.createElement("form",{style:{display:"none"},encType:"multipart-formdata",onSubmit:this.handleFormSubmit},I.a.createElement("input",{ref:function(t){return e.uploadFileInput=t},type:"file",onChange:this.handleFileUploaded})),I.a.createElement("div",null,a),I.a.createElement("div",{style:n.flexContainer},I.a.createElement("div",{style:n.iconLeft},I.a.createElement(D.FABButton,{mini:!0,colored:!0,onClick:this.handleFileUploadRequest.bind(this,"upload")},I.a.createElement(b.a,null))),I.a.createElement("div",{style:n.iconRight},I.a.createElement(D.FABButton,{mini:!0,onClick:this.handleFileDelete.bind(this,"delete")},I.a.createElement(b.d,null)))),I.a.createElement("div",{style:n.caption},"Max size 200 KB"))}}]),t}(v.Component);S.propTypes={name:C.a.string.isRequired,fileInfo:C.a.object,onFileUploaded:C.a.func.isRequired,onFileDeleted:C.a.func.isRequired}},398:function(e,t,n){"use strict";n.r(t);var a=n(19),i=n.n(a),l=n(20),o=n.n(l),s=n(21),r=n.n(s),c=n(22),d=n.n(c),m=n(25),p=n.n(m),u=n(23),h=n.n(u),f=n(24),g=n.n(f),y=n(0),E=n.n(y),v=n(2),I=n.n(v),x=n(26),C=n(12),D=n(41),b=n(3),S=n.n(b),w=n(120),N=n(174),k=n(129),T=(n(131),n(124)),_=n(123),R=n(126),L=(n(138),{openNewItemDialog:!1,openEditItemDialog:!1,openConfirmDeleteItemDialog:!1,actionItemIndex:null,itemType:null,itemName:null,itemExpression:null}),A=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=d()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",S()({},L)),g()(p()(n),"collectItemData",function(){var e=n.state,t=e.itemType,a=e.itemName,i=e.itemWeight,l=e.itemExpression;return{type:t||null,name:a||null,weight:i||null,expression:l||null}}),g()(p()(n),"handleInputChange",function(e,t){n.setState(S()({},n.state,g()({},e,t.target.value)))}),g()(p()(n),"handleItemActionClick",function(e){var t=n.state,a=t.actionItemIndex,i=t.items,l=(t.selectedIndex,t.swapIndex0,t.swapIndex1,n.collectItemData()),o=i||[],s=function(){};switch(e){case"add":o.push(l),s=n.closeNewItemDialog;break;case"delete":o.splice(a,1),s=n.closeConfirmDeleteItemDialog;break;case"update":o[a]=l,s=n.closeEditItemDialog}n.setState(S()({},n.state,{actionItemIndex:null,items:o})),n.props.onUpdateSymptoms({symptoms:o}),s()}),g()(p()(n),"openNewItemDialog",function(){console.log("openNewItemDialog()"),n.setState(S()({},n.state,{openNewItemDialog:!0}))}),g()(p()(n),"closeNewItemDialog",function(){console.log("closeNewItemDialog()"),n.setState(S()({},n.state,{},L))}),g()(p()(n),"openEditItemDialog",function(e){return function(){var t=n.state.items[e];n.setState(S()({},n.state,{openEditItemDialog:!0,actionItemIndex:e,itemType:t.type,itemName:t.name,itemWeight:t.weight,itemExpression:t.expression}))}}),g()(p()(n),"closeEditItemDialog",function(){n.setState(S()({},n.state,{},L))}),g()(p()(n),"openConfirmDeleteItemDialog",function(e){return function(){n.setState(S()({},n.state,{openConfirmDeleteItemDialog:!0,actionItemIndex:e}))}}),g()(p()(n),"closeConfirmDeleteItemDialog",function(){n.setState(S()({},n.state,{openConfirmDeleteItemDialog:!1,actionItemIndex:null}))}),n}return h()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){var t={items:e.items||[]};this.setState(t)}},{key:"render",value:function(){var e=this,t={dialog:{width:"460px"},container:{marginTop:"24px",width:"780px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"},flexRow:{display:"flex",flexDirection:"row"}},n=this.state,a=n.openNewItemDialog,i=n.openEditItemDialog,l=n.openConfirmDeleteItemDialog,o=n.itemType,s=n.itemName,r=n.itemWeight,c=n.itemExpression,d=n.items,m=E.a.createElement("div",null,E.a.createElement("p",null,"Type:"),E.a.createElement(w.RadioGroup,{container:"div",childContainer:"div",name:"itemType",value:o||"",onChange:this.handleInputChange.bind(this,"itemType")},E.a.createElement(w.Radio,{value:R.f.RISK,ripple:!0},"Risk factor"),E.a.createElement(w.Radio,{value:R.f.SIGN,ripple:!0},"Sign/Symptom")),E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Name",required:!0,onChange:this.handleInputChange.bind(this,"itemName"),value:s||""}),E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Weight",required:!1,pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"itemWeight"),value:r||""}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Must be in the range: 0.0 - 1.0 (",E.a.createElement("span",{style:{fontWeight:"bold"}},"default 1.0"),")"),E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Sign/Risk Expression",required:!0,value:c||"",onChange:this.handleInputChange.bind(this,"itemExpression")}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Example: ",E.a.createElement("span",{style:{fontWeight:"bold"}},"($key = true and $key2 = false) or $key3 = 'HD'"))),p=a||i,u=E.a.createElement(w.Dialog,{open:p,style:t.dialog},E.a.createElement(w.DialogContent,null,m),E.a.createElement(w.DialogActions,null,a?E.a.createElement("div",null,E.a.createElement(w.Button,{type:"button",onClick:this.closeNewItemDialog},"Cancel"),E.a.createElement(w.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"add"),accent:!0},"Create")):null,i?E.a.createElement("div",null,E.a.createElement(w.Button,{type:"button",onClick:this.closeEditItemDialog},"Cancel"),E.a.createElement(w.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"update"),accent:!0},"Update")):null)),h=E.a.createElement(w.Dialog,{open:l},E.a.createElement(w.DialogContent,null,E.a.createElement("p",null,"Are you sure you want to delete this item?")),E.a.createElement(w.DialogActions,null,E.a.createElement(w.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"delete"),accent:!0},"Delete"),E.a.createElement(w.Button,{type:"button",onClick:this.closeConfirmDeleteItemDialog},"Cancel")));return E.a.createElement("div",null,E.a.createElement(w.Card,{shadow:0,style:t.container},E.a.createElement(T.a,{title:"Signs/Risks"},E.a.createElement("div",{className:"ui__cursor_pointer",style:{fontSize:"24px"},onClick:this.openNewItemDialog},E.a.createElement(_.a,null))),d&&d.length>0?E.a.createElement(w.DataTable,{style:t.table,shadow:0,rows:d||[]},E.a.createElement(w.TableHeader,{name:"type"},"Type"),E.a.createElement(w.TableHeader,{name:"name"},"Name"),E.a.createElement(w.TableHeader,{name:"diagnosisId",style:{width:"48px"},cellFormatter:function(t,n,a){return E.a.createElement("div",{className:"ui__flex ui__alignItems_center",style:{color:"#999999"}},E.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.openEditItemDialog(a)},E.a.createElement(_.c,{style:{fontSize:"24px"}}))," ",E.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.openConfirmDeleteItemDialog(a)},E.a.createElement(_.d,{style:{fontSize:"24px"}})))}})):E.a.createElement(w.CardText,null,E.a.createElement("div",{style:t.emptyMessageContainer},E.a.createElement("div",null,"The list of items is empty")))),u,h)}}]),t}(y.Component);A.propTypes={items:I.a.array,onUpdateSymptoms:I.a.func.isRequired};var U=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=d()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",{diagnosis:n.props.diagnosis?n.props.diagnosis.data:{name:null,description:null,expression:null,text1:null,image1:null,text2:null,image2:null,text3:null,image3:null,symptoms:null}}),g()(p()(n),"setDiagnosisAsState",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;e.diagnosis&&n.setState({diagnosis:e.diagnosis.data})}),g()(p()(n),"handleInputChange",function(e,t){return n.setState({isModified:!0,diagnosis:S()({},n.state.diagnosis,g()({},e,t.target.value))})}),g()(p()(n),"handleImageUpload",function(e,t){return n.setState({diagnosis:S()({},n.state.diagnosis,g()({},e,t))})}),g()(p()(n),"handleImageDelete",function(e){return n.setState({diagnosis:S()({},n.state.diagnosis,g()({},e,null))})}),g()(p()(n),"handleBackClick",function(){return n.props.history.goBack()}),g()(p()(n),"handleSubmitClick",function(){var e=n.props,t=e.isEditMode,a=e.history,i=e.actions,l=e.diagnosisId,o=e.scriptId,s=n.state.diagnosis;n.setState({savingDiagnosis:!0}),i.post(t?"update-diagnosis":"create-diagnosis",S()({},t?{id:l}:{},{script_id:o,data:JSON.stringify(s),onResponse:function(){return n.setState({savingDiagnosis:!0})},onFailure:function(e){return n.setState({saveDiagnosisError:e})},onSuccess:function(e){var t=e.payload;i.updateApiData({diagnosis:t.diagnosis}),a.goBack()}}))}),g()(p()(n),"handleUpdateSymptoms",function(e){return n.setState({diagnosis:S()({},n.state.diagnosis,{symptoms:e.symptoms})})}),n}return h()(t,e),o()(t,[{key:"componentWillUpdate",value:function(e){e.diagnosis!==this.props.diagnosis&&this.setDiagnosisAsState(e)}},{key:"render",value:function(){var e=this.props.isEditMode,t=this.state.diagnosis,n=e?"Edit Diagnosis":"Add Diagnosis",a=e?"Update":"Create",i={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},form:{width:"780px"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},fieldLeft:{marginRight:"12px"},fieldMiddle:{marginLeft:"12px",marginRight:"12px"},fieldRight:{marginLeft:"12px"}};return E.a.createElement("div",{style:i.container},E.a.createElement("div",null,E.a.createElement(w.Card,{shadow:1,style:i.form},E.a.createElement(T.a,{leftNavIcon:"arrow_back",title:n,onLeftNavItemClicked:this.handleBackClick}),E.a.createElement(w.CardText,null,E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Name",required:!0,onChange:this.handleInputChange.bind(this,"name"),value:t.name||""}),E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Description",value:t.description||"",onChange:this.handleInputChange.bind(this,"description")}),e?E.a.createElement("div",null,E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Diagnosis expression",required:!0,value:t.expression||"",onChange:this.handleInputChange.bind(this,"expression")}),E.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Note: Usual expression syntax plus ",E.a.createElement("span",{style:{fontWeight:"bold"}},"$riskCount")," and ",E.a.createElement("span",{style:{fontWeight:"bold"}},"$signCount")," containing the number of expressions that match a risk factor or a sign/symptom"),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 1",rows:6,onChange:this.handleInputChange.bind(this,"text1"),value:t.text1||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(N.a,{name:"image1",fileInfo:t.image1,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 2",rows:6,onChange:this.handleInputChange.bind(this,"text2"),value:t.text2||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(N.a,{name:"image2",fileInfo:t.image2,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),E.a.createElement("div",{style:i.flexContainer},E.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 3",rows:6,onChange:this.handleInputChange.bind(this,"text3"),value:t.text3||""}),E.a.createElement("div",{style:i.fieldRight},E.a.createElement(N.a,{name:"image3",fileInfo:t.image3,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete})))):null,E.a.createElement(k.a,null,e?E.a.createElement(w.Button,{style:S()({},i.fieldLeft),onClick:this.handleSubmitClick.bind(this,"apply"),raised:!0,ripple:!0},"Apply"):null,E.a.createElement(w.Button,{style:S()({},i.fieldRight),onClick:this.handleSubmitClick.bind(this,"update"),raised:!0,accent:!0,ripple:!0},a)))),E.a.createElement(A,{items:t.symptoms,onUpdateSymptoms:this.handleUpdateSymptoms})))}}]),t}(E.a.Component);U.propTypes={router:I.a.object.isRequired,store:I.a.object.isRequired};var F=U,B=n(52);n.d(t,"DiagnosisEditor",function(){return M});var M=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=r()(this,(e=d()(t)).call.apply(e,[this].concat(l))),g()(p()(n),"state",{}),n}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.diagnosisId,a=t.actions;n&&"new"!==n&&(this.setState({loadingDiagnosis:!0}),a.get("get-diagnosis",{id:n,onResponse:function(){return e.setState({loadingDiagnosis:!1})},onFailure:function(t){return e.setState({loadDiagnosisError:t})},onSuccess:function(t){var n=t.payload;e.setState({diagnosis:n.diagnosis}),a.updateApiData({diagnosis:n.diagnosis})}}))}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({diagnosis:null})}},{key:"render",value:function(){return this.state.loadingDiagnosis?E.a.createElement(B.a,{className:"ui__flex ui__justifyContent_center"}):E.a.createElement(F,this.props)}}]),t}(E.a.Component);M.propTypes={actions:I.a.object,diagnosisId:I.a.string.isRequired,isEditMode:I.a.bool.isRequired};t.default=Object(x.hot)(Object(C.f)(Object(D.a)(M,function(e,t){return{diagnosis:e.apiData.diagnosis,diagnosisId:t.match.params.diagnosisId,scriptId:t.match.params.scriptId,isEditMode:!!e.apiData.diagnosis}})))}}]);