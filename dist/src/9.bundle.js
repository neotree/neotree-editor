(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{125:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n(10),r=n.n(a),i=n(16),c=n.n(i),l=n(19),s=n.n(l),o=n(20),u=n.n(o),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(25),E=n.n(h),S=n(23),g=n.n(S),v=n(24),y=n.n(v),C=n(0),b=n.n(C),_=n(2),T=n.n(_),I=n(34),D=n.n(I),k=n(119),N=n(121),w=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=p()(this,(e=f()(t)).call.apply(e,[this].concat(r))),y()(E()(n),"handleLeftNavClick",function(){n.props.onLeftNavItemClicked&&n.props.onLeftNavItemClicked()}),n}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.hideSpacer,i=e.leftNavIcon,l=(e.onLeftNavItemClicked,e.title),s=(e.transparent,c()(e,["children","className","hideSpacer","leftNavIcon","onLeftNavItemClicked","title","transparent"])),o=D()(n,"mdl-toolbar__header","mdl-layout__header","mdl-layout__header--transparent"),u=D()("mdl-toolbar__header-row",{"mdl-toolbar__header-row-with-left-icon":i}),d=D()("mdl-toolbar__left-nav"),p=D()("mdl-toolbar__right-nav");return b.a.createElement("header",r()({className:o},s),i?b.a.createElement("div",{className:D()(d,"ui__cursor_pointer"),style:{fontSize:"24px"},onClick:this.handleLeftNavClick},b.a.createElement(N.b,null)):b.a.createElement("div",{style:{width:"24px"}}),b.a.createElement(k.HeaderRow,{className:u,title:l||"",hideSpacer:a},t?b.a.createElement(k.Navigation,{className:p},t):null))}}]),t}(C.Component);w.propTypes={className:T.a.string,title:T.a.node,leftNavIcon:T.a.string,onLeftNavItemClicked:T.a.func,hideSpacer:T.a.bool}},129:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(10),r=n.n(a),i=n(16),c=n.n(i),l=n(19),s=n.n(l),o=n(20),u=n.n(o),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(23),E=n.n(h),S=n(0),g=n.n(S),v=function(e){function t(){return s()(this,t),p()(this,f()(t).apply(this,arguments))}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=c()(e,["children"]);return g.a.createElement("div",r()({style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"16px",marginBottom:"8px"}},n),t)}}]),t}(S.Component)},130:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return s});var a={COMPUTE:"compute",DATE_NOW:"date_now",DATE_NOON:"date_noon",DATE_MIDNIGHT:"date_midnight",EMPTY:"",UID:"uid"},r={BOOLEAN:"boolean",DATETIME:"datetime",DATE:"date",ID:"id",NUMBER:"number",PERIOD:"period",SET_ID:"set<id>",STRING:"string",TIME:"time",VOID:"void"},i={DATE:"date",DATETIME:"datetime",DROPDOWN:"dropdown",NUMBER:"number",PERIOD:"period",TEXT:"text",TIME:"time"},c={CHECKLIST:"checklist",FORM:"form",LIST:"list",MANAGEMENT:"management",MULTI_SELECT:"multi_select",PROGRESS:"progress",SINGLE_SELECT:"single_select",TIMER:"timer",YESNO:"yesno"},l={SIGN:"sign",RISK:"risk"},s=c.CHECKLIST},139:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(124),c=n.n(i),l=n(0),s=n.n(l),o=n(133),u=n(132),d={UPDATE:"UPDATE",updateState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"UPDATE",partialState:e}}},p=function(){var e={};try{e=__$APP__}catch(t){e={fatal_error:t}}return e}(),m=Object(u.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;if(t.type===d.UPDATE){var n=r()({},e);return n=r()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},p,d),f=n(156),h=n(119),E=n(121),S=n(12),g=n(42),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return Object(S.f)(function(n){var a=n.match,i=Object(o.a)(),l=c()(i,3),u=l[0].data,d=l[1],p=l[2],S=m(),v=c()(S,1)[0].host,y=s.a.createElement(t,n);if(!e||e&&!e.map)return y;var C=u?u[Object.keys(u)[0]]:null;return s.a.createElement(s.a.Fragment,null,C?s.a.createElement(f.a,null,s.a.createElement("div",{className:"ui__flex ui__alignItems_center"},s.a.createElement("span",null,Object.keys(u)[0]," copied (",C.ids.length,")")," ",s.a.createElement(h.Button,{disabled:!e.includes(Object.keys(u)[0]),onClick:function(){var e={};a.params.scriptId&&(e={dataId:a.params.scriptId,dataType:"script"}),g.a.post("/copy-data",{destination:r()({},e,{host:v}),source:{host:v,ids:C.ids,dataType:Object.keys(u)[0]}}).then(function(){window.location.reload()}).catch(console.log)}},"Paste"),"  ",s.a.createElement("div",{className:"ui__cursor_pointer ui__flex ui__alignItems_center",onClick:function(){d(p.updateState({data:null}))}},s.a.createElement(E.e,null)))):null,y)})}},y=n(10),C=n.n(y),b=n(24),_=n.n(b),T=n(43),I=n.n(T),D=n(16),k=n.n(D),N=n(2),w=n.n(N),x=n(41),O=function(e){var t=e.container,n=e.data,a=e.children,i=e.host,l=(e.actions,k()(e,["container","data","children","host","actions"])),u=Object(o.a)(),d=c()(u,3),p=d[0],m=d[1],f=d[2],h=t||s.a.Fragment;return s.a.createElement(h,null,s.a.createElement("div",C()({},l,{onClick:function(e){var t,a,c=(p.data?p.data[n.dataType]:null)||{host:i,ids:[]},s=(t=n.dataId?n.dataId.map?n.dataId:[n.dataId]:[],a=c.ids,t.forEach(function(e){a=a.includes(e)?a.filter(function(t){return t!==e}):[].concat(I()(a),[e])}),a);m(f.updateState({data:s.length?_()({},n.dataType,r()({},c,{ids:s})):null})),l.onClick&&l.onClick(e)}}),a))};O.propTypes={children:w.a.node,data:w.a.object.isRequired,onClick:w.a.func};var j=Object(x.a)(O,function(e){return{host:e.$APP.host}});n.d(t,"b",function(){return v}),n.d(t,"a",function(){return j})},162:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(16),c=n.n(i),l=n(19),s=n.n(l),o=n(20),u=n.n(o),d=n(21),p=n.n(d),m=n(22),f=n.n(m),h=n(23),E=n.n(h),S=n(24),g=n.n(S),v=n(0),y=n.n(v),C=n(2),b=n.n(C),_=n(34),T=n.n(_),I=function(e){function t(){return s()(this,t),p()(this,f()(t).apply(this,arguments))}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=(e.name,e.numeric),a=e.children,i=(e.cellFormatter,c()(e,["className","name","numeric","children","cellFormatter"])),l=T()({"mdl-data-table__cell--non-numeric":!n},t);return y.a.createElement("th",r()({className:l},i),a)}}]),t}(v.Component);g()(I,"propTypes",{cellFormatter:b.a.func,className:b.a.string,name:b.a.string.isRequired,numeric:b.a.bool});var D=n(43),k=n.n(D),N=n(25),w=n.n(N),x=n(140),O=n.n(x),j=n(121),A=n(209),R=n(210),M=n.n(R),P=[2,3,4,6,8,16,24].map(function(e){return"mdl-shadow--".concat(e,"dp")}),L=n(119),U=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=p()(this,(e=f()(t)).call.apply(e,[this].concat(r))),g()(w()(n),"renderCell",function(e,t,n){var a=e.numeric?"":"mdl-data-table__cell--non-numeric";return y.a.createElement("td",{key:e.name,className:a},e.cellFormatter?e.cellFormatter(t[e.name],t,n):t[e.name])}),g()(w()(n),"sortAdapterFn",function(e){var t=e.oldIndex,a=e.newIndex,r=n.props.onSort;r&&r(t,a)}),n}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.shadow,i=t.children,l=(t.onSort,t.rowKeyColumn,t.rows),s=t.selected,o=t.onSelect,u=c()(t,["className","shadow","children","onSort","rowKeyColumn","rows","selected","onSelect"]),d=void 0!==a,p=O()(a||0,0,P.length-1),m=T()("mdl-data-table",g()({},P[p],d),n),f=i?y.a.Children.toArray(i):null,h=Object(A.SortableHandle)(function(){return y.a.createElement(j.i,{style:{fontSize:"24px"},className:"ui__cursor_pointer"})}),E=Object(A.SortableElement)(function(t){var n=t.row,a=t.index;return y.a.createElement("tr",{className:n.className},y.a.createElement("td",null,y.a.createElement(L.Checkbox,{value:n.id,checked:s.includes(n.id),onChange:function(e){var t=e.target.value;o(s.includes(t)?s.filter(function(e){return e!==t}):[].concat(k()(s),[t]))}})),y.a.createElement("td",null,y.a.createElement(h,null)),f.map(function(t){return e.renderCell(t.props,n,a)}))}),S=Object(A.SortableContainer)(function(e){var t=e.rows;return y.a.createElement("tbody",null,t.map(function(e,t){return y.a.createElement(E,{key:M.a.generate(),index:t,row:e})}))});return y.a.createElement("table",r()({className:m},u),y.a.createElement("thead",null,y.a.createElement("tr",null,y.a.createElement("th",null," "),y.a.createElement("th",null," "),f)),y.a.createElement(S,{rows:l,onSortEnd:this.sortAdapterFn,useDragHandle:!0}))}}]),t}(v.Component);g()(U,"propTypes",{className:b.a.string,onSort:b.a.func,rowKeyColumn:b.a.string,rows:b.a.arrayOf(b.a.object).isRequired,shadow:b.a.number}),n.d(t,"b",function(){return I}),n.d(t,"a",function(){return U})},194:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(132),c={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},l={scripts:[]};t.a=Object(i.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;if(t.type===c.UPDATE){var n=r()({},e);return r()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},l,c)},215:function(e,t){},232:function(e,t){},234:function(e,t){},407:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),i=n(124),c=n.n(i),l=n(0),s=n.n(l),o=n(2),u=n.n(o),d=n(12),p=n(3),m=n.n(p),f=n(132),h={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},E={diagnoses:[]},S=Object(f.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;if(t.type===h.UPDATE){var n=m()({},e);return m()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},E,h),g={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},v={screens:[]},y=Object(f.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;if(t.type===g.UPDATE){var n=m()({},e);return m()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},v,g),C=n(194),b=n(52),_=n(42),T=n(19),I=n.n(T),D=n(20),k=n.n(D),N=n(21),w=n.n(N),x=n(22),O=n.n(x),j=n(25),A=n.n(j),R=n(23),M=n.n(R),P=n(24),L=n.n(P),U=n(119),F=n(129),q=n(125),z=n(139),B=n(26),G=n(43),H=n.n(G),K=n(121),W=n(130),Y=n(162),J=function(e){function t(){var e,n;I()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=w()(this,(e=O()(t)).call.apply(e,[this].concat(r))),L()(A()(n),"state",{openSelectScreenTypeDialog:!1,screens:[],selected:[],addScreenType:W.a}),L()(A()(n),"handleAddScreenClick",function(){var e=n.props,t=e.updateState,a=e.scriptId,r=e.history,i=n.state.addScreenType;n.setState({addingScreen:!0}),_.a.post("/create-screen",{script_id:a,type:i}).catch(function(e){return n.setState({addScreenError:e,addingScreen:!1})}).then(function(e){var i=e.payload;n.setState({addingScreen:!1}),t({screen:i.screen}),r.push("/dashboard/scripts/".concat(a,"/screens/").concat(i.screen.id)),n.closeSelectScreenTypeDialog()})}),L()(A()(n),"handleDeleteScreenClick",function(e){return function(){var t=n.props,a=t.updateState,r=t.scriptId;n.setState({deletingScreen:!1}),_.a.post("/delete-screen",{id:e,scriptId:r}).catch(function(e){return n.setState({deleteScreenError:e,deletingScreen:!1})}).then(function(){n.setState({deletingScreen:!1}),a(function(t){return{screens:t.screens.filter(function(t){return t.id!==e}).map(function(e,t){return m()({},e,{position:t+1})})}})})}}),L()(A()(n),"handleEditScreenClick",function(e){return function(){return n.props.onEditScreenClick(e)}}),L()(A()(n),"handleInputChange",function(e,t){return n.setState(L()({},e,t.target.value))}),L()(A()(n),"openSelectScreenTypeDialog",function(){return n.setState({openSelectScreenTypeDialog:!0})}),L()(A()(n),"closeSelectScreenTypeDialog",function(){return n.setState({openSelectScreenTypeDialog:!1,addScreenTitle:null,addScreenType:W.a})}),L()(A()(n),"swapScreenItems",function(e,t){var a=n.props,r=a.updateState,i=a.screens,c=Object.assign([],i),l=c[e];c.splice(e,1),c.splice(t,0,l),r({screens:c=c.map(function(e,t){return m()({},e,{position:t+1})})}),n.setState({sortingScreens:!1}),_.a.post("/update-screens",{returnUpdated:!1,screens:c.map(function(e){return{id:e.id,position:e.position}})}).catch(function(e){return n.setState({deleteScriptError:e,sortingScreens:!1})}).then(function(){return n.setState({sortingScreens:!1})})}),L()(A()(n),"handleDuplicateScreen",function(e){var t=n.props.updateState;n.setState({duplicatingScreen:!0}),_.a.post("/duplicate-screen",{id:e}).catch(function(e){return n.setState({duplicateScreenError:e,duplicatingScreen:!1})}).then(function(a){var r=a.payload;n.setState({duplicatingScreen:!1}),t(function(t){var n=H()(t.screens),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,r.screen),{screens:n.map(function(e,t){return m()({},e,{position:t+1})})}})})}),n}return M()(t,e),k()(t,[{key:"render",value:function(){var e=this,t=this.props.screens,n=this.state,a=n.addScreenType,r=n.selected,i={screens:{overflow:"unset",width:"100%",minWidth:"700px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"}},c=s.a.createElement(U.Dialog,{open:this.state.openSelectScreenTypeDialog,style:{width:"260px"}},s.a.createElement(U.DialogContent,null,s.a.createElement("p",null,"Select screen type:"),s.a.createElement(U.RadioGroup,{container:"div",childContainer:"div",name:"addScreenType",value:a||W.a,onChange:this.handleInputChange.bind(this,"addScreenType")},s.a.createElement(U.Radio,{value:W.e.CHECKLIST,ripple:!0},"Checklist"),s.a.createElement(U.Radio,{value:W.e.FORM,ripple:!0},"Form"),s.a.createElement(U.Radio,{value:W.e.MANAGEMENT,ripple:!0},"Management"),s.a.createElement(U.Radio,{value:W.e.MULTI_SELECT,ripple:!0},"Multiple choice list"),s.a.createElement(U.Radio,{value:W.e.LIST,ripple:!0},"Simple list"),s.a.createElement(U.Radio,{value:W.e.SINGLE_SELECT,ripple:!0},"Single choice list"),s.a.createElement(U.Radio,{value:W.e.PROGRESS,ripple:!0},"Progress"),s.a.createElement(U.Radio,{value:W.e.TIMER,ripple:!0},"Timer"),s.a.createElement(U.Radio,{value:W.e.YESNO,ripple:!0},"Yes/No"))),s.a.createElement(U.DialogActions,null,s.a.createElement(U.Button,{type:"button",onClick:this.handleAddScreenClick,accent:!0},"Create"),s.a.createElement(U.Button,{type:"button",onClick:this.closeSelectScreenTypeDialog},"Cancel")));return s.a.createElement("div",null,s.a.createElement(U.Card,{shadow:0,style:i.screens},s.a.createElement(q.a,{title:"Screens"},r.length>0&&s.a.createElement("div",null,s.a.createElement(z.a,{data:{dataId:r,dataType:"screen"}},s.a.createElement("span",{className:"ui__cursor_pointer"},"Copy"))),s.a.createElement("div",{onClick:this.openSelectScreenTypeDialog,className:"ui__cursor_pointer"},s.a.createElement(K.a,{style:{fontSize:"24px"}}))),t&&t.length>0?s.a.createElement(Y.a,{style:i.table,rows:t.map(function(e){return m()({},e.data,{id:e.id,position:e.position})}),rowKeyColumn:"position",onSort:this.swapScreenItems,selected:r,onSelect:function(t){return e.setState({selected:t})}},s.a.createElement(Y.b,{name:"position"},"Pos"),s.a.createElement(Y.b,{name:"epicId"},"Epic"),s.a.createElement(Y.b,{name:"storyId"},"Story"),s.a.createElement(Y.b,{name:"refId"},"Ref."),s.a.createElement(Y.b,{name:"title",style:{width:"100%"},cellFormatter:function(e,t){var n=t.title;return n?n.length<=30?n:"".concat(n.substring(0,29),"..."):""}},"Title"),s.a.createElement(Y.b,{name:"id",style:{width:"48px"},cellFormatter:function(t){return s.a.createElement("div",{className:"ui__flex ui__alignItems_center",style:{color:"#999999"}},s.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditScreenClick(t)},s.a.createElement(K.f,{style:{fontSize:"24px"}}))," ",s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{id:"menu_".concat(t),className:"ui__cursor_pointer"},s.a.createElement(K.j,{style:{fontSize:"24px"}})),s.a.createElement(U.Menu,{target:"menu_".concat(t),align:"right"},s.a.createElement(U.MenuItem,{onClick:function(){return e.handleDuplicateScreen(t)}},"Duplicate"),s.a.createElement(U.MenuItem,null,s.a.createElement(z.a,{data:{dataId:t,dataType:"screen"}},s.a.createElement("span",null,"Copy"))),s.a.createElement(U.MenuItem,{onClick:e.handleDeleteScreenClick(t)},"Delete"))))}})):s.a.createElement(U.CardText,null,s.a.createElement("div",{style:i.emptyMessageContainer},s.a.createElement("div",null,"The list of screens is empty")))),c)}}]),t}(l.Component);J.propTypes={screens:u.a.array.isRequired,updateState:u.a.func.isRequired,scriptId:u.a.string.isRequired,onEditScreenClick:u.a.func.isRequired};var $=J,V=function(e){var t=e.match.params.scriptId,n=Object(l.useState)(!1),a=c()(n,2),i=a[0],o=a[1],u=Object(l.useState)(null),d=c()(u,2),p=(d[0],d[1]),m=y(),f=c()(m,3),h=f[0].screens,E=f[1],S=f[2];return Object(l.useEffect)(function(){o(!0),_.a.get("/get-screens",{script_id:t}).then(function(e){return o(!1),e}).then(function(e){var t=e.payload;o(!1),E(S.updateState({screens:t.screens||[]}))}).catch(function(e){o(!1),p(e)})},[]),s.a.createElement("div",null,!h.length&&i&&s.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}),!h.length&&i?null:s.a.createElement($,r()({},e,{screens:h,updateState:function(e){return E(S.updateState(e))}})))};V.propTypes={match:u.a.object};var X=Object(B.hot)(Object(d.f)(V)),Q=function(e){function t(e){var n;return I()(this,t),n=w()(this,O()(t).call(this,e)),L()(A()(n),"handleAddDiagnosisClick",function(){var e=n.props,t=e.history,a=e.scriptId;t.push("/dashboard/scripts/".concat(a,"/diagnosis/new"))}),L()(A()(n),"handleDeleteDiagnosisClick",function(e){return function(){var t=n.props,a=t.updateState,r=t.scriptId;n.setState({deletingDiagnosis:!0}),_.a.post("/delete-diagnosis",{id:e,scriptId:r}).then(function(){n.setState({deletingDiagnosis:!1}),a(function(t){return{diagnoses:t.diagnoses.filter(function(t){return t.id!==e})}}),n.closeDeleteConfirmDialog()}).catch(function(e){return n.setState({deleteDiagnosisError:e,deletingDiagnosis:!1})})}}),L()(A()(n),"handleEditDiagnosisClick",function(e){return function(){return n.props.onEditDiagnosisClick(e)}}),L()(A()(n),"handleInputChange",function(e,t){return n.setState(m()({},n.state,L()({},e,t.target.value)))}),L()(A()(n),"handleDuplicateDiagnosis",function(e){var t=n.props.updateState;n.setState({duplicatingDiagnosis:!0}),_.a.post("/duplicate-diagnosis",{id:e}).then(function(a){var r=a.payload;n.setState({duplicatingDiagnosis:!1}),t(function(t){var n=H()(t.diagnoses),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,r.diagnosis),{diagnoses:n}})}).catch(function(e){return n.setState({duplicateDiagnosisError:e,duplicatingDiagnosis:!1})})}),n.state={selected:[],openDeleteConfirmDialog:!1,scriptIdForAction:null},n}return M()(t,e),k()(t,[{key:"render",value:function(){var e=this,t=this.props.diagnoses,n=this.state.selected,a={diagnosis:{overflow:"unset",width:"100%",minWidth:"700px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"}};return s.a.createElement("div",null,s.a.createElement(U.Card,{shadow:0,style:a.diagnosis},s.a.createElement(q.a,{title:"Diagnosis"},n.length>0&&s.a.createElement("div",null,s.a.createElement(z.a,{data:{dataId:n,dataType:"diagnosis"}},s.a.createElement("span",{className:"ui__cursor_pointer"},"Copy"))),s.a.createElement("div",{onClick:this.handleAddDiagnosisClick,className:"ui__cursor_pointer"},s.a.createElement(K.a,{style:{fontSize:"24px"}}))),t.length>0?s.a.createElement(U.DataTable,{selectable:!0,onSelectionChanged:function(n){return e.setState({selected:n.map(function(e){return t.filter(function(t,n){return n===e})[0]}).filter(function(e){return e}).map(function(e){return e.id})})},style:{width:"780px"},shadow:0,rows:t.map(function(e){return m()({id:e.id},e.data)})},s.a.createElement(U.TableHeader,{name:"name"},"Name"),s.a.createElement(U.TableHeader,{name:"description"},"Description"),s.a.createElement(U.TableHeader,{name:"id",style:{width:"48px"},cellFormatter:function(t){return s.a.createElement("div",{className:"ui__flex ui__alignItems_center",style:{color:"#999999"}},s.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditDiagnosisClick(t)},s.a.createElement(K.f,{style:{fontSize:"24px"}}))," ",s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{id:"menu_".concat(t),className:"ui__cursor_pointer"},s.a.createElement(K.j,{style:{fontSize:"24px"}})),s.a.createElement(U.Menu,{target:"menu_".concat(t),align:"right"},s.a.createElement(U.MenuItem,{onClick:function(){return e.handleDuplicateDiagnosis(t)}},"Duplicate"),s.a.createElement(U.MenuItem,null,s.a.createElement(z.a,{data:{dataId:t,dataType:"diagnosis"}},s.a.createElement("span",null,"Copy"))),s.a.createElement(U.MenuItem,{onClick:e.handleDeleteDiagnosisClick(t)},"Delete"))))}})):s.a.createElement(U.CardText,null,s.a.createElement("div",{style:a.emptyMessageContainer},s.a.createElement("div",null,"The list of screens is empty")))))}}]),t}(l.Component);Q.propTypes={scriptId:u.a.string.isRequired,onEditDiagnosisClick:u.a.func.isRequired};var Z=Q,ee=function(e){var t=e.match.params.scriptId,n=Object(l.useState)(!1),a=c()(n,2),i=a[0],o=a[1],u=Object(l.useState)(null),d=c()(u,2),p=(d[0],d[1]),m=S(),f=c()(m,3),h=f[0].diagnoses,E=f[1],g=f[2];return Object(l.useEffect)(function(){o(!0),_.a.get("/get-diagnoses",{script_id:t}).then(function(e){return o(!1),e}).then(function(e){var t=e.payload;o(!1),E(g.updateState({diagnoses:t.diagnoses||[]}))}).catch(function(e){o(!1),p(e)})},[]),s.a.createElement("div",null,!h.length&&i&&s.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}),!h.length&&i?null:s.a.createElement(Z,r()({},e,{diagnoses:h,updateState:function(e){return E(g.updateState(e))}})))};ee.propTypes={match:u.a.object};var te=Object(B.hot)(Object(d.f)(ee)),ne=function(e){function t(){var e,n;I()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=w()(this,(e=O()(t)).call.apply(e,[this].concat(r))),L()(A()(n),"state",{activeTab:0,script:m()({title:"",description:""},(n.props.script||{}).data)}),L()(A()(n),"setScriptAsState",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;e.script&&n.setState({script:e.script.data})}),L()(A()(n),"handleBackClick",function(){return n.props.history.goBack()}),L()(A()(n),"handleEditScreenClick",function(e){var t=n.props,a=t.scriptId;t.history.push("/dashboard/scripts/".concat(a,"/screens/").concat(e))}),L()(A()(n),"handleEditDiagnosisClick",function(e){var t=n.props,a=t.scriptId;t.history.push("/dashboard/scripts/".concat(a,"/diagnosis/").concat(e))}),L()(A()(n),"handleInputChange",function(e,t){return n.setState({script:m()({},n.state.script,L()({},e,t.target.value))})}),L()(A()(n),"handleSubmitClick",function(){var e=n.props,t=e.isEditMode,a=e.history,r=e.actions,i=e.scriptId,c=n.state.script;n.setState({savingScript:!0}),r.post(t?"update-script":"create-script",m()({},t?{id:i}:{},{data:JSON.stringify({title:c.title,description:c.description}),onResponse:function(){return n.setState({savingScript:!0})},onFailure:function(e){return n.setState({saveScriptError:e})},onSuccess:function(e){var t=e.payload;r.updateApiData({script:t.script}),a.goBack()}}))}),n}return M()(t,e),k()(t,[{key:"componentWillUpdate",value:function(e){e.script!==this.props.script&&this.setScriptAsState(e)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.isEditMode,r=n.scriptId,i=this.state,c=i.activeTab,l=i.script,o="".concat(a?"Edit":"Add"," script"),u=a?"Update":"Create",d={container:{display:"flex",boxSizing:"border-box",justifyContent:"center"},form:{width:"780px"},fieldLeft:{marginRight:"12px"},fieldRight:{marginLeft:"12px"}};switch(c){case 0:e=s.a.createElement(X,{scriptId:r,onEditScreenClick:this.handleEditScreenClick});break;case 1:e=s.a.createElement(te,{scriptId:r,onEditDiagnosisClick:this.handleEditDiagnosisClick});break;default:e=null}var p=s.a.createElement("div",{style:{marginTop:"24px"}},s.a.createElement(U.Tabs,{activeTab:c,onChange:function(e){return t.setState({activeTab:e})},ripple:!0},s.a.createElement(U.Tab,null,"Screens"),s.a.createElement(U.Tab,null,"Diagnosis")),s.a.createElement("section",null,e)),f=function(){return s.a.createElement("div",{style:d.container},s.a.createElement("div",null,s.a.createElement(U.Card,{shadow:0,style:d.form},s.a.createElement(q.a,{leftNavIcon:"arrow_back",title:o,onLeftNavItemClicked:t.handleBackClick}),s.a.createElement(U.CardText,null,s.a.createElement(U.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title",required:!0,onChange:t.handleInputChange.bind(t,"title"),value:l.title}),s.a.createElement(U.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Description",value:l.description,onChange:t.handleInputChange.bind(t,"description")}),s.a.createElement(F.a,null,a?s.a.createElement(U.Button,{style:m()({},d.fieldLeft),onClick:t.handleSubmitClick.bind(t,"apply"),raised:!0,ripple:!0},"Apply"):null,s.a.createElement(U.Button,{style:m()({},d.fieldRight),onClick:t.handleSubmitClick.bind(t,"update"),raised:!0,accent:!0,ripple:!0},u)))),a?p:null))};return a?s.a.createElement("div",null,f()):f()}}]),t}(l.Component);ne.propTypes={actions:u.a.object.isRequired,history:u.a.object.isRequired,isEditMode:u.a.bool.isRequired,scriptId:u.a.string.isRequired,script:u.a.object};var ae=Object(z.b)(["screen","diagnosis"])(ne),re=function(e){var t=e.match.params.scriptId,n=Object(l.useState)(!1),a=c()(n,2),i=a[0],o=a[1],u=Object(l.useState)(null),d=c()(u,2),p=(d[0],d[1]),m=Object(C.a)(),f=c()(m,3),h=f[0].script,E=f[1],g=f[2],v=function(e){return E(g.updateState(e))},T=y(),I=c()(T,3),D=(I[0],I[1]),k=I[2],N=S(),w=c()(N,3),x=(w[0],w[1]),O=w[2];return Object(l.useEffect)(function(){return x(O.updateState({diagnoses:[]})),D(k.updateState({screens:[]})),t&&"new"!==t&&(o(!0),_.a.get("/get-script",{id:t}).then(function(e){return o(!1),e}).then(function(e){var t=e.payload;o(!1),v({script:t.script||null})}).catch(function(e){o(!1),p(e)})),function(){v({script:null})}},[]),i?s.a.createElement(b.a,{className:"ui__flex ui__justifyContent_center"}):s.a.createElement(ae,r()({},e,{script:h,isEditMode:!!h,scriptId:t,updateState:v}))};re.propTypes={match:u.a.object.isRequired};t.default=Object(d.f)(re)}}]);