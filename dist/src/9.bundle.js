(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{263:function(e,t,n){"use strict";var a=n(10),r=n.n(a),c=n(9),l=n.n(c),o=n(20),i=n.n(o),s=n(0),u=n.n(s),d=n(2),p=n.n(d),m=n(376),f=n(343),E=n(344),g=n(250),b=n(346),h=n(347),v=n(137),w=n(315),y=n(304),x=n(12),k=n.n(x),S=n(5),O=n.n(S),I=n(277),j=n.n(I),C=n(345),T=n(264),F=n(257),P=n.n(F),R=n(248),D=n(281),N=n.n(D),A=n(374),q=Object(T.c)((function(){return u.a.createElement("div",null,u.a.createElement(A.a,{title:"Drag to reposition"},u.a.createElement(R.a,{style:{cursor:"move"}},u.a.createElement(N.a,null))))})),J=Object(T.b)((function(e){var t=e.row,n=e.rowIndex,a=e.selectable,r=e.classes,c=e.selected,o=e.setSelected,i=e.displayFields,s=e.action,d=e.sortable;return u.a.createElement(f.a,{className:O()(r.dataItemRow,{selected:c.map((function(e){return e.rowIndex})).includes(n)})},a&&u.a.createElement(E.a,{padding:"none"},u.a.createElement(w.a,{checked:c.map((function(e){return e.rowIndex})).includes(n),onChange:function(){return o((function(e){return e.map((function(e){return e.rowIndex})).includes(n)?e.filter((function(e){return e.rowIndex!==n})):[].concat(P()(e),[{row:t,rowIndex:n}])}))}})),d&&u.a.createElement(E.a,{padding:"none"},u.a.createElement(q,null)),i.map((function(e,a){var r=e.render?e.render({row:t,rowIndex:n,column:e.key,columnIndex:a}):t[e.key];return u.a.createElement(E.a,l()({},e.cellProps,{key:"".concat(n).concat(e.key).concat(a)}),r)})),s?u.a.createElement(E.a,{align:"right",padding:"none"},s):null)})),W=Object(T.a)((function(e){var t=e.rows,n=e.sortable,a=e.classes,r=e.selected,c=e.selectable,l=e.setSelected,o=e.displayFields,i=e.renderRowAction,s=e.filter;return u.a.createElement(C.a,null,t.map((function(e,t){var d=t;return s&&!s(e)?null:u.a.createElement(J,{key:"".concat(d).concat(t),row:e,sortable:n,index:t,rowIndex:t,classes:a,selectable:c,action:i?i(e,t)||u.a.createElement(u.a.Fragment,null):null,displayFields:o,selected:r,setSelected:l})})))}));function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=k()((function(e){return{table:{minWidth:800},headerWrap:{position:"relative",height:60},header:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",boxSizing:"border-box",padding:e.spacing()},dataItemRow:{"&:hover, &.selected":{backgroundColor:e.palette.action.hover}}}}));function z(e){var t=e.noDataMsg,n=e.title,a=e.selectable,r=e.renderRowAction,c=e.data,o=e.onSortData,s=e.displayFields,d=e.renderHeaderActions,p=e.filter;a=!1!==a;var x=H(),k=u.a.useState([]),S=i()(k,2),I=S[0],C=S[1],T=u.a.useState(c),F=i()(T,2),P=F[0],R=F[1];return u.a.useEffect((function(){JSON.stringify(P)!==JSON.stringify(c)&&R(c)}),[c]),u.a.createElement(u.a.Fragment,null,u.a.createElement(g.a,{square:!0,elevation:0},u.a.createElement("div",{className:O()(x.headerWrap)},u.a.createElement("div",{className:O()(x.header)},u.a.createElement(v.a,{variant:"h6"},n),u.a.createElement("div",{style:{marginLeft:"auto"}}),d&&d({selected:I}))),u.a.createElement(y.a,null),P.length?u.a.createElement(m.a,{component:g.a},u.a.createElement(b.a,{className:O()(x.table)},u.a.createElement(h.a,null,u.a.createElement(f.a,null,a&&u.a.createElement(E.a,{padding:"none"},u.a.createElement(w.a,{indeterminate:I.length>0&&I.length<P.length,checked:P.length>0&&I.length===P.length,onChange:function(){return C((function(e){return e.length<P.length?P.map((function(e,t){return{row:e,rowIndex:t}})):[]}))}})),!!o&&u.a.createElement(E.a,null),s.map((function(e,t){return u.a.createElement(E.a,l()({},e.cellProps,{key:"".concat(e.key).concat(t)}),u.a.createElement("b",null,e.label))})),r?u.a.createElement(E.a,{align:"right"},u.a.createElement("b",null,"Action")):null)),u.a.createElement(W,{rows:P,filter:p,selectable:a,renderRowAction:r,classes:x,displayFields:s,selected:I,setSelected:C,useDragHandle:!0,sortable:!!o,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,a=j()(P,{$splice:[[t,1],[n,0,P[t]]]}).map((function(e,t){return M(M({},e),{},{position:t+1})}));R(a),o(a)}}))):u.a.createElement("div",{style:{textAlign:"center",padding:25}},u.a.createElement(v.a,{color:"textSecondary"},t||"No data"))))}z.propTypes={noDataMsg:p.a.string,selectable:p.a.bool,renderRowAction:p.a.func,title:p.a.string.isRequired,displayFields:p.a.array.isRequired,renderHeaderActions:p.a.func,onSortData:p.a.func,data:p.a.array.isRequired,filter:p.a.func};t.a=z},288:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Scripts"}},305:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c=n(11),l=n.n(c),o=n(0),i=n.n(o),s=n(13),u=n(2),d=n.n(u),p=n(5),m=n.n(p),f=n(12),E=["className"],g=n.n(f)()((function(){return{root:{position:"fixed",bottom:20,right:20,zIndex:10}}})),b=i.a.forwardRef((function(e,t){var n=e.className,a=l()(e,E),c=g();return i.a.createElement(i.a.Fragment,null,Object(s.createPortal)(i.a.createElement("div",r()({},a,{ref:t,className:m()(n,c.root)})),document.body))}));b.propTypes={className:d.a.string},t.a=b},306:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(42),r=n.n(a),c=n(20),l=n.n(c),o=n(29),i=n.n(o),s=n(0),u=n.n(s),d=n(2),p=n.n(d),m=n(138),f=n(225),E=n(221),g=n(222),b=n(223),h=n(219),v=n(387),w=n(137),y=n(325),x=n(315);function k(e){var t=e.scriptId,n=u.a.useState(""),a=l()(n,2),c=a[0],o=a[1],s=u.a.useState(""),d=l()(s,2),p=d[0],k=d[1],S=u.a.useState(!1),O=l()(S,2),I=O[0],j=O[1],C=u.a.useState(!1),T=l()(C,2),F=T[0],P=T[1],R=u.a.useState(null),D=l()(R,2),N=D[0],A=D[1],q=u.a.useState(!1),J=l()(q,2),W=J[0],L=J[1],M=function(){F||(L(!1),o(""),k(""),j(!1))};function H(){return(H=r()(i.a.mark((function e(){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),A(null),e.next=5,fetch("/import-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({url:c,importScriptId:p,updateScriptId:t})});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,!(r=a.error?[a.error]:a.errors)){e.next=12;break}throw new Error(r.map((function(e){return e.message||e.msg||e})).join("\n"));case 12:window.location.reload(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),A(e.t0.message);case 18:P(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return u.a.useEffect((function(){A(null)}),[c,p]),u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{onClick:function(){return L(!0)},color:"primary"},"Import"),u.a.createElement(f.a,{open:W,onClose:M,maxWidth:"xs",fullWidth:!0},u.a.createElement(E.a,null,"Import script"),u.a.createElement(g.a,null,u.a.createElement(v.a,{value:c,onChange:function(e){return o(e.target.value)},label:"Webeditor URL",fullWidth:!0,required:!0,error:!c,variant:"outlined"}),u.a.createElement(w.a,{variant:"caption",color:"textSecondary"},"e.g. ",u.a.createElement("b",null,"https://webeditor.neotree.org")),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(v.a,{value:p,onChange:function(e){return k(e.target.value)},label:"Script ID",fullWidth:!0,required:!0,error:!p,variant:"outlined"}),!!t&&u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(y.a,{control:u.a.createElement(x.a,{checked:I,onChange:function(){return j((function(e){return!e}))}}),label:u.a.createElement(w.a,{variant:"caption",color:"error"},"Confirm that you'd like to override this script with the imported script")})),!!N&&u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(w.a,{variant:"caption",color:"error"},N))),u.a.createElement(b.a,null,u.a.createElement("div",{style:{marginLeft:"auto"}}),u.a.createElement(m.a,{onClick:M,disabled:F},"Cancel")," ",u.a.createElement(m.a,{variant:"contained",disableElevation:!0,color:"secondary",disabled:F||!(c&&p&&(!t||I)),onClick:function(){return H.apply(this,arguments)}},"Import"),F&&u.a.createElement(u.a.Fragment,null," ",u.a.createElement(h.a,{size:20})))))}k.propTypes={scriptId:p.a.string}},323:function(e,t,n){"use strict";var a=n(42),r=n.n(a),c=n(9),l=n.n(c),o=n(20),i=n.n(o),s=n(11),u=n.n(s),d=n(29),p=n.n(d),m=n(0),f=n.n(m),E=n(2),g=n.n(E),b=n(101),h=n(57),v=["children","scripts","onClick"],w=f.a.forwardRef((function(e,t){var n=e.children,a=e.scripts,c=e.onClick,o=u()(e,v),s=a.length>1,d=Object(b.a)(),m=i()(d,2),E=m[0],g=m[1],w=f.a.useState(!1),y=i()(w,2),x=y[0],k=y[1];return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",l()({},o,{ref:t,onClick:function(e){g(),c&&c(e)}}),n),E({title:"Delete script".concat(s?"s":""),message:"Are you sure you want to delete script".concat(s?"s":"","?"),onConfirm:function(){r()(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,fetch("/delete-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:a})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,(r=n.errors)&&r.length?alert(JSON.stringify(r)):window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:k(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}),x?f.a.createElement(h.a,null):null)}));w.propTypes={onClick:g.a.func,children:g.a.node,scripts:g.a.array.isRequired},t.a=w},324:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c=n(42),l=n.n(c),o=n(20),i=n.n(o),s=n(11),u=n.n(s),d=n(29),p=n.n(d),m=n(0),f=n.n(m),E=n(2),g=n.n(E),b=n(57),h=["children","onClick","scripts"],v=f.a.forwardRef((function(e,t){var n=e.children,a=e.onClick,c=e.scripts,o=u()(e,h),s=f.a.useState(!1),d=i()(s,2),m=d[0],E=d[1],g=f.a.useState(null),v=i()(g,2),w=(v[0],v[1]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",r()({},o,{ref:t,onClick:function(e){l()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,fetch("/duplicate-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:c})});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),w(e.t0);case 10:E(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))(),a&&a(e)}}),n),m&&f.a.createElement(b.a,null))}));v.propTypes={onClick:g.a.func,children:g.a.node,scripts:g.a.arrayOf(g.a.shape({scriptId:g.a.string})).isRequired},t.a=v},348:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(2),l=n.n(c),o=n(248),i=n(138),s=n(262),u=n.n(s),d=n(266),p=n.n(d),m=n(374),f=n(27),E=n(307),g=n(305),b=n(323),h=n(324),v=n(306);function w(e){var t=e.selected;return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{scripts:t.map((function(e){return{scriptId:e.row.scriptId}}))},r.a.createElement(i.a,null,"Duplicate")),r.a.createElement(b.a,{scripts:t.map((function(e){return{scriptId:e.row.scriptId}}))},r.a.createElement(o.a,null,r.a.createElement(p.a,null)))),r.a.createElement(v.a,null)," ",r.a.createElement(f.b,{to:"/scripts/new"},r.a.createElement(m.a,{title:"New script"},r.a.createElement(o.a,null,r.a.createElement(u.a,null)))),r.a.createElement(g.a,null,r.a.createElement(f.b,{to:"/scripts/new"},r.a.createElement(E.a,{color:"secondary"},r.a.createElement(u.a,null)))))}w.propTypes={selected:l.a.array.isRequired},t.default=function(e){return r.a.createElement(w,e)}},356:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),c=n(0),l=n.n(c),o=n(2),i=n.n(o),s=n(248),u=n(267),d=n.n(u),p=n(359),m=n(253),f=n(137),E=n(27),g=n(26);n(138),n(225),n(221),n(222),n(223),n(387);i.a.string,i.a.node;var b=n(323),h=n(324);function v(e){var t=e.row,n=Object(g.d)().state.viewMode,a=l.a.useState(null),c=r()(a,2),o=c[0],i=c[1],u=function(){return i(null)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{onClick:function(e){return i(e.currentTarget)}},l.a.createElement(d.a,null)),l.a.createElement(p.a,{anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:u},l.a.createElement(m.a,{component:E.b,to:"/scripts/".concat(t.scriptId),onClick:u},"view"===n?"View":"Edit"),"view"===n?null:l.a.createElement(m.a,{onClick:u,scripts:[t],component:h.a},"Duplicate"),"view"===n?null:l.a.createElement(m.a,{onClick:u,scripts:[{id:t.id}],component:b.a},l.a.createElement(f.a,{color:"error"},"Delete"))))}v.propTypes={row:i.a.object.isRequired,rowIndex:i.a.number.isRequired};t.default=function(e,t){return l.a.createElement(v,{row:e,rowIndex:t})}},373:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n.n(a),c=n(20),l=n.n(c),o=n(29),i=n.n(o),s=n(0),u=n.n(s),d=n(26),p=n(105),m=n(263),f=n(288);t.default=function(){var e=Object(d.d)().state.viewMode;Object(d.c)("scripts"),Object(d.b)(f.a.PAGE_TITLE);var t=u.a.useState([]),a=l()(t,2),c=a[0],o=a[1],s=u.a.useState(!1),E=l()(s,2),g=E[0],b=E[1],h=u.a.useState(!1),v=l()(h,2),w=v[0],y=v[1];return u.a.useEffect((function(){r()(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,fetch("/get-scripts");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,a=n.scripts,o(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:b(!0),y(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}),[]),u.a.createElement(u.a.Fragment,null,g?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{noDataMsg:"No scripts",selectable:!1,title:f.a.PAGE_TITLE,data:c,renderHeaderActions:"view"===e?null:n(348).default,renderRowAction:n(356).default,displayFields:[{key:"position",label:"Position",render:function(e){return e.rowIndex+1}},{key:"title",label:"Title"},{key:"description",label:"Description"}],onSortData:"view"===e?void 0:function(e){o(e),r()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/update-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:e.map((function(e){return{id:e.id,position:e.position}}))})});case 3:return n=t.sent,t.next=6,n.json();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}})):null,w&&u.a.createElement(p.a,null))}}}]);