(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{279:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return p}));var a=n(14),r=n.n(a),l=n(62);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/get-hospitals",o({body:e},t))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/delete-hospitals",o({method:"POST",body:e},t))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/add-hospital",o({method:"POST",body:e},t))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/update-hospital",o({method:"POST",body:e},t))}},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),l=n(4),c=n.n(l),o=n(329),i=n(254),u=n(142),s=n(314),p=n.n(s),m=n(20);function d(e){var t=e.backLink,n=e.title,a=Object(m.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{container:!0,alignItems:"center",spacing:1},r.a.createElement(o.a,{item:!0,xs:1,sm:1},r.a.createElement(i.a,{onClick:function(){return t?a.push(t):a.goBack()}},r.a.createElement(p.a,null))),r.a.createElement(o.a,{item:!0,xs:11,sm:11},r.a.createElement(u.a,{variant:"h5"},n))))}d.propTypes={title:c.a.node,backLink:c.a.string}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(45),r=n.n(a),l=n(25),c=n.n(l),o=n(34),i=n.n(o),u=n(0),s=n.n(u),p=n(4),m=n.n(p),d=n(143),b=n(231),f=n(227),E=n(228),h=n(229),v=n(225),g=n(390),y=n(142),O=n(311),j=n(299);function w(e){var t=e.scriptId,n=s.a.useState(""),a=c()(n,2),l=a[0],o=a[1],u=s.a.useState(""),p=c()(u,2),m=p[0],w=p[1],k=s.a.useState(!1),x=c()(k,2),S=x[0],C=x[1],P=s.a.useState(!1),T=c()(P,2),I=T[0],_=T[1],D=s.a.useState(null),F=c()(D,2),N=F[0],L=F[1],W=s.a.useState(!1),J=c()(W,2),A=J[0],q=J[1],R=function(){I||(q(!1),o(""),w(""),C(!1))};function U(){return(U=r()(i.a.mark((function e(){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),L(null),e.next=5,fetch("/import-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({url:l,importScriptId:m,updateScriptId:t})});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,!(r=a.error?[a.error]:a.errors)){e.next=12;break}throw new Error(r.map((function(e){return e.message||e.msg||e})).join("\n"));case 12:window.location.reload(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),L(e.t0.message);case 18:_(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return s.a.useEffect((function(){L(null)}),[l,m]),s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{onClick:function(){return q(!0)},color:"primary"},"Import"),s.a.createElement(b.a,{open:A,onClose:R,maxWidth:"xs",fullWidth:!0},s.a.createElement(f.a,null,"Import script"),s.a.createElement(E.a,null,s.a.createElement(g.a,{value:l,onChange:function(e){return o(e.target.value)},label:"Webeditor URL",fullWidth:!0,required:!0,error:!l,variant:"outlined"}),s.a.createElement(y.a,{variant:"caption",color:"textSecondary"},"e.g. ",s.a.createElement("b",null,"https://webeditor.neotree.org")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(g.a,{value:m,onChange:function(e){return w(e.target.value)},label:"Script ID",fullWidth:!0,required:!0,error:!m,variant:"outlined"}),!!t&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(O.a,{control:s.a.createElement(j.a,{checked:S,onChange:function(){return C((function(e){return!e}))}}),label:s.a.createElement(y.a,{variant:"caption",color:"error"},"Confirm that you'd like to override this script with the imported script")})),!!N&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(y.a,{variant:"caption",color:"error"},N))),s.a.createElement(h.a,null,s.a.createElement("div",{style:{marginLeft:"auto"}}),s.a.createElement(d.a,{onClick:R,disabled:I},"Cancel")," ",s.a.createElement(d.a,{variant:"contained",disableElevation:!0,color:"secondary",disabled:I||!(l&&m&&(!t||S)),onClick:function(){return U.apply(this,arguments)}},"Import"),I&&s.a.createElement(s.a.Fragment,null," ",s.a.createElement(v.a,{size:20})))))}w.propTypes={scriptId:m.a.string}},313:function(e,t,n){"use strict";var a=n(15),r=n.n(a),l=n(16),c=n.n(l),o=n(0),i=n.n(o),u=n(4),s=n.n(u),p=n(10),m=n.n(p),d=n(17),b=n.n(d),f=n(308),E=["className","color"],h=b()((function(e){return{backgroundColor:function(t){var n=t.color,a=e.palette[n]?e.palette[n].main:null;return a?{backgroundColor:a}:{}}}})),v=i.a.forwardRef((function(e,t){var n=e.className,a=e.color,l=c()(e,E),o=h({color:a});return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,r()({},l,{ref:t,className:m()(n,o.backgroundColor)})))}));v.propTypes={className:s.a.string},t.a=v},398:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),l=n(25),c=n.n(l),o=n(34),i=n.n(o),u=n(0),s=n.n(u),p=n(20),m=n(225),d=n(391),b=n(383),f=n(60),E=n(130),h=n(279),v=n(14),g=n.n(v),y=n(4),O=n.n(y),j=n(330),w=n(331),k=n(382),x=n(390),S=n(402),C=n(396),P=n(299),T=n(313),I=n(142),_=n(311),D=n(329),F=n(143),N=n(292),L=n(31),W=n(310);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=e.script,n=e.hospitals,a=Object(L.d)().state.viewMode,l=Object(p.g)(),o=s.a.useState(A({exportable:!0,nuid_search_enabled:!1,hospital:""},t)),u=c()(o,2),m=u[0],d=u[1],b=function(e){return d((function(t){return A(A({},t),"function"==typeof e?e(t):e)}))},E=s.a.useState(!1),h=c()(E,2),v=h[0],g=h[1],y=s.a.useCallback((function(){r()(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,fetch(t?"/update-script":"/create-script",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(m)});case 4:return n=e.sent,e.next=7,n.json();case 7:if(!(n=e.sent).errors||!n.errors.length){e.next=10;break}return e.abrupt("return",alert(JSON.stringify(n.errors)));case 10:t?l.push("/scripts"):window.location.href="/scripts/".concat(n.script.script_id),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert("Ooops... ".concat(e.t0.message));case 16:g(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))()}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,null,s.a.createElement(w.a,null,s.a.createElement(D.a,{container:!0},s.a.createElement(D.a,{item:!0,xs:10},s.a.createElement(N.a,{backLink:"/scripts",title:"".concat(t?"Edit":"Add"," script")})),s.a.createElement(D.a,{item:!0,xs:2,style:{textAlign:"right"}},!!t&&s.a.createElement(W.a,{scriptId:t.script_id}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(I.a,{variant:"caption"},"Hospital"),s.a.createElement("select",{value:m.hospital,onChange:function(e){return b({hospital:e.target.value})},style:{background:"transparent",border:"1px solid #999",padding:10,outline:"none !important",borderRadius:5,display:"block",width:"100%"}},s.a.createElement("option",{value:""},"-- select --"),n.map((function(e){return s.a.createElement("option",{key:e.hospital_id,value:e.hospital_id},e.name)})))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,required:!0,error:!m.title,value:m.title||"",label:"Title",onChange:function(e){return b({title:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,value:m.printTitle||"",label:"Print title",onChange:function(e){return b({printTitle:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,value:m.description||"",label:"Description",onChange:function(e){return b({description:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(I.a,{variant:"button",color:"primary"},"Type"),s.a.createElement(T.a,{color:"primary"}),s.a.createElement("br",null),s.a.createElement(S.a,{name:"type",value:m.type||"",onChange:function(e){var t=e.target.value;b({type:t})}},[{name:"admission",label:"Admission"},{name:"discharge",label:"Discharge"},{name:"neolab",label:"NeoLab"}].map((function(e){return s.a.createElement(_.a,{key:e.name,value:e.name,control:s.a.createElement(C.a,null),label:e.label})}))),s.a.createElement("br",null),s.a.createElement(_.a,{control:s.a.createElement(P.a,null),value:"exportable",label:"Exportable",checked:!1!==m.exportable,onChange:function(){return b({exportable:!m.exportable})}}),s.a.createElement("br",null),s.a.createElement(_.a,{control:s.a.createElement(P.a,null),value:"nuid_search_enabled",label:"Enable NUID Search",checked:!1!==m.nuid_search_enabled,onChange:function(){return b({nuid_search_enabled:!m.nuid_search_enabled})}})),s.a.createElement(k.a,{style:{justifyContent:"flex-end"}},"view"===a&&s.a.createElement(I.a,{color:"error",variant:"caption"},"Can't save because you're in view mode"),s.a.createElement(F.a,{color:"primary",onClick:function(){return y()},disabled:"view"===a||!(m.title&&!v)},"Save"))),v?s.a.createElement(f.a,null):null)}q.propTypes={script:O.a.object,hospitals:O.a.array};var R=q,U=function(){return s.a.createElement("div",{style:{margin:25,textAlign:"center"}},s.a.createElement(m.a,null))},z=Object(E.a)((function(){return Promise.all([n.e(1),n.e(13)]).then(n.bind(null,385))}),{LoaderComponent:U}),B=Object(E.a)((function(){return Promise.all([n.e(1),n.e(12)]).then(n.bind(null,386))}),{LoaderComponent:U});t.default=function(){var e=Object(p.g)(),t=Object(p.h)(),n=t.scriptId,a=t.scriptSection,l=s.a.useState([]),o=c()(l,2),u=o[0],m=o[1],E=s.a.useState(null),v=c()(E,2),g=v[0],y=v[1],O=s.a.useState(!1),j=c()(O,2),w=j[0],k=j[1],x=s.a.useState(!1),S=c()(x,2),C=S[0],P=S[1],T=s.a.useState(a||"screens"),I=c()(T,2),_=I[0],D=I[1];return s.a.useEffect((function(){r()(i.a.mark((function e(){var t,a,r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,h.c();case 4:if(t=e.sent,a=t.hospitals,m(a||[]),"new"===n){e.next=16;break}return e.next=10,fetch("/get-script?scriptId=".concat(n));case 10:return r=e.sent,e.next=13,r.json();case 13:l=e.sent,c=l.script,y(c);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:return e.prev=20,k(!0),P(!1),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[1,18,20,24]])})))()}),[]),w?s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{script:g,hospitals:u}),s.a.createElement("br",null),g?s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{centered:!0,value:_,indicatorColor:"primary",textColor:"primary",onChange:function(t,n){D(n),e.push("/scripts/".concat(g.scriptId,"/").concat(n))}},s.a.createElement(b.a,{value:"screens",label:"Screens"}),s.a.createElement(b.a,{value:"diagnoses",label:"Diagnoses"})),"screens"===_&&s.a.createElement(z,{script:g}),"diagnoses"===_&&s.a.createElement(B,{script:g})):null,C&&s.a.createElement(f.a,null)):s.a.createElement(f.a,null)}}}]);