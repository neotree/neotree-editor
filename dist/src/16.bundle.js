(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{279:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return p}));var n=a(14),r=a.n(n),l=a(62);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/get-hospitals",o({body:e},t))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/delete-hospitals",o({method:"POST",body:e},t))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/add-hospital",o({method:"POST",body:e},t))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)("/update-hospital",o({method:"POST",body:e},t))}},292:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),r=a.n(n),l=a(4),c=a.n(l),o=a(329),i=a(254),u=a(142),s=a(312),p=a.n(s),m=a(20);function d(e){var t=e.backLink,a=e.title,n=Object(m.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{container:!0,alignItems:"center",spacing:1},r.a.createElement(o.a,{item:!0,xs:1,sm:1},r.a.createElement(i.a,{onClick:function(){return t?n.push(t):n.goBack()}},r.a.createElement(p.a,null))),r.a.createElement(o.a,{item:!0,xs:11,sm:11},r.a.createElement(u.a,{variant:"h5"},a))))}d.propTypes={title:c.a.node,backLink:c.a.string}},309:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(45),r=a.n(n),l=a(25),c=a.n(l),o=a(34),i=a.n(o),u=a(0),s=a.n(u),p=a(4),m=a.n(p),d=a(143),b=a(231),f=a(227),E=a(228),h=a(229),v=a(225),g=a(390),y=a(142),O=a(328),j=a(318);function w(e){var t=e.scriptId,a=s.a.useState(""),n=c()(a,2),l=n[0],o=n[1],u=s.a.useState(""),p=c()(u,2),m=p[0],w=p[1],k=s.a.useState(!1),x=c()(k,2),S=x[0],C=x[1],P=s.a.useState(!1),T=c()(P,2),I=T[0],_=T[1],D=s.a.useState(null),F=c()(D,2),N=F[0],L=F[1],W=s.a.useState(!1),J=c()(W,2),A=J[0],q=J[1],R=function(){I||(q(!1),o(""),w(""),C(!1))};function U(){return(U=r()(i.a.mark((function e(){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),L(null),e.next=5,fetch("/import-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({url:l,importScriptId:m,updateScriptId:t})});case 5:return a=e.sent,e.next=8,a.json();case 8:if(n=e.sent,!(r=n.error?[n.error]:n.errors)){e.next=12;break}throw new Error(r.map((function(e){return e.message||e.msg||e})).join("\n"));case 12:window.location.reload(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),L(e.t0.message);case 18:_(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return s.a.useEffect((function(){L(null)}),[l,m]),s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{onClick:function(){return q(!0)},color:"primary"},"Import"),s.a.createElement(b.a,{open:A,onClose:R,maxWidth:"xs",fullWidth:!0},s.a.createElement(f.a,null,"Import script"),s.a.createElement(E.a,null,s.a.createElement(g.a,{value:l,onChange:function(e){return o(e.target.value)},label:"Webeditor URL",fullWidth:!0,required:!0,error:!l,variant:"outlined"}),s.a.createElement(y.a,{variant:"caption",color:"textSecondary"},"e.g. ",s.a.createElement("b",null,"https://webeditor.neotree.org")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(g.a,{value:m,onChange:function(e){return w(e.target.value)},label:"Script ID",fullWidth:!0,required:!0,error:!m,variant:"outlined"}),!!t&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(O.a,{control:s.a.createElement(j.a,{checked:S,onChange:function(){return C((function(e){return!e}))}}),label:s.a.createElement(y.a,{variant:"caption",color:"error"},"Confirm that you'd like to override this script with the imported script")})),!!N&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(y.a,{variant:"caption",color:"error"},N))),s.a.createElement(h.a,null,s.a.createElement("div",{style:{marginLeft:"auto"}}),s.a.createElement(d.a,{onClick:R,disabled:I},"Cancel")," ",s.a.createElement(d.a,{variant:"contained",disableElevation:!0,color:"secondary",disabled:I||!(l&&m&&(!t||S)),onClick:function(){return U.apply(this,arguments)}},"Import"),I&&s.a.createElement(s.a.Fragment,null," ",s.a.createElement(v.a,{size:20})))))}w.propTypes={scriptId:m.a.string}},311:function(e,t,a){"use strict";var n=a(15),r=a.n(n),l=a(16),c=a.n(l),o=a(0),i=a.n(o),u=a(4),s=a.n(u),p=a(10),m=a.n(p),d=a(17),b=a.n(d),f=a(307),E=["className","color"],h=b()((function(e){return{backgroundColor:function(t){var a=t.color,n=e.palette[a]?e.palette[a].main:null;return n?{backgroundColor:n}:{}}}})),v=i.a.forwardRef((function(e,t){var a=e.className,n=e.color,l=c()(e,E),o=h({color:n});return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,r()({},l,{ref:t,className:m()(a,o.backgroundColor)})))}));v.propTypes={className:s.a.string},t.a=v},398:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a.n(n),l=a(25),c=a.n(l),o=a(34),i=a.n(o),u=a(0),s=a.n(u),p=a(20),m=a(225),d=a(391),b=a(383),f=a(60),E=a(130),h=a(279),v=a(14),g=a.n(v),y=a(4),O=a.n(y),j=a(330),w=a(331),k=a(382),x=a(390),S=a(402),C=a(396),P=a(318),T=a(311),I=a(142),_=a(328),D=a(329),F=a(143),N=a(292),L=a(31),W=a(309);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){g()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e){var t=e.script,a=e.hospitals,n=Object(L.d)().state.viewMode,l=Object(p.g)(),o=s.a.useState(A({exportable:!0,nuid_search_enabled:!1,hospital:""},t)),u=c()(o,2),m=u[0],d=u[1],b=function(e){return d((function(t){return A(A({},t),"function"==typeof e?e(t):e)}))},E=s.a.useState(!1),h=c()(E,2),v=h[0],g=h[1],y=s.a.useCallback((function(){r()(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,fetch(t?"/update-script":"/create-script",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(m)});case 4:return a=e.sent,e.next=7,a.json();case 7:if(!(a=e.sent).errors||!a.errors.length){e.next=10;break}return e.abrupt("return",alert(JSON.stringify(a.errors)));case 10:t?l.push("/scripts"):window.location.href="/scripts/".concat(a.script.script_id),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert("Ooops... ".concat(e.t0.message));case 16:g(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))()}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,null,s.a.createElement(w.a,null,s.a.createElement(D.a,{container:!0},s.a.createElement(D.a,{item:!0,xs:10},s.a.createElement(N.a,{backLink:"/scripts",title:"".concat(t?"Edit":"Add"," script")})),s.a.createElement(D.a,{item:!0,xs:2,style:{textAlign:"right"}},!!t&&s.a.createElement(W.a,{scriptId:t.script_id}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(I.a,{variant:"caption"},"Hospital"),s.a.createElement("select",{value:m.hospital,onChange:function(e){return b({hospital:e.target.value})},style:{background:"transparent",border:"1px solid #999",padding:10,outline:"none !important",borderRadius:5,display:"block",width:"100%"}},s.a.createElement("option",{value:""},"-- select --"),a.map((function(e){return s.a.createElement("option",{key:e.hospital_id,value:e.hospital_id},e.name)})))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,required:!0,error:!m.title,value:m.title||"",label:"Title",onChange:function(e){return b({title:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,value:m.printTitle||"",label:"Print title",onChange:function(e){return b({printTitle:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(x.a,{fullWidth:!0,value:m.description||"",label:"Description",onChange:function(e){return b({description:e.target.value})}})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(I.a,{variant:"button",color:"primary"},"Type"),s.a.createElement(T.a,{color:"primary"}),s.a.createElement("br",null),s.a.createElement(S.a,{name:"type",value:m.type||"",onChange:function(e){var t=e.target.value;b({type:t})}},[{name:"admission",label:"Admission"},{name:"discharge",label:"Discharge"},{name:"neolab",label:"NeoLab"}].map((function(e){return s.a.createElement(_.a,{key:e.name,value:e.name,control:s.a.createElement(C.a,null),label:e.label})}))),s.a.createElement("br",null),s.a.createElement(_.a,{control:s.a.createElement(P.a,null),value:"exportable",label:"Exportable",checked:!1!==m.exportable,onChange:function(){return b({exportable:!m.exportable})}}),s.a.createElement("br",null),s.a.createElement(_.a,{control:s.a.createElement(P.a,null),value:"nuid_search_enabled",label:"Enable NUID Search",checked:!1!==m.nuid_search_enabled,onChange:function(){return b({nuid_search_enabled:!m.nuid_search_enabled})}})),s.a.createElement(k.a,{style:{justifyContent:"flex-end"}},"view"===n&&s.a.createElement(I.a,{color:"error",variant:"caption"},"Can't save because you're in view mode"),s.a.createElement(F.a,{color:"primary",onClick:function(){return y()},disabled:"view"===n||!(m.title&&!v)},"Save"))),v?s.a.createElement(f.a,null):null)}q.propTypes={script:O.a.object,hospitals:O.a.array};var R=q,U=function(){return s.a.createElement("div",{style:{margin:25,textAlign:"center"}},s.a.createElement(m.a,null))},z=Object(E.a)((function(){return Promise.all([a.e(1),a.e(12)]).then(a.bind(null,385))}),{LoaderComponent:U}),B=Object(E.a)((function(){return Promise.all([a.e(1),a.e(11)]).then(a.bind(null,386))}),{LoaderComponent:U});t.default=function(){var e=Object(p.g)(),t=Object(p.h)(),a=t.scriptId,n=t.scriptSection,l=s.a.useState([]),o=c()(l,2),u=o[0],m=o[1],E=s.a.useState(null),v=c()(E,2),g=v[0],y=v[1],O=s.a.useState(!1),j=c()(O,2),w=j[0],k=j[1],x=s.a.useState(!1),S=c()(x,2),C=S[0],P=S[1],T=s.a.useState(n||"screens"),I=c()(T,2),_=I[0],D=I[1];return s.a.useEffect((function(){r()(i.a.mark((function e(){var t,n,r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),"new"===a){e.next=21;break}return e.prev=2,e.next=5,fetch("/get-script?scriptId=".concat(a));case 5:return t=e.sent,e.next=8,t.json();case 8:return n=e.sent,r=n.script,y(r),e.next=13,h.c();case 13:l=e.sent,c=l.hospitals,m(c||[]),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),alert(e.t0.message);case 21:k(!0),P(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})))()}),[]),w?s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{script:g,hospitals:u}),s.a.createElement("br",null),g?s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{centered:!0,value:_,indicatorColor:"primary",textColor:"primary",onChange:function(t,a){D(a),e.push("/scripts/".concat(g.scriptId,"/").concat(a))}},s.a.createElement(b.a,{value:"screens",label:"Screens"}),s.a.createElement(b.a,{value:"diagnoses",label:"Diagnoses"})),"screens"===_&&s.a.createElement(z,{script:g}),"diagnoses"===_&&s.a.createElement(B,{script:g})):null,C&&s.a.createElement(f.a,null)):s.a.createElement(f.a,null)}}}]);