(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{138:function(e,t,n){"use strict";var a=n(10),o=n.n(a),i=n(16),r=n.n(i),l=n(19),c=n.n(l),s=n(20),u=n.n(s),p=n(21),f=n.n(p),d=n(22),g=n.n(d),y=n(25),m=n.n(y),h=n(23),C=n.n(h),v=n(24),E=n.n(v),b=n(0),K=n.n(b),D=n(2),_=n.n(D),S=n(34),k=n.n(S),x=n(121),T=n(41),w=(n(144),function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=f()(this,(e=g()(t)).call.apply(e,[this].concat(o))),E()(m()(n),"onCopy",function(){n.input.select(),document.execCommand("copy"),n.input.blur()}),n}return C()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.data,i=t.host,l=t.children,c=r()(t,["className","data","host","children"]);return K.a.createElement("div",o()({},c,{className:k()(n,"ui__copyToClipBoard"),style:Object.assign({},c.style,{position:"relative"})}),K.a.createElement("input",{ref:function(t){return e.input=t},value:JSON.stringify({neotree:{data:a,host:i}}),onChange:function(){return{}},style:{position:"absolute",zIndex:-1}}),K.a.createElement("div",{onClick:this.onCopy,className:"ui__copyToClipBoardBtn"},l||K.a.createElement(x.e,null)))}}]),t}(K.a.Component));w.propTypes={children:_.a.node,className:_.a.string,data:_.a.string.isRequired,style:_.a.object,host:_.a.string.isRequired},t.a=Object(T.a)(w,function(e){return{host:e.$APP.host}})},141:function(e,t,n){"use strict";var a=n(10),o=n.n(a),i=n(19),r=n.n(i),l=n(20),c=n.n(l),s=n(21),u=n.n(s),p=n(22),f=n.n(p),d=n(25),g=n.n(d),y=n(23),m=n.n(y),h=n(24),C=n.n(h),v=n(0),E=n.n(v),b=n(2),K=n.n(b),D=n(3),_=n.n(D),S=n(16),k=n.n(S),x=n(34),T=n.n(x),w=n(12),A=n(120),N=n(52),B=n(41),j=function(e){return new Promise(function(t,n){if(e){var a="Ooops! Seems like you pasted invalid content.";try{var o=JSON.parse(e);o.neotree&&o.neotree.data&&o.neotree.host?t(o.neotree):n(a)}catch(e){n(a)}}else n("No data copied to clipboard")})},I=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=f()(t)).call.apply(e,[this].concat(o))),C()(g()(n),"state",{content:""}),C()(g()(n),"onClose",function(){n.setState({error:null}),n.props.onClose()}),C()(g()(n),"validateAndSave",function(e){if(n.setState({error:null}),e){var t=n.props,a=t.actions,o=t.host,i=t.destination,r=t.history,l=t.redirectTo,c=t.onSuccess,s=t.accept;j(e).then(function(e){var t=e.data,u=k()(e,["data"]),p=(t=JSON.parse(t)).dataType===s;if(!p)return alert("You can only paste a '".concat(s,"' here, you pasted a '").concat(t.dataType,"' instead."));n.setState({saving:!0},p?function(){a.post("copy-data",{destination:_()({host:o},i),source:_()({},u,{},t),onResponse:function(){return n.setState({saving:!1})},onFailure:function(e){return n.setState({error:e})},onSuccess:function(e){var t=e.payload;r.push(l(t)),c&&c(t)}})}:void 0)}).catch(function(e){return n.setState({error:{msg:e.msg||e.message||JSON.stringify(e)}})})}}),n}return m()(t,e),c()(t,[{key:"componentWillUpdate",value:function(e){e.clipboardData!==this.props.clipboardData&&this.validateAndSave(e.clipboardData)}},{key:"render",value:function(){var e=this,t=this.props.open,n=this.state,a=n.saving,o=n.content,i=n.error;return E.a.createElement(A.Dialog,{open:t||!1,style:{width:"260px"}},a?E.a.createElement(A.DialogContent,null,E.a.createElement("div",{className:T()("ui__flex ui__alignItems_center ui__justifyContent_center")},E.a.createElement(N.a,null))):E.a.createElement(E.a.Fragment,null,E.a.createElement(A.DialogContent,{className:T()("ui__flex ui__alignItems_center ui__justifyContent_center uiBg__faintGreyColor"),style:{border:"1px dotted #ccc",position:"relative"}},E.a.createElement("span",null,"Paste here"),E.a.createElement("textarea",{autoFocus:!0,ref:function(t){return e.input=t},onChange:function(t){return e.validateAndSave(t.target.value)},value:o,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,opacity:0}})),E.a.createElement(A.DialogActions,null,i?E.a.createElement("span",{className:"ui__dangerColor ui__smallFontSize",style:{marginRight:"auto"}},i.msg||i.message||JSON.stringify(i)):null,E.a.createElement(A.Button,{type:"button",onClick:this.onClose},"Cancel"))))}}]),t}(E.a.Component);I.propTypes={open:K.a.bool,onClose:K.a.func.isRequired,options:K.a.object,actions:K.a.object.isRequired,destination:K.a.object.isRequired,host:K.a.string.isRequired,redirectTo:K.a.func.isRequired,onSuccess:K.a.func,accept:K.a.string.isRequired};var O=Object(w.f)(Object(B.a)(I,function(e){return{host:e.$APP.host}})),R=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=f()(t)).call.apply(e,[this].concat(o))),C()(g()(n),"state",{}),C()(g()(n),"onPaste",function(e){var t=e.clipboardData.getData("text/plain");j(t).then(function(){return n.setState({togglePasteBoard:!0,clipboardData:t})})}),n}return m()(t,e),c()(t,[{key:"componentDidMount",value:function(){window.addEventListener("paste",this.onPaste,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("paste",this.onPaste,!0)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.modal,a=e.data,i=e.redirectTo,r=e.onSuccess,l=e.accept;return E.a.createElement("div",null,t,E.a.createElement(O,o()({},n,{accept:l,onSuccess:r,clipboardData:this.state.clipboardData,destination:a,redirectTo:i})))}}]),t}(v.Component);R.propTypes={children:K.a.node,modal:K.a.shape({onClose:K.a.func.isRequired,open:K.a.bool}).isRequired,data:K.a.shape({dataId:K.a.string,dataType:K.a.string}).isRequired,redirectTo:K.a.func.isRequired,onSuccess:K.a.func,accept:K.a.string.isRequired};t.a=R},144:function(e,t,n){var a=n(145);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,o);a.locals&&(e.exports=a.locals)},145:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".ui__copyToClipBoard {\n  display: inline-block; }\n  .ui__copyToClipBoard input {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  .ui__copyToClipBoard .ui__copyToClipBoardBtn {\n    display: inline;\n    position: relative; }\n",""])},146:function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(2),r=function(e){var t=e.children,n=e.options;n=n||{allScripts:!0,allConfigKeys:!0};var a="";return Object.keys(n).forEach(function(e,t){a+="".concat(e,"=").concat(n[e]),t<Object.keys(n).length-1&&(a+="&")}),o.a.createElement("a",{target:"_blank",style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},rel:"noopener noreferrer",href:"/export-data?".concat(a)},t||"Export")};r.propTypes={options:n.n(i).a.object},t.a=r},404:function(e,t,n){"use strict";n.r(t);var a=n(19),o=n.n(a),i=n(20),r=n.n(i),l=n(21),c=n.n(l),s=n(22),u=n.n(s),p=n(25),f=n.n(p),d=n(23),g=n.n(d),y=n(24),m=n.n(y),h=n(0),C=n.n(h),v=n(2),E=n.n(v),b=n(26),K=n(12),D=n(41),_=n(52),S=n(42),k=n.n(S),x=n(3),T=n.n(x),w=n(120),A=n(121),N=n(138),B=n(141),j=n(146),I=function(e){function t(e){var n;return o()(this,t),n=c()(this,u()(t).call(this,e)),m()(f()(n),"togglePasteBoard",function(){return n.setState({openPasteBoard:!n.state.openPasteBoard})}),m()(f()(n),"handleInputChange",function(e,t){return n.setState(T()({},n.state,m()({},e,t.target.value)))}),m()(f()(n),"handleCreateClick",function(){var e=n.props.actions,t=n.state,a=t.configKey,o=t.label,i=t.summary;n.setState({creatingConfigKey:!0}),e.post("create-config-key",{data:JSON.stringify({configKey:a,label:o,summary:i}),onResponse:function(){return n.setState({creatingConfigKey:!1})},onFailure:function(e){return n.setState({createConfigKeyError:e})},onSuccess:function(t){var a=t.payload;e.updateApiData(function(e){return{configKeys:[a.configKey].concat(k()(e.configKeys))}}),n.closeCreateConfigKeyDialog()}})}),m()(f()(n),"handleDeleteClick",function(){var e=n.props.actions,t=n.state.configKeyIdForAction;n.setState({deletingConfigKey:!0}),e.post("delete-config-key",{id:t,onResponse:function(){return n.setState({deletingConfigKey:!1})},onFailure:function(e){return n.setState({deleteConfigKeyError:e})},onSuccess:function(){e.updateApiData(function(e){return{configKeys:e.configKeys.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()}})}),m()(f()(n),"openCreateConfigKeyDialog",function(){return n.setState(T()({},n.state,{openCreateConfigKeyDialog:!0}))}),m()(f()(n),"closeCreateConfigKeyDialog",function(){return n.setState(T()({},n.state,{openCreateConfigKeyDialog:!1,configKey:"",label:"",summary:""}))}),m()(f()(n),"openDeleteConfirmDialog",function(e){return n.setState(T()({},n.state,{openDeleteConfirmDialog:!0,configKeyIdForAction:e}))}),m()(f()(n),"closeDeleteConfirmDialog",function(){return n.setState(T()({},n.state,{openDeleteConfirmDialog:!1,configKeyIdForAction:null,deleteConfigKeyError:null,createConfigKeyError:null}))}),m()(f()(n),"handleDuplicateKey",function(e){var t=n.props.actions;n.setState({duplicatingConfigKey:!0}),t.post("duplicate-config-key",{id:e,onResponse:function(){return n.setState({duplicatingConfigKey:!1})},onFailure:function(e){return n.setState({duplicateConfigKeyError:e})},onSuccess:function(n){var a=n.payload;t.updateApiData(function(t){var n=k()(t.configKeys),o=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(o+1,0,a.configKey),{configKeys:n}})}})}),n.state={openDeleteConfirmDialog:!1,openCreateConfigKeyDialog:!1,configKeyIdForAction:"",configKey:"",label:"",summary:""},n}return g()(t,e),r()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.configKeys,a=t.actions,o=this.state,i=o.configKey,r=o.label,l=o.summary,c=o.deletingConfigKey,s=o.deleteConfigKeyError,u=o.creatingConfigKey,p=o.createConfigKeyError,f={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"780px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},d=C.a.createElement(w.Dialog,{open:this.state.openCreateConfigKeyDialog,style:{width:"540px"}},C.a.createElement(w.DialogContent,null,C.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",onChange:this.handleInputChange.bind(this,"configKey"),value:i}),C.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Label",onChange:this.handleInputChange.bind(this,"label"),value:r}),C.a.createElement(w.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Summary",onChange:this.handleInputChange.bind(this,"summary"),value:l}),p?C.a.createElement("div",{className:"ui__dangerColor ui__textAlign_center"},p.msg||p.message||JSON.stringify(p)):null),C.a.createElement(w.DialogActions,null,[u?null:C.a.createElement(w.Button,{type:"button",onClick:this.handleCreateClick,accent:!0},"Create"),u?null:C.a.createElement(w.Button,{type:"button",onClick:this.closeCreateConfigKeyDialog},"Cancel"),u?C.a.createElement(_.a,{size:25}):null].map(function(e,t){return e&&C.a.cloneElement(e,{key:t})}))),g=C.a.createElement(w.Dialog,{open:this.state.openDeleteConfirmDialog},[C.a.createElement(w.DialogContent,null,c?C.a.createElement(_.a,{className:"ui__flex ui__justifyContent_center"}):C.a.createElement("div",null,s?C.a.createElement("div",{className:"ui__dangerColor"},s.msg||s.message||JSON.stringify(s)):C.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),c?null:C.a.createElement(w.DialogActions,null,C.a.createElement(w.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),C.a.createElement(w.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&C.a.cloneElement(e,{key:t})})),y=C.a.createElement("div",null,C.a.createElement(w.DataTable,{style:{width:"780px"},shadow:0,rows:n.map(function(e){return T()({id:e.id},e.data)})},C.a.createElement(w.TableHeader,{name:"configKey"},"Key"),C.a.createElement(w.TableHeader,{name:"label"},"Label"),C.a.createElement(w.TableHeader,{name:"summary"},"Summary"),C.a.createElement(w.TableHeader,{name:"id",style:{width:"32px"},cellFormatter:function(t,n,a){var o="more-user-action-menu".concat(a);return C.a.createElement("div",null,C.a.createElement("div",{style:{position:"relative",color:"#999999"},className:"ui__flex ui__alignItems_center"},"Â ",C.a.createElement("div",{id:o,className:"ui__cursor_pointer"},C.a.createElement(A.j,{style:{fontSize:"24px"}})),C.a.createElement(w.Menu,{target:o,align:"right"},C.a.createElement(w.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),C.a.createElement(w.MenuItem,{onClick:function(){return e.handleDuplicateKey(t)}},"Duplicate"),C.a.createElement(w.MenuItem,null,C.a.createElement(N.a,{data:JSON.stringify({dataId:t,dataType:"configKey",dataTypeHyphenated:"config-key"})},C.a.createElement("span",null,"Copy"))),C.a.createElement(w.MenuItem,null,C.a.createElement(j.a,{options:{configKey:t}})))))}}))),m=C.a.createElement(w.Card,{shadow:0,style:{width:"420px"}},C.a.createElement(w.CardTitle,null,"There are no configuration keys"),C.a.createElement(w.CardText,null,C.a.createElement("span",null,"To create your first configuration key click on the orange icon at the bottom right of the window."),C.a.createElement("br",null),C.a.createElement("br",null),C.a.createElement("br",null)));return C.a.createElement(B.a,{modal:{onClose:this.togglePasteBoard,open:this.state.openPasteBoard},accept:"configKey",data:{},redirectTo:function(){return"/dashboard/configkeys"},onSuccess:function(e){return a.updateApiData(function(t){return{configKeys:[e.configKey].concat(k()(t.configKeys))}})}},C.a.createElement(w.FABButton,{style:f.fab,colored:!0,ripple:!0,onClick:this.openCreateConfigKeyDialog},C.a.createElement(A.a,{style:{fontSize:"24px"}})),C.a.createElement("div",{style:f.container},n&&n.length>0?y:m),d,g)}}]),t}(h.Component);n.d(t,"ConfigKeys",function(){return O});var O=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(i))),m()(f()(n),"state",{}),n}return g()(t,e),r()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.actions;this.setState({loadingConfigKeys:!0}),t.get("get-config-keys",{onResponse:function(){return e.setState({loadingConfigKeys:!1})},onFailure:function(t){return e.setState({loadConfigKeysError:t})},onSuccess:function(n){var a=n.payload;e.setState({configKeys:a.configKeys}),t.updateApiData({configKeys:a.configKeys})}})}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({configKeys:[]})}},{key:"render",value:function(){return this.state.loadingConfigKeyss?C.a.createElement(_.a,{className:"ui__flex ui__justifyContent_center"}):C.a.createElement("div",null,C.a.createElement(I,this.props))}}]),t}(C.a.Component);O.propTypes={actions:E.a.object};t.default=Object(b.hot)(Object(K.f)(Object(D.a)(O,function(e){return{configKeys:e.apiData.configKeys||[]}})))}}]);