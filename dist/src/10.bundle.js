(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{139:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(124),c=n.n(i),l=n(0),o=n.n(l),s=n(133),u=n(132),p={UPDATE:"UPDATE",updateState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"UPDATE",partialState:e}}},d=function(){var e={};try{e=__$APP__}catch(t){e={fatal_error:t}}return e}(),f=Object(u.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;if(t.type===p.UPDATE){var n=r()({},e);return n=r()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},d,p),m=n(155),h=n(119),E=n(121),g=n(12),b=n(42),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return Object(g.f)(function(n){var a=n.match,i=Object(s.a)(),l=c()(i,3),u=l[0].data,p=l[1],d=l[2],g=f(),y=c()(g,1)[0].host,S=o.a.createElement(t,n);if(!e||e&&!e.map)return S;var v=u?u[Object.keys(u)[0]]:null;return o.a.createElement(o.a.Fragment,null,v?o.a.createElement(m.a,null,o.a.createElement("div",{className:"ui__flex ui__alignItems_center"},o.a.createElement("span",null,Object.keys(u)[0]," copied (",v.ids.length,")")," ",o.a.createElement(h.Button,{disabled:!e.includes(Object.keys(u)[0]),onClick:function(){var e={};a.params.scriptId&&(e={dataId:a.params.scriptId,dataType:"script"}),b.a.post("/copy-data",{destination:r()({},e,{host:y}),source:{host:y,ids:v.ids,dataType:Object.keys(u)[0]}}).then(function(){window.location.reload()}).catch(console.log)}},"Paste"),"  ",o.a.createElement("div",{className:"ui__cursor_pointer ui__flex ui__alignItems_center",onClick:function(){p(d.updateState({data:null}))}},o.a.createElement(E.e,null)))):null,S)})}},S=n(10),v=n.n(S),_=n(24),C=n.n(_),D=n(43),k=n.n(D),j=n(16),T=n.n(j),x=n(2),O=n.n(x),w=n(41),A=function(e){var t=e.container,n=e.data,a=e.children,i=e.host,l=(e.actions,T()(e,["container","data","children","host","actions"])),u=Object(s.a)(),p=c()(u,3),d=p[0],f=p[1],m=p[2],h=t||o.a.Fragment;return o.a.createElement(h,null,o.a.createElement("div",v()({},l,{onClick:function(e){var t,a,c=(d.data?d.data[n.dataType]:null)||{host:i,ids:[]},o=(t=n.dataId?n.dataId.map?n.dataId:[n.dataId]:[],a=c.ids,t.forEach(function(e){a=a.includes(e)?a.filter(function(t){return t!==e}):[].concat(k()(a),[e])}),a);f(m.updateState({data:o.length?C()({},n.dataType,r()({},c,{ids:o})):null})),l.onClick&&l.onClick(e)}}),a))};A.propTypes={children:O.a.node,data:O.a.object.isRequired,onClick:O.a.func};Object(w.a)(A,function(e){return{host:e.$APP.host}});n.d(t,"a",function(){return y})},145:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(2),c=function(e){var t=e.children,n=e.options;n=n||{allScripts:!0,allConfigKeys:!0};var a="";return Object.keys(n).forEach(function(e,t){a+="".concat(e,"=").concat(n[e]),t<Object.keys(n).length-1&&(a+="&")}),r.a.createElement("a",{target:"_blank",style:{color:"inherit",textDecoration:"none",fontWeight:"inherit"},rel:"noopener noreferrer",href:"/export-data?".concat(a)},t||"Export")};c.propTypes={options:n.n(i).a.object},t.a=c},183:function(e,t,n){"use strict";var a=n(3),r=n.n(a),i=n(132),c={UPDATE:"UPDATE",updateState:function(e){return{type:"UPDATE",partialState:e}}},l={scripts:[]};t.a=Object(i.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;if(t.type===c.UPDATE){var n=r()({},e);return r()({},e,{},"function"==typeof t.partialState?t.partialState(n):t.partialState)}return e},l,c)},412:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),i=n(124),c=n.n(i),l=n(0),o=n.n(l),s=n(2),u=n.n(s),p=n(26),d=n(12),f=n(183),m=n(42),h=n(52),E=n(3),g=n.n(E),b=n(43),y=n.n(b),S=n(19),v=n.n(S),_=n(20),C=n.n(_),D=n(21),k=n.n(D),j=n(22),T=n.n(j),x=n(25),O=n.n(x),w=n(23),A=n.n(w),I=n(24),P=n.n(I),N=n(119),B=n(121),F=n(139),U=n(145),z=function(e){function t(e){var n;return v()(this,t),n=k()(this,T()(t).call(this,e)),P()(O()(n),"toggleClipboardPasteBox",function(){return n.setState({openClipboardPasteBox:!n.state.openClipboardPasteBox})}),P()(O()(n),"handleAddScriptClick",function(){return n.props.history.push("/dashboard/scripts/new")}),P()(O()(n),"handleEditScriptClick",function(e){return n.props.history.push("/dashboard/scripts/".concat(e))}),P()(O()(n),"handleDeleteClick",function(){var e=n.props.updateState,t=n.state.scriptIdForAction;n.setState({deletingScript:!0}),m.a.post("/delete-script",{id:t}).catch(function(e){return n.setState({deleteScriptError:e,deletingScript:!1})}).then(function(){n.setState({deletingScript:!1}),e(function(e){return{scripts:e.scripts.filter(function(e){return e.id!==t})}}),n.closeDeleteConfirmDialog()})}),P()(O()(n),"handleDuplicateScript",function(e){var t=n.props.updateState;n.setState({duplicatingScript:!0}),m.a.post("/duplicate-script",{id:e}).catch(function(e){return n.setState({duplicateScriptError:e,duplicatingScript:!1})}).then(function(a){var r=a.payload;n.setState({duplicatingScript:!1}),t(function(t){var n=y()(t.scripts),a=n.map(function(t,n){return t.id===e?n:null}).filter(function(e){return null!==e})[0]||0;return n.splice(a+1,0,r.script),{scripts:n}})})}),P()(O()(n),"openDeleteConfirmDialog",function(e){return n.setState(g()({},n.state,{openDeleteConfirmDialog:!0,scriptIdForAction:e}))}),P()(O()(n),"closeDeleteConfirmDialog",function(){return n.setState(g()({},n.state,{openDeleteConfirmDialog:!1,scriptIdForAction:null,deleteScriptError:null}))}),n.state={openDeleteConfirmDialog:!1,scriptIdForAction:null},n}return A()(t,e),C()(t,[{key:"render",value:function(){var e=this,t=this.props.scripts,n=this.state,a=n.deletingScript,r=n.deleteScriptError,i={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},table:{width:"640px"},fab:{position:"fixed",bottom:24,right:24,zIndex:900}},c=o.a.createElement(N.Dialog,{open:this.state.openDeleteConfirmDialog},[o.a.createElement(N.DialogTitle,null,"Delete"),o.a.createElement(N.DialogContent,null,a?o.a.createElement(h.a,{className:"ui__flex ui__justifyContent_center"}):o.a.createElement("div",null,r?o.a.createElement("div",{className:"ui__dangerColor"},r.msg||r.message||JSON.stringify(r)):o.a.createElement("p",null,"Are you sure you want to delete this configuration key?"))),a?null:o.a.createElement(N.DialogActions,null,o.a.createElement(N.Button,{type:"button",onClick:this.handleDeleteClick,accent:!0},"Delete"),o.a.createElement(N.Button,{type:"button",onClick:this.closeDeleteConfirmDialog},"Cancel"))].map(function(e,t){return e&&o.a.cloneElement(e,{key:t})})),l=o.a.createElement("div",null,o.a.createElement(N.DataTable,{style:{width:"780px"},shadow:0,rows:t.map(function(e){return g()({id:e.id},e.data)})},o.a.createElement(N.TableHeader,{name:"title"},"Title"),o.a.createElement(N.TableHeader,{name:"description"},"Description"),o.a.createElement(N.TableHeader,{name:"id",style:{width:"64px"},cellFormatter:function(t,n,a){var r="more-user-action-menu".concat(a);return o.a.createElement("div",null,o.a.createElement("div",{style:{position:"relative",color:"#999999"},className:"ui__flex ui__alignItems_center"},o.a.createElement("div",{className:"ui__cursor_pointer",onClick:e.handleEditScriptClick.bind(e,t)},o.a.createElement(B.f,{style:{fontSize:"24px"}}))," ",o.a.createElement("div",{id:r,className:"ui__cursor_pointer"},o.a.createElement(B.j,{style:{fontSize:"24px"}})),o.a.createElement(N.Menu,{target:r,align:"right"},o.a.createElement(N.MenuItem,{onClick:e.openDeleteConfirmDialog.bind(e,t)},"Delete"),o.a.createElement(N.MenuItem,{onClick:function(){return e.handleDuplicateScript(t)}},"Duplicate"),o.a.createElement(N.MenuItem,null,o.a.createElement(U.a,{options:{script:t}})))))}}))),s=o.a.createElement(N.Card,{shadow:0,style:{width:"320px"}},o.a.createElement(N.CardTitle,null,"There are no scripts"),o.a.createElement(N.CardText,null,o.a.createElement("span",null,"To create your first script click on the orange icon at the bottom right of the window."),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null)));return o.a.createElement("div",null,o.a.createElement(N.FABButton,{style:i.fab,colored:!0,ripple:!0,onClick:this.handleAddScriptClick},o.a.createElement(B.a,null)),o.a.createElement("div",{style:i.container},t.length?l:s),c)}}]),t}(l.Component);z.propTypes={scripts:u.a.array.isRequired,actions:u.a.object.isRequired};var M=Object(p.hot)(Object(F.a)(["script"])(z)),q=function(e){var t=Object(l.useState)(!1),n=c()(t,2),a=n[0],i=n[1],s=Object(l.useState)(null),u=c()(s,2),p=(u[0],u[1]),d=Object(f.a)(),E=c()(d,3),g=E[0].scripts,b=E[1],y=E[2];return Object(l.useEffect)(function(){i(!0),m.a.get("/get-scripts").then(function(e){return i(!1),e}).then(function(e){var t=e.payload;i(!1),b(y.updateState({scripts:t.scripts||[]}))}).catch(function(e){i(!1),p(e)})},[]),o.a.createElement("div",null,!g.length&&a&&o.a.createElement(h.a,{className:"ui__flex ui__justifyContent_center"}),!g.length&&a?null:o.a.createElement(M,r()({},e,{scripts:g,updateState:function(e){return b(y.updateState(e))}})))};q.propTypes={match:u.a.object};t.default=Object(p.hot)(Object(d.f)(q))}}]);