(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{286:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Scripts"}},319:function(e,t,n){"use strict";var a=n(42),r=n.n(a),c=n(9),l=n.n(c),i=n(20),s=n.n(i),o=n(11),u=n.n(o),p=n(29),d=n.n(p),m=n(0),f=n.n(m),E=n(2),v=n.n(E),w=n(102),h=n(56),b=["children","scripts","onClick"],g=f.a.forwardRef((function(e,t){var n=e.children,a=e.scripts,c=e.onClick,i=u()(e,b),o=a.length>1,p=Object(w.a)(),m=s()(p,2),E=m[0],v=m[1],g=f.a.useState(!1),k=s()(g,2),y=k[0],x=k[1];return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",l()({},i,{ref:t,onClick:function(e){v(),c&&c(e)}}),n),E({title:"Delete script".concat(o?"s":""),message:"Are you sure you want to delete script".concat(o?"s":"","?"),onConfirm:function(){r()(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,fetch("/delete-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:a})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,(r=n.errors)&&r.length?alert(JSON.stringify(r)):window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:x(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}),y?f.a.createElement(h.a,null):null)}));g.propTypes={onClick:v.a.func,children:v.a.node,scripts:v.a.array.isRequired},t.a=g},320:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c=n(42),l=n.n(c),i=n(20),s=n.n(i),o=n(11),u=n.n(o),p=n(29),d=n.n(p),m=n(0),f=n.n(m),E=n(2),v=n.n(E),w=n(56),h=["children","onClick","scripts"],b=f.a.forwardRef((function(e,t){var n=e.children,a=e.onClick,c=e.scripts,i=u()(e,h),o=f.a.useState(!1),p=s()(o,2),m=p[0],E=p[1],v=f.a.useState(null),b=s()(v,2),g=(b[0],b[1]);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",r()({},i,{ref:t,onClick:function(e){l()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,fetch("/duplicate-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:c})});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g(e.t0);case 10:E(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))(),a&&a(e)}}),n),m&&f.a.createElement(w.a,null))}));b.propTypes={onClick:v.a.func,children:v.a.node,scripts:v.a.arrayOf(v.a.shape({scriptId:v.a.string})).isRequired},t.a=b},345:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n.n(a),c=n(20),l=n.n(c),i=n(29),s=n.n(i),o=n(0),u=n.n(o),p=n(2),d=n.n(p),m=n(248),f=n(138),E=n(259),v=n.n(E),w=n(264),h=n.n(w),b=n(225),g=n(221),k=n(222),y=n(223),x=n(219),C=n(385),S=n(371),T=n(137),I=n(27),j=n(321),O=n(318),F=n(319),R=n(320);function D(){var e=u.a.useState(""),t=l()(e,2),n=t[0],a=t[1],c=u.a.useState(""),i=l()(c,2),o=i[0],p=i[1],d=u.a.useState(!1),m=l()(d,2),E=m[0],v=m[1],w=u.a.useState(null),h=l()(w,2),S=h[0],I=h[1],j=u.a.useState(!1),O=l()(j,2),F=O[0],R=O[1],D=function(){E||(R(!1),a(""),p(""))};function P(){return(P=r()(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),I(null),e.next=5,fetch("/import-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({url:n,scriptId:o})});case 5:return t=e.sent,e.next=8,t.json();case 8:if(a=e.sent,!(r=a.error?[a.error]:a.errors)){e.next=12;break}throw new Error(r.map((function(e){return e.message||e.msg||e})).join("\n"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),I(e.t0.message);case 17:v(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return u.a.useEffect((function(){I(null)}),[n,o]),u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{onClick:function(){return R(!0)}},"Import"),u.a.createElement(b.a,{open:F,onClose:D,maxWidth:"xs",fullWidth:!0},u.a.createElement(g.a,null,"Import script"),u.a.createElement(k.a,null,u.a.createElement(C.a,{value:n,onChange:function(e){return a(e.target.value)},label:"Webeditor URL",fullWidth:!0,required:!0,error:!n}),u.a.createElement(T.a,{variant:"caption",color:"textSecondary"},"e.g. ",u.a.createElement("b",null,"https://webeditor.neotree.org")),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(C.a,{value:o,onChange:function(e){return p(e.target.value)},label:"Script ID",fullWidth:!0,required:!0,error:!o}),!!S&&u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(T.a,{variant:"caption",color:"error"},S))),u.a.createElement(y.a,null,u.a.createElement("div",{style:{marginLeft:"auto"}}),u.a.createElement(f.a,{onClick:D,disabled:E},"Cancel")," ",u.a.createElement(f.a,{variant:"contained",disableElevation:!0,color:"secondary",disabled:E||!(n&&o),onClick:function(){return P.apply(this,arguments)}},"Import"),E&&u.a.createElement(u.a.Fragment,null," ",u.a.createElement(x.a,{size:20})))))}function P(e){var t=e.selected;return u.a.createElement(u.a.Fragment,null,t.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement(R.a,{scripts:t.map((function(e){return{scriptId:e.row.scriptId}}))},u.a.createElement(f.a,null,"Duplicate")),u.a.createElement(F.a,{scripts:t.map((function(e){return{scriptId:e.row.scriptId}}))},u.a.createElement(m.a,null,u.a.createElement(h.a,null)))),u.a.createElement(D,null)," ",u.a.createElement(I.b,{to:"/scripts/new"},u.a.createElement(S.a,{title:"New script"},u.a.createElement(m.a,null,u.a.createElement(v.a,null)))),u.a.createElement(O.a,null,u.a.createElement(I.b,{to:"/scripts/new"},u.a.createElement(j.a,{color:"secondary"},u.a.createElement(v.a,null)))))}P.propTypes={selected:d.a.array.isRequired},t.default=function(e){return u.a.createElement(P,e)}},346:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),c=n(0),l=n.n(c),i=n(2),s=n.n(i),o=n(248),u=n(265),p=n.n(u),d=n(356),m=n(253),f=n(137),E=n(27),v=n(25),w=n(319),h=n(320);function b(e){var t=e.row,n=Object(v.d)().state.viewMode,a=l.a.useState(null),c=r()(a,2),i=c[0],s=c[1],u=function(){return s(null)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{onClick:function(e){return s(e.currentTarget)}},l.a.createElement(p.a,null)),l.a.createElement(d.a,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:u},l.a.createElement(m.a,{component:E.b,to:"/scripts/".concat(t.scriptId),onClick:u},"view"===n?"View":"Edit"),"view"===n?null:l.a.createElement(m.a,{onClick:u,scripts:[t],component:h.a},"Duplicate"),"view"===n?null:l.a.createElement(m.a,{onClick:u,scripts:[{id:t.id}],component:w.a},l.a.createElement(f.a,{color:"error"},"Delete"))))}b.propTypes={row:s.a.object.isRequired,rowIndex:s.a.number.isRequired},t.default=function(e,t){return l.a.createElement(b,{row:e,rowIndex:t})}},370:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n.n(a),c=n(20),l=n.n(c),i=n(29),s=n.n(i),o=n(0),u=n.n(o),p=n(25),d=n(106),m=n(262),f=n(286);t.default=function(){var e=Object(p.d)().state.viewMode;Object(p.c)("scripts"),Object(p.b)(f.a.PAGE_TITLE);var t=u.a.useState([]),a=l()(t,2),c=a[0],i=a[1],o=u.a.useState(!1),E=l()(o,2),v=E[0],w=E[1],h=u.a.useState(!1),b=l()(h,2),g=b[0],k=b[1];return u.a.useEffect((function(){r()(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,fetch("/get-scripts");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,a=n.scripts,i(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:w(!0),k(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}),[]),u.a.createElement(u.a.Fragment,null,v?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{noDataMsg:"No scripts",selectable:!1,title:f.a.PAGE_TITLE,data:c,renderHeaderActions:"view"===e?null:n(345).default,renderRowAction:n(346).default,displayFields:[{key:"position",label:"Position",render:function(e){return e.rowIndex+1}},{key:"title",label:"Title"},{key:"description",label:"Description"}],onSortData:"view"===e?void 0:function(e){i(e),r()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/update-scripts",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({scripts:e.map((function(e){return{id:e.id,position:e.position}}))})});case 3:return n=t.sent,t.next=6,n.json();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}})):null,g&&u.a.createElement(d.a,null))}}}]);