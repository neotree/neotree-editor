(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{267:function(e,t,n){"use strict";var a=n(37),r=n(146);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),s=(0,a(n(147)).default)(c.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=s},313:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Screens"}},318:function(e,t,n){"use strict";var a=n(45),r=n.n(a),c=n(15),s=n.n(c),l=n(25),i=n.n(l),o=n(16),u=n.n(o),d=n(34),p=n.n(d),f=n(0),m=n.n(f),v=n(4),E=n.n(v),y=n(231),g=n(229),h=n(228),b=n(227),w=n(143),O=n(142),k=n(225),S=n(14),C=n.n(S),j=n(62);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=["children","items","type","onClick","onSuccess"],P=m.a.forwardRef((function(e,t){var n=e.children,a=e.items,c=e.type,l=e.onClick,o=e.onSuccess,d=u()(e,T),f=a.length>1,v=m.a.useState(!1),E=i()(v,2),S=E[0],C=E[1],x=m.a.useState(!1),P=i()(x,2),R=P[0],F=P[1],q=m.a.useState(!1),A=i()(q,2),D=A[0],J=A[1],N=m.a.useState([]),M=i()(N,2),W=M[0],_=M[1],z=m.a.useState(null),G=i()(z,2),L=G[0],V=G[1],B=m.a.useState(!1),H=i()(B,2),K=H[0],Q=H[1],U=m.a.useState(""),X=i()(U,2),Y=X[0],Z=X[1],$=m.a.useState(!1),ee=i()($,2),te=ee[0],ne=ee[1];m.a.useEffect((function(){V(null),Z(null),S&&!D&&(F(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(j.a)("/get-scripts",I({body:e},t))}().then((function(e){var t=e.error,n=e.scripts;if(t)return V(t);_(n),J(!0),F(!1)})).then((function(e){V(e),F(!1)})))}),[S]);var ae=f?"diagnosis"===c?"diagnoses":"screens":c;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",s()({},d,{ref:t,onClick:function(e){C(!0),l&&l(e)}}),n),m.a.createElement(y.a,{open:S,onClose:function(){return C(!1)},fullWidth:!0,maxWidth:"sm"},m.a.createElement(b.a,null,"Copy ",ae),R?m.a.createElement(h.a,null,m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(k.a,null))):m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,null,m.a.createElement(O.a,null,"Copy to"),m.a.createElement("select",{value:Y||"",style:{maxWidth:200,background:"transparent",border:"1px solid #ddd",padding:10,outline:"none !important"},onChange:function(e){return Z(e.target.value)}},m.a.createElement("option",{value:""},"Select script"),W.map((function(e,t){return m.a.createElement("option",{key:t,value:e.scriptId},e.title)})))),m.a.createElement(g.a,null,m.a.createElement(w.a,{disabled:K,onClick:function(){return C(!1)}},"Cancel"),m.a.createElement(w.a,{color:"primary",variant:"contained",disabled:K||!Y,onClick:function(){var e=null;switch(c){case"screen":e="/copy-screens";break;case"diagnosis":e="/copy-diagnoses"}e&&r()(p.a.mark((function t(){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q(!0),t.prev=1,t.next=4,fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({items:a,targetScriptId:Y})});case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,(c=r.errors)&&c.length?alert(JSON.stringify(c)):(ne(!0),o&&o(a,Y)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),alert(t.t0.message);case 15:Q(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()}},"Copy"),L?m.a.createElement(O.a,{variant:"caption",color:"error"},L.msg||L.message||JSON.stringify(L)):null))),m.a.createElement(y.a,{open:te,onClose:function(){return ne(!1)},fullWidth:!0,maxWidth:"sm"},m.a.createElement(h.a,null,m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(O.a,null,"Copied ",m.a.createElement("b",null,ae)," successfully."))),m.a.createElement(g.a,null,m.a.createElement(w.a,{accent:!0,onClick:function(){C(!1),ne(!1)}},"OK"))))}));P.propTypes={onClick:E.a.func,children:E.a.node,items:E.a.arrayOf(E.a.shape({diagnosisId:E.a.string,screenId:E.a.string,scriptId:E.a.string.isRequired})).isRequired,onSuccess:E.a.func,type:E.a.oneOf(["screen","diagnosis"]).isRequired};t.a=P},334:function(e,t,n){"use strict";var a=n(15),r=n.n(a),c=n(0),s=n.n(c),l=n(20),i=n(318),o=s.a.forwardRef((function(e,t){var n=Object(l.h)().scriptId;return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,r()({},e,{ref:t,type:"screen",onSuccess:function(e,t){n===t&&window.location.reload()}})))}));t.a=o},359:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),s=n.n(c),l=n(254),i=n(268),o=n.n(i),u=n(143),d=n(20),p=n(32),f=n(380),m=n(334);function v(e){var t=e.selected,n=Object(d.h)().scriptId;return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{items:t.map((function(e){var t=e.row;return{screenId:t.screenId,scriptId:t.scriptId,id:t.id}}))},r.a.createElement(u.a,null,"Copy"))),r.a.createElement(p.b,{to:"/scripts/".concat(n,"/screens/new")},r.a.createElement(f.a,{title:"New screen"},r.a.createElement(l.a,null,r.a.createElement(o.a,null)))))}v.propTypes={selected:s.a.array.isRequired},t.default=function(e){return r.a.createElement(v,e)}},364:function(e,t,n){"use strict";n.r(t);var a=n(25),r=n.n(a),c=n(0),s=n.n(c),l=n(4),i=n.n(l),o=n(254),u=n(267),d=n.n(u),p=n(366),f=n(259),m=n(142),v=n(32),E=n(31),y=n(45),g=n.n(y),h=n(15),b=n.n(h),w=n(16),O=n.n(w),k=n(34),S=n.n(k),C=n(107),j=n(60),x=["children","screens","onClick"],I=s.a.forwardRef((function(e,t){var n=e.children,a=e.screens,c=e.onClick,l=O()(e,x),i=a.length>1,o=Object(C.a)(),u=r()(o,2),d=u[0],p=u[1],f=s.a.useState(!1),m=r()(f,2),v=m[0],E=m[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",b()({},l,{ref:t,onClick:function(e){p(),c&&c(e)}}),n),d({title:"Delete screen".concat(i?"s":""),message:"Are you sure you want to delete screen".concat(i?"s":"","?"),onConfirm:function(){g()(S.a.mark((function e(){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,fetch("/delete-screens",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({screens:a})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,(r=n.errors)&&r.length?alert(JSON.stringify(r)):window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:E(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}),v?s.a.createElement(j.a,null):null)}));I.propTypes={onClick:i.a.func,children:i.a.node,screens:i.a.arrayOf(i.a.shape({id:i.a.number.isRequired})).isRequired};var T=I,P=n(334);function R(e){var t=e.row,n=Object(E.d)().state.viewMode,a=s.a.useState(null),c=r()(a,2),l=c[0],i=c[1],u=function(){return i(null)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{onClick:function(e){return i(e.currentTarget)}},s.a.createElement(d.a,null)),s.a.createElement(p.a,{anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:u},s.a.createElement(f.a,{component:v.b,to:"/scripts/".concat(t.scriptId,"/screens/").concat(t.id),onClick:u},"view"===n?"View":"Edit"),"view"===n?null:s.a.createElement(f.a,{onClick:u,items:[{screenId:t.screenId,scriptId:t.scriptId,id:t.id}],component:P.a},"Copy"),"view"===n?null:s.a.createElement(f.a,{onClick:u,screens:[{id:t.id}],component:T},s.a.createElement(m.a,{color:"error"},"Delete"))))}R.propTypes={row:i.a.object.isRequired,rowIndex:i.a.number.isRequired};t.default=function(e,t){return s.a.createElement(R,{row:e,rowIndex:t})}},388:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),c=n(25),s=n.n(c),l=n(34),i=n.n(l),o=n(0),u=n.n(o),d=n(20),p=n(313),f=n(269),m=n(225),v=n(31);t.default=function(){var e=Object(v.d)().state.viewMode,t=Object(d.h)().scriptId,a=u.a.useState([]),c=s()(a,2),l=c[0],o=c[1],E=u.a.useState(!1),y=s()(E,2),g=y[0],h=y[1],b=u.a.useState(!1),w=s()(b,2),O=w[0],k=w[1];return u.a.useEffect((function(){r()(i.a.mark((function e(){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,fetch("/get-screens?scriptId=".concat(t));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.screens,o(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:h(!0),k(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}),[]),u.a.createElement(u.a.Fragment,null,g?u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{selectable:"view"!==e,noDataMsg:"No screens",title:p.a.PAGE_TITLE,data:l,renderHeaderActions:"view"===e?null:n(359).default,renderRowAction:n(364).default,displayFields:[{key:"position",label:"Position",render:function(e){return e.row.position}},{key:"type",label:"Type"},{key:"epicId",label:"Epic"},{key:"storyId",label:"Story"},{key:"refId",label:"Ref"},{key:"title",label:"Title"}],onSortData:"view"===e?void 0:function(e){o(e),r()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/update-screens",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({screens:e.map((function(e){return{id:e.id,position:e.position}}))})});case 3:return n=t.sent,t.next=6,n.json();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}})):null,O&&u.a.createElement("div",{style:{margin:25,textAlign:"center"}},u.a.createElement(m.a,null)))}}}]);