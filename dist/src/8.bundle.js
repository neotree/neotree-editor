(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{250:function(e,t,n){"use strict";var a=n(12),r=n.n(a),i=n(6),o=n.n(i),l=n(20),c=n.n(l),s=n(0),u=n.n(s),m=n(2),d=n.n(m),f=n(409),p=n(345),g=n(346),b=n(236),h=n(343),v=n(344),y=n(128),E=n(387),O=n(354),j=n(41),w=n.n(j),S=n(10),x=n.n(S),P=n(279),k=n.n(P),D=n(347),C=n(254),F=n(244),I=n.n(F),T=n(237),R=n(280),N=n.n(R),A=n(408),W=Object(C.c)((function(){return u.a.createElement("div",null,u.a.createElement(A.a,{title:"Drag to reposition"},u.a.createElement(T.a,{style:{cursor:"move"}},u.a.createElement(N.a,null))))})),z=Object(C.b)((function(e){var t=e.row,n=e.rowIndex,a=e.selectable,r=e.classes,i=e.selected,l=e.setSelected,c=e.displayFields,s=e.action;return u.a.createElement(p.a,{className:x()(r.dataItemRow,{selected:i.map((function(e){return e.rowIndex})).includes(n)})},a&&u.a.createElement(g.a,{padding:"none"},u.a.createElement(E.a,{checked:i.map((function(e){return e.rowIndex})).includes(n),onChange:function(){return l((function(e){return e.map((function(e){return e.rowIndex})).includes(n)?e.filter((function(e){return e.rowIndex!==n})):[].concat(I()(e),[{row:t,rowIndex:n}])}))}})),u.a.createElement(g.a,{padding:"none"},u.a.createElement(W,null)),c.map((function(e,a){var r=e.render?e.render({row:t,rowIndex:n,column:e.key,columnIndex:a}):(t.data||t)[e.key];return u.a.createElement(g.a,o()({},e.cellProps,{key:"".concat(n).concat(e.key).concat(a)}),r)})),s?u.a.createElement(g.a,{align:"right",padding:"none"},s):null)})),M=Object(C.a)((function(e){var t=e.rows,n=e.classes,a=e.selected,r=e.selectable,i=e.setSelected,o=e.displayFields,l=e.renderRowAction;return u.a.createElement(D.a,null,t.map((function(e,t){var c=t;return u.a.createElement(z,{key:"".concat(c).concat(t),row:e,index:t,rowIndex:t,classes:n,selectable:r,action:l?l(e,t)||u.a.createElement(u.a.Fragment,null):null,displayFields:o,selected:a,setSelected:i})})))}));function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=w()((function(e){return{table:{minWidth:800},headerWrap:{position:"relative",height:60},header:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",boxSizing:"border-box",padding:e.spacing()},dataItemRow:{"&:hover, &.selected":{backgroundColor:e.palette.action.hover}}}}));function $(e){var t=e.noDataMsg,n=e.title,a=e.selectable,r=e.renderRowAction,i=e.data,l=e.onSortData,s=e.displayFields,m=e.renderHeaderActions;a=!1!==a;var d=H(),j=u.a.useState([]),w=c()(j,2),S=w[0],P=w[1],D=u.a.useState(i),C=c()(D,2),F=C[0],I=C[1];return u.a.useEffect((function(){JSON.stringify(F)!==JSON.stringify(i)&&I(i)}),[i]),u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{square:!0,elevation:0},u.a.createElement("div",{className:x()(d.headerWrap)},u.a.createElement("div",{className:x()(d.header)},u.a.createElement(y.a,{variant:"h6"},n),u.a.createElement("div",{style:{marginLeft:"auto"}}),m&&m({selected:S}))),u.a.createElement(O.a,null),F.length?u.a.createElement(f.a,{component:b.a},u.a.createElement(h.a,{className:x()(d.table)},u.a.createElement(v.a,null,u.a.createElement(p.a,null,a&&u.a.createElement(g.a,{padding:"none"},u.a.createElement(E.a,{indeterminate:S.length>0&&S.length<F.length,checked:F.length>0&&S.length===F.length,onChange:function(){return P((function(e){return e.length<F.length?F.map((function(e,t){return{row:e,rowIndex:t}})):[]}))}})),u.a.createElement(g.a,null),s.map((function(e,t){return u.a.createElement(g.a,o()({},e.cellProps,{key:"".concat(e.key).concat(t)}),u.a.createElement("b",null,e.label))})),r?u.a.createElement(g.a,{align:"right"},u.a.createElement("b",null,"Action")):null)),u.a.createElement(M,{rows:F,selectable:a,renderRowAction:r,classes:d,displayFields:s,selected:S,setSelected:P,useDragHandle:!0,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,a=k()(F,{$splice:[[t,1],[n,0,F[t]]]}).map((function(e,t){return q(q({},e),{},{position:t+1})}));I(a),l(a)}}))):u.a.createElement("div",{style:{textAlign:"center",padding:25}},u.a.createElement(y.a,{color:"textSecondary"},t||"No data"))))}$.propTypes={noDataMsg:d.a.string,selectable:d.a.bool,renderRowAction:d.a.func,title:d.a.string.isRequired,displayFields:d.a.array.isRequired,renderHeaderActions:d.a.func,onSortData:d.a.func,data:d.a.array.isRequired};t.a=$},259:function(e,t,n){"use strict";var a=n(27);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(0,a(n(133)).default)(r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=i},261:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Scripts"}},264:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return p}));var a=n(12),r=n.n(a),i=n(55);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/get-diagnoses",l({body:e},t))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/update-diagnoses",l({method:"POST",body:e},t))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/delete-diagnosis",l({method:"POST",body:e},t))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/duplicate-diagnosis",l({method:"POST",body:e},t))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/get-diagnosis",l({body:e},t))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/update-diagnosis",l({method:"POST",body:e},t))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.a)("/create-diagnosis",l({method:"POST",body:e},t))}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n.n(a),i=n(2),o=n.n(i),l=n(339),c=n(237),s=n(128),u=n(303),m=n.n(u),d=n(13);function f(e){var t=e.backLink,n=e.title,a=Object(d.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{container:!0,alignItems:"center",spacing:1},r.a.createElement(l.a,{item:!0,xs:1,sm:1},r.a.createElement(c.a,{onClick:function(){return t?a.push(t):a.goBack()}},r.a.createElement(m.a,null))),r.a.createElement(l.a,{item:!0,xs:11,sm:11},r.a.createElement(s.a,{variant:"h5"},n))))}f.propTypes={title:o.a.node,backLink:o.a.string}},283:function(e,t,n){"use strict";n.d(t,"b",(function(){return E}));var a=n(6),r=n.n(a),i=n(244),o=n.n(i),l=n(20),c=n.n(l),s=n(9),u=n.n(s),m=n(0),d=n.n(m),f=n(2),p=n.n(f),g=n(10),b=n.n(g),h=n(41),v=n.n(h),y=n(210);function E(e){return new Promise((function(t,n){var a=new FormData;a.append("file",e,e.filename),fetch("/upload-file",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){var a=e.file,r=e.error;if(r)return n(r);t({type:a.content_type,size:a.size,filename:a.filename,fileId:a.id,data:"".concat(window.location.origin,"/file/").concat(a.id)})})).catch(n)}))}var O=v()((function(){return{root:{position:"relative"},input:{position:"absolute",top:0,left:0,bottom:0,right:0,opacity:0}}})),j=d.a.forwardRef((function(e,t){var n=e.onUploadSuccess,a=e.children,i=e.className,l=u()(e,["onUploadSuccess","children","className"]),s=d.a.useState(!1),m=c()(s,2),f=m[0],p=m[1],g=d.a.useRef(null);d.a.useImperativeHandle(t,(function(){return{input:g,uploading:f}}));var h=O();return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:b()(i,h.root)},f?d.a.createElement(y.a,{size:15}):a,d.a.createElement("input",r()({},l,{type:"file",ref:g,value:"",className:b()(h.input),onChange:function(e){p(!0);var t=o()(e.target.files),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(!1),n(t)};Promise.all(t.map((function(e){return new Promise((function(t){E(e).then((function(e){return t(e)})).catch((function(e){return t({error:e})}))}))}))).then((function(e){return a(null,e)})).catch(a)}}))))}));j.propTypes={children:p.a.node,onUploadSuccess:p.a.func};t.a=j},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));var a=[{name:"date",label:"Date"},{name:"datetime",label:"Date + Time"},{name:"dropdown",label:"Dropdown"},{name:"number",label:"Number"},{name:"text",label:"Text"},{name:"time",label:"Time"},{name:"period",label:"Time period"}],r=[{name:"checklist",label:"Checklist"},{name:"form",label:"Form"},{name:"management",label:"Management"},{name:"multi_select",label:"Multiple choice list"},{name:"single_select",label:"Single choice list"},{name:"progress",label:"Progress"},{name:"timer",label:"Timer"},{name:"yesno",label:"Yes/No"}],i=[{name:"risk",label:"Risk factor"},{name:"sign",label:"Sign/Symptom"}]},305:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(20),r=n.n(a),i=n(0),o=n.n(i),l=n(2),c=n.n(l),s=n(212),u=n(129),m=n(209),d=n(208),f=n(207),p=n(210),g=n(283);function b(e){var t=e.data,n=e.save,a=o.a.useState(!1),i=r()(a,2),l=i[0],c=i[1],b=function(){var e=t.image1,n=t.image2,a=t.image3,r=[];if(e||n||a){var i=function(e,t){return t&&!t.fileId&&r.push({name:e,img:t})};i("image1",e),i("image2",n),i("image3",a)}return r};return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{fullWidth:!0,maxWidth:"sm",open:b().length>0,onClose:function(){}},o.a.createElement(f.a,null,"These images must be saved in the database"),o.a.createElement(d.a,null,b().map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("div",{style:{width:"90%",maxWidth:200,margin:"auto",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement("img",{style:{width:"100%",height:"auto"},role:"presentation",src:e.img.data})),o.a.createElement("br",null))}))),o.a.createElement(m.a,null,o.a.createElement(u.a,{onClick:function(){var e=b();c(!0),Promise.all(e.map((function(e){for(var t=e.img,n=t.data,a=atob(n.split(",")[1]),r=n.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(a.length),o=new Uint8Array(i),l=0;l<a.length;l++)o[l]=a.charCodeAt(l);var c=new Blob([i],{type:r});return Object(g.b)(new File([c],t.filename))}))).catch((function(e){c(!1),alert(e.msg||e.message||JSON.stringify(e))})).then((function(t){var a={};t.forEach((function(t,n){a[e[n].name]=t})),c(!1),n(a)}))}},l?o.a.createElement(p.a,{size:15}):"Save"))))}b.propTypes={data:c.a.object.isRequired,save:c.a.func.isRequired}},306:function(e,t,n){"use strict";var a=n(12),r=n.n(a),i=n(0),o=n.n(i),l=n(416),c=n(322),s=n(249),u=n.n(s),m=n(259),d=n.n(m),f=n(128),p=n(339),g=n(283);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.labels,n=e.value,a=e.onChange,r=e.noTitle;n=h({text:"",title:"",image:null},n),t=h({text:"Text",title:"Title",image:"Image"},t);var i=function(e){return a(h(h({},n),e))};return o.a.createElement(o.a.Fragment,null,!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(l.a,{fullWidth:!0,value:n.title||"",label:t.title,onChange:function(e){return i({title:e.target.value})}})),o.a.createElement("br",null)),o.a.createElement(p.a,{container:!0,spacing:1,alignItems:"flex-end"},o.a.createElement(p.a,{item:!0,xs:10,sm:10},o.a.createElement(l.a,{fullWidth:!0,rows:5,multiline:!0,value:n.text||"",label:t.text,onChange:function(e){return i({text:e.target.value})}})),o.a.createElement(p.a,{item:!0,xs:2,sm:2},o.a.createElement("div",{style:{textAlign:"center",minHeight:100,display:"flex",alignItems:"center",justifyContent:"center"}},n.image&&n.image.data?o.a.createElement("img",{role:"presentation",src:n.image.data,style:{width:100,height:"auto"}}):o.a.createElement("div",{stype:{padding:20}},o.a.createElement(f.a,{color:"textSecondary",variant:"caption"},"No image"))),o.a.createElement("br",null),o.a.createElement(p.a,{container:!0},o.a.createElement(p.a,{item:!0,xs:6,sm:6,style:{textAlign:"center"}},o.a.createElement(g.a,{accept:"image/*",onUploadSuccess:function(e){return a({image:e[0]})}},o.a.createElement(c.a,{size:"small",color:"secondary"},o.a.createElement(u.a,{fontSize:"small"})))),o.a.createElement(p.a,{item:!0,xs:6,sm:6,style:{textAlign:"center"}},o.a.createElement(c.a,{size:"small",disabled:!n.image,onClick:function(){return i({image:null})}},o.a.createElement(d.a,{fontSize:"small"})))))),o.a.createElement("br",null),o.a.createElement("br",null))}},307:function(e,t,n){"use strict";t.a={PAGE_TITLE:"Diagnoses"}},322:function(e,t,n){"use strict";var a=n(3),r=n(1),i=n(0),o=(n(2),n(4)),l=n(5),c=n(88),s=n(8),u=i.forwardRef((function(e,t){var n=e.children,l=e.classes,u=e.className,m=e.color,d=void 0===m?"default":m,f=e.component,p=void 0===f?"button":f,g=e.disabled,b=void 0!==g&&g,h=e.disableFocusRipple,v=void 0!==h&&h,y=e.focusVisibleClassName,E=e.size,O=void 0===E?"large":E,j=e.variant,w=void 0===j?"round":j,S=Object(a.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return i.createElement(c.a,Object(r.a)({className:Object(o.a)(l.root,u,"round"!==w&&l.extended,"large"!==O&&l["size".concat(Object(s.a)(O))],b&&l.disabled,{primary:l.primary,secondary:l.secondary,inherit:l.colorInherit}[d]),component:p,disabled:b,focusRipple:!v,focusVisibleClassName:Object(o.a)(l.focusVisible,y),ref:t},S),i.createElement("span",{className:l.label},n))}));t.a=Object(l.a)((function(e){return{root:Object(r.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(u)},372:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(12),r=n.n(a),i=n(264);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loadingDiagnosis:!0});var n=function(t,n){e.setState((function(e){var a=e.form;return l(l({initialiseDiagnosisError:t,diagnosisInitialised:!0,loadingDiagnosis:!1},n),{},{form:l(l({},a),t?{}:n.diagnosis?n.diagnosis.data:{})})}))};i.e(t).then((function(e){return n(e.errors,e)})).catch(n)}},373:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(12),r=n.n(a),i=n(9),o=n.n(i),l=n(264),c=n(95);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.setState,n=this.router,a=n.history,r=n.match.params.scriptId,i=this.state,s=i.diagnosis,m=i.form,d=e.redirectOnSuccess,f=o()(e,["redirectOnSuccess"]),p=!1!==d;t({savingDiagnosis:!0});var g=function(e,n){e&&alert("Error(s):\n".concat(Object(c.a)(e))),t((function(t){var a=t.form;return{saveDiagnosisError:e,savingDiagnosis:!1,form:u(u({},a),e?{}:n.diagnosis?n.diagnosis.data:{})}}))},b=s?l.g:l.a,h=JSON.stringify(u(u({},m),f));b(u(u({script_id:r},s),{},{data:h})).then((function(e){p&&e.diagnosis&&a.push("/scripts/".concat(r)),g(e.errors,e)})).catch(g)}},386:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"defaultState",(function(){return p}));var r=n(0),i=n.n(r),o=n(92),l=n.n(o),c=n(12),s=n.n(c),u=n(20),m=n.n(u),d=n(246),f=n(256),p={diagnosisSection:"diagnoses",form:{description:null,expression:null,image1:null,image2:null,image3:null,name:null,text1:null,text2:null,text3:null,symptoms:[]}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=i.a.createContext(null),v=function(){return i.a.useContext(h)},y=n(307),E=n(261),O=n(24),j=n(21),w=n(90),S=n(317),x=n(318),P=n(413),k=n(129),D=n(416),C=n(306),F=n(282),I=n(305),T=n(244),R=n.n(T),N=n(250),A=n(237),W=n(249),z=n.n(W),M=n(6),_=n.n(M),q=n(9),H=n.n(q),$=n(2),L=n.n($),V=n(212),B=n(207),J=n(208),U=n(209),G=n(128),Y=n(342),K=n(422),Q=n(420),X=n(288);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=i.a.forwardRef((function(e,t){var n=e.children,a=e.onClick,r=e.data,o=e.onSave,l=e.form.type,c=H()(e,["children","onClick","data","onSave","form"]),s=i.a.useState(!1),u=m()(s,2),d=u[0],f=u[1],p=ee({name:null,expression:null,type:!1,weight:null},r),g=i.a.useState(p),b=m()(g,2),h=b[0],v=b[1],y=function(e){return v((function(t){return ee(ee({},t),"function"==typeof e?e(t):e)}))};return i.a.useEffect((function(){y(p)}),[d]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",_()({},c,{ref:t,onClick:function(e){f(!0),a&&a(e)}}),n),i.a.createElement(V.a,{open:d,maxWidth:"sm",fullWidth:!0,onClose:function(){return f(!1)}},i.a.createElement(B.a,null,r?"Edit":"Add"," symptom"),i.a.createElement(J.a,null,i.a.createElement(K.a,{name:"type",value:l,onChange:function(e){return y({type:e.target.value})}},X.c.map((function(e){return i.a.createElement(Y.a,{key:e.name,value:e.name,control:i.a.createElement(Q.a,null),label:e.label})}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(D.a,{fullWidth:!0,required:!0,error:!h.name,value:h.name||"",label:"Name",onChange:function(e){return y({name:e.target.value})}})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(D.a,{fullWidth:!0,value:h.weight||"",label:"Weight",onChange:function(e){return y({weight:e.target.value})}}),i.a.createElement(G.a,{variant:"caption",color:"textSecondary"},"Must be in the range: 0.0 - 1.0 (",i.a.createElement("b",null,"default 1.0"),")")),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(D.a,{fullWidth:!0,value:h.expression||"",label:"Sign/Risk expression",onChange:function(e){return y({expression:e.target.value})}}),i.a.createElement(G.a,{variant:"caption",color:"textSecondary"},"Example: ",i.a.createElement("b",null,"($key = true and $key2 = false) or $key3 = 'HD'")))),i.a.createElement(U.a,null,i.a.createElement(k.a,{onClick:function(){return f(!1)}},"Cancel"),i.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){o(h),f(!1)}},"Save"))))}));te.propTypes={onClick:L.a.func,form:L.a.object.isRequired,children:L.a.node,data:L.a.object,onSave:L.a.func.isRequired};var ne=te,ae=n(262),re=n.n(ae),ie=n(390),oe=n(410);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){var t=e.row,n=e.rowIndex,a=e.form,r=e.setForm,o=i.a.useState(null),l=m()(o,2),c=l[0],s=l[1],u=function(){return s(null)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(A.a,{onClick:function(e){return s(e.currentTarget)}},i.a.createElement(re.a,null)),i.a.createElement(ie.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:u},i.a.createElement(oe.a,{onClick:u,component:ne,form:a,data:t,onSave:function(e){return r({symptoms:a.symptoms.map((function(t,a){return n===a?ce(ce({},t),e):t}))})}},"Edit"),i.a.createElement(oe.a,{onClick:function(e){r({symptoms:a.symptoms.filter((function(e,t){return t!==n}))}),u()}},i.a.createElement(G.a,{color:"error"},"Delete"))))}se.propTypes={rowIndex:L.a.number,row:L.a.object,form:L.a.object,setForm:L.a.func.isRequired};var ue=se;var me=function(){var e=v(),t=e.setForm,n=e.state.form;return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{selectable:!1,noDataMsg:"No signs/risks",title:"Signs/Risks",data:n.symptoms,renderHeaderActions:function(){return i.a.createElement(ne,{form:n,onSave:function(e){return t({symptoms:[].concat(R()(n.symptoms),[e])})}},i.a.createElement(A.a,null,i.a.createElement(z.a,null)))},renderRowAction:function(e,a){return i.a.createElement(ue,{row:e,form:n,rowIndex:a,setForm:t})},displayFields:[{key:"type",label:"Type"},{key:"name",label:"Name"}],onSortData:function(e){t({symptoms:e})}}))};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var fe=function(){var e=v(),t=e.canSaveDiagnosis,n=e.saveDiagnosis,a=e.setForm,r=e.setFormAndSave,o=e.state,l=o.diagnosis,c=o.form;return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{data:c,save:function(e){return r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}}),i.a.createElement(S.a,null,i.a.createElement(x.a,null,i.a.createElement(F.a,{backLink:l?"/scripts/".concat(l.script_id,"/diagnoses"):null,title:"".concat(l?"Edit":"Add"," diagnosis")}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(D.a,{fullWidth:!0,required:!0,error:!c.name,value:c.name||"",label:"Name",onChange:function(e){return a({name:e.target.value})}})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(D.a,{fullWidth:!0,value:c.description||"",label:"Description",onChange:function(e){return a({description:e.target.value})}})),i.a.createElement("br",null),i.a.createElement("br",null),l?i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{noTitle:!0,labels:{text:"Text 1",image:"Image 1"},value:{text:c.text1,image:c.image1},onChange:function(e){var t=e.text,n=e.image;return a({text1:t,image1:n})}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(C.a,{noTitle:!0,labels:{text:"Text 2",image:"Image 2"},value:{text:c.text2,image:c.image2},onChange:function(e){var t=e.text,n=e.image;return a({text2:t,image2:n})}}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(C.a,{noTitle:!0,labels:{text:"Text 3",image:"Image 3"},value:{text:c.text3,image:c.image3},onChange:function(e){var t=e.text,n=e.image;return a({text3:t,image3:n})}}),i.a.createElement("br",null),i.a.createElement("br",null)):null),i.a.createElement(P.a,{style:{justifyContent:"flex-end"}},i.a.createElement(k.a,{color:"primary",onClick:function(){return n()},disabled:!t()},"Save"))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(me,null))};var pe;t.default=(pe=function(){var e=Object(d.b)().state.script,t=v(),n=t.isFormReady,a=t.state,r=a.diagnosis,o=a.loadingDiagnosis,l=a.savingDiagnosis,c=e?[E.a.PAGE_TITLE,e.data.title,y.a.PAGE_TITLE,r?r.data.title:o?"":"New diagnosis"].filter((function(e){return e})):[];return Object(j.b)(c.join(" > ")),Object(O.e)(c.join(" / ")),n()?i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,null),o&&l?i.a.createElement(w.a,null):null):i.a.createElement(w.a,{transparent:!0})},function(e){var t=Object(d.b)().state.script,r=Object(f.a)(),o=r.match.params,c=o.diagnosisId,u=o.diagnosisSection,g=i.a.useState(b(b({},p),{},{diagnosisSection:u||"diagnoses"})),v=m()(g,2),y=v[0],E=v[1],O=new function e(){var i=this;l()(this,e),s()(this,"state",y),s()(this,"_setState",E),s()(this,"router",r),s()(this,"defaults",a),s()(this,"setState",(function(e){return i._setState((function(t){return b(b({},t),"function"==typeof e?e(t):e)}))})),s()(this,"setForm",(function(e){return E((function(t){return b(b({},t),{},{form:b(b({},t.form),"function"==typeof e?e(t.form):e)})}))})),s()(this,"canSaveDiagnosis",(function(){return i.state.form.name&&!i.state.savingDiagnosis})),s()(this,"isFormReady",(function(){return t&&("new"===c||!!i.state.diagnosis)})),s()(this,"setFormAndSave",(function(e){i.setForm(e),i.setState({shouldSaveForm:!0})})),s()(this,"getDiagnosis",n(372).default.bind(this)),s()(this,"saveDiagnosis",n(373).default.bind(this))};i.a.useEffect((function(){var e="new"!==c;O.setState({diagnosisInitialised:e,diagnosis:null,form:p.form}),"new"!==c&&O.getDiagnosis({id:c})}),[c]);var j=y.shouldSaveForm;return i.a.useEffect((function(){j&&(O.saveDiagnosis({redirectOnSuccess:!1}),O.setState({shouldSaveForm:!1}))}),[j]),i.a.createElement(h.Provider,{value:O},i.a.createElement(pe,e))})}}]);