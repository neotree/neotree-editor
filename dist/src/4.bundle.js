(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{130:function(e,t,a){"use strict";a.d(t,"a",function(){return k});var n=a(11),l=a.n(n),i=a(16),o=a.n(i),r=a(18),d=a.n(r),c=a(19),s=a.n(c),u=a(20),m=a.n(u),p=a(21),h=a.n(p),f=a(24),g=a.n(f),E=a(22),b=a.n(E),y=a(23),C=a.n(y),v=a(0),I=a.n(v),x=a(2),w=a.n(x),T=a(34),S=a.n(T),D=a(125),k=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=m()(this,(e=h()(t)).call.apply(e,[this].concat(l))),C()(g()(a),"handleLeftNavClick",function(){a.props.onLeftNavItemClicked&&a.props.onLeftNavItemClicked()}),a}return b()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.hideSpacer,i=e.leftNavIcon,r=(e.onLeftNavItemClicked,e.title),d=(e.transparent,o()(e,["children","className","hideSpacer","leftNavIcon","onLeftNavItemClicked","title","transparent"])),c=S()(a,"mdl-toolbar__header","mdl-layout__header","mdl-layout__header--transparent"),s=S()("mdl-toolbar__header-row",{"mdl-toolbar__header-row-with-left-icon":i}),u=S()("mdl-toolbar__left-nav"),m=S()("mdl-toolbar__right-nav");return I.a.createElement("header",l()({className:c},d),i?I.a.createElement(D.IconButton,{className:u,name:i,onClick:this.handleLeftNavClick}):I.a.createElement("div",{style:{width:"24px"}}),I.a.createElement(D.HeaderRow,{className:s,title:r||"",hideSpacer:n},t?I.a.createElement(D.Navigation,{className:m},t):null))}}]),t}(v.Component);k.propTypes={className:w.a.string,title:w.a.node,leftNavIcon:w.a.string,onLeftNavItemClicked:w.a.func,hideSpacer:w.a.bool}},131:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"d",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"f",function(){return r}),a.d(t,"a",function(){return d});var n={COMPUTE:"compute",DATE_NOW:"date_now",DATE_NOON:"date_noon",DATE_MIDNIGHT:"date_midnight",EMPTY:"",UID:"uid"},l={BOOLEAN:"boolean",DATETIME:"datetime",DATE:"date",ID:"id",NUMBER:"number",PERIOD:"period",SET_ID:"set<id>",STRING:"string",TIME:"time",VOID:"void"},i={DATE:"date",DATETIME:"datetime",DROPDOWN:"dropdown",NUMBER:"number",PERIOD:"period",TEXT:"text",TIME:"time"},o={CHECKLIST:"checklist",FORM:"form",LIST:"list",MANAGEMENT:"management",MULTI_SELECT:"multi_select",PROGRESS:"progress",SINGLE_SELECT:"single_select",TIMER:"timer",YESNO:"yesno"},r={SIGN:"sign",RISK:"risk"},d=o.CHECKLIST},134:function(e,t,a){"use strict";a.d(t,"a",function(){return y});var n=a(11),l=a.n(n),i=a(16),o=a.n(i),r=a(18),d=a.n(r),c=a(19),s=a.n(c),u=a(20),m=a.n(u),p=a(21),h=a.n(p),f=a(22),g=a.n(f),E=a(0),b=a.n(E),y=function(e){function t(){return d()(this,t),m()(this,h()(t).apply(this,arguments))}return g()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=o()(e,["children"]);return b.a.createElement("div",l()({style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"16px",marginBottom:"8px"}},a),t)}}]),t}(E.Component)},140:function(e,t,a){"use strict";a.d(t,"a",function(){return x});var n=a(11),l=a.n(n),i=a(16),o=a.n(i),r=a(18),d=a.n(r),c=a(19),s=a.n(c),u=a(20),m=a.n(u),p=a(21),h=a.n(p),f=a(22),g=a.n(f),E=a(0),b=a.n(E),y=a(2),C=a.n(y),v=a(34),I=a.n(v),x=function(e){function t(){return d()(this,t),m()(this,h()(t).apply(this,arguments))}return g()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.label,n=e.style,i=e.topSpace,r=o()(e,["className","label","style","topSpace"]),d=I()(t,"mdl-form-section",{"mdl-form-section-top-space":i});return b.a.createElement("div",l()({className:d,style:n},r),a)}}]),t}(E.Component);x.propTypes={className:C.a.string,style:C.a.object,label:C.a.node,topSpace:C.a.bool}},141:function(e,t,a){"use strict";function n(e,t,a){if(a>=e.length)for(var n=a-e.length;1+n--;)e.push(void 0);return e.splice(a,0,e.splice(t,1)[0]),e}a.d(t,"a",function(){return n})},159:function(e,t,a){"use strict";var n=a(11),l=a.n(n),i=a(16),o=a.n(i),r=a(18),d=a.n(r),c=a(19),s=a.n(c),u=a(20),m=a.n(u),p=a(21),h=a.n(p),f=a(22),g=a.n(f),E=a(23),b=a.n(E),y=a(0),C=a.n(y),v=a(2),I=a.n(v),x=a(34),w=a.n(x),T=function(e){function t(){return d()(this,t),m()(this,h()(t).apply(this,arguments))}return g()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=(e.name,e.numeric),n=e.children,i=(e.cellFormatter,o()(e,["className","name","numeric","children","cellFormatter"])),r=w()({"mdl-data-table__cell--non-numeric":!a},t);return C.a.createElement("th",l()({className:r},i),n)}}]),t}(y.Component);b()(T,"propTypes",{cellFormatter:I.a.func,className:I.a.string,name:I.a.string.isRequired,numeric:I.a.bool});var S=a(24),D=a.n(S),k=a(138),L=a.n(k),M=a(125),F=a(191),A=a(192),R=a.n(A),N=[2,3,4,6,8,16,24].map(function(e){return"mdl-shadow--".concat(e,"dp")}),U=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=m()(this,(e=h()(t)).call.apply(e,[this].concat(l))),b()(D()(a),"renderCell",function(e,t,a){var n=e.numeric?"":"mdl-data-table__cell--non-numeric";return C.a.createElement("td",{key:e.name,className:n},e.cellFormatter?e.cellFormatter(t[e.name],t,a):t[e.name])}),b()(D()(a),"sortAdapterFn",function(e){var t=e.oldIndex,n=e.newIndex,l=a.props.onSort;l&&l(t,n)}),a}return g()(t,e),s()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.shadow,i=t.children,r=(t.onSort,t.rowKeyColumn,t.rows),d=o()(t,["className","shadow","children","onSort","rowKeyColumn","rows"]),c=void 0!==n,s=L()(n||0,0,N.length-1),u=w()("mdl-data-table",b()({},N[s],c),a),m=i?C.a.Children.toArray(i):null,p=Object(F.SortableHandle)(function(){return C.a.createElement(M.IconButton,{name:"drag_handle"})}),h=Object(F.SortableElement)(function(t){var a=t.row,n=t.index;return C.a.createElement("tr",{className:a.className},C.a.createElement("td",null,C.a.createElement(p,null)),m.map(function(t){return e.renderCell(t.props,a,n)}))}),f=Object(F.SortableContainer)(function(e){var t=e.rows;return C.a.createElement("tbody",null,t.map(function(e,t){return C.a.createElement(h,{key:R.a.generate(),index:t,row:e})}))});return C.a.createElement("table",l()({className:u},d),C.a.createElement("thead",null,C.a.createElement("tr",null,C.a.createElement("th",null,"Â "),m)),C.a.createElement(f,{rows:r,onSortEnd:this.sortAdapterFn,useDragHandle:!0}))}}]),t}(y.Component);b()(U,"propTypes",{className:I.a.string,onSort:I.a.func,rowKeyColumn:I.a.string,rows:I.a.arrayOf(I.a.object).isRequired,shadow:I.a.number}),a.d(t,"b",function(){return T}),a.d(t,"a",function(){return U})},165:function(e,t,a){"use strict";a.d(t,"a",function(){return w});var n=a(3),l=a.n(n),i=a(18),o=a.n(i),r=a(19),d=a.n(r),c=a(20),s=a.n(c),u=a(21),m=a.n(u),p=a(24),h=a.n(p),f=a(22),g=a.n(f),E=a(23),b=a.n(E),y=a(0),C=a.n(y),v=a(2),I=a.n(v),x=a(125),w=function(e){function t(){var e,a;o()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),b()(h()(a),"handleFormSubmit",function(e){e.preventDefault()}),b()(h()(a),"handleFileUploadRequest",function(e){console.log(e),a.uploadFileInput.click()}),b()(h()(a),"handleFileUploaded",function(e){var t=h()(a),n=e.target.files[0],i=new FileReader,o=a.props.onFileUploaded;i.onload=function(e){if(n.size<204800){var a={filename:n.name,size:n.size,type:n.type,data:e.target.result};t.setState(l()({},t.state,{fileInfo:a})),o(t.props.name,a)}},i.readAsDataURL(n)}),b()(h()(a),"handleFileDelete",function(e){var t=a.props.onFileDeleted;a.setState({fileInfo:null}),t(a.props.name)}),a}return g()(t,e),d()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.fileInfo;this.setState(l()({},this.state,{fileInfo:t}))}},{key:"render",value:function(){var e=this,t=(this.state||{}).fileInfo,a={container:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},imagePreview:{display:"block",maxWidth:"90px",maxHeight:"90px",width:"auto",height:"auto",marginBottom:"12px"},imagePreviewEmpty:{display:"flex",width:"90px",height:"90px",justifyContent:"center",alignItems:"center",marginBottom:"12px"},caption:{fontSize:"12px",fontWeight:"bold",fontStyle:"italic",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},iconLeft:{marginRight:"12px"},iconRight:{marginLeft:"12px"}},n=C.a.createElement("div",{style:a.imagePreviewEmpty},"No Image");return t&&t.data&&(n=C.a.createElement("img",{style:a.imagePreview,src:t.data})),C.a.createElement("div",{style:a.container},C.a.createElement("form",{style:{display:"none"},encType:"multipart-formdata",onSubmit:this.handleFormSubmit},C.a.createElement("input",{ref:function(t){return e.uploadFileInput=t},type:"file",onChange:this.handleFileUploaded})),C.a.createElement("div",null,n),C.a.createElement("div",{style:a.flexContainer},C.a.createElement("div",{style:a.iconLeft},C.a.createElement(x.FABButton,{mini:!0,colored:!0,onClick:this.handleFileUploadRequest.bind(this,"upload")},C.a.createElement(x.Icon,{name:"add"}))),C.a.createElement("div",{style:a.iconRight},C.a.createElement(x.FABButton,{mini:!0,onClick:this.handleFileDelete.bind(this,"delete")},C.a.createElement(x.Icon,{name:"delete"})))),C.a.createElement("div",{style:a.caption},"Max size 200 KB"))}}]),t}(y.Component);w.propTypes={name:I.a.string.isRequired,fileInfo:I.a.object,onFileUploaded:I.a.func.isRequired,onFileDeleted:I.a.func.isRequired}},197:function(e,t){},198:function(e,t){},216:function(e,t){},219:function(e,t){},404:function(e,t,a){"use strict";a.r(t);var n=a(18),l=a.n(n),i=a(19),o=a.n(i),r=a(20),d=a.n(r),c=a(21),s=a.n(c),u=a(24),m=a.n(u),p=a(22),h=a.n(p),f=a(23),g=a.n(f),E=a(0),b=a.n(E),y=a(2),C=a.n(y),v=a(25),I=a(12),x=a(42),w=a(3),T=a.n(w),S=a(125),D=a(134),k=a(140),L=a(130),M=a(131),F=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"handleInputChange",function(e,t){var n=a.context.screenType,l=T()({},a.state,g()({},e,t.target.value)),i=l.confidential,o=l.key,r=l.label;a.props.onUpdateMetadata({confidential:i,key:o,label:r,dataType:n==M.e.MULTI_SELECT?M.b.SET_ID:M.b.ID}),a.setState(l)}),g()(m()(a),"handleSwitchChange",function(e){return function(){var t=!!a.state[e]&&a.state[e];a.props.onUpdateMetadata(T()({},a.state,g()({},e,!t))),a.setState(T()({},a.state,g()({},e,!t)))}}),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this.context.screenType,t=this.props.metadata||{},a=t.confidential,n=t.key,l=t.label;this.setState({confidential:a||!1,key:n||null,label:l||null,dataType:e==M.e.MULTI_SELECT?M.b.SET_ID:M.b.ID})}},{key:"render",value:function(){var e=this.state,t=e.confidential,a=e.key,n=e.label;return b.a.createElement("div",null,b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"key"),value:a||""}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Output Label",required:!0,onChange:this.handleInputChange.bind(this,"label"),value:n||""}),b.a.createElement("div",{style:{width:"100%",display:"flex",alignContent:"flex-end",marginBottom:"24px"}},b.a.createElement(S.Switch,{id:"confidential",checked:t||!1,onChange:this.handleSwitchChange("confidential")},"Confidential")))}}]),t}(E.Component);F.contextTypes={screenType:C.a.string},F.propTypes={metadata:C.a.object,onUpdateMetadata:C.a.func.isRequired};var A=a(159),R=a(141),N={enableFieldSwapAction:!1,enableFieldMoveUpAction:!1,enableFieldMoveDownAction:!1,openNewFieldDialog:!1,openEditFieldDialog:!1,openConfirmDeleteFieldDialog:!1,actionFieldIndex:null,fieldCalculation:null,fieldCondition:null,fieldConfidential:!1,fieldDataType:null,fieldDefaultValue:M.c.EMPTY,fieldFormat:null,fieldType:null,fieldKey:null,fieldLabel:null,fieldMinValue:null,fieldMaxValue:null,fieldValues:null,fieldOptional:!1},U=function(e){function t(e){var a;return l()(this,t),a=d()(this,s()(t).call(this,e)),g()(m()(a),"handleInputChange",function(e,t){var n=t.target.value,l=g()({},e,n);"fieldType"===e&&(l=T()({},l,{fieldDataType:a.getDataTypeForFieldType(n)})),a.setState(l)}),g()(m()(a),"handleSwitchChange",function(e){return function(){var t=!!a.state[e]&&a.state[e];a.setState(T()({},a.state,g()({},e,!t)))}}),g()(m()(a),"handleFieldSelection",function(e){if(1===e.length){var t=(a.props.metadata||{}).fields,n=e[0];a.setState({enableFieldSwapAction:!1,enableFieldMoveUpAction:t.length>0&&n>1,enableFieldMoveDownAction:t.length>0&&n<t.length,selectedIndex:n,swapIndex0:e[0],swapIndex1:e[1]})}else 2===e.length?a.setState({enableFieldSwapAction:!0,enableFieldMoveUpAction:!1,enableFieldMoveDownAction:!1,selectedIndex:null,swapIndex0:e[0],swapIndex1:e[1]}):a.setState({enableFieldSwapAction:!1,enableFieldMoveUpAction:!1,enableFieldMoveDownAction:!1,selectedIndex:null,swapIndex0:null,swapIndex1:null})}),g()(m()(a),"handleFieldActionClick",function(e){var t,n,l=a.state,i=l.actionFieldIndex,o=l.fields,r=l.selectedIndex,d=l.swapIndex0,c=l.swapIndex1,s=a.collectFieldData(),u=o||[],m=function(){};switch(e){case"add":u.push(s),m=a.closeNewFieldDialog;break;case"delete":u.splice(i,1),m=a.closeConfirmDeleteFieldDialog;break;case"update":u[i]=s,m=a.closeEditFieldDialog;break;case"swap":n=u[d-1],u[d-1]=u[c-1],u[c-1]=n;break;case"move_up":n=u[(t=r-1)-1],u[t-1]=u[t],u[t]=n;break;case"move_down":n=u[(t=r-1)+1],u[t+1]=u[t],u[t]=n;break;default:m=function(){}}a.fixFieldsPositions(u),a.setState(T()({},a.state,{actionFieldIndex:null,fields:u})),a.props.onUpdateMetadata({fields:u}),a.props.onFieldsChanged(),m()}),g()(m()(a),"swapFields",function(e,t){var n=a.state.fields||[];n=Object(R.a)(n,e,t),a.fixFieldsPositions(n),a.setState({fields:n})}),g()(m()(a),"openNewFieldDialog",function(){a.setState({openNewFieldDialog:!0,fieldDataType:null,fieldType:null})}),g()(m()(a),"closeNewFieldDialog",function(){return a.setState(T()({},N))}),g()(m()(a),"openEditFieldDialog",function(e){return function(){var t=a.state.fields[e];a.setState({openEditFieldDialog:!0,actionFieldIndex:e,fieldCalculation:t.calculation,fieldCondition:t.condition,fieldConfidential:t.confidential,fieldDataType:t.dataType,fieldDefaultValue:t.defaultValue,fieldFormat:t.format,fieldType:t.type,fieldKey:t.key,fieldLabel:t.label,fieldMinValue:t.minValue,fieldMaxValue:t.maxValue,fieldValues:t.values,fieldOptional:t.optional})}}),g()(m()(a),"closeEditFieldDialog",function(){return a.setState(T()({},N))}),g()(m()(a),"openConfirmDeleteFieldDialog",function(e){return function(){a.setState(T()({},a.state,{openConfirmDeleteFieldDialog:!0,actionFieldIndex:e}))}}),g()(m()(a),"closeConfirmDeleteFieldDialog",function(){a.setState(T()({},a.state,{openConfirmDeleteFieldDialog:!1,actionFieldIndex:null}))}),g()(m()(a),"collectFieldData",function(){var e=a.state,t=e.fieldCalculation,n=e.fieldCondition,l=e.fieldConfidential,i=e.fieldDataType,o=e.fieldDefaultValue,r=e.fieldFormat,d=e.fieldType,c=e.fieldKey,s=e.fieldLabel,u=e.fieldMinValue,m=e.fieldMaxValue,p=e.fieldValues,h=e.fieldOptional;return{calculation:t||null,condition:n||null,confidential:l||!1,dataType:i||null,defaultValue:o||null,format:r||null,type:d||null,key:c||null,label:s||null,minValue:u||null,maxValue:m||null,values:p||null,optional:h||!1}}),g()(m()(a),"fixFieldsPositions",function(e){e&&e.map(function(e,t){return e.position=t+1})}),a.state=T()({},N),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e={fields:(this.props.metadata||{}).fields||[]};this.setState(e),this.props.onUpdateMetadata(e)}},{key:"getDataTypeForFieldType",value:function(e){switch(e){case M.d.DATE:return M.b.DATE;case M.d.DATETIME:return M.b.DATETIME;case M.d.DROPDOWN:return M.b.ID;case M.d.NUMBER:return M.b.NUMBER;case M.d.PERIOD:return M.b.PERIOD;case M.d.TEXT:return M.b.STRING;case M.d.TIME:return M.b.TIME;default:return null}}},{key:"render",value:function(){var e=this,t={dialogEdit:{width:"520px"},dialogType:{width:"240px"},container:{marginTop:"24px",width:"780px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"},flexRow:{display:"flex",flexDirection:"row"}},a=this.state,n=a.enableFieldSwapAction,l=a.enableFieldMoveUpAction,i=a.enableFieldMoveDownAction,o=a.openNewFieldDialog,r=a.openEditFieldDialog,d=a.openConfirmDeleteFieldDialog,c=a.fieldCalculation,s=a.fieldCondition,u=a.fieldConfidential,m=a.fieldDataType,p=a.fieldDefaultValue,h=a.fieldFormat,f=a.fieldType,g=a.fieldKey,E=a.fieldLabel,y=a.fieldMinValue,C=a.fieldMaxValue,v=a.fieldValues,I=a.fieldOptional,x=a.fields,w=b.a.createElement(S.DialogContent,null,b.a.createElement(k.a,{label:"FLOW CONTROL"}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Conditional expression",value:s||"",onChange:this.handleInputChange.bind(this,"fieldCondition")}),b.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Example: ",b.a.createElement("span",{style:{fontWeight:"bold"}},"($key = true and $key2 = false) or $key3 = 'HD'")),b.a.createElement(k.a,{label:"PROPERTIES",topSpace:!0}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"fieldKey"),value:g||""}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Label",required:!0,onChange:this.handleInputChange.bind(this,"fieldLabel"),value:E||""}),b.a.createElement("div",{style:t.flexRow},b.a.createElement("div",{style:{flex:1,marginRight:"12px"}},b.a.createElement(S.Switch,{id:"fieldConfidential",checked:u||!1,onChange:this.handleSwitchChange("fieldConfidential")},"Confidential")),b.a.createElement("div",{style:{flex:1,marginLeft:"12px"}},b.a.createElement(S.Switch,{id:"fieldOptional",checked:I||!1,onChange:this.handleSwitchChange("fieldOptional")},"Optional"))),f!==M.d.NUMBER?null:b.a.createElement("div",null,b.a.createElement("div",{style:t.flexRow},b.a.createElement(S.Textfield,{style:{flex:1,marginRight:"12px"},floatingLabel:!0,label:"Format",pattern:"#*",onChange:this.handleInputChange.bind(this,"fieldFormat"),value:h||""}),b.a.createElement(S.Textfield,{style:{flex:1,marginLeft:"12px",marginRight:"12px"},floatingLabel:!0,label:"Min Value",pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"fieldMinValue"),value:y||""}),b.a.createElement(S.Textfield,{style:{flex:1,marginLeft:"12px"},floatingLabel:!0,label:"Max Value",pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"fieldMaxValue"),value:C||""})),b.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Format: Add as many ",b.a.createElement("span",{style:{fontWeight:"bold"}},"#")," as the number of decimal digits or leave empty")),f!==M.d.TEXT?null:b.a.createElement("div",null,b.a.createElement(k.a,{label:"DEFAULT",topSpace:!0}),b.a.createElement(S.RadioGroup,{style:{marginBottom:"24px"},container:"div",childContainer:"div",name:"fieldDefaultValue",value:p||"",onChange:this.handleInputChange.bind(this,"fieldDefaultValue")},b.a.createElement(S.Radio,{value:M.c.EMPTY,ripple:!0},"Empty"),b.a.createElement(S.Radio,{value:M.c.UID,ripple:!0},"Generated ID"))),f!==M.d.DATE&&f!==M.d.DATETIME?null:b.a.createElement("div",null,b.a.createElement(k.a,{label:"DEFAULT",topSpace:!0}),b.a.createElement(S.RadioGroup,{style:{marginBottom:"24px"},container:"div",childContainer:"div",name:"fieldDefaultValue",value:p||"",onChange:this.handleInputChange.bind(this,"fieldDefaultValue")},b.a.createElement(S.Radio,{value:M.c.EMPTY,ripple:!0},"Empty"),b.a.createElement(S.Radio,{value:M.c.DATE_NOW,ripple:!0},"Current time"),b.a.createElement(S.Radio,{value:M.c.DATE_NOON,ripple:!0},"Today at noon"),b.a.createElement(S.Radio,{value:M.c.DATE_MIDNIGHT,ripple:!0},"Today at midnight"))),f!==M.d.DROPDOWN?null:b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Dropdown Values",rows:5,required:!0,onChange:this.handleInputChange.bind(this,"fieldValues"),value:v||""}),f!==M.d.PERIOD?null:b.a.createElement("div",{style:{marginBottom:"24px"}},b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Reference Expression",pattern:"(\\$[a-zA-Z0-9]+)+(\\s*-\\s*(\\$[a-zA-Z0-9]+))?",required:!0,onChange:this.handleInputChange.bind(this,"fieldCalculation"),value:c||""}),b.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Example: ",b.a.createElement("span",{style:{fontWeight:"bold"}},"$key")))),T=b.a.createElement(S.DialogContent,null,b.a.createElement("p",null,"Select field type:"),b.a.createElement(S.RadioGroup,{container:"div",childContainer:"div",name:"fieldType",value:m||"",onChange:this.handleInputChange.bind(this,"fieldType")},b.a.createElement(S.Radio,{value:M.d.DATE,ripple:!0},"Date"),b.a.createElement(S.Radio,{value:M.d.DATETIME,ripple:!0},"Date + Time"),b.a.createElement(S.Radio,{value:M.d.DROPDOWN,ripple:!0},"Dropdown"),b.a.createElement(S.Radio,{value:M.d.NUMBER,ripple:!0},"Number"),b.a.createElement(S.Radio,{value:M.d.TEXT,ripple:!0},"Text"),b.a.createElement(S.Radio,{value:M.d.TIME,ripple:!0},"Time"),b.a.createElement(S.Radio,{value:M.d.PERIOD,ripple:!0},"Time Period"))),D=o||r,F=b.a.createElement(S.Dialog,{open:D,style:m?t.dialogEdit:t.dialogType},m&&""!==m?w:T,b.a.createElement(S.DialogActions,null,o?b.a.createElement("div",null,b.a.createElement(S.Button,{type:"button",onClick:this.closeNewFieldDialog},"Cancel"),b.a.createElement(S.Button,{type:"button",onClick:this.handleFieldActionClick.bind(this,"add"),accent:!0},"Create")):null,r?b.a.createElement("div",null,b.a.createElement(S.Button,{type:"button",onClick:this.closeEditFieldDialog},"Cancel"),b.a.createElement(S.Button,{type:"button",onClick:this.handleFieldActionClick.bind(this,"update"),accent:!0},"Update")):null)),R=b.a.createElement(S.Dialog,{open:d},b.a.createElement(S.DialogContent,null,b.a.createElement("p",null,"Are you sure you want to delete this item?")),b.a.createElement(S.DialogActions,null,b.a.createElement(S.Button,{type:"button",onClick:this.handleFieldActionClick.bind(this,"delete"),accent:!0},"Delete"),b.a.createElement(S.Button,{type:"button",onClick:this.closeConfirmDeleteFieldDialog},"Cancel"))),N=b.a.createElement(A.a,{style:t.table,rows:x,rowKeyColumn:"position",onSort:this.swapFields},b.a.createElement(A.b,{name:"type"},"Key"),b.a.createElement(A.b,{name:"key"},"Key"),b.a.createElement(A.b,{name:"label",style:{width:"100%"}},"Label"),b.a.createElement(A.b,{name:"$index",style:{width:"48px"},cellFormatter:function(t,a,n){return b.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"end",color:"#999999"}},b.a.createElement(S.IconButton,{name:"edit",onClick:e.openEditFieldDialog(n)}),b.a.createElement(S.IconButton,{name:"delete",onClick:e.openConfirmDeleteFieldDialog(n)}))}}));return b.a.createElement("div",null,b.a.createElement(S.Card,{shadow:0,style:t.container},b.a.createElement(L.a,{title:"Fields"},b.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},b.a.createElement(S.IconButton,{name:"add",onClick:this.openNewFieldDialog}),n?b.a.createElement(S.IconButton,{name:"swap_vert",onClick:this.handleFieldActionClick.bind(this,"swap")}):null,l?b.a.createElement(S.IconButton,{name:"arrow_upward",onClick:this.handleFieldActionClick.bind(this,"move_up")}):null,i?b.a.createElement(S.IconButton,{name:"arrow_downward",onClick:this.handleFieldActionClick.bind(this,"move_down")}):null)),x&&x.length>0?N:b.a.createElement(S.CardText,null,b.a.createElement("div",{style:t.emptyMessageContainer},b.a.createElement("div",null,"The list of fields is empty")))),F,R)}}]),t}(E.Component);U.propTypes={metadata:C.a.object,onFieldsChanged:C.a.func.isRequired,onUpdateMetadata:C.a.func.isRequired};var O={enableItemSwapAction:!1,enableItemMoveUpAction:!1,enableItemMoveDownAction:!1,openNewItemDialog:!1,openEditItemDialog:!1,openConfirmDeleteItemDialog:!1,actionItemIndex:null,itemDataType:null,itemChecked:!1,itemId:null,itemExclusive:!1,itemKey:null,itemConfidential:!1,itemLabel:null,itemSummary:null},_=function(e){function t(e){var a;return l()(this,t),a=d()(this,s()(t).call(this,e)),g()(m()(a),"collectItemData",function(){var e,t=a.context.screenType,n=a.state,l=n.itemChecked,i=n.itemId,o=n.itemExclusive,r=n.itemKey,d=n.itemConfidential,c=n.itemLabel,s=n.itemSummary;switch(t){case M.e.MANAGEMENT:case M.e.PROGRESS:case M.e.LIST:e=M.b.VOID;break;case M.e.CHECKLIST:e=M.b.BOOLEAN;break;case M.e.MULTI_SELECT:case M.e.SINGLE_SELECT:e=M.b.ID}return{dataType:e,checked:l||null,id:i||null,exclusive:o||null,key:r||null,confidential:d||!1,label:c||null,summary:s||null}}),g()(m()(a),"handleInputChange",function(e,t){a.setState(T()({},a.state,g()({},e,t.target.value)))}),g()(m()(a),"handleSwitchChange",function(e){return function(){var t=!!a.state[e]&&a.state[e];a.setState(T()({},a.state,g()({},e,!t)))}}),g()(m()(a),"handleItemSelection",function(e){if(1==e.length){var t=(a.props.metadata||{}).items,n=e[0];a.setState(T()({},a.state,{enableItemSwapAction:!1,enableItemMoveUpAction:t.length>0&&n>1,enableItemMoveDownAction:t.length>0&&n<t.length,selectedIndex:n,swapIndex0:e[0],swapIndex1:e[1]}))}else 2==e.length?a.setState(T()({},a.state,{enableItemSwapAction:!0,enableItemMoveUpAction:!1,enableItemMoveDownAction:!1,selectedIndex:null,swapIndex0:e[0],swapIndex1:e[1]})):a.setState(T()({},a.state,{enableItemSwapAction:!1,enableItemMoveUpAction:!1,enableItemMoveDownAction:!1,selectedIndex:null,swapIndex0:null,swapIndex1:null}))}),g()(m()(a),"handleItemActionClick",function(e){var t,n,l=a.state,i=l.actionItemIndex,o=l.items,r=l.selectedIndex,d=l.swapIndex0,c=l.swapIndex1,s=a.collectItemData(),u=o||[],m=function(){};switch(e){case"add":u.push(s),m=a.closeNewItemDialog;break;case"delete":u.splice(i,1),m=a.closeConfirmDeleteItemDialog;break;case"update":u[i]=s,m=a.closeEditItemDialog;break;case"swap":n=u[d-1],u[d-1]=u[c-1],u[c-1]=n;break;case"move_up":n=u[(t=r-1)-1],u[t-1]=u[t],u[t]=n;break;case"move_down":n=u[(t=r-1)+1],u[t+1]=u[t],u[t]=n}a.fixItemsPositions(u),a.setState(T()({},a.state,{actionItemIndex:null,items:u})),a.props.onUpdateMetadata({items:u}),a.props.onItemsChanged(),m()}),g()(m()(a),"swapItems",function(e,t){console.log("Swapping items [oldIndex="+e+", newIndex="+t+"]");var n=a.state.items||[];n=Object(R.a)(n,e,t),a.fixItemsPositions(n),a.setState(T()({},a.state,{items:n}))}),g()(m()(a),"openNewItemDialog",function(){console.log("openNewItemDialog()"),a.setState(T()({},a.state,{openNewItemDialog:!0}))}),g()(m()(a),"closeNewItemDialog",function(){console.log("closeNewItemDialog()"),a.setState(T()({},a.state,O))}),g()(m()(a),"openEditItemDialog",function(e){return function(){var t=a.state.items[e];a.setState(T()({},a.state,{openEditItemDialog:!0,actionItemIndex:e,itemChecked:t.checked,itemId:t.id,itemLabel:t.label,itemSummary:t.summary,itemKey:t.key,itemConfidential:t.confidential,itemExclusive:t.exclusive}))}}),g()(m()(a),"closeEditItemDialog",function(){a.setState(T()({},a.state,O))}),g()(m()(a),"openConfirmDeleteItemDialog",function(e){return function(){a.setState(T()({},a.state,{openConfirmDeleteItemDialog:!0,actionItemIndex:e}))}}),g()(m()(a),"closeConfirmDeleteItemDialog",function(){a.setState(T()({},a.state,{openConfirmDeleteItemDialog:!1,actionItemIndex:null}))}),g()(m()(a),"fixItemsPositions",function(e){e&&e.map(function(e,t){e.position=t+1})}),a.state=T()({},O),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e={items:(this.props.metadata||{}).items||[]};this.setState(e),this.props.onUpdateMetadata(e)}},{key:"render",value:function(){var e=this,t={dialog:{width:"460px"},container:{marginTop:"24px",width:"780px"},table:{width:"100%"},emptyMessageContainer:{display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"16px"},flexRow:{display:"flex",flexDirection:"row"}},a=this.state,n=a.enableItemSwapAction,l=a.enableItemMoveUpAction,i=a.enableItemMoveDownAction,o=a.openNewItemDialog,r=a.openEditItemDialog,d=a.openConfirmDeleteItemDialog,c=a.itemChecked,s=a.itemId,u=a.itemExclusive,m=a.itemKey,p=a.itemConfidential,h=a.itemLabel,f=a.itemSummary,g=a.items,E=this.context.screenType,y=b.a.createElement("div",null,E==M.e.MULTI_SELECT||E==M.e.SINGLE_SELECT?b.a.createElement("div",{style:t.flexRow},b.a.createElement(S.Textfield,{style:{flex:1,marginRight:"12px"},floatingLabel:!0,label:"ID",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"itemId"),value:s||""}),b.a.createElement(S.Textfield,{style:{flex:5,marginLeft:"12px"},floatingLabel:!0,label:"Label",required:!0,onChange:this.handleInputChange.bind(this,"itemLabel"),value:h||""})):b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Label",required:!0,onChange:this.handleInputChange.bind(this,"itemLabel"),value:h||""}),E!==M.e.MULTI_SELECT&&E!=M.e.SINGLE_SELECT&&E!=M.e.PROGRESS?b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Summary",onChange:this.handleInputChange.bind(this,"itemSummary"),value:f||""}):null,E!=M.e.CHECKLIST?null:b.a.createElement("div",null,b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"itemKey"),value:m||""}),b.a.createElement("div",{style:{width:"100%",display:"flex",alignContent:"flex-end",marginBottom:"24px"}},b.a.createElement(S.Switch,{id:"itemConfidential",checked:p||!1,onChange:this.handleSwitchChange("itemConfidential")},"Confidential"))),E==M.e.CHECKLIST||E==M.e.MULTI_SELECT?b.a.createElement(S.Switch,{id:"itemExclusiveSwitch",checked:u||!1,onChange:this.handleSwitchChange("itemExclusive")},"Disable other items if selected"):null,E==M.e.PROGRESS?b.a.createElement(S.Switch,{id:"itemCheckedSwitch",checked:c||!1,onChange:this.handleSwitchChange("itemChecked")},"Mark as checked"):null),C=o||r,v=b.a.createElement(S.Dialog,{open:C,style:t.dialog},b.a.createElement(S.DialogContent,null,y),b.a.createElement(S.DialogActions,null,o?b.a.createElement("div",null,b.a.createElement(S.Button,{type:"button",onClick:this.closeNewItemDialog},"Cancel"),b.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"add"),accent:!0},"Create")):null,r?b.a.createElement("div",null,b.a.createElement(S.Button,{type:"button",onClick:this.closeEditItemDialog},"Cancel"),b.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"update"),accent:!0},"Update")):null)),I=b.a.createElement(S.Dialog,{open:d},b.a.createElement(S.DialogContent,null,b.a.createElement("p",null,"Are you sure you want to delete this item?")),b.a.createElement(S.DialogActions,null,b.a.createElement(S.Button,{type:"button",onClick:this.handleItemActionClick.bind(this,"delete"),accent:!0},"Delete"),b.a.createElement(S.Button,{type:"button",onClick:this.closeConfirmDeleteItemDialog},"Cancel"))),x=function(t,a,n){return b.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"end",color:"#999999"}},b.a.createElement(S.IconButton,{name:"edit",onClick:e.openEditItemDialog(n)}),b.a.createElement(S.IconButton,{name:"delete",onClick:e.openConfirmDeleteItemDialog(n)}))},w=function(e,t,a){return t.exclusive?b.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",color:"#2196f3"}},b.a.createElement(S.Icon,{name:"done"})):null},T=null;switch(E){case M.e.CHECKLIST:T=b.a.createElement(A.a,{ref:"dataTable",style:t.table,rows:g,rowKeyColumn:"position",onSort:this.swapItems},b.a.createElement(A.b,{name:"key"},"Key"),b.a.createElement(A.b,{name:"label",style:{width:"100%"}},"Label"),b.a.createElement(A.b,{name:"exclusive",cellFormatter:w},"Exclusive"),b.a.createElement(A.b,{name:"screenId",style:{width:"48px"},cellFormatter:x}));break;case M.e.MULTI_SELECT:case M.e.SINGLE_SELECT:T=b.a.createElement(A.a,{ref:"dataTable",style:t.table,rows:g,rowKeyColumn:"position",onSort:this.swapItems},b.a.createElement(A.b,{name:"id"},"ID"),b.a.createElement(A.b,{name:"label",style:{width:"100%"}},"Label"),E==M.e.MULTI_SELECT?b.a.createElement(A.b,{name:"exclusive",cellFormatter:w},"Exclusive"):null,b.a.createElement(A.b,{name:"screenId",style:{width:"48px"},cellFormatter:x}));break;case M.e.PROGRESS:T=b.a.createElement(A.a,{ref:"dataTable",style:t.table,rows:g,rowKeyColumn:"position",onSort:this.swapItems},b.a.createElement(A.b,{name:"label",style:{width:"100%"}},"Label"),b.a.createElement(A.b,{name:"checked",cellFormatter:function(e,t,a){return t.checked?b.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",color:"#2196f3"}},b.a.createElement(S.Icon,{name:"done"})):null}},"Checked"),b.a.createElement(A.b,{name:"screenId",style:{width:"48px"},cellFormatter:x}));break;case M.e.LIST:T=b.a.createElement(A.a,{ref:"dataTable",style:t.table,rows:g,rowKeyColumn:"position",onSort:this.swapItems},b.a.createElement(A.b,{name:"label"},"Label"),b.a.createElement(A.b,{name:"summary",style:{width:"100%"}},"Summary"),b.a.createElement(A.b,{name:"$index",style:{width:"48px"},cellFormatter:x}));break;default:console.log("unknown screen type for displaying item table")}return b.a.createElement("div",null,b.a.createElement(S.Card,{shadow:0,style:t.container},b.a.createElement(L.a,{title:"Items"},b.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},b.a.createElement(S.IconButton,{name:"add",onClick:this.openNewItemDialog}),n?b.a.createElement(S.IconButton,{name:"swap_vert",onClick:this.handleItemActionClick.bind(this,"swap")}):null,l?b.a.createElement(S.IconButton,{name:"arrow_upward",onClick:this.handleItemActionClick.bind(this,"move_up")}):null,i?b.a.createElement(S.IconButton,{name:"arrow_downward",onClick:this.handleItemActionClick.bind(this,"move_down")}):null)),g&&g.length>0?T:b.a.createElement(S.CardText,null,b.a.createElement("div",{style:t.emptyMessageContainer},b.a.createElement("div",null,"The list of items is empty")))),v,I)}}]),t}(E.Component);g()(_,"contextTypes",{screenType:C.a.string}),_.propTypes={metadata:C.a.object,onItemsChanged:C.a.func.isRequired,onUpdateMetadata:C.a.func.isRequired};var B=a(165),V=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"handleInputChange",function(e,t){var n=T()({},a.state,g()({},e,t.target.value)),l=n.title1,i=n.title2,o=n.title3,r=n.text1,d=n.text2,c=n.text3,s=n.image1,u=n.image2,m=n.image3;a.props.onUpdateMetadata({dataType:M.b.VOID,title1:l||null,text1:r||null,image1:s||null,title2:i||null,text2:d||null,image2:u||null,title3:o||null,text3:c||null,image3:m||null}),a.setState(n)}),g()(m()(a),"handleImageUpload",function(e,t){var n=T()({},a.state,g()({},e,t));a.props.onUpdateMetadata(n),a.setState(n)}),g()(m()(a),"handleImageDelete",function(e){var t=T()({},a.state,g()({},e,null));a.props.onUpdateMetadata(t),a.setState(t)}),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this.props.metadata||{},t=e.title1,a=e.title2,n=e.title3,l=e.text1,i=e.text2,o=e.text3,r=e.image1,d=e.image2,c=e.image3,s={dataType:M.b.VOID,title1:t||null,text1:l||null,image1:r||null,title2:a||null,text2:i||null,image2:d||null,title3:n||null,text3:o||null,image3:c||null};this.setState(s),this.props.onUpdateMetadata(s)}},{key:"render",value:function(){var e=this.state,t=e.title1,a=e.title2,n=e.title3,l=e.text1,i=e.text2,o=e.text3,r=e.image1,d=e.image2,c=e.image3,s={flexContainer:{display:"flex",flexDirection:"row",width:"100%"},fieldLeft:{width:"100%"},fieldRight:{marginLeft:"24px"}};return b.a.createElement("div",null,b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title 1",onChange:this.handleInputChange.bind(this,"title1"),value:t||""}),b.a.createElement("div",{style:s.flexContainer},b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 1",rows:6,onChange:this.handleInputChange.bind(this,"text1"),value:l||""}),b.a.createElement("div",{style:s.fieldRight},b.a.createElement(B.a,{name:"image1",fileInfo:r,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title 2",onChange:this.handleInputChange.bind(this,"title2"),value:a||""}),b.a.createElement("div",{style:s.flexContainer},b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 2",rows:6,onChange:this.handleInputChange.bind(this,"text2"),value:i||""}),b.a.createElement("div",{style:s.fieldRight},b.a.createElement(B.a,{name:"image2",fileInfo:d,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title 3",onChange:this.handleInputChange.bind(this,"title3"),value:n||""}),b.a.createElement("div",{style:s.flexContainer},b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Text 3",rows:6,onChange:this.handleInputChange.bind(this,"text3"),value:o||""}),b.a.createElement("div",{style:s.fieldRight},b.a.createElement(B.a,{name:"image3",fileInfo:c,onFileUploaded:this.handleImageUpload,onFileDeleted:this.handleImageDelete}))))}}]),t}(E.Component);V.propTypes={metadata:C.a.object,onUpdateMetadata:C.a.func.isRequired};var P=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"handleInputChange",function(e,t){var n=T()({},a.state,g()({},e,t.target.value)),l=n.confidential,i=n.key,o=n.label,r=n.timerValue,d=n.multiplier,c=n.minValue,s=n.maxValue;a.props.onUpdateMetadata({dataType:M.b.NUMBER,confidential:l||!1,key:i||null,label:o||null,timerValue:r||null,multiplier:d||null,minValue:c||null,maxValue:s||null}),a.setState(n)}),g()(m()(a),"handleSwitchChange",function(e){return function(){var t=!!a.state[e]&&a.state[e];a.props.onUpdateMetadata(T()({},a.state,g()({},e,!t))),a.setState(T()({},a.state,g()({},e,!t)))}}),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this.props.metadata||{},t=e.confidential,a=e.key,n=e.label,l=e.timerValue,i=e.multiplier,o=e.minValue,r=e.maxValue,d={dataType:M.b.NUMBER,confidential:t||!1,key:a||null,label:n||null,timerValue:l||null,multiplier:i||null,minValue:o||null,maxValue:r||null};this.setState(d)}},{key:"render",value:function(){var e={container:{display:"flex",flexDirection:"row",width:"100%"},label:{flex:3},field:{flex:1},fieldLeft:{marginRight:"12px"},fieldRight:{marginLeft:"12px"},fieldMiddle:{marginRight:"12px",marginLeft:"12px"}},t=this.state,a=t.confidential,n=t.key,l=t.label,i=t.timerValue,o=t.multiplier,r=t.minValue,d=t.maxValue;return b.a.createElement("div",null,b.a.createElement("div",{style:e.container},b.a.createElement(S.Textfield,{style:T()({},e.field,e.field,e.fieldLeft),floatingLabel:!0,label:"Input key",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"key"),value:n||""}),b.a.createElement(S.Textfield,{style:T()({},e.field,e.field,e.fieldRight),floatingLabel:!0,label:"Input label",required:!0,onChange:this.handleInputChange.bind(this,"label"),value:l||""})),b.a.createElement("div",{style:e.container},b.a.createElement(S.Textfield,{style:T()({},e.field,e.fieldLeft),floatingLabel:!0,label:"Timer value (seconds)",pattern:"([1-9])[0-9]*",required:!0,onChange:this.handleInputChange.bind(this,"timerValue"),value:i||""}),b.a.createElement(S.Textfield,{style:T()({},e.field,e.fieldMiddle),floatingLabel:!0,label:"Multiplier",pattern:"([1-9])[0-9]*",required:!0,onChange:this.handleInputChange.bind(this,"multiplier"),value:o||""}),b.a.createElement(S.Textfield,{style:T()({},e.field,e.fieldMiddle),floatingLabel:!0,label:"Input value min.",pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"minValue"),value:r||""}),b.a.createElement(S.Textfield,{style:T()({},e.field,e.fieldRight),floatingLabel:!0,label:"Input value max.",pattern:"-?[0-9]*(\\.[0-9]+)?",onChange:this.handleInputChange.bind(this,"maxValue"),value:d||""})),b.a.createElement("div",{style:{width:"100%",display:"flex",alignContent:"flex-end",marginBottom:"24px"}},b.a.createElement(S.Switch,{id:"confidential",checked:a||!1,onChange:this.handleSwitchChange("confidential")},"Confidential")))}}]),t}(E.Component);P.propTypes={metadata:C.a.object,onUpdateMetadata:C.a.func.isRequired};var q=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"handleInputChange",function(e,t){var n=T()({},a.state,g()({},e,t.target.value)),l=n.confidential,i=n.key,o=n.label,r=n.positiveLabel,d=n.negativeLabel;a.props.onUpdateMetadata({dataType:M.b.BOOLEAN,confidential:l,key:i,label:o,positiveLabel:r,negativeLabel:d}),a.setState(n)}),g()(m()(a),"handleSwitchChange",function(e){return function(){var t=!!a.state[e]&&a.state[e];a.props.onUpdateMetadata(T()({},a.state,g()({},e,!t))),a.setState(T()({},a.state,g()({},e,!t)))}}),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this.props.metadata||{},t=e.confidential,a=e.key,n=e.label,l=e.positiveLabel,i=e.negativeLabel;this.setState({dataType:M.b.BOOLEAN,confidential:t||!1,key:a||null,label:n||null,negativeLabel:i||null,positiveLabel:l||null})}},{key:"render",value:function(){var e={flexContainer:{display:"flex",flexDirection:"row",width:"100%"},fieldLeft:{flex:1,marginRight:"12px"},fieldRight:{flex:1,marginLeft:"12px"}},t=this.state,a=t.confidential,n=t.key,l=t.label,i=t.positiveLabel,o=t.negativeLabel;return b.a.createElement("div",null,b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Key",required:!0,pattern:"[a-zA-Z0-9]+",onChange:this.handleInputChange.bind(this,"key"),value:n||""}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Output Label",required:!0,onChange:this.handleInputChange.bind(this,"label"),value:l||""}),b.a.createElement("div",{style:{width:"100%",display:"flex",alignContent:"flex-end",marginBottom:"24px"}},b.a.createElement(S.Switch,{id:"confidential",checked:a||!1,onChange:this.handleSwitchChange("confidential")},"Confidential")),b.a.createElement("div",{style:e.flexContainer},b.a.createElement(S.Textfield,{style:e.fieldLeft,floatingLabel:!0,label:"Positive label",required:!0,onChange:this.handleInputChange.bind(this,"positiveLabel"),value:i||""}),b.a.createElement(S.Textfield,{style:e.fieldRight,floatingLabel:!0,label:"Negative label",required:!0,value:o||"",onChange:this.handleInputChange.bind(this,"negativeLabel")})))}}]),t}(E.Component);q.propTypes={metadata:C.a.object,onUpdateMetadata:C.a.func.isRequired};var K=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"state",{openUnsavedChangesDialog:!1,isModified:!1,isModifiedConfirmed:!1,skippable:!1,screen:a.props.screen?a.props.screen.data:{epicId:null,storyId:null,refId:null,step:null,type:null,title:null,sectionTitle:null,actionText:null,contentText:null,infoText:null,notes:null,condition:null,metadata:{}}}),g()(m()(a),"setScreenAsState",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props;e.screen&&a.setState({screen:e.screen.data})}),g()(m()(a),"handleInputChange",function(e,t){return a.setState({isModified:!0,screen:T()({},a.state.screen,g()({},e,t.target.value))})}),g()(m()(a),"handleSwitchChange",function(e){return function(){return a.setState(g()({},e,!(a.state[e]&&a.state[e])))}}),g()(m()(a),"handleBackClick",function(){return a.props.history.goBack()}),g()(m()(a),"handleSubmitClick",function(){var e=a.props,t=e.actions,n=e.history,l=e.isEditMode,i=e.screenId,o=a.state.screen,r=l?"update-screen":"create-screen";a.setState({updatingScreen:!0}),t.post(r,{id:i,data:JSON.stringify(o),onResponse:function(){return a.setState({updatingScreen:!1})},onFailure:function(e){return a.setState({updateScreenError:e})},onSuccess:function(e){var l=e.payload;a.setState({screen:l.screen}),t.updateApiData({screen:l.screen}),"update-screen"===r&&n.goBack()}})}),g()(m()(a),"handleItemsChanged",function(){return a.setState({isModified:!0})}),g()(m()(a),"handleUpdateMetadata",function(e){return a.setState({screen:T()({},a.state.screen,{metadata:T()({},a.state.screen.metadata,e)})})}),g()(m()(a),"openUnsavedChangesDialog",function(){return function(){return a.setState({openUnsavedChangesDialog:!0})}}),g()(m()(a),"closeUnsavedChangesDialog",function(){return a.setState({openUnsavedChangesDialog:!1})}),a}return h()(t,e),o()(t,[{key:"componentWillUpdate",value:function(e){e.screen!==this.props.screen&&this.setScreenAsState(e)}},{key:"render",value:function(){var e=this.state,t=e.screen,a=e.skippable,n={container:{display:"flex",boxSizing:"border-box",justifyContent:"center",height:"100%"},form:{width:"780px"},flexContainer:{display:"flex",flexDirection:"row",width:"100%"},fieldLeft:{marginRight:"12px"},fieldMiddle:{marginLeft:"12px",marginRight:"12px"},fieldRight:{marginLeft:"12px"}},l=null,i=null;switch(t.type){case M.e.CHECKLIST:case M.e.LIST:case M.e.PROGRESS:case M.e.MULTI_SELECT:case M.e.SINGLE_SELECT:t.type!==M.e.MULTI_SELECT&&t.type!==M.e.SINGLE_SELECT||(l=b.a.createElement(F,{metadata:t.metadata,onUpdateMetadata:this.handleUpdateMetadata})),i=b.a.createElement(_,{metadata:t.metadata,onItemsChanged:this.handleItemsChanged,onUpdateMetadata:this.handleUpdateMetadata});break;case M.e.FORM:i=b.a.createElement(U,{metadata:t.metadata,onFieldsChanged:this.handleItemsChanged,onUpdateMetadata:this.handleUpdateMetadata});break;case M.e.TIMER:l=b.a.createElement(P,{metadata:t.metadata,onUpdateMetadata:this.handleUpdateMetadata});break;case M.e.YESNO:l=b.a.createElement(q,{metadata:t.metadata,onUpdateMetadata:this.handleUpdateMetadata});break;case M.e.MANAGEMENT:l=b.a.createElement(V,{metadata:t.metadata,onUpdateMetadata:this.handleUpdateMetadata});break;default:l=null,i=null}var o=b.a.createElement(S.Dialog,{open:this.state.openUnsavedChangesDialog},b.a.createElement(S.DialogContent,null,b.a.createElement("p",null,"You have unsaved changes. If you continue they will be lost.")),b.a.createElement(S.DialogActions,null));return b.a.createElement("div",{style:n.container},b.a.createElement("div",null,b.a.createElement(S.Card,{shadow:1,style:n.form},b.a.createElement(L.a,{leftNavIcon:"arrow_back",title:"Edit Screen",onLeftNavItemClicked:this.handleBackClick}),b.a.createElement(S.CardText,null,b.a.createElement(k.a,{label:"FLOW CONTROL"}),b.a.createElement("div",{style:{width:"100%",display:"flex",alignContent:"flex-end",marginBottom:"24px"}},b.a.createElement(S.Switch,{id:"screenSkippable",checked:a||!1,onChange:this.handleSwitchChange("skippable")},"Allow the user to skip this screen")),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Conditional expression",value:t.condition||"",onChange:this.handleInputChange.bind(this,"condition")}),b.a.createElement("div",{style:{fontSize:"12px",fontStyle:"italic",marginBottom:"12px"}},"Example: ",b.a.createElement("span",{style:{fontWeight:"bold"}},"($key = true and $key2 = false) or $key3 = 'HD'")),b.a.createElement(k.a,{label:"PROPERTIES",topSpace:!0}),b.a.createElement("div",{style:n.flexContainer},b.a.createElement(S.Textfield,{style:T()({flex:1},n.fieldLeft),floatingLabel:!0,label:"Epic ID",onChange:this.handleInputChange.bind(this,"epicId"),value:t.epicId||""}),b.a.createElement(S.Textfield,{style:T()({flex:1},n.fieldMiddle),floatingLabel:!0,label:"Story ID",onChange:this.handleInputChange.bind(this,"storyId"),value:t.storyId||""}),b.a.createElement(S.Textfield,{style:T()({flex:1},n.fieldMiddle),floatingLabel:!0,label:"Ref.",onChange:this.handleInputChange.bind(this,"refId"),value:t.refId||""}),b.a.createElement(S.Textfield,{style:T()({flex:1},n.fieldLeft),floatingLabel:!0,label:"Step",onChange:this.handleInputChange.bind(this,"step"),value:t.step||""})),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Title",required:!0,onChange:this.handleInputChange.bind(this,"title"),value:t.title||""}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Print section title",required:!0,onChange:this.handleInputChange.bind(this,"sectionTitle"),value:t.sectionTitle||""}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Action",value:t.actionText||"",onChange:this.handleInputChange.bind(this,"actionText")}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Content",rows:6,value:t.contentText||"",onChange:this.handleInputChange.bind(this,"contentText")}),l,b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Instructions",rows:6,value:t.infoText||"",onChange:this.handleInputChange.bind(this,"infoText")}),b.a.createElement(S.Textfield,{style:{width:"100%"},floatingLabel:!0,label:"Notes",rows:6,value:t.notes||"",onChange:this.handleInputChange.bind(this,"notes")}),b.a.createElement(D.a,null,b.a.createElement(S.Button,{style:T()({},n.fieldLeft),onClick:this.handleSubmitClick.bind(this,"apply"),raised:!0,ripple:!0},"Apply"),b.a.createElement(S.Button,{style:T()({},n.fieldRight),onClick:this.handleSubmitClick.bind(this,"update"),raised:!0,accent:!0,ripple:!0},"Update")))),i),o)}}]),t}(b.a.Component);K.propTypes={actions:C.a.object};var j=Object(v.hot)(Object(I.f)(Object(x.a)(K,function(e,t){return{screen:e.apiData.screen,screenId:t.match.params.screenId,scriptId:t.match.params.scriptId}}))),G=a(52);a.d(t,"ScreenEditor",function(){return W});var W=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=d()(this,(e=s()(t)).call.apply(e,[this].concat(i))),g()(m()(a),"state",{}),a}return h()(t,e),o()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.screenId,n=t.actions;a&&"new"!==a&&(this.setState({loadingScreen:!0}),n.get("get-screen",{id:a,onResponse:function(){return e.setState({loadingScreen:!1})},onFailure:function(t){return e.setState({loadScreenError:t})},onSuccess:function(t){var a=t.payload;e.setState({screen:a.screen}),n.updateApiData({screen:a.screen})}}))}},{key:"componentWillUnmount",value:function(){this.props.actions.updateApiData({screen:null})}},{key:"render",value:function(){return this.state.loadingScreens?b.a.createElement(G.a,{className:"ui__flex ui__justifyContent_center"}):b.a.createElement(j,this.props)}}]),t}(b.a.Component);W.propTypes={actions:C.a.object,screenId:C.a.string.isRequired,isEditMode:C.a.bool.isRequired};t.default=Object(v.hot)(Object(I.f)(Object(x.a)(W,function(e,t){return{screen:e.apiData.screen,screenId:t.match.params.screenId,scriptId:t.match.params.scriptId,isEditMode:!!e.apiData.screen}})))}}]);